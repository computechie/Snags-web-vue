"use strict";(self["webpackChunkSnags"]=self["webpackChunkSnags"]||[]).push([[544],{3544:function(e,s,t){t.r(s),t.d(s,{default:function(){return Rs}});var i=t(6768),a=t(4232);const l={style:{display:"none"},class:"flex justify-content-between"},o={class:"p-input-icon-left",id:"searchBox"},r=(0,i.Lk)("i",{class:"pi pi-search"},null,-1),d={class:"row"},n={class:"col-md-4"},c=(0,i.Lk)("div",{class:"col-md-8 text-end"},null,-1),h=(0,i.eW)(" Loading data. Please wait... "),m={style:{"padding-left":"16px",width:"100%"}},u={key:0,class:"pi pi-check"},U={key:1,class:"pi pi-times"},p=["data"],w=(0,i.Lk)("div",{style:{right:"20px",position:"absolute"}},[(0,i.Lk)("div",{style:{float:"right"}},"Actions")],-1),v=(0,i.Lk)("i",{class:"fa-solid fa-square fa-stack-2x"},null,-1),g=(0,i.Lk)("i",{class:"fa-stack-1x fa-solid fa-pen-to-square",style:{color:"white"}},null,-1),k=[v,g],f=(0,i.Lk)("i",{class:"fa-solid fa-square fa-stack-2x"},null,-1),y=(0,i.Lk)("i",{class:"fa-stack-1x fa-solid fa-trash-can",style:{color:"white"}},null,-1),L=[f,y],b={class:"row",style:{width:"100%"}},O=(0,i.Lk)("div",{class:"col-md-7"},"Edit user",-1),I={class:"col-md-5"},A={class:"container",id:"formContainer"},K={class:"row insertFormRow align-items-center even"},P=(0,i.Lk)("div",{class:"col-md-3"},[(0,i.Lk)("label",{for:"editUserName"},"Name")],-1),T={class:"col-md-9"},D=(0,i.eW)("This field is required"),N={class:"row insertFormRow align-items-center"},S=(0,i.Lk)("div",{class:"col-md-3"},[(0,i.Lk)("label",{for:"editUserSurname"},"Surname")],-1),V={class:"col-md-9"},C=(0,i.eW)("This field is required"),x={class:"row insertFormRow align-items-center even"},F=(0,i.Lk)("div",{class:"col-md-3"},[(0,i.Lk)("label",{for:"editUserEmail"},"Email")],-1),R={class:"col-md-9"},M=(0,i.eW)("This field is required"),E={class:"row insertFormRow align-items-center"},_=(0,i.Lk)("div",{class:"col-md-3"},[(0,i.Lk)("label",{for:"editUserActiveUntil"},"Active until")],-1),W={class:"col-md-9"},X=(0,i.eW)("This field is required"),Q={class:"row insertFormRow align-items-center even"},Y=(0,i.Lk)("div",{class:"col-md-3"},[(0,i.Lk)("label",{for:"editUserIsActive"},"Active")],-1),q={class:"col-md-9"},H=(0,i.eW)("This field is required"),$={class:"row insertFormRow align-items-center"},B=(0,i.Lk)("div",{class:"col-md-3"},[(0,i.Lk)("label",{for:"editUserType"},"User type")],-1),z={class:"col-md-9"},j=(0,i.eW)("This field is required"),Z={class:"row insertFormRow align-items-center even"},J=(0,i.Lk)("div",{class:"col-md-3"},[(0,i.Lk)("label",{for:"editUserLanguage"},"Language")],-1),G={class:"col-md-9"},ee=(0,i.eW)("This field is required"),se={class:"row insertFormRow align-items-center"},te={class:"col-md-6 text-left"},ie={class:"col-md-6 text-end"},ae=(0,i.eW)(" Add user "),le={class:"container",id:"formContainer"},oe={class:"row insertFormRow align-items-center even"},re=(0,i.Lk)("div",{class:"col-md-3"},[(0,i.Lk)("label",{for:"newUserName"},"Name")],-1),de={class:"col-md-9"},ne=(0,i.eW)("This field is required"),ce={class:"row insertFormRow align-items-center"},he=(0,i.Lk)("div",{class:"col-md-3"},[(0,i.Lk)("label",{for:"newUserSurname"},"Surname")],-1),me={class:"col-md-9"},ue=(0,i.eW)("This field is required"),Ue={class:"row insertFormRow align-items-center even"},pe=(0,i.Lk)("div",{class:"col-md-3"},[(0,i.Lk)("label",{for:"newUserEmail"},"Email")],-1),we={class:"col-md-9"},ve=(0,i.eW)("This field is required"),ge=(0,i.eW)("Email is not valid"),ke={class:"row insertFormRow align-items-center"},fe=(0,i.Lk)("div",{class:"col-md-3"},[(0,i.Lk)("label",{for:"newUserPassword"},"Password")],-1),ye={class:"col-md-9"},Le=(0,i.eW)("This field is required"),be=(0,i.eW)("Passwords do NOT match!"),Oe={class:"row insertFormRow align-items-center even"},Ie=(0,i.Lk)("div",{class:"col-md-3"},[(0,i.Lk)("label",{for:"newUserPasswordRepeat"},"Repeat password")],-1),Ae={class:"col-md-9"},Ke=(0,i.eW)("This field is required"),Pe=(0,i.eW)("Passwords do NOT match!"),Te={class:"row insertFormRow align-items-center"},De=(0,i.Lk)("div",{class:"col-md-3"},[(0,i.Lk)("label",{for:"newUserActiveUntil"},"Active until")],-1),Ne={class:"col-md-9"},Se=(0,i.eW)("This field is required"),Ve={class:"row insertFormRow align-items-center even"},Ce=(0,i.Lk)("div",{class:"col-md-3"},[(0,i.Lk)("label",{for:"newUserIsActive"},"Active")],-1),xe={class:"col-md-9"},Fe=(0,i.eW)("This field is required"),Re={class:"row insertFormRow align-items-center"},Me=(0,i.Lk)("div",{class:"col-md-3"},[(0,i.Lk)("label",{for:"newUserType"},"User type")],-1),Ee={class:"col-md-9"},_e=(0,i.eW)("This field is required"),We={class:"row insertFormRow align-items-center even"},Xe=(0,i.Lk)("div",{class:"col-md-3"},[(0,i.Lk)("label",{for:"newUserLanguage"},"Language")],-1),Qe={class:"col-md-9"},Ye=(0,i.eW)("This field is required"),qe={class:"row insertFormRow align-items-center"},He={class:"col-md-6 text-left"},$e={class:"col-md-6 text-end"},Be=(0,i.Lk)("span",{class:"font-bold text-2xl block mb-2 mt-4"},null,-1),ze={class:"mb-0"},je={class:"flex text-end gap-2 mt-4"},Ze=(0,i.Lk)("h4",null,"Please confirm",-1),Je=(0,i.Lk)("span",{class:"font-bold text-2xl block mb-2 mt-4"},null,-1),Ge={class:"mb-0"},es=(0,i.eW)(" Are you sure that you want to delete user "),ss=(0,i.eW)("? "),ts={class:"row",style:{"margin-top":"30px"}},is={class:"col-md-6 text-start"},as={class:"col-md-6 text-end"},ls=(0,i.Lk)("h4",null,"Please Enter new password",-1),os={class:"row insertFormRow align-items-center"},rs=(0,i.Lk)("div",{class:"col-md-3"},[(0,i.Lk)("label",{for:"editUserPassword"},"Password")],-1),ds={class:"col-md-9"},ns=(0,i.eW)("This field is required"),cs=(0,i.eW)("Passwords do NOT match!"),hs={class:"row insertFormRow align-items-center even"},ms=(0,i.Lk)("div",{class:"col-md-3"},[(0,i.Lk)("label",{for:"editUserPasswordRepeat"},"Repeat password")],-1),us={class:"col-md-9"},Us=(0,i.eW)("This field is required"),ps=(0,i.eW)("Passwords do NOT match!"),ws={class:"row",style:{"margin-top":"30px"}},vs={class:"col-md-6 text-start"},gs={class:"col-md-6 text-end"};function ks(e,s,t,v,g,f){const y=(0,i.g2)("base-spinner"),ks=(0,i.g2)("base-dialog"),fs=(0,i.g2)("InputText"),ys=(0,i.g2)("Button"),Ls=(0,i.g2)("Dropdown"),bs=(0,i.g2)("Column"),Os=(0,i.g2)("DataTable"),Is=(0,i.g2)("InlineMessage"),As=(0,i.g2)("Calendar"),Ks=(0,i.g2)("Dialog"),Ps=(0,i.gN)("tooltip");return(0,i.uX)(),(0,i.CE)(i.FK,null,[(0,i.bF)(ks,{show:g.isLoading,title:"Authenticating...",fixed:""},{default:(0,i.k6)((()=>[(0,i.bF)(y)])),_:1},8,["show"]),(0,i.Lk)("div",null,[(0,i.bF)(Os,{id:g.dataTable,value:g.allUsers,paginator:!0,rows:25,dataKey:"id",stripedRows:"",filters:g.filters,"onUpdate:filters":s[3]||(s[3]=e=>g.filters=e),filterDisplay:"menu",key:"key",paginatorTemplate:"CurrentPageReport FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink RowsPerPageDropdown",paginatorStart:"CurrentPageReport",rowsPerPageOptions:[25,50,100],responsiveLayout:"scroll",currentPageReportTemplate:"Showing {first} to {last} of total {totalRecords} users",globalFilterFields:["name","surname","email","type"],selectionMode:"single",onRowSelect:f.onRowSelect,onRowClick:f.onRowClick,loading:g.isLoading,scrollable:""},{header:(0,i.k6)((()=>[(0,i.Lk)("div",l,[(0,i.Lk)("span",o,[r,(0,i.bF)(fs,{modelValue:g.filters["global"].value,"onUpdate:modelValue":s[0]||(s[0]=e=>g.filters["global"].value=e),placeholder:"Keyword Search"},null,8,["modelValue"])])]),(0,i.Lk)("div",d,[(0,i.Lk)("div",n,[(0,i.bo)((0,i.bF)(ys,{style:{"min-width":"120px"},type:"button",icon:"pi pi-pencil",class:"p-button-text",id:"newTripButton",onClick:f.addUser,label:"Add user"},null,8,["onClick"]),[[Ps,{value:"Add user",showDelay:1e3,hideDelay:300},void 0,{bottom:!0}]])]),c])])),empty:(0,i.k6)((()=>[])),loading:(0,i.k6)((()=>[h])),paginatorstart:(0,i.k6)((()=>[])),paginatorend:(0,i.k6)((()=>[])),default:(0,i.k6)((()=>[(0,i.bF)(bs,{field:"isActive",header:"Active",sortable:!0,dataType:"boolean",style:{"max-width":"100px"},bodyStyle:"width:40px"},{body:(0,i.k6)((({data:e})=>[(0,i.Lk)("div",m,["Active"==e.isActive?((0,i.uX)(),(0,i.CE)("i",u)):(0,i.Q3)("",!0),"Not active"==e.isActive?((0,i.uX)(),(0,i.CE)("i",U)):(0,i.Q3)("",!0)]),(0,i.Lk)("span",{style:{display:"none"},class:"hiddenFields",data:e.id},null,8,p)])),filter:(0,i.k6)((({filterModel:e})=>[(0,i.bF)(Ls,{options:["Active","Not active"],modelValue:e.value,"onUpdate:modelValue":s=>e.value=s,class:"p-column-filter",placeholder:"Active "},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),(0,i.bF)(bs,{field:"name",header:"Name",sortable:!0,bodyStyle:"text-align: left",style:{"max-width":"250px"}},{filter:(0,i.k6)((({filterModel:e})=>[(0,i.bF)(fs,{type:"text",modelValue:e.value,"onUpdate:modelValue":s=>e.value=s,class:"p-column-filter",placeholder:"Name"},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),(0,i.bF)(bs,{field:"surname",header:"Surname",sortable:!0,bodyStyle:"text-align: left",style:{"max-width":"250px"}},{filter:(0,i.k6)((({filterModel:e})=>[(0,i.bF)(fs,{type:"text",modelValue:e.value,"onUpdate:modelValue":s=>e.value=s,class:"p-column-filter",placeholder:"Surname"},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),(0,i.bF)(bs,{field:"email",header:"Email",sortable:!0,bodyStyle:"text-align: left",style:{"max-width":"250px"}},{filter:(0,i.k6)((({filterModel:e})=>[(0,i.bF)(fs,{type:"text",modelValue:e.value,"onUpdate:modelValue":s=>e.value=s,class:"p-column-filter",placeholder:"Email"},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),(0,i.bF)(bs,{field:"type",header:"User Type",dataType:"boolean",sortable:!0,bodyStyle:"text-align: left",style:{"max-width":"250px"}},{filter:(0,i.k6)((({filterModel:e})=>[(0,i.bF)(Ls,{options:["Admin","User"],modelValue:e.value,"onUpdate:modelValue":s=>e.value=s,class:"p-column-filter",placeholder:"Type"},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),(0,i.bF)(bs),"ADMIN"==g.userType?((0,i.uX)(),(0,i.Wv)(bs,{key:0,style:{"text-align":"right"},class:"actionsColumns"},{header:(0,i.k6)((()=>[w])),body:(0,i.k6)((()=>[(0,i.bo)(((0,i.uX)(),(0,i.CE)("div",{class:"fa-stack fa-2x actionIcons",style:{"font-size":"15px"},onClick:s[1]||(s[1]=(...e)=>f.editClick&&f.editClick(...e))},k)),[[Ps,{value:"Edit user",showDelay:1e3,hideDelay:300},void 0,{bottom:!0}]]),(0,i.bo)(((0,i.uX)(),(0,i.CE)("div",{class:"fa-stack fa-2x actionIcons",style:{"font-size":"15px",color:"#aa0000"},onClick:s[2]||(s[2]=(...e)=>f.deleteClick&&f.deleteClick(...e))},L)),[[Ps,{value:"Delete user",showDelay:1e3,hideDelay:300},void 0,{left:!0}]])])),_:1})):(0,i.Q3)("",!0)])),_:1},8,["id","value","filters","onRowSelect","onRowClick","loading"])]),(0,i.bF)(Ks,{"onUpdate:visible":[f.handleClose,s[15]||(s[15]=e=>g.editUserDialog=e)],visible:g.editUserDialog,modal:"",style:{width:"50rem"},breakpoints:{"1199px":"75vw","575px":"90vw"}},{header:(0,i.k6)((()=>[(0,i.Lk)("div",b,[O,(0,i.Lk)("div",I,[(0,i.bo)((0,i.bF)(ys,{icon:"pi pi-lock",onClick:f.displayPasswordChange,class:"downloadImageButton",label:"Change password"},null,8,["onClick"]),[[Ps,"Change password",void 0,{bottom:!0}]])])])])),default:(0,i.k6)((()=>[(0,i.Lk)("div",A,[(0,i.Lk)("div",K,[P,(0,i.Lk)("div",T,[(0,i.bF)(fs,{onInput:s[4]||(s[4]=e=>g.editUserNameOK=!0),id:"editUserName",modelValue:g.editUserName,"onUpdate:modelValue":s[5]||(s[5]=e=>g.editUserName=e)},null,8,["modelValue"]),g.editUserNameOK?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.Wv)(Is,{key:0},{default:(0,i.k6)((()=>[D])),_:1}))])]),(0,i.Lk)("div",N,[S,(0,i.Lk)("div",V,[(0,i.bF)(fs,{onInput:s[6]||(s[6]=e=>g.editUserSurnameOK=!0),id:"editUserSurname",modelValue:g.editUserSurname,"onUpdate:modelValue":s[7]||(s[7]=e=>g.editUserSurname=e)},null,8,["modelValue"]),g.editUserSurnameOK?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.Wv)(Is,{key:0},{default:(0,i.k6)((()=>[C])),_:1}))])]),(0,i.Lk)("div",x,[F,(0,i.Lk)("div",R,[(0,i.bF)(fs,{onInput:s[8]||(s[8]=e=>g.editUserEmailOK=!0),id:"editUserEmail",modelValue:g.editUserEmail,"onUpdate:modelValue":s[9]||(s[9]=e=>g.editUserEmail=e)},null,8,["modelValue"]),g.editUserEmailOK?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.Wv)(Is,{key:0},{default:(0,i.k6)((()=>[M])),_:1}))])]),(0,i.Lk)("div",E,[_,(0,i.Lk)("div",W,[(0,i.bF)(As,{hourFormat:"24",value:g.editUserActiveUntil,modelValue:g.editUserActiveUntil,"onUpdate:modelValue":s[10]||(s[10]=e=>g.editUserActiveUntil=e),onChange:s[11]||(s[11]=s=>e.changeDate("from")),style:{"margin-left":"0"},id:"editUserActiveUntil",class:"dateDisplayInput",showIcon:"",dateFormat:"dd/mm/yy",placeholder:"dd/mm/yy",mask:"99/99/9999"},null,8,["value","modelValue"]),g.editUserActiveUntilOK?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.Wv)(Is,{key:0},{default:(0,i.k6)((()=>[X])),_:1}))])]),(0,i.Lk)("div",Q,[Y,(0,i.Lk)("div",q,[(0,i.bF)(Ls,{modelValue:g.editUserIsActive2,"onUpdate:modelValue":s[12]||(s[12]=e=>g.editUserIsActive2=e),options:g.activeOptions,placeholder:"Please select"},null,8,["modelValue","options"]),g.editUserIsActive2OK?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.Wv)(Is,{key:0},{default:(0,i.k6)((()=>[H])),_:1}))])]),(0,i.Lk)("div",$,[B,(0,i.Lk)("div",z,[(0,i.bF)(Ls,{modelValue:g.editUserType,"onUpdate:modelValue":s[13]||(s[13]=e=>g.editUserType=e),options:g.userTypeOptions,placeholder:"Please select"},null,8,["modelValue","options"]),g.editUserTypeOK?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.Wv)(Is,{key:0},{default:(0,i.k6)((()=>[j])),_:1}))])]),(0,i.Lk)("div",Z,[J,(0,i.Lk)("div",G,[(0,i.bF)(Ls,{modelValue:g.editUserLanguage,"onUpdate:modelValue":s[14]||(s[14]=e=>g.editUserLanguage=e),options:g.newUserLanguageOptions,placeholder:"Please select"},null,8,["modelValue","options"]),g.editUserLanguageOK?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.Wv)(Is,{key:0},{default:(0,i.k6)((()=>[ee])),_:1}))])]),(0,i.Lk)("div",se,[(0,i.Lk)("div",te,[(0,i.bo)((0,i.bF)(ys,{onClick:f.closeEditDialog,style:{"min-width":"120px"},icon:"pi pi-times-circle",type:"button",class:"p-button-text redButton",label:"Cancel"},null,8,["onClick"]),[[Ps,{value:"Cancel",showDelay:1e3,hideDelay:300},void 0,{bottom:!0}]])]),(0,i.Lk)("div",ie,[(0,i.bo)((0,i.bF)(ys,{style:{"min-width":"120px"},type:"button",icon:"pi pi-pencil",class:"p-button-text",onClick:f.editUser,label:"Save changes"},null,8,["onClick"]),[[Ps,{value:"Save changes",showDelay:1e3,hideDelay:300},void 0,{bottom:!0}]])])])])])),_:1},8,["onUpdate:visible","visible"]),(0,i.bF)(Ks,{"onUpdate:visible":[f.handleClose,s[31]||(s[31]=e=>g.newUserDialog=e)],visible:g.newUserDialog,modal:"",style:{width:"50rem"},breakpoints:{"1199px":"75vw","575px":"90vw"}},{header:(0,i.k6)((()=>[ae])),default:(0,i.k6)((()=>[(0,i.Lk)("div",le,[(0,i.Lk)("div",oe,[re,(0,i.Lk)("div",de,[(0,i.bF)(fs,{onInput:s[16]||(s[16]=e=>g.newUserNameOK=!0),id:"newUserName",modelValue:g.newUserName,"onUpdate:modelValue":s[17]||(s[17]=e=>g.newUserName=e)},null,8,["modelValue"]),g.newUserNameOK?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.Wv)(Is,{key:0},{default:(0,i.k6)((()=>[ne])),_:1}))])]),(0,i.Lk)("div",ce,[he,(0,i.Lk)("div",me,[(0,i.bF)(fs,{onInput:s[18]||(s[18]=e=>g.newUserSurnameOK=!0),id:"newUserSurname",modelValue:g.newUserSurname,"onUpdate:modelValue":s[19]||(s[19]=e=>g.newUserSurname=e)},null,8,["modelValue"]),g.newUserSurnameOK?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.Wv)(Is,{key:0},{default:(0,i.k6)((()=>[ue])),_:1}))])]),(0,i.Lk)("div",Ue,[pe,(0,i.Lk)("div",we,[(0,i.bF)(fs,{onInput:s[20]||(s[20]=e=>g.newUserEmailOK=!0),id:"newUserEmail",modelValue:g.newUserEmail,"onUpdate:modelValue":s[21]||(s[21]=e=>g.newUserEmail=e),pattern:"[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}$"},null,8,["modelValue"]),g.newUserEmailOK?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.Wv)(Is,{key:0},{default:(0,i.k6)((()=>[ve])),_:1})),g.emailIsValid?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.Wv)(Is,{key:1},{default:(0,i.k6)((()=>[ge])),_:1}))])]),(0,i.Lk)("div",ke,[fe,(0,i.Lk)("div",ye,[(0,i.bF)(fs,{type:"password",onInput:s[22]||(s[22]=e=>g.newUserPasswordOK=!0),id:"newUserPassword",modelValue:g.newUserPassword,"onUpdate:modelValue":s[23]||(s[23]=e=>g.newUserPassword=e)},null,8,["modelValue"]),g.newUserPasswordOK?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.Wv)(Is,{key:0},{default:(0,i.k6)((()=>[Le])),_:1})),g.newUserPasswordsNotMatchOK?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.Wv)(Is,{key:1},{default:(0,i.k6)((()=>[be])),_:1}))])]),(0,i.Lk)("div",Oe,[Ie,(0,i.Lk)("div",Ae,[(0,i.bF)(fs,{type:"password",onInput:s[24]||(s[24]=e=>g.newUserPasswordRepeatOK=!0),id:"newUserPasswordRepeat",modelValue:g.newUserPasswordRepeat,"onUpdate:modelValue":s[25]||(s[25]=e=>g.newUserPasswordRepeat=e)},null,8,["modelValue"]),g.newUserPasswordRepeatOK?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.Wv)(Is,{key:0},{default:(0,i.k6)((()=>[Ke])),_:1})),g.newUserPasswordsNotMatchOK?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.Wv)(Is,{key:1},{default:(0,i.k6)((()=>[Pe])),_:1}))])]),(0,i.Lk)("div",Te,[De,(0,i.Lk)("div",Ne,[(0,i.bF)(As,{hourFormat:"24",value:g.newUserActiveUntil,modelValue:g.newUserActiveUntil,"onUpdate:modelValue":s[26]||(s[26]=e=>g.newUserActiveUntil=e),onChange:s[27]||(s[27]=s=>e.changeDate("from")),style:{"margin-left":"0"},id:"newUserActiveUntil",class:"dateDisplayInput",showIcon:"",dateFormat:"dd/mm/yy",placeholder:"dd/mm/yy",mask:"99/99/9999"},null,8,["value","modelValue"]),g.newUserActiveUntilOK?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.Wv)(Is,{key:0},{default:(0,i.k6)((()=>[Se])),_:1}))])]),(0,i.Lk)("div",Ve,[Ce,(0,i.Lk)("div",xe,[(0,i.bF)(Ls,{modelValue:g.newUserIsActive,"onUpdate:modelValue":s[28]||(s[28]=e=>g.newUserIsActive=e),options:g.activeOptions,placeholder:"Please select"},null,8,["modelValue","options"]),g.newUserIsActiveOK?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.Wv)(Is,{key:0},{default:(0,i.k6)((()=>[Fe])),_:1}))])]),(0,i.Lk)("div",Re,[Me,(0,i.Lk)("div",Ee,[(0,i.bF)(Ls,{modelValue:g.newUserType,"onUpdate:modelValue":s[29]||(s[29]=e=>g.newUserType=e),options:g.userTypeOptions,placeholder:"Please select"},null,8,["modelValue","options"]),g.newUserTypeOK?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.Wv)(Is,{key:0},{default:(0,i.k6)((()=>[_e])),_:1}))])]),(0,i.Lk)("div",We,[Xe,(0,i.Lk)("div",Qe,[(0,i.bF)(Ls,{modelValue:g.newUserLanguage,"onUpdate:modelValue":s[30]||(s[30]=e=>g.newUserLanguage=e),options:g.newUserLanguageOptions,placeholder:"Please select"},null,8,["modelValue","options"]),g.newUserLanguageOK?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.Wv)(Is,{key:0},{default:(0,i.k6)((()=>[Ye])),_:1}))])]),(0,i.Lk)("div",qe,[(0,i.Lk)("div",He,[(0,i.bo)((0,i.bF)(ys,{onClick:f.closeNewDialog,style:{"min-width":"120px"},icon:"pi pi-times-circle",type:"button",class:"p-button-text redButton",label:"Cancel"},null,8,["onClick"]),[[Ps,{value:"Cancel",showDelay:1e3,hideDelay:300},void 0,{bottom:!0}]])]),(0,i.Lk)("div",$e,[(0,i.bo)((0,i.bF)(ys,{style:{"min-width":"120px"},type:"button",icon:"pi pi-pencil",class:"p-button-text",onClick:f.newUser,label:"Add user"},null,8,["onClick"]),[[Ps,{value:"Save changes",showDelay:1e3,hideDelay:300},void 0,{bottom:!0}]])])])])])),_:1},8,["onUpdate:visible","visible"]),(0,i.bF)(Ks,{visible:g.displayInfoDialog,"onUpdate:visible":s[32]||(s[32]=e=>g.displayInfoDialog=e),modal:"",style:(0,a.Tr)(g.infoDialogStyle),breakpoints:{"1199px":"75vw","575px":"90vw"}},{header:(0,i.k6)((()=>[(0,i.Lk)("h4",null,(0,a.v_)(g.InfoModalHeader),1)])),default:(0,i.k6)((()=>[Be,(0,i.Lk)("p",ze,(0,a.v_)(g.InfoModalMessage),1),(0,i.Lk)("div",je,[(0,i.bF)(ys,{label:"Ok",onClick:f.closeInfo},null,8,["onClick"])])])),_:1},8,["visible","style"]),(0,i.bF)(Ks,{visible:g.displayDeleteConfirm,"onUpdate:visible":s[34]||(s[34]=e=>g.displayDeleteConfirm=e),modal:"",style:{width:"30rem"},breakpoints:{"1199px":"75vw","575px":"90vw"}},{header:(0,i.k6)((()=>[Ze])),default:(0,i.k6)((()=>[Je,(0,i.Lk)("p",Ge,[es,(0,i.Lk)("strong",null,"'"+(0,a.v_)(g.editUserName)+" "+(0,a.v_)(g.editUserSurname)+"' ",1),ss]),(0,i.Lk)("div",ts,[(0,i.Lk)("div",is,[(0,i.bF)(ys,{class:"redButton",label:"Cancel",onClick:s[33]||(s[33]=e=>g.displayDeleteConfirm=!1)})]),(0,i.Lk)("div",as,[(0,i.bF)(ys,{label:"Yes, delete",onClick:f.deleteUser},null,8,["onClick"])])])])),_:1},8,["visible"]),(0,i.bF)(Ks,{visible:g.newPasswordDialogVisible,"onUpdate:visible":s[40]||(s[40]=e=>g.newPasswordDialogVisible=e),modal:"",style:{width:"40rem"},breakpoints:{"1199px":"75vw","575px":"90vw"}},{header:(0,i.k6)((()=>[ls])),default:(0,i.k6)((()=>[(0,i.Lk)("div",os,[rs,(0,i.Lk)("div",ds,[(0,i.bF)(fs,{type:"password",onInput:s[35]||(s[35]=e=>{g.newUserPasswordOK=!0,g.editUserPasswordsNotMatchOK=!0}),id:"editUserPassword",modelValue:g.editUserPassword,"onUpdate:modelValue":s[36]||(s[36]=e=>g.editUserPassword=e)},null,8,["modelValue"]),g.editUserPasswordOK?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.Wv)(Is,{key:0},{default:(0,i.k6)((()=>[ns])),_:1})),g.editUserPasswordsNotMatchOK?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.Wv)(Is,{key:1},{default:(0,i.k6)((()=>[cs])),_:1}))])]),(0,i.Lk)("div",hs,[ms,(0,i.Lk)("div",us,[(0,i.bF)(fs,{type:"password",onInput:s[37]||(s[37]=e=>{g.newUserPasswordRepeatOK=!0,g.editUserPasswordsNotMatchOK=!0}),id:"editUserPasswordRepeat",modelValue:g.editUserPasswordRepeat,"onUpdate:modelValue":s[38]||(s[38]=e=>g.editUserPasswordRepeat=e)},null,8,["modelValue"]),g.editUserPasswordRepeatOK?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.Wv)(Is,{key:0},{default:(0,i.k6)((()=>[Us])),_:1})),g.editUserPasswordsNotMatchOK?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.Wv)(Is,{key:1},{default:(0,i.k6)((()=>[ps])),_:1}))])]),(0,i.Lk)("div",ws,[(0,i.Lk)("div",vs,[(0,i.bF)(ys,{class:"redButton",label:"Cancel",onClick:s[39]||(s[39]=e=>g.newPasswordDialogVisible=!1)})]),(0,i.Lk)("div",gs,[(0,i.bF)(ys,{label:"Change password",onClick:f.changePassword},null,8,["onClick"])])])])),_:1},8,["visible"])],64)}var fs=t(3185),ys=t(9224),Ls=t(2161),bs=t(6711),Os=t(5171),Is=t(7487),As=t(1393),Ks=t(9641),Ps=t(8355),Ts=t(6587),Ds=t.n(Ts),Ns=t(4369),Ss=t(9148),Vs=t.n(Ss),Cs={props:["systemId"],components:{DataTable:fs.A,Column:ys.A,InputText:Ls.A,Button:Os.A,Dialog:Is.A,InlineMessage:As.A,Calendar:bs.A,Dropdown:Ks.A},emits:["extend-session"],data(){return{newPasswordDialogVisible:!1,editUserPasswordsNotMatchOK:!0,emailIsValid:!0,displayDeleteConfirm:!1,displayInfoDialog:!1,InfoModalHeader:"",InfoModalMessage:"",infoDialogStyle:[{width:"20rem"}],dataTable:"dataTable",editUserDialog:!1,newUserDialog:!1,userType:"",activeOptions:["Yes","No"],userTypeOptions:["Admin","User"],newUserLanguageOptions:["Lietuvių","English"],isLoading:!1,tableHeight:"calc( 100vh - 215px)",allUsers:[],newUserName:"",newUserSurname:"",newUserEmail:"",newUserPassword:"",newUserPasswordRepeat:"",newUserIsActive:"",newUserLanguage:"",newUserActiveUntil:"",newUserType:"",newUserNameOK:!0,newUserSurnameOK:!0,newUserEmailOK:!0,newUserPasswordOK:!0,newUserPasswordRepeatOK:!0,newUserIsActiveOK:!0,newUserLanguageOK:!0,newUserActiveUntilOK:!0,newUserTypeOK:!0,newUserPasswordsNotMatchOK:!0,editUserName:"",editUserSurname:"",editUserEmail:"",editUserPassword:"",editUserPasswordRepeat:"",editUserIsActive:"",editUserIsActive2:"",editUserLanguage:"",editUserActiveUntil:"",editUserType:"",editUserNameOK:!0,editUserSurnameOK:!0,editUserEmailOK:!0,editUserPasswordOK:!0,editUserPasswordRepeatOK:!0,editUserIsActiveOK:!0,editUserIsActive2OK:!0,editUserLanguageOK:!0,editUserActiveUntilOK:!0,editUserTypeOK:!0,ediUserPasswordsNotMatchOK:!0,filters:{global:{value:null,matchMode:Ns.Rn.CONTAINS},name:{operator:Ns.tl.AND,constraints:[{value:null,matchMode:Ns.Rn.CONTAINS}]},surname:{operator:Ns.tl.AND,constraints:[{value:null,matchMode:Ns.Rn.CONTAINS}]},email:{operator:Ns.tl.AND,constraints:[{value:null,matchMode:Ns.Rn.CONTAINS}]},isActive:{operator:Ns.tl.AND,constraints:[{value:null,matchMode:Ns.Rn.STRING}]},type:{operator:Ns.tl.AND,constraints:[{value:null,matchMode:Ns.Rn.STRING}]}},matchModes:[{label:"Starts With",value:Ns.Rn.STARTS_WITH},{label:"Contains",value:Ns.Rn.CONTAINS}]}},mounted(){this.userType=this.$store.getters.getUserType.toUpperCase(),this.getAllUsers(),this.moveSearchBoxToTop()},methods:{extendTime(){this.$emit("extend-session")},closeNewDialog(){this.newUserDialog=!1},closeEditDialog(){this.editUserDialog=!1},handleClose(e){},reorganizePagination(){Ds()(".p-paginator-current").detach().appendTo(".p-paginator-left-content"),Ds()(".p-paginator-rpp-options").detach().appendTo(".p-paginator-right-content")},moveSearchBoxToTop(){Ds()("#hereMoveSearch").empty(),Ds()("#searchBox").detach().appendTo("#hereMoveSearch")},displayPasswordChange(){this.newPasswordDialogVisible=!0,this.resetErrors()},addUser(){this.resetInputFields(),this.newUserDialog=!0},newUser(){this.resetErrors();var e=!0;""==this.newUserActiveUntil?(this.newUserActiveUntilOK=!1,e=!1):this.newUserActiveUntilOK=!0,""==this.newUserName?(this.newUserNameOK=!1,e=!1):this.newUserNameOK=!0,""==this.newUserSurname?(this.newUserSurnameOK=!1,e=!1):this.newUserSurnameOK=!0,""==this.newUserEmail?(this.newUserEmailOK=!1,e=!1):this.isEmailVaid(this.newUserEmail)?this.newUserEmailOK=!0:(this.emailIsValid=!1,e=!1),""==this.newUserPassword?(this.newUserPasswordOK=!1,e=!1):this.newUserPasswordOK=!0,""==this.newUserPasswordRepeat?(this.newUserPasswordRepeatOK=!1,e=!1):this.newUserPasswordRepeatOK=!0,""==this.newUserIsActive?(this.newUserIsActiveOK=!1,e=!1):this.newUserIsActiveOK=!0,""==this.newUserType?(this.newUserTypeOK=!1,e=!1):this.newUserTypeOK=!0,""==this.newUserLanguage?(this.newUserLanguageOK=!1,e=!1):this.newUserLanguageOK=!0,""!=this.newUserPassword&&""!=this.newUserPasswordRepeat&&this.newUserPassword!=this.newUserPasswordRepeat&&(this.newUserPasswordsNotMatchOK=!1,e=!1),1==e&&this.insertUserToDatabase()},async insertUserToDatabase(){this.isLoading=!0;const e=this.format_date(Vs()(this.newUserActiveUntil,"DD/MM/YYYY HH:mm"),"YYYY-MM-DD");var s="";s="Admin"==this.newUserType?0:1;var t="";"Lietuvių"==this.newUserLanguage?t="LT":"English"==this.newUserLanguage&&(t="EN");var i="";"Yes"==this.newUserIsActive?i=!0:"No"==this.newUserIsActive&&(i=!1);const a=this.$store.getters.token,l=localStorage.getItem("_rootRestUrl");let o=JSON.stringify({sessionId:a,usersToInsert:[{name:this.newUserName,surname:this.newUserSurname,email:this.newUserEmail,password:this.newUserPassword,language:t,activeUntil:e,isActive:i,type:s}]}),r={headers:{"Content-Type":"application/json"}};await Ps.A.post(l+"/api/v1/User/Register",o,r).then((()=>{this.getAllUsers(),this.newUserDialog=!1,this.InfoModalHeader="Info",this.InfoModalMessage="User is added",this.infoDialogStyle=[{width:"20rem"}],this.displayInfoDialog=!0,this.isLoading=!1})).catch((e=>{e.response&&(this.InfoModalHeader="Error!",this.InfoModalMessage=e.response.data,this.infoDialogStyle=[{width:"40rem"}],this.displayInfoDialog=!0,console.warn(e.response.data)),this.isLoading=!1})),this.$store.dispatch("autoLogin"),this.extendTime()},editUser(){this.resetErrors();var e=!0;""==this.editUserActiveUntil||null==this.editUserActiveUntil?(this.editUserActiveUntilOK=!1,e=!1):this.editUserActiveUntilOK=!0,""==this.editUserName?(this.editUserNameOK=!1,e=!1):this.editUserNameOK=!0,""==this.editUserSurname?(this.editUserSurnameOK=!1,e=!1):this.editUserSurnameOK=!0,""==this.editUserEmail?(this.editUserEmailOK=!1,e=!1):this.isEmailVaid(this.editUserEmail)?this.editUserEmailOK=!0:(this.emailIsValid=!1,e=!1),""==this.editUserIsActive2?(this.editUserIsActive2OK=!1,e=!1):this.editUserIsActive2OK=!0,""==this.editUserType?(this.editUserTypeOK=!1,e=!1):this.editUserTypeOK=!0,""==this.editUserLanguage?(this.editUserLanguageOK=!1,e=!1):this.editUserLanguageOK=!0,""!=this.editUserPassword&&""!=this.editUserPasswordRepeat&&this.editUserPassword!=this.editUserPasswordRepeat&&(this.editUserPasswordsNotMatchOK=!1,e=!1),1==e&&this.UpdateUserInDatabase()},async UpdateUserInDatabase(){this.isLoading=!0;const e=this.format_date(Vs()(this.editUserActiveUntil,"DD/MM/YYYY"),"YYYY-MM-DD");var s="";s="Admin"==this.editUserType?0:1;var t="";"Lietuvių"==this.editUserLanguage?t="LT":"English"==this.editUserLanguage&&(t="EN");var i="";"Yes"==this.editUserIsActive2?i=!0:"No"==this.editUserIsActive2&&(i=!1);const a=this.$store.getters.token,l=localStorage.getItem("_rootRestUrl");let o=JSON.stringify({sessionId:a,user:{userKey:this.ClickedRowId,name:this.editUserName,surname:this.editUserSurname,email:this.editUserEmail,language:t,activeUntil:e,isActive:i,type:s}}),r={headers:{"Content-Type":"application/json"}};await Ps.A.post(l+"/api/v1/User/EditUser",o,r).then((()=>{this.getAllUsers(),this.editUserDialog=!1,this.InfoModalHeader="Info",this.InfoModalMessage="Changes are saved",this.infoDialogStyle=[{width:"20rem"}],this.displayInfoDialog=!0,this.isLoading=!1})).catch((e=>{e.response&&(this.InfoModalHeader="Error!",this.InfoModalMessage=e.response.data,this.infoDialogStyle=[{width:"40rem"}],this.displayInfoDialog=!0,console.warn(e.response.data)),this.isLoading=!1})),this.$store.dispatch("autoLogin"),this.extendTime()},deleteClick(){this.displayDeleteConfirm=!0},async deleteUser(){this.isLoading=!0;const e=this.$store.getters.token,s=localStorage.getItem("_rootRestUrl");let t=JSON.stringify({sessionId:e,email:this.editUserEmail}),i={headers:{"Content-Type":"application/json"}};await Ps.A.post(s+"/api/v1/User/DeleteUser",t,i).then((()=>{this.getAllUsers(),this.displayDeleteConfirm=!1,this.displayInfoDialog=!0,this.InfoModalHeader="Info",this.InfoModalMessage="User is deleted",this.isLoading=!1})).catch((e=>{this.displayDeleteConfirm=!1,e.response&&(this.InfoModalHeader="Error!",this.InfoModalMessage=e.response.data,this.infoDialogStyle=[{width:"40rem"}],this.displayInfoDialog=!0,console.warn(e.response.data)),this.isLoading=!1})),this.$store.dispatch("autoLogin"),this.extendTime()},format_date_to_full(e,s){var t=e.substring(6,10),i=e.substring(3,5),a=e.substring(0,2);return t+"-"+i+"-"+a+" "+s},resetErrors(){this.emailIsValid=!0,this.newUserNameOK=!0,this.newUserSurnameOK=!0,this.newUserEmailOK=!0,this.newUserPasswordOK=!0,this.newUserIsActiveOK=!0,this.newUserLanguageOK=!0,this.newUserActiveUntilsOK=!0,this.newUserTypeOK=!0,this.newUserPasswordsNotMatchOK=!0,this.editUserNameOK=!0,this.editUserSurnameOK=!0,this.editUserEmailOK=!0,this.editUserPasswordOK=!0,this.editUserIsActiveOK=!0,this.editUserLanguageOK=!0,this.editUserActiveUntilsOK=!0,this.editUserTypeOK=!0,this.ediUserPasswordsNotMatchOK=!0,this.editUserPasswordsNotMatchOK=!0},resetInputFields(){this.newUserName="",this.newUserSurname="",this.newUserEmail="",this.newUserPassword="",this.newUserIsActive="",this.newUserLanguage="",this.newUserActiveUntil="",this.newUserType="",this.editUserName="",this.editUserSurname="",this.editUserEmail="",this.editUserPassword="",this.editUserIsActive="",this.editUserLanguage="",this.editUserActiveUntil="",this.editUserType="",this.editUserNameOK=!0,this.editUserSurnameOK=!0,this.editUserEmailOK=!0,this.editUserPasswordOK=!0,this.editUserIsActiveOK=!0,this.editUserLanguageOK=!0,this.editUserActiveUntilsOK=!0,this.editUserTypeOK=!0,this.ediUserPasswordsNotMatchOK=!0},editClick(){this.editUserDialog=!0},onRowClick(e){this.ClickedRowId=e.data.id,this.editUserName=e.data.name,this.editUserSurname=e.data.surname,this.editUserEmail=e.data.email,this.editUserType=e.data.type,this.editUserLanguage=e.data.language,this.editUserIsActive=e.data.isActive,this.editUserIsActive2=e.data.isActive2,this.editUserActiveUntil=e.data.activeUntil,Ds()(".hiddenFields").each((function(){Ds()(this).closest("tr").removeClass("highlight")})),Ds()(".hiddenFields").each((function(){Ds()(this).attr("data")==e.data.id&&Ds()(this).closest("tr").addClass("highlight")}))},onRowSelect(e){console.log(e)},async getAllUsers(){this.isLoading=!0;const e=this.$store.getters.token,s=localStorage.getItem("_rootRestUrl");let t=JSON.stringify({sessionId:e}),i={headers:{"Content-Type":"application/json"}};await Ps.A.get(s+"/api/v1/User/Users/?sessionId="+e,t,i).then((e=>{this.allUsers=e.data,this.correctData(),this.reorganizePagination(),this.isLoading=!1})).catch((function(e){e.response&&"401"==e.response.status&&(localStorage.removeItem("token"),localStorage.removeItem("userId"),localStorage.removeItem("userFullname"),localStorage.removeItem("userType"),localStorage.removeItem("tokenExpiration"),localStorage.removeItem("expiresIn"),document.location="/"),console.table(e)})),this.$store.dispatch("autoLogin"),this.extendTime(),this.isLoading=!1},format_date(e,s){if(e)return Vs()(String(e)).format(s)},closeInfo(){this.displayInfoDialog=!1},changePassword(){this.resetErrors();var e=!0;""==this.editUserPassword?(this.editUserPasswordOK=!1,e=!1):this.editUserPasswordOK=!0,""==this.editUserPasswordRepeat?(this.editUserPasswordRepeatOK=!1,e=!1):this.editUserPasswordRepeatOK=!0,""!=this.editUserPassword&&""!=this.editUserPasswordRepeat&&this.editUserPassword!=this.editUserPasswordRepeat&&(this.editUserPasswordsNotMatchOK=!1,e=!1,alert(this.editUserPasswordsNotMatchOK)),1==e&&this.updateUserPasswordInDatabase()},async updateUserPasswordInDatabase(){this.isLoading=!0;const e=this.$store.getters.token,s=localStorage.getItem("_rootRestUrl"),t=this.editUserPassword;let i=JSON.stringify({sessionId:e,email:this.editUserEmail,password:t}),a={headers:{"Content-Type":"application/json"}};await Ps.A.post(s+"/api/v1/User/ChangePassword",i,a).then((()=>{this.getAllUsers(),this.editUserDialog=!1,this.newPasswordDialogVisible=!1,this.InfoModalHeader="Info",this.InfoModalMessage="Password is changed",this.infoDialogStyle=[{width:"20rem"}],this.displayInfoDialog=!0,this.isLoading=!1})).catch((e=>{e.response&&(this.InfoModalHeader="Error!",this.InfoModalMessage=e.response.data,this.infoDialogStyle=[{width:"40rem"}],this.displayInfoDialog=!0,console.warn(e.response.data)),this.isLoading=!1})),this.$store.dispatch("autoLogin"),this.extendTime()},isEmailVaid(e){const s=/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;return s.test(e)},correctData(){this.allUsers.forEach(((e,s)=>{const t=Object.entries(e);t.forEach((e=>{if("type"==e[0]){var t="";t=0==e[1]?"Admin":"User",this.allUsers[s]["type"]=t}if("isActive"==e[0]){var i="",a="";1==e[1]?(i="Active",a="Yes"):(i="Not active",a="No"),this.allUsers[s]["isActive"]=i,this.allUsers[s]["isActive2"]=a}if("language"==e[0]){var l="";"LT"==e[1]?l="Lietuvių":"EN"==e[1]&&(l="English"),this.allUsers[s]["language"]=l}if("activeUntil"==e[0]){var o=this.format_date(e[1],"DD/MM/YYYY");this.allUsers[s]["activeUntil"]=o}}))}))}}},xs=t(1241);const Fs=(0,xs.A)(Cs,[["render",ks]]);var Rs=Fs}}]);
//# sourceMappingURL=544.5d4d9e8c.js.map
"use strict";(self["webpackChunkSnags"]=self["webpackChunkSnags"]||[]).push([[4],{1004:function(e,t,a){a.r(t),a.d(t,{default:function(){return gn}});var i=a(6768),n=a(4232),l=a(5130);const s={class:"p-input-icon-right",id:"searchBox"},o={class:"row"},d={class:"d-none d-xl-block col-md-4"},r=(0,i.eW)("   "),c=(0,i.eW)("   "),p=(0,i.eW)("   "),h={class:"d-block d-xl-none d-col-md-4"},u=(0,i.eW)("   "),g=(0,i.eW)("   "),m=(0,i.eW)("   "),v=(0,i.Lk)("div",{class:"col-md-4 text-center"},null,-1),f={class:"col-md-4 text-end"},b=(0,i.eW)(" Loading data. Please wait... "),y={class:"closedByName"},k={class:"closedByDate"},w={style:{display:"inline-block",width:"85%","padding-right":"50px"}},D={key:0,style:{display:"block",width:"15%"}},S={key:0,src:"/images/pin.png",style:{height:"18px"}},C={key:1,src:"/images/pin.png",style:{height:"18px",visibility:"hidden"}},x=(0,i.Lk)("i",{class:"fa fa-camera"},null,-1),I={key:0,class:"statusOpen statusBlock"},F={key:1,class:"statusClosed statusBlock"},L={key:2,class:"statusActioned statusBlock"},T={key:3,class:"statusReturned statusBlock"},M={class:"closedByName"},B={class:"closedByDate"},P={class:"closedByName"},A={class:"closedByDate"},E=(0,i.Lk)("div",{style:{right:"20px",position:"absolute"}},[(0,i.Lk)("div",{style:{float:"right"}},"Actions")],-1),N={class:"actionButtonsHolderTable"},R=(0,i.Lk)("i",{class:"fa-solid fa-square fa-stack-2x"},null,-1),_=(0,i.Lk)("i",{class:"fa-stack-1x fa-solid fa-pen-to-square",style:{color:"white"}},null,-1),V=[R,_],K=(0,i.Lk)("i",{class:"fa-solid fa-square fa-stack-2x"},null,-1),O=(0,i.Lk)("i",{class:"fa-stack-1x fa-solid fa-trash-can",style:{color:"white"}},null,-1),U=[K,O],Y={key:0,class:"alert alert-danger text-center"},H=(0,i.Lk)("h4",null,"Please confirm",-1),X=(0,i.Lk)("span",{class:"font-bold text-2xl block mb-2 mt-4"},null,-1),W={class:"mb-0"},$=(0,i.eW)(" Are you sure that you want to Delete Snag "),Q=(0,i.eW)("? "),z={class:"row",style:{"margin-top":"30px"}},j={class:"col-md-6 text-start"},q={class:"col-md-6 text-end"},G=(0,i.Lk)("h4",null,"Please confirm",-1),J=(0,i.Lk)("span",{class:"font-bold text-2xl block mb-2 mt-4"},null,-1),Z={class:"mb-0"},ee=(0,i.eW)(" Are you sure that you want to remove mark 'Invoiced'"),te=(0,i.Lk)("br",null,null,-1),ae=(0,i.eW)(" for trip "),ie=(0,i.eW)("? "),ne={class:"row",style:{"margin-top":"30px"}},le={class:"col-md-6 text-start"},se={class:"col-md-6 text-end"},oe=(0,i.eW)(" Mark this trip as Invoiced "),de={class:"container",id:"formContainer"},re={class:"row insertFormRow align-items-center even"},ce=(0,i.Lk)("div",{class:"col-md-3"},[(0,i.Lk)("label",{for:"invoiceDate"},"Invoice Date *")],-1),pe={class:"col-md-9"},he=(0,i.eW)("This field is required"),ue={class:"row insertFormRow align-items-center"},ge={class:"col-md-6 text-left"},me={class:"col-md-6 text-end"},ve={key:0},fe={key:1},be=(0,i.eW)("Mark selected "),ye={style:{"font-weight":"bold"}},ke=(0,i.eW)(" as Invoiced"),we={class:"container",id:"formContainer"},De={class:"row insertFormRow align-items-center even"},Se=(0,i.Lk)("div",{class:"col-md-3"},[(0,i.Lk)("label",{for:"invoiceDate"},"Invoice Date *")],-1),Ce={class:"col-md-9"},xe=(0,i.eW)("This field is required"),Ie={class:"row insertFormRow align-items-center"},Fe={class:"col-md-6 text-left"},Le={class:"col-md-6 text-end"},Te=(0,i.Lk)("h4",null,"Please confirm",-1),Me=(0,i.Lk)("span",{class:"font-bold text-2xl block mb-2 mt-4"},null,-1),Be=(0,i.Lk)("p",{class:"mb-0"},"Are you sure that you want to delete this photo?",-1),Pe={class:"row",style:{"margin-top":"30px"}},Ae={class:"col-md-6 text-start"},Ee={class:"col-md-6 text-end"},Ne=(0,i.Lk)("h4",null,"Upload photo",-1),Re={class:"row",style:{"margin-top":"30px"}},_e={class:"col"},Ve=(0,i.Lk)("p",null,"Drag and drop files to here to upload.",-1),Ke={id:"div-context-menu",class:"cls-context-menu",style:{left:"11px",top:"13px",display:"none"}},Oe={key:0},Ue={key:1},Ye={key:2};function He(e,t,a,R,_,K){const O=(0,i.g2)("base-spinner"),He=(0,i.g2)("base-dialog"),Xe=(0,i.g2)("InputText"),We=(0,i.g2)("Button"),$e=(0,i.g2)("Calendar"),Qe=(0,i.g2)("Checkbox"),ze=(0,i.g2)("Column"),je=(0,i.g2)("Dropdown"),qe=(0,i.g2)("DataTable"),Ge=(0,i.g2)("RightSidePanel"),Je=(0,i.g2)("NewSnagDialog"),Ze=(0,i.g2)("EditSnagDialog"),et=(0,i.g2)("InfoDialog"),tt=(0,i.g2)("Dialog"),at=(0,i.g2)("InlineMessage"),it=(0,i.g2)("FileUpload"),nt=(0,i.gN)("tooltip");return(0,i.uX)(),(0,i.CE)(i.FK,null,[(0,i.bF)(He,{show:_.isLoading,title:"Authenticating...",fixed:""},{default:(0,i.k6)((()=>[(0,i.bF)(O)])),_:1},8,["show"]),(0,i.Lk)("span",s,[(0,i.bF)(Xe,{modelValue:_.searchQuery,"onUpdate:modelValue":t[0]||(t[0]=e=>_.searchQuery=e),placeholder:"Keyword Search",onChange:K.onSearch,onInput:K.onSearchInput},null,8,["modelValue","onChange","onInput"]),(0,i.Lk)("i",{class:"pi pi-search",onClick:t[1]||(t[1]=(...e)=>K.onSearch&&K.onSearch(...e))})]),(0,i.Lk)("div",{class:"dataTableHolder",style:{width:"100%"},onContextmenu:t[17]||(t[17]=e=>K.showContextMenu(e))},[(0,i.bF)(qe,{totalRecords:_.totalRecords,id:_.dataTable,value:_.allSnags,lazy:"",paginator:!0,rows:_.pageSize,first:_.first,dataKey:"id",stripedRows:"",filters:_.filters,"onUpdate:filters":t[12]||(t[12]=e=>_.filters=e),filterDisplay:"menu",key:"key",onPage:t[13]||(t[13]=e=>K.onPage(e)),onSort:t[14]||(t[14]=t=>e.onSort(t)),onFilter:t[15]||(t[15]=e=>K.onFilter(e)),onRowSelect:K.onRowSelect,onRowClick:K.onRowClick,onRowsChange:t[16]||(t[16]=t=>e.onRows(t)),paginatorTemplate:"CurrentPageReport FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink RowsPerPageDropdown",paginatorStart:"CurrentPageReport",rowsPerPageOptions:_.rowsPerPageOptions,responsiveLayout:"scroll",currentPageReportTemplate:"Showing {first} to {last} of total {totalRecords} snags",globalFilterFields:["code","title"],selectionMode:"single",loading:_.loading1,scrollable:"",scrollHeight:_.tableHeight},{header:(0,i.k6)((()=>[(0,i.Lk)("div",o,[(0,i.Lk)("div",d,[(0,i.bo)((0,i.bF)(We,{style:{"min-width":"120px"},type:"button",icon:"pi pi-pencil",class:"p-button-text",id:"newSnagButton",onClick:K.newSnag,label:"New snag"},null,8,["onClick"]),[[nt,{value:"New Snag",showDelay:1e3,hideDelay:300},void 0,{bottom:!0}]]),r,(0,i.bo)((0,i.bF)(We,{style:{"min-width":"120px"},type:"button",icon:"pi pi-download",class:"p-button-text",id:"downloadReport",onClick:K.downloadReport,label:"Download Report"},null,8,["onClick"]),[[nt,{value:"Download report",showDelay:1e3,hideDelay:300},void 0,{bottom:!0}]]),c,_.showInvoiceSelectedButton&&"ADMIN"==_.userType?(0,i.bo)(((0,i.uX)(),(0,i.Wv)(We,{key:0,style:{"min-width":"120px"},type:"button",icon:"pi pi-check-circle",class:"p-button-text",id:"invoiceSelected",onClick:K.invoiceSelected,label:"Invoice selected"},null,8,["onClick"])),[[nt,{value:"Invoice selected",showDelay:1e3,hideDelay:300},void 0,{bottom:!0}]]):(0,i.Q3)("",!0),(0,i.bo)((0,i.bF)(We,{style:{"min-width":"120px"},type:"button",icon:"pi pi-pencil",class:"p-button-text",id:"newSnagButton",onClick:t[2]||(t[2]=e=>K.getSnags("all")),label:"Load all snags"},null,512),[[nt,{value:"Load all snags",showDelay:1e3,hideDelay:300},void 0,{bottom:!0}]]),p]),(0,i.Lk)("div",h,[(0,i.bo)((0,i.bF)(We,{type:"button",icon:"pi pi-pencil",class:"p-button-text",id:"newSnagButton",onClick:K.newSnag,label:""},null,8,["onClick"]),[[nt,{value:"New Snag",showDelay:1e3,hideDelay:300},void 0,{bottom:!0}]]),u,(0,i.bo)((0,i.bF)(We,{type:"button",icon:"pi pi-download",class:"p-button-text",id:"downloadReport",onClick:K.downloadReport,label:""},null,8,["onClick"]),[[nt,{value:"Download report",showDelay:1e3,hideDelay:300},void 0,{bottom:!0}]]),g,_.showInvoiceSelectedButton&&"ADMIN"==_.userType?(0,i.bo)(((0,i.uX)(),(0,i.Wv)(We,{key:0,style:{"min-width":"120px"},type:"button",icon:"pi pi-check-circle",class:"p-button-text",id:"invoiceSelected",onClick:K.invoiceSelected,label:"Invoice selected"},null,8,["onClick"])),[[nt,{value:"Invoice selected",showDelay:1e3,hideDelay:300},void 0,{bottom:!0}]]):(0,i.Q3)("",!0),(0,i.bo)((0,i.bF)(We,{type:"button",icon:"pi pi-pencil",class:"p-button-text",id:"newSnagButton",onClick:t[3]||(t[3]=e=>K.getSnags("all")),label:""},null,512),[[nt,{value:"Load all snags",showDelay:1e3,hideDelay:300},void 0,{bottom:!0}]]),m]),v,(0,i.Lk)("div",f,[(0,i.bo)((0,i.bF)($e,{style:{width:"160px"},id:"fromDateBox",class:"dateDisplayInput",modelValue:_.fromDate,"onUpdate:modelValue":t[4]||(t[4]=e=>_.fromDate=e),showIcon:"",dateFormat:"dd/mm/yy",placeholder:"dd/mm/yy",mask:"99/99/9999",onChange:t[5]||(t[5]=t=>e.changeDate("from"))},null,8,["modelValue"]),[[nt,{value:"Date from",showDelay:1e3,hideDelay:300},void 0,{bottom:!0}]]),(0,i.bo)((0,i.bF)($e,{style:{width:"160px"},id:"toDateBox",class:"dateDisplayInput",modelValue:_.toDate,"onUpdate:modelValue":t[6]||(t[6]=e=>_.toDate=e),showIcon:"",dateFormat:"dd/mm/yy",placeholder:"dd/mm/yy",mask:"99/99/9999",onChange:t[7]||(t[7]=t=>e.changeDate("to"))},null,8,["modelValue"]),[[nt,{value:"Date to",showDelay:1e3,hideDelay:300},void 0,{bottom:!0}]]),(0,i.bF)(We,{type:"button",icon:"pi pi-refresh",class:"p-button-text",id:"refreshButton",onClick:K.refreshData},null,8,["onClick"])])])])),empty:(0,i.k6)((()=>[])),loading:(0,i.k6)((()=>[b])),paginatorstart:(0,i.k6)((()=>[])),paginatorend:(0,i.k6)((()=>[])),default:(0,i.k6)((()=>[(0,i.bF)(ze,{class:"openedColumn",field:"checked",header:"Check All"},{header:(0,i.k6)((()=>[(0,i.bF)(Qe,{modelValue:_.checkAll,"onUpdate:modelValue":t[8]||(t[8]=e=>_.checkAll=e),onChange:t[9]||(t[9]=e=>K.checkAllHandler(e)),binary:!0},null,8,["modelValue"])])),body:(0,i.k6)((({data:e})=>[(0,i.bF)(Qe,{modelValue:e.checked,"onUpdate:modelValue":t=>e.checked=t,binary:!0},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),(0,i.bF)(ze,{class:"openedColumn",field:"date",filterField:"createdBy",header:"Opened",style:{display:"grid","min-width":"10rem","min-height":"43px"}},{body:(0,i.k6)((({data:e})=>[(0,i.Lk)("span",y,(0,n.v_)(e.createdBy),1),(0,i.Lk)("span",k,(0,n.v_)(K.format_date(e.created,"DD/MM/YYYY")),1)])),filter:(0,i.k6)((({filterModel:e,filterCallback:t})=>[(0,i.bF)(Xe,{type:"text",modelValue:e.value,"onUpdate:modelValue":t=>e.value=t,onKeydown:(0,l.jR)((e=>t()),["enter"]),class:"p-column-filter",placeholder:"Enter name"},null,8,["modelValue","onUpdate:modelValue","onKeydown"]),(0,i.bF)(We,{type:"button",class:"p-button-text myClearButton",onClick:a=>{e.value=null,t()},label:"Clear"},null,8,["onClick"])])),_:1}),(0,i.bF)(ze,{class:"codeColumn",field:"code",header:"Code",bodyStyle:"text-align: left",style:{"min-height":"43px"}},{filter:(0,i.k6)((({filterModel:e,filterCallback:t})=>[(0,i.bF)(Xe,{type:"text",modelValue:e.value,"onUpdate:modelValue":t=>e.value=t,onKeydown:(0,l.jR)((e=>t()),["enter"]),class:"p-column-filter",placeholder:"Search"},null,8,["modelValue","onUpdate:modelValue","onKeydown"]),(0,i.bF)(We,{type:"button",class:"p-button-text myClearButton",onClick:a=>{e.value=null,t()},label:"Clear"},null,8,["onClick"])])),_:1}),(0,i.bF)(ze,{class:"captionColumn",field:"caption",header:"Item",bodyStyle:"text-align: left",style:{"text-align":"left","min-height":"43px","min-width":"320px"}},{body:(0,i.k6)((({data:e})=>[(0,i.Lk)("div",w,(0,n.v_)(e.caption),1),""!=e.hasPhoto?((0,i.uX)(),(0,i.CE)("div",D,["Architrave"==e.caption?((0,i.uX)(),(0,i.CE)("img",S)):(0,i.Q3)("",!0),"Architrave"!=e.caption?((0,i.uX)(),(0,i.CE)("img",C)):(0,i.Q3)("",!0),x])):(0,i.Q3)("",!0)])),filter:(0,i.k6)((({filterModel:e,filterCallback:t})=>[(0,i.bF)(Xe,{type:"text",modelValue:e.value,"onUpdate:modelValue":t=>e.value=t,onKeydown:(0,l.jR)((e=>t()),["enter"]),class:"p-column-filter",placeholder:"Search"},null,8,["modelValue","onUpdate:modelValue","onKeydown"]),(0,i.bF)(We,{type:"button",class:"p-button-text myClearButton",onClick:a=>{e.value=null,t()},label:"Clear"},null,8,["onClick"])])),_:1}),(0,i.bF)(ze,{class:"statusColumn",field:"status",header:"Status",bodyStyle:"text-align: left",style:{"min-height":"43px","max-width":"100px !important"}},{body:(0,i.k6)((({data:e})=>["Open"==e.status?((0,i.uX)(),(0,i.CE)("div",I,(0,n.v_)(e.status),1)):(0,i.Q3)("",!0),"Closed"==e.status?((0,i.uX)(),(0,i.CE)("div",F,(0,n.v_)(e.status),1)):(0,i.Q3)("",!0),"Actioned"==e.status?((0,i.uX)(),(0,i.CE)("div",L,(0,n.v_)(e.status),1)):(0,i.Q3)("",!0),"Returned"==e.status?((0,i.uX)(),(0,i.CE)("div",T,(0,n.v_)(e.status),1)):(0,i.Q3)("",!0)])),filter:(0,i.k6)((({filterModel:t})=>[(0,i.bF)(je,{modelValue:t.value,"onUpdate:modelValue":e=>t.value=e,options:_.allStatuses,filter:"",optionLabel:"name",optionValue:"value",placeholder:"Select Status"},null,8,["modelValue","onUpdate:modelValue","options"]),(0,i.bF)(We,{type:"button",class:"p-button-text myClearButton",onClick:a=>{t.value=null,e.filterCallback()},label:"Clear"},null,8,["onClick"])])),_:1}),(0,i.bF)(ze,{class:"assignedToColumn",field:"assignedTo",filterField:"assignedTo",header:"Action By",bodyStyle:"text-align: left",style:{display:"grid","min-height":"43px"}},{body:(0,i.k6)((({data:e})=>[(0,i.Lk)("span",M,(0,n.v_)(e.assignedTo),1),(0,i.Lk)("span",B,(0,n.v_)(K.format_date(e.date,"DD/MM/YYYY")),1)])),filter:(0,i.k6)((({filterModel:e,filterCallback:t})=>[(0,i.bF)(Xe,{type:"text",modelValue:e.value,"onUpdate:modelValue":t=>e.value=t,onKeydown:(0,l.jR)((e=>t()),["enter"]),class:"p-column-filter",placeholder:"Enter name"},null,8,["modelValue","onUpdate:modelValue","onKeydown"]),(0,i.bF)(We,{type:"button",class:"p-button-text myClearButton",onClick:a=>{e.value=null,t()},label:"Clear"},null,8,["onClick"])])),_:1}),(0,i.bF)(ze,{class:"areaColumn",field:"area",header:"Location",bodyStyle:"text-align: left",style:{"min-height":"43px"}},{filter:(0,i.k6)((({filterModel:e,filterCallback:t})=>[(0,i.bF)(Xe,{type:"text",modelValue:e.value,"onUpdate:modelValue":t=>e.value=t,onKeydown:(0,l.jR)((e=>t()),["enter"]),class:"p-column-filter",placeholder:"Search"},null,8,["modelValue","onUpdate:modelValue","onKeydown"]),(0,i.bF)(We,{type:"button",class:"p-button-text myClearButton",onClick:a=>{e.value=null,t()},label:"Clear"},null,8,["onClick"])])),_:1}),(0,i.bF)(ze,{class:"workspackageColumn",field:"worksPackage",header:"Works Package",bodyStyle:"text-align: left",style:{"min-height":"43px"}},{filter:(0,i.k6)((({filterModel:e,filterCallback:t})=>[(0,i.bF)(Xe,{type:"text",modelValue:e.value,"onUpdate:modelValue":t=>e.value=t,onKeydown:(0,l.jR)((e=>t()),["enter"]),class:"p-column-filter",placeholder:"Search"},null,8,["modelValue","onUpdate:modelValue","onKeydown"]),(0,i.bF)(We,{type:"button",class:"p-button-text myClearButton",onClick:a=>{e.value=null,t()},label:"Clear"},null,8,["onClick"])])),_:1}),(0,i.bF)(ze,{class:"closedByColumn",field:"closedBy",filterField:"closedBy",header:"Closed By",bodyStyle:"text-align: left",style:{display:"grid","min-height":"43px"}},{body:(0,i.k6)((({data:e})=>[(0,i.Lk)("span",P,(0,n.v_)(e.closedBy),1),(0,i.Lk)("span",A,(0,n.v_)(K.format_date(e.signOffDate,"DD/MM/YYYY")),1)])),filter:(0,i.k6)((({filterModel:e,filterCallback:t})=>[(0,i.bF)(Xe,{type:"text",modelValue:e.value,"onUpdate:modelValue":t=>e.value=t,onKeydown:(0,l.jR)((e=>t()),["enter"]),class:"p-column-filter",placeholder:"Enter name"},null,8,["modelValue","onUpdate:modelValue","onKeydown"]),(0,i.bF)(We,{type:"button",class:"p-button-text myClearButton",onClick:a=>{e.value=null,t()},label:"Clear"},null,8,["onClick"])])),_:1}),(0,i.bF)(ze,{field:"",header:"",bodyStyle:"text-align: left",style:{"min-height":"43px"}},{header:(0,i.k6)((()=>[E])),body:(0,i.k6)((()=>[(0,i.Lk)("div",N,[(0,i.bo)(((0,i.uX)(),(0,i.CE)("div",{class:"fa-stack fa-2x actionIcons",style:{"font-size":"15px"},onClick:t[10]||(t[10]=(...e)=>K.editClick&&K.editClick(...e))},V)),[[nt,{value:"Edit Snag",showDelay:1e3,hideDelay:300},void 0,{bottom:!0}]]),(0,i.bo)(((0,i.uX)(),(0,i.CE)("div",{class:"fa-stack fa-2x actionIcons",style:{"font-size":"15px",color:"#aa0000"},onClick:t[11]||(t[11]=(...e)=>K.deleteClick&&K.deleteClick(...e))},U)),[[nt,{value:"Delete Snag",showDelay:1e3,hideDelay:300},void 0,{left:!0}]])])])),_:1})])),_:1},8,["totalRecords","id","value","rows","first","filters","onRowSelect","onRowClick","rowsPerPageOptions","loading","scrollHeight"])],32),_.showTable?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("div",Y," Snags not found! ")),(0,i.bF)(Ge,{panelClass:_.panelClass,snagDetailsData:_.snagDetailsData,activeTab:_.activeTab,events:_.events,visibleImagesModal:_.visibleImagesModal,snagImages:_.snagImages,picturesTabShow:_.picturesTabShow,snagNotes:_.snagNotes,openedcargoname:_.openedcargoname,userType:_.userType,closePanel:K.closePanel,editClick:K.editClick,deleteClick:K.deleteClick,showloader:K.showloader,onSwiper:K.onSwiper,deletePhotoId:K.deletePhotoId,deletePhotoModal:K.deletePhotoModal,downloadSnagPDF:K.downloadSnagPDF,openDialogAddPhoto:K.openDialogAddPhoto},null,8,["panelClass","snagDetailsData","activeTab","events","visibleImagesModal","snagImages","picturesTabShow","snagNotes","openedcargoname","userType","closePanel","editClick","deleteClick","showloader","onSwiper","deletePhotoId","deletePhotoModal","downloadSnagPDF","openDialogAddPhoto"]),(0,i.bF)(Je,{newSnagDialog:_.newSnagDialogState,allStatuses:_.allStatuses,closeInsertDialog:K.closeInsertDialog,insertSnagToDatabase:K.InsertSnagToDatabase},null,8,["newSnagDialog","allStatuses","closeInsertDialog","insertSnagToDatabase"]),(0,i.bF)(Ze,{snagData:_.snagData,editSnagDialog:_.editSnagDialogState,allStatuses:_.allStatuses,closeEditDialog:K.closeEditDialog,editSnagInDatabase:K.editSnagInDatabase},null,8,["snagData","editSnagDialog","allStatuses","closeEditDialog","editSnagInDatabase"]),(0,i.bF)(et,{displayInfoDialog:_.displayInfoDialog,infoModalHeader:_.InfoModalHeader,infoModalMessage:_.InfoModalMessage,closeInfo:K.closeInfo},null,8,["displayInfoDialog","infoModalHeader","infoModalMessage","closeInfo"]),(0,i.bF)(tt,{visible:_.displayDeleteConfirm,"onUpdate:visible":t[19]||(t[19]=e=>_.displayDeleteConfirm=e),modal:"",style:{width:"30rem"},breakpoints:{"1199px":"75vw","575px":"90vw"}},{header:(0,i.k6)((()=>[H])),default:(0,i.k6)((()=>[X,(0,i.Lk)("p",W,[$,(0,i.Lk)("strong",null,"'"+(0,n.v_)(e.editSnagCargoName)+"'",1),Q]),(0,i.Lk)("div",z,[(0,i.Lk)("div",j,[(0,i.bF)(We,{class:"redButton",label:"Cancel",onClick:t[18]||(t[18]=e=>_.displayDeleteConfirm=!1)})]),(0,i.Lk)("div",q,[(0,i.bF)(We,{label:"Yes, delete",onClick:K.deleteTrip},null,8,["onClick"])])])])),_:1},8,["visible"]),(0,i.bF)(tt,{visible:_.displayUnInvoiceConfirm,"onUpdate:visible":t[21]||(t[21]=e=>_.displayUnInvoiceConfirm=e),modal:"",style:{width:"30rem"},breakpoints:{"1199px":"75vw","575px":"90vw"}},{header:(0,i.k6)((()=>[G])),default:(0,i.k6)((()=>[J,(0,i.Lk)("p",Z,[ee,te,ae,(0,i.Lk)("strong",null,"'"+(0,n.v_)(e.editSnagCargoName)+"'",1),ie]),(0,i.Lk)("div",ne,[(0,i.Lk)("div",le,[(0,i.bF)(We,{class:"redButton",label:"Cancel",onClick:t[20]||(t[20]=t=>e.displayInvoiceConfirm=!1)})]),(0,i.Lk)("div",se,[(0,i.bF)(We,{label:"Yes, remove it",onClick:K.unInvoiceThisTrip},null,8,["onClick"])])])])),_:1},8,["visible"]),(0,i.bF)(tt,{"onUpdate:visible":[K.handleClose,t[25]||(t[25]=e=>_.sendInvoiceDialog=e)],visible:_.sendInvoiceDialog,modal:"",style:{width:"50rem"},breakpoints:{"1199px":"75vw","575px":"90vw"}},{header:(0,i.k6)((()=>[oe])),default:(0,i.k6)((()=>[(0,i.Lk)("div",de,[(0,i.Lk)("div",re,[ce,(0,i.Lk)("div",pe,[(0,i.bF)($e,{hourFormat:"24",showTime:"",onChange:t[22]||(t[22]=t=>e.changeDate("from")),style:{"margin-left":"0"},id:"invoiceDate",class:"dateDisplayInput",modelValue:_.invoiceDate,"onUpdate:modelValue":t[23]||(t[23]=e=>_.invoiceDate=e),showIcon:"",dateFormat:"dd/mm/yy",placeholder:"dd/mm/yy",mask:"99/99/9999"},null,8,["modelValue"]),_.invoiceDateOK?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.Wv)(at,{key:0},{default:(0,i.k6)((()=>[he])),_:1}))])]),(0,i.Lk)("div",ue,[(0,i.Lk)("div",ge,[(0,i.bo)((0,i.bF)(We,{onClick:t[24]||(t[24]=e=>_.sendInvoiceDialog=!1),style:{"min-width":"120px"},icon:"pi pi-times-circle",type:"button",class:"p-button-text redButton",label:"Cancel"},null,512),[[nt,{value:"Cancel",showDelay:1e3,hideDelay:300},void 0,{bottom:!0}]])]),(0,i.Lk)("div",me,[(0,i.bo)((0,i.bF)(We,{style:{"min-width":"120px"},type:"button",icon:"pi pi-check-circle",class:"p-button-text",onClick:K.invoiceThisTrip,label:"Mark as Invoiced"},null,8,["onClick"]),[[nt,{value:"Mark as Invoiced",showDelay:1e3,hideDelay:300},void 0,{bottom:!0}]])])])])])),_:1},8,["onUpdate:visible","visible"]),(0,i.bF)(tt,{"onUpdate:visible":[K.handleClose,t[29]||(t[29]=e=>_.sendMultipleInvoiceDialog=e)],visible:_.sendMultipleInvoiceDialog,modal:"",header:"header",style:{width:"50rem"},breakpoints:{"1199px":"75vw","575px":"90vw"}},{header:(0,i.k6)((()=>[1==_.selectedIDsForInvoicing.length?((0,i.uX)(),(0,i.CE)("span",ve,"Mark selected trip as Invoiced")):(0,i.Q3)("",!0),_.selectedIDsForInvoicing.length>1?((0,i.uX)(),(0,i.CE)("span",fe,[be,(0,i.Lk)("span",ye,(0,n.v_)(_.selectedIDsForInvoicing.length)+" trips ",1),ke])):(0,i.Q3)("",!0)])),default:(0,i.k6)((()=>[(0,i.Lk)("div",we,[(0,i.Lk)("div",De,[Se,(0,i.Lk)("div",Ce,[(0,i.bF)($e,{hourFormat:"24",showTime:"",onChange:t[26]||(t[26]=t=>e.changeDate("from")),style:{"margin-left":"0"},id:"invoiceMultipleDate",class:"dateDisplayInput",modelValue:_.invoiceDate,"onUpdate:modelValue":t[27]||(t[27]=e=>_.invoiceDate=e),showIcon:"",dateFormat:"dd/mm/yy",placeholder:"dd/mm/yy",mask:"99/99/9999"},null,8,["modelValue"]),_.invoiceDateOK?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.Wv)(at,{key:0},{default:(0,i.k6)((()=>[xe])),_:1}))])]),(0,i.Lk)("div",Ie,[(0,i.Lk)("div",Fe,[(0,i.bo)((0,i.bF)(We,{onClick:t[28]||(t[28]=e=>_.sendMultipleInvoiceDialog=!1),style:{"min-width":"120px"},icon:"pi pi-times-circle",type:"button",class:"p-button-text redButton",label:"Cancel"},null,512),[[nt,{value:"Cancel",showDelay:1e3,hideDelay:300},void 0,{bottom:!0}]])]),(0,i.Lk)("div",Le,[(0,i.bo)((0,i.bF)(We,{style:{"min-width":"120px"},type:"button",icon:"pi pi-check-circle",class:"p-button-text",onClick:K.invoiceMultipleTrips,label:"Mark as Invoiced"},null,8,["onClick"]),[[nt,{value:"Mark as Invoiced",showDelay:1e3,hideDelay:300},void 0,{bottom:!0}]])])])])])),_:1},8,["onUpdate:visible","visible"]),(0,i.bF)(tt,{visible:_.displayDeletePhotoConfirm,"onUpdate:visible":t[31]||(t[31]=e=>_.displayDeletePhotoConfirm=e),modal:"",style:{width:"30rem"},breakpoints:{"1199px":"75vw","575px":"90vw"}},{header:(0,i.k6)((()=>[Te])),default:(0,i.k6)((()=>[Me,Be,(0,i.Lk)("div",Pe,[(0,i.Lk)("div",Ae,[(0,i.bF)(We,{class:"redButton",label:"Cancel",onClick:t[30]||(t[30]=e=>_.displayDeletePhotoConfirm=!1)})]),(0,i.Lk)("div",Ee,[(0,i.bF)(We,{label:"Yes, delete",onClick:K.deletePhoto},null,8,["onClick"])])])])),_:1},8,["visible"]),(0,i.bF)(tt,{visible:_.displayUploadModal,"onUpdate:visible":t[33]||(t[33]=e=>_.displayUploadModal=e),modal:"",style:{width:"60rem"},breakpoints:{"1199px":"75vw","575px":"90vw"}},{header:(0,i.k6)((()=>[Ne])),default:(0,i.k6)((()=>[(0,i.Lk)("div",Re,[(0,i.Lk)("div",_e,[(0,i.bF)(it,{name:"files[]",customUpload:!0,url:"/api/upload",onUploader:t[32]||(t[32]=e=>K.customUploader(e)),multiple:!1,accept:"image/*",maxFileSize:1e7},{empty:(0,i.k6)((()=>[Ve])),_:1})])])])),_:1},8,["visible"]),(0,i.Lk)("div",Ke,[(0,i.Lk)("ul",null,[(0,i.Lk)("ul",null,[_.AllPageMarked||_.AllMarked?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("li",Oe,[(0,i.Lk)("a",{onClick:t[34]||(t[34]=e=>K.SelectAllPage("select"))},"Select all records on current page")])),_.AllPageMarked||_.AllMarked?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("li",Ue,[(0,i.Lk)("a",{onClick:t[35]||(t[35]=e=>K.SelectAll("select"))},"Select all on all pages")])),_.AllMarked||_.AllPageMarked?((0,i.uX)(),(0,i.CE)("li",Ye,[(0,i.Lk)("a",{onClick:t[36]||(t[36]=e=>K.SelectAll("deselect"))},"Deselect All ")])):(0,i.Q3)("",!0)])])])],64)}const Xe={class:"row"},We={class:"col-md-12 text-end"},$e={class:"row"},Qe={class:"col text-center"},ze={class:"detailsHeadlineCode"},je={class:"detailsHeadline"},qe={class:"row"},Ge={class:"col text-center"},Je={class:"text-end",id:"editIconsPanel"},Ze={class:"actionButtonsHolder"},et=(0,i.Lk)("i",{class:"fa-solid fa-square fa-stack-2x"},null,-1),tt=(0,i.Lk)("i",{class:"fa-stack-1x fa-solid fa-pen-to-square",style:{color:"white"}},null,-1),at=[et,tt],it=(0,i.Lk)("i",{class:"fa-solid fa-square fa-stack-2x"},null,-1),nt=(0,i.Lk)("i",{class:"fa-stack-1x fa-solid fa-trash-can",style:{color:"white"}},null,-1),lt=[it,nt],st={class:"row",style:{}},ot={class:"col text-center",style:{padding:"19px"}},dt={class:"row",style:{"margin-bottom":"10px"}},rt={class:"col text-start",style:{padding:"0"}},ct={class:"table table-striped table-sm",id:"detailsTable"},pt=(0,i.Lk)("td",{style:{width:"160px"}},"Date Opened:",-1),ht=(0,i.Lk)("td",{style:{width:"160px"}},"Action by:",-1),ut=(0,i.Lk)("td",null,"Location:",-1),gt=(0,i.Lk)("td",null,"Works Package:",-1),mt=(0,i.Lk)("td",null,"Owner:",-1),vt=(0,i.Lk)("td",null,"Closed by:",-1),ft=(0,i.Lk)("td",null,"Notes:",-1),bt=["textContent"],yt={class:"row"},kt=(0,i.Lk)("div",{class:"col-md-6 text-left",style:{padding:"0"}},null,-1),wt={class:"col-md-6 text-end",style:{padding:"0"}},Dt={class:"row",style:{"margin-top":"12px"}},St={class:"col text-end",style:{padding:"0"}},Ct=(0,i.Lk)("img",{src:"/images/pindrawing.jpg"},null,-1),xt={class:"historyHolder"},It={class:"row"},Ft={class:"col-md-12"},Lt={class:"mt-3"},Tt={class:"historyStatus"},Mt={class:"historyDate"},Bt={class:"historyName"},Pt=(0,i.Lk)("div",{class:"historyNotes"},[(0,i.Lk)("textarea",{class:"textAreaComments"},"Comments")],-1);function At(e,t,a,l,s,o){const d=(0,i.g2)("Button"),r=(0,i.g2)("TabPanel"),c=(0,i.g2)("SwiperCarousel"),p=(0,i.g2)("TabView"),h=(0,i.g2)("Timeline"),u=(0,i.g2)("Dialog"),g=(0,i.gN)("tooltip");return(0,i.uX)(),(0,i.CE)("div",{id:"RightSidepanel",class:(0,n.C4)(["RightSidepanel",a.panelClass])},[(0,i.Lk)("div",Xe,[(0,i.Lk)("div",We,[(0,i.Lk)("i",{class:"pi pi-times cursorHand closePanelButton",onClick:t[0]||(t[0]=(...e)=>a.closePanel&&a.closePanel(...e))})])]),(0,i.Lk)("div",$e,[(0,i.Lk)("div",Qe,[(0,i.Lk)("h5",ze,(0,n.v_)(a.snagDetailsData.code),1),(0,i.Lk)("h5",je,(0,n.v_)(a.snagDetailsData.caption),1)])]),(0,i.Lk)("div",qe,[(0,i.Lk)("div",Ge,[(0,i.Lk)("div",{class:(0,n.C4)("statusBlock status"+a.snagDetailsData.status)},(0,n.v_)(a.snagDetailsData.status),3)])]),(0,i.Lk)("div",Je,[(0,i.Lk)("div",Ze,[(0,i.bo)(((0,i.uX)(),(0,i.CE)("div",{class:"fa-stack fa-2x actionIcons",style:{"font-size":"15px"},onClick:t[1]||(t[1]=(...e)=>a.editClick&&a.editClick(...e))},at)),[[g,{value:"Edit snag",showDelay:1e3,hideDelay:300},void 0,{bottom:!0}]]),(0,i.bo)(((0,i.uX)(),(0,i.CE)("div",{class:"fa-stack fa-2x actionIcons",style:{"font-size":"15px",color:"#aa0000"},onClick:t[2]||(t[2]=(...e)=>a.deleteClick&&a.deleteClick(...e))},lt)),[[g,{value:"Delete snag",showDelay:1e3,hideDelay:300},void 0,{left:!0}]])])]),(0,i.Lk)("div",st,[(0,i.Lk)("div",ot,[(0,i.bF)(p,{activeIndex:s.localActiveTab,"onUpdate:activeIndex":t[3]||(t[3]=e=>s.localActiveTab=e)},{default:(0,i.k6)((()=>[(0,i.bF)(r,{header:"Details"},{default:(0,i.k6)((()=>[(0,i.Lk)("div",dt,[(0,i.Lk)("div",rt,[(0,i.bo)((0,i.bF)(d,{type:"button",icon:"pi pi-file-pdf",class:"p-button-text donwloadPDFbutton",onClick:a.downloadSnagPDF,label:"Download PDF"},null,8,["onClick"]),[[g,{value:"Download PDF",showDelay:1e3,hideDelay:300},void 0,{bottom:!0}]])])]),(0,i.Lk)("table",ct,[(0,i.Lk)("tbody",null,[(0,i.Lk)("tr",null,[pt,(0,i.Lk)("td",null,(0,n.v_)(a.snagDetailsData.date),1)]),(0,i.Lk)("tr",null,[ht,(0,i.Lk)("td",null,(0,n.v_)(a.snagDetailsData.assignedTo),1)]),(0,i.Lk)("tr",null,[ut,(0,i.Lk)("td",null,(0,n.v_)(a.snagDetailsData.area),1)]),(0,i.Lk)("tr",null,[gt,(0,i.Lk)("td",null,(0,n.v_)(a.snagDetailsData.worksPackage),1)]),(0,i.Lk)("tr",null,[mt,(0,i.Lk)("td",null,(0,n.v_)(a.snagDetailsData.createdBy),1)]),(0,i.Lk)("tr",null,[vt,(0,i.Lk)("td",null,(0,n.v_)(a.snagDetailsData.closedBy),1)]),(0,i.Lk)("tr",null,[ft,(0,i.Lk)("td",null,[(0,i.Lk)("textarea",{rows:"5",textContent:(0,n.v_)(a.snagDetailsData.notes),style:{width:"100%"},readonly:""},null,8,bt)])])])]),(0,i.Lk)("div",yt,[kt,(0,i.Lk)("div",wt,[(0,i.bo)((0,i.bF)(d,{onClick:a.openDialogAddPhoto,style:{"min-width":"120px"},type:"button",class:"p-button-text addphotobutton",label:"Add photo"},null,8,["onClick"]),[[g,{value:"Add photo",showDelay:1e3,hideDelay:300},void 0,{bottom:!0}]])])])])),_:1}),a.picturesTabShow?((0,i.uX)(),(0,i.Wv)(r,{key:0,header:"Pictures ("+a.snagImages.length+")"},{default:(0,i.k6)((()=>[(0,i.bF)(c,{notes:a.snagNotes,tripImages:a.snagImages,onShowloader:a.showloader,openedcargoname:a.openedcargoname,onSwiper:a.onSwiper,onDeletePhoto:a.deletePhotoId,onDeletePhotomodal:a.deletePhotoModal,userType:a.userType},null,8,["notes","tripImages","onShowloader","openedcargoname","onSwiper","onDeletePhoto","onDeletePhotomodal","userType"]),(0,i.Lk)("div",Dt,[(0,i.Lk)("div",St,[(0,i.bo)((0,i.bF)(d,{onClick:a.openDialogAddPhoto,style:{"min-width":"120px"},type:"button",class:"p-button-text addphotobutton",label:"Add photo"},null,8,["onClick"]),[[g,{value:"Add photo",showDelay:1e3,hideDelay:300},void 0,{bottom:!0}]])])])])),_:1},8,["header"])):(0,i.Q3)("",!0),(0,i.bF)(r,{header:"Drawing"},{default:(0,i.k6)((()=>[Ct])),_:1})])),_:1},8,["activeIndex"])])]),(0,i.Lk)("div",xt,[(0,i.Lk)("div",It,[(0,i.Lk)("div",Ft,[(0,i.bF)(h,{value:a.events,align:"alternate"},{marker:(0,i.k6)((e=>[(0,i.Lk)("span",{class:"flex w-2rem h-2rem align-items-center justify-content-center text-white border-circle z-1 shadow-1",style:(0,n.Tr)({backgroundColor:e.item.color})},[(0,i.Lk)("i",{class:(0,n.C4)(e.item.icon)},null,2)],4)])),content:(0,i.k6)((e=>[(0,i.Lk)("div",Lt,[(0,i.Lk)("div",Tt,(0,n.v_)(e.item.status),1),(0,i.Lk)("div",Mt,(0,n.v_)(e.item.date),1),(0,i.Lk)("div",Bt,(0,n.v_)(e.item.createdBy),1),Pt])])),_:1},8,["value"])])])]),(0,i.bF)(u,{modal:"",visible:s.localVisibleImagesModal,"onUpdate:visible":t[4]||(t[4]=e=>s.localVisibleImagesModal=e),style:{width:"50rem"},breakpoints:{"1199px":"75vw","575px":"90vw"}},{default:(0,i.k6)((()=>[(0,i.bF)(c,{snagImages:a.snagImages,onDeletePhotomodal:a.deletePhotoModal},null,8,["snagImages","onDeletePhotomodal"])])),_:1},8,["visible"])],2)}var Et=a(309),Nt=a(2467),Rt={name:"TabView",emits:["update:activeIndex","tab-change","tab-click"],props:{activeIndex:{type:Number,default:0},lazy:{type:Boolean,default:!1},scrollable:{type:Boolean,default:!1},tabindex:{type:Number,default:0},selectOnFocus:{type:Boolean,default:!1},previousButtonProps:null,nextButtonProps:null},data(){return{d_activeIndex:this.activeIndex,focusedTabIndex:-1,isPrevButtonDisabled:!0,isNextButtonDisabled:!1}},watch:{activeIndex(e){this.d_activeIndex=e,this.scrollInView({index:e})}},mounted(){this.updateInkBar()},updated(){this.updateInkBar()},methods:{isTabPanel(e){return"TabPanel"===e.type.name},isTabActive(e){return this.d_activeIndex===e},getTabProp(e,t){return e.props?e.props[t]:void 0},getKey(e,t){return this.getTabProp(e,"header")||t},getTabHeaderActionId(e){return`${this.id}_${e}_header_action`},getTabContentId(e){return`${this.id}_${e}_content`},onScroll(e){this.scrollable&&this.updateButtonState(),e.preventDefault()},onPrevButtonClick(){const e=this.$refs.content,t=Et.DV.getWidth(e)-this.getVisibleButtonWidths(),a=e.scrollLeft-t;e.scrollLeft=a<=0?0:a},onNextButtonClick(){const e=this.$refs.content,t=Et.DV.getWidth(e)-this.getVisibleButtonWidths(),a=e.scrollLeft+t,i=e.scrollWidth-t;e.scrollLeft=a>=i?i:a},onTabClick(e,t,a){this.changeActiveIndex(e,t,a),this.$emit("tab-click",{originalEvent:e,index:a})},onTabKeyDown(e,t,a){switch(e.code){case"ArrowLeft":this.onTabArrowLeftKey(e);break;case"ArrowRight":this.onTabArrowRightKey(e);break;case"Home":this.onTabHomeKey(e);break;case"End":this.onTabEndKey(e);break;case"PageDown":this.onPageDownKey(e);break;case"PageUp":this.onPageUpKey(e);break;case"Enter":case"Space":this.onTabEnterKey(e,t,a);break}},onTabArrowRightKey(e){const t=this.findNextHeaderAction(e.target.parentElement);t?this.changeFocusedTab(e,t):this.onTabHomeKey(e),e.preventDefault()},onTabArrowLeftKey(e){const t=this.findPrevHeaderAction(e.target.parentElement);t?this.changeFocusedTab(e,t):this.onTabEndKey(e),e.preventDefault()},onTabHomeKey(e){const t=this.findFirstHeaderAction();this.changeFocusedTab(e,t),e.preventDefault()},onTabEndKey(e){const t=this.findLastHeaderAction();this.changeFocusedTab(e,t),e.preventDefault()},onPageDownKey(e){this.scrollInView({index:this.$refs.nav.children.length-2}),e.preventDefault()},onPageUpKey(e){this.scrollInView({index:0}),e.preventDefault()},onTabEnterKey(e,t,a){this.changeActiveIndex(e,t,a),e.preventDefault()},findNextHeaderAction(e,t=!1){const a=t?e:e.nextElementSibling;return a?Et.DV.hasClass(a,"p-disabled")||Et.DV.hasClass(a,"p-tabview-ink-bar")?this.findNextHeaderAction(a):Et.DV.findSingle(a,".p-tabview-header-action"):null},findPrevHeaderAction(e,t=!1){const a=t?e:e.previousElementSibling;return a?Et.DV.hasClass(a,"p-disabled")||Et.DV.hasClass(a,"p-tabview-ink-bar")?this.findPrevHeaderAction(a):Et.DV.findSingle(a,".p-tabview-header-action"):null},findFirstHeaderAction(){return this.findNextHeaderAction(this.$refs.nav.firstElementChild,!0)},findLastHeaderAction(){return this.findPrevHeaderAction(this.$refs.nav.lastElementChild,!0)},changeActiveIndex(e,t,a){this.getTabProp(t,"disabled")||this.d_activeIndex===a||(this.d_activeIndex=a,this.$emit("update:activeIndex",a),this.$emit("tab-change",{originalEvent:e,index:a}),this.scrollInView({index:a}))},changeFocusedTab(e,t){if(t&&(Et.DV.focus(t),this.scrollInView({element:t}),this.selectOnFocus)){const a=parseInt(t.parentElement.dataset.index,10),i=this.tabs[a];this.changeActiveIndex(e,i,a)}},scrollInView({element:e,index:t=-1}){const a=e||this.$refs.nav.children[t];a&&a.scrollIntoView&&a.scrollIntoView({block:"nearest"})},updateInkBar(){let e=this.$refs.nav.children[this.d_activeIndex];this.$refs.inkbar.style.width=Et.DV.getWidth(e)+"px",this.$refs.inkbar.style.left=Et.DV.getOffset(e).left-Et.DV.getOffset(this.$refs.nav).left+"px"},updateButtonState(){const e=this.$refs.content,{scrollLeft:t,scrollWidth:a}=e,i=Et.DV.getWidth(e);this.isPrevButtonDisabled=0===t,this.isNextButtonDisabled=parseInt(t)===a-i},getVisibleButtonWidths(){const{prevBtn:e,nextBtn:t}=this.$refs;return[e,t].reduce(((e,t)=>t?e+Et.DV.getWidth(t):e),0)},getTabHeaderClass(e,t){return["p-tabview-header",this.getTabProp(e,"headerClass"),{"p-highlight":this.d_activeIndex===t,"p-disabled":this.getTabProp(e,"disabled")}]},getTabContentClass(e){return["p-tabview-panel",this.getTabProp(e,"contentClass")]}},computed:{contentClasses(){return["p-tabview p-component",{"p-tabview-scrollable":this.scrollable}]},tabs(){return this.$slots.default().reduce(((e,t)=>(this.isTabPanel(t)?e.push(t):t.children&&t.children instanceof Array&&t.children.forEach((t=>{this.isTabPanel(t)&&e.push(t)})),e)),[])},prevButtonAriaLabel(){return this.$primevue.config.locale.aria?this.$primevue.config.locale.aria.previous:void 0},nextButtonAriaLabel(){return this.$primevue.config.locale.aria?this.$primevue.config.locale.aria.next:void 0},id(){return this.$attrs.id||(0,Et._Y)()}},directives:{ripple:Nt.A}};const _t={class:"p-tabview-nav-container"},Vt=["tabindex","aria-label"],Kt=(0,i.Lk)("span",{class:"pi pi-chevron-left","aria-hidden":"true"},null,-1),Ot=[Kt],Ut={ref:"nav",class:"p-tabview-nav",role:"tablist"},Yt=["data-index"],Ht=["id","tabindex","aria-disabled","aria-selected","aria-controls","onClick","onKeydown"],Xt={key:0,class:"p-tabview-title"},Wt={ref:"inkbar",class:"p-tabview-ink-bar",role:"presentation","aria-hidden":"true"},$t=["tabindex","aria-label"],Qt=(0,i.Lk)("span",{class:"pi pi-chevron-right","aria-hidden":"true"},null,-1),zt=[Qt],jt={class:"p-tabview-panels"},qt=["aria-labelledby"];function Gt(e,t,a,s,o,d){const r=(0,i.gN)("ripple");return(0,i.uX)(),(0,i.CE)("div",{class:(0,n.C4)(d.contentClasses)},[(0,i.Lk)("div",_t,[a.scrollable&&!o.isPrevButtonDisabled?(0,i.bo)(((0,i.uX)(),(0,i.CE)("button",(0,i.v6)({key:0,ref:"prevBtn",type:"button",class:"p-tabview-nav-prev p-tabview-nav-btn p-link",tabindex:a.tabindex,"aria-label":d.prevButtonAriaLabel,onClick:t[0]||(t[0]=(...e)=>d.onPrevButtonClick&&d.onPrevButtonClick(...e))},a.previousButtonProps),Ot,16,Vt)),[[r]]):(0,i.Q3)("",!0),(0,i.Lk)("div",{ref:"content",class:"p-tabview-nav-content",onScroll:t[1]||(t[1]=(...e)=>d.onScroll&&d.onScroll(...e))},[(0,i.Lk)("ul",Ut,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(d.tabs,((e,t)=>((0,i.uX)(),(0,i.CE)("li",(0,i.v6)({key:d.getKey(e,t),style:d.getTabProp(e,"headerStyle"),class:d.getTabHeaderClass(e,t),role:"presentation","data-index":t},d.getTabProp(e,"headerProps")),[(0,i.bo)(((0,i.uX)(),(0,i.CE)("a",(0,i.v6)({id:d.getTabHeaderActionId(t),class:"p-tabview-nav-link p-tabview-header-action",tabindex:d.getTabProp(e,"disabled")||!d.isTabActive(t)?-1:a.tabindex,role:"tab","aria-disabled":d.getTabProp(e,"disabled"),"aria-selected":d.isTabActive(t),"aria-controls":d.getTabContentId(t),onClick:a=>d.onTabClick(a,e,t),onKeydown:a=>d.onTabKeyDown(a,e,t)},d.getTabProp(e,"headerActionProps")),[e.props&&e.props.header?((0,i.uX)(),(0,i.CE)("span",Xt,(0,n.v_)(e.props.header),1)):(0,i.Q3)("",!0),e.children&&e.children.header?((0,i.uX)(),(0,i.Wv)((0,i.$y)(e.children.header),{key:1})):(0,i.Q3)("",!0)],16,Ht)),[[r]])],16,Yt)))),128)),(0,i.Lk)("li",Wt,null,512)],512)],544),a.scrollable&&!o.isNextButtonDisabled?(0,i.bo)(((0,i.uX)(),(0,i.CE)("button",(0,i.v6)({key:1,ref:"nextBtn",type:"button",class:"p-tabview-nav-next p-tabview-nav-btn p-link",tabindex:a.tabindex,"aria-label":d.nextButtonAriaLabel,onClick:t[2]||(t[2]=(...e)=>d.onNextButtonClick&&d.onNextButtonClick(...e))},a.nextButtonProps),zt,16,$t)),[[r]]):(0,i.Q3)("",!0)]),(0,i.Lk)("div",jt,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(d.tabs,((e,t)=>((0,i.uX)(),(0,i.CE)(i.FK,{key:d.getKey(e,t)},[!a.lazy||d.isTabActive(t)?(0,i.bo)(((0,i.uX)(),(0,i.CE)("div",(0,i.v6)({key:0,style:d.getTabProp(e,"contentStyle"),class:d.getTabContentClass(e),role:"tabpanel","aria-labelledby":d.getTabHeaderActionId(t)},d.getTabProp(e,"contentProps")),[((0,i.uX)(),(0,i.Wv)((0,i.$y)(e)))],16,qt)),[[l.aG,!!a.lazy||d.isTabActive(t)]]):(0,i.Q3)("",!0)],64)))),128))])],2)}function Jt(e,t){void 0===t&&(t={});var a=t.insertAt;if(e&&"undefined"!==typeof document){var i=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css","top"===a&&i.firstChild?i.insertBefore(n,i.firstChild):i.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}}var Zt="\n.p-tabview-nav-container {\n    position: relative;\n}\n.p-tabview-scrollable .p-tabview-nav-container {\n    overflow: hidden;\n}\n.p-tabview-nav-content {\n    overflow-x: auto;\n    overflow-y: hidden;\n    scroll-behavior: smooth;\n    scrollbar-width: none;\n    -ms-scroll-chaining: contain auto;\n        overscroll-behavior: contain auto;\n}\n.p-tabview-nav {\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    margin: 0;\n    padding: 0;\n    list-style-type: none;\n    -webkit-box-flex: 1;\n        -ms-flex: 1 1 auto;\n            flex: 1 1 auto;\n}\n.p-tabview-header-action {\n    cursor: pointer;\n    -webkit-user-select: none;\n       -moz-user-select: none;\n        -ms-user-select: none;\n            user-select: none;\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-align: center;\n        -ms-flex-align: center;\n            align-items: center;\n    position: relative;\n    text-decoration: none;\n    overflow: hidden;\n}\n.p-tabview-ink-bar {\n    display: none;\n    z-index: 1;\n}\n.p-tabview-header-action:focus {\n    z-index: 1;\n}\n.p-tabview-title {\n    line-height: 1;\n    white-space: nowrap;\n}\n.p-tabview-nav-btn {\n    position: absolute;\n    top: 0;\n    z-index: 2;\n    height: 100%;\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-align: center;\n        -ms-flex-align: center;\n            align-items: center;\n    -webkit-box-pack: center;\n        -ms-flex-pack: center;\n            justify-content: center;\n}\n.p-tabview-nav-prev {\n    left: 0;\n}\n.p-tabview-nav-next {\n    right: 0;\n}\n.p-tabview-nav-content::-webkit-scrollbar {\n    display: none;\n}\n";Jt(Zt),Rt.render=Gt;var ea={name:"TabPanel",props:{header:null,headerStyle:null,headerClass:null,headerProps:null,headerActionProps:null,contentStyle:null,contentClass:null,contentProps:null,disabled:Boolean}};function ta(e,t,a,n,l,s){return(0,i.RG)(e.$slots,"default")}ea.render=ta;var aa={name:"Timeline",props:{value:null,align:{mode:String,default:"left"},layout:{mode:String,default:"vertical"},dataKey:null},methods:{getKey(e,t){return this.dataKey?Et.BF.resolveFieldData(e,this.dataKey):t}},computed:{containerClass(){return["p-timeline p-component","p-timeline-"+this.align,"p-timeline-"+this.layout]}}};const ia={class:"p-timeline-event-opposite"},na={class:"p-timeline-event-separator"},la=(0,i.Lk)("div",{class:"p-timeline-event-marker"},null,-1),sa=(0,i.Lk)("div",{class:"p-timeline-event-connector"},null,-1),oa={class:"p-timeline-event-content"};function da(e,t,a,l,s,o){return(0,i.uX)(),(0,i.CE)("div",{class:(0,n.C4)(o.containerClass)},[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(a.value,((t,n)=>((0,i.uX)(),(0,i.CE)("div",{key:o.getKey(t,n),class:"p-timeline-event"},[(0,i.Lk)("div",ia,[(0,i.RG)(e.$slots,"opposite",{item:t,index:n})]),(0,i.Lk)("div",na,[(0,i.RG)(e.$slots,"marker",{item:t,index:n},(()=>[la])),n!==a.value.length-1?(0,i.RG)(e.$slots,"connector",{key:0,item:t,index:n},(()=>[sa])):(0,i.Q3)("",!0)]),(0,i.Lk)("div",oa,[(0,i.RG)(e.$slots,"content",{item:t,index:n})])])))),128))],2)}function ra(e,t){void 0===t&&(t={});var a=t.insertAt;if(e&&"undefined"!==typeof document){var i=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css","top"===a&&i.firstChild?i.insertBefore(n,i.firstChild):i.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}}var ca="\n.p-timeline {\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-flex: 1;\n        -ms-flex-positive: 1;\n            flex-grow: 1;\n    -webkit-box-orient: vertical;\n    -webkit-box-direction: normal;\n        -ms-flex-direction: column;\n            flex-direction: column;\n}\n.p-timeline-left .p-timeline-event-opposite {\n    text-align: right;\n}\n.p-timeline-left .p-timeline-event-content {\n    text-align: left;\n}\n.p-timeline-right .p-timeline-event {\n    -webkit-box-orient: horizontal;\n    -webkit-box-direction: reverse;\n        -ms-flex-direction: row-reverse;\n            flex-direction: row-reverse;\n}\n.p-timeline-right .p-timeline-event-opposite {\n    text-align: left;\n}\n.p-timeline-right .p-timeline-event-content {\n    text-align: right;\n}\n.p-timeline-vertical.p-timeline-alternate .p-timeline-event:nth-child(even) {\n    -webkit-box-orient: horizontal;\n    -webkit-box-direction: reverse;\n        -ms-flex-direction: row-reverse;\n            flex-direction: row-reverse;\n}\n.p-timeline-vertical.p-timeline-alternate .p-timeline-event:nth-child(odd) .p-timeline-event-opposite {\n    text-align: right;\n}\n.p-timeline-vertical.p-timeline-alternate .p-timeline-event:nth-child(odd) .p-timeline-event-content {\n    text-align: left;\n}\n.p-timeline-vertical.p-timeline-alternate .p-timeline-event:nth-child(even) .p-timeline-event-opposite {\n    text-align: left;\n}\n.p-timeline-vertical.p-timeline-alternate .p-timeline-event:nth-child(even) .p-timeline-event-content {\n    text-align: right;\n}\n.p-timeline-event {\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    position: relative;\n    min-height: 70px;\n}\n.p-timeline-event:last-child {\n    min-height: 0;\n}\n.p-timeline-event-opposite {\n    -webkit-box-flex: 1;\n        -ms-flex: 1;\n            flex: 1;\n    padding: 0 1rem;\n}\n.p-timeline-event-content {\n    -webkit-box-flex: 1;\n        -ms-flex: 1;\n            flex: 1;\n    padding: 0 1rem;\n}\n.p-timeline-event-separator {\n    -webkit-box-flex: 0;\n        -ms-flex: 0;\n            flex: 0;\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-align: center;\n        -ms-flex-align: center;\n            align-items: center;\n    -webkit-box-orient: vertical;\n    -webkit-box-direction: normal;\n        -ms-flex-direction: column;\n            flex-direction: column;\n}\n.p-timeline-event-marker {\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -ms-flex-item-align: baseline;\n        align-self: baseline;\n}\n.p-timeline-event-connector {\n    -webkit-box-flex: 1;\n        -ms-flex-positive: 1;\n            flex-grow: 1;\n}\n.p-timeline-horizontal {\n    -webkit-box-orient: horizontal;\n    -webkit-box-direction: normal;\n        -ms-flex-direction: row;\n            flex-direction: row;\n}\n.p-timeline-horizontal .p-timeline-event {\n    -webkit-box-orient: vertical;\n    -webkit-box-direction: normal;\n        -ms-flex-direction: column;\n            flex-direction: column;\n    -webkit-box-flex: 1;\n        -ms-flex: 1;\n            flex: 1;\n}\n.p-timeline-horizontal .p-timeline-event:last-child {\n    -webkit-box-flex: 0;\n        -ms-flex: 0;\n            flex: 0;\n}\n.p-timeline-horizontal .p-timeline-event-separator {\n    -webkit-box-orient: horizontal;\n    -webkit-box-direction: normal;\n        -ms-flex-direction: row;\n            flex-direction: row;\n}\n.p-timeline-horizontal .p-timeline-event-connector {\n    width: 100%;\n}\n.p-timeline-bottom .p-timeline-event {\n    -webkit-box-orient: vertical;\n    -webkit-box-direction: reverse;\n        -ms-flex-direction: column-reverse;\n            flex-direction: column-reverse;\n}\n.p-timeline-horizontal.p-timeline-alternate .p-timeline-event:nth-child(even) {\n    -webkit-box-orient: vertical;\n    -webkit-box-direction: reverse;\n        -ms-flex-direction: column-reverse;\n            flex-direction: column-reverse;\n}\n";ra(ca),aa.render=da;var pa=a(5171),ha=a(7487),ua={props:["panelClass","snagDetailsData","activeTab","events","visibleImagesModal","snagImages","deletePhotoModal","picturesTabShow","downloadSnagPDF","openDialogAddPhoto","snagNotes","openedcargoname","userType","showloader","onSwiper","deletePhotoId","closePanel","editClick","deleteClick"],components:{TabView:Rt,TabPanel:ea,Timeline:aa,Button:pa.A,Dialog:ha.A},data(){return{localActiveTab:this.activeTab,localVisibleImagesModal:this.visibleImagesModal}}},ga=a(1241);const ma=(0,ga.A)(ua,[["render",At]]);var va=ma;const fa=(0,i.eW)(" Enter new snag "),ba={class:"container",id:"formContainer"},ya={class:"row insertFormRow align-items-center even"},ka=(0,i.Lk)("div",{class:"col-md-3"},[(0,i.Lk)("label",{for:"newSnagDate"},"Required by Date *")],-1),wa={class:"col-md-9"},Da=(0,i.eW)("This field is required"),Sa={class:"row insertFormRow align-items-center"},Ca=(0,i.Lk)("div",{class:"col-md-3"},[(0,i.Lk)("label",{for:"newSnagTitle"},"Item *")],-1),xa={class:"col-md-9"},Ia=(0,i.eW)("This field is required"),Fa={class:"row insertFormRow align-items-center even"},La=(0,i.Lk)("div",{class:"col-md-3"},[(0,i.Lk)("label",{for:"newSnagCode"},"Code *")],-1),Ta={class:"col-md-9"},Ma=(0,i.eW)("This field is required"),Ba={class:"row insertFormRow align-items-center"},Pa=(0,i.Lk)("div",{class:"col-md-3"},[(0,i.Lk)("label",{for:"newSnagStatus"},"Status * ")],-1),Aa={class:"col-md-9"},Ea=(0,i.eW)("This field is required"),Na={class:"row insertFormRow align-items-center"},Ra={class:"col-md-6 text-left"},_a={class:"col-md-6 text-end"};function Va(e,t,a,n,l,s){const o=(0,i.g2)("Calendar"),d=(0,i.g2)("InlineMessage"),r=(0,i.g2)("InputText"),c=(0,i.g2)("Dropdown"),p=(0,i.g2)("Button"),h=(0,i.g2)("Dialog"),u=(0,i.gN)("tooltip");return(0,i.uX)(),(0,i.Wv)(h,{"onUpdate:visible":[a.closeInsertDialog,t[7]||(t[7]=e=>l.localNewSnagDialog=e)],visible:l.localNewSnagDialog,modal:"",style:{width:"50rem"},breakpoints:{"1199px":"75vw","575px":"90vw"}},{header:(0,i.k6)((()=>[fa])),default:(0,i.k6)((()=>[(0,i.Lk)("div",ba,[(0,i.Lk)("div",ya,[ka,(0,i.Lk)("div",wa,[(0,i.bF)(o,{onChange:t[0]||(t[0]=t=>e.changeDate("from")),style:{"margin-left":"0"},id:"newSnagDate",class:"dateDisplayInput",modelValue:l.newSnagDate,"onUpdate:modelValue":t[1]||(t[1]=e=>l.newSnagDate=e),showIcon:"",dateFormat:"dd/mm/yy",placeholder:"dd/mm/yy",mask:"99/99/9999"},null,8,["modelValue"]),l.newSnagDateOK?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.Wv)(d,{key:0},{default:(0,i.k6)((()=>[Da])),_:1}))])]),(0,i.Lk)("div",Sa,[Ca,(0,i.Lk)("div",xa,[(0,i.bF)(r,{onInput:t[2]||(t[2]=e=>l.newSnagTitleOK=!0),id:"newSnagTitle",modelValue:l.newSnagTitle,"onUpdate:modelValue":t[3]||(t[3]=e=>l.newSnagTitle=e)},null,8,["modelValue"]),l.newSnagTitleOK?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.Wv)(d,{key:0},{default:(0,i.k6)((()=>[Ia])),_:1}))])]),(0,i.Lk)("div",Fa,[La,(0,i.Lk)("div",Ta,[(0,i.bF)(r,{onInput:t[4]||(t[4]=e=>l.newSnagCodeOK=!0),id:"newSnagCode",modelValue:l.newSnagCode,"onUpdate:modelValue":t[5]||(t[5]=e=>l.newSnagCode=e)},null,8,["modelValue"]),l.newSnagCodeOK?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.Wv)(d,{key:0},{default:(0,i.k6)((()=>[Ma])),_:1}))])]),(0,i.Lk)("div",Ba,[Pa,(0,i.Lk)("div",Aa,[(0,i.bF)(c,{modelValue:l.newSnagStatus,"onUpdate:modelValue":t[6]||(t[6]=e=>l.newSnagStatus=e),options:a.allStatuses,optionLabel:"name",placeholder:"Select Status"},null,8,["modelValue","options"]),l.newSnagStatusOK?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.Wv)(d,{key:0},{default:(0,i.k6)((()=>[Ea])),_:1}))])]),(0,i.Lk)("div",Na,[(0,i.Lk)("div",Ra,[(0,i.bo)((0,i.bF)(p,{onClick:a.closeInsertDialog,style:{"min-width":"120px"},icon:"pi pi-times-circle",type:"button",class:"p-button-text redButton",label:"Cancel"},null,8,["onClick"]),[[u,{value:"Cancel",showDelay:1e3,hideDelay:300},void 0,{bottom:!0}]])]),(0,i.Lk)("div",_a,[(0,i.bo)((0,i.bF)(p,{style:{"min-width":"120px"},type:"button",icon:"pi pi-pencil",class:"p-button-text",onClick:s.saveSnag,label:"Save snag"},null,8,["onClick"]),[[u,{value:"Save snag",showDelay:1e3,hideDelay:300},void 0,{bottom:!0}]])])])])])),_:1},8,["onUpdate:visible","visible"])}var Ka=a(6711),Oa=a(1393),Ua=a(2161),Ya=a(9641),Ha=a(9148),Xa=a.n(Ha),Wa={props:["newSnagDialog","allStatuses","closeInsertDialog","insertSnagToDatabase"],components:{Dialog:ha.A,Calendar:Ka.A,InlineMessage:Oa.A,InputText:Ua.A,Dropdown:Ya.A,Button:pa.A},data(){return{localNewSnagDialog:this.newSnagDialog,newSnagDate:"",newSnagTitle:"",newSnagCode:"",newSnagStatus:"0",newSnagDateOK:!0,newSnagTitleOK:!0,newSnagCodeOK:!0,newSnagStatusOK:!0}},mounted(){const e=Xa()();this.newSnagDate=Xa()(String(e)).format("DD/MM/YYYY")},unmounted(){this.resetInputFields()},watch:{newSnagDialog(e){this.localNewSnagDialog=e}},methods:{saveSnag(){var e=!0;if(""==this.newSnagDate?(this.newSnagDateOK=!1,e=!1):this.newSnagDateOK=!0,""==this.newSnagTitle?(this.newSnagTitleOK=!1,e=!1):this.newSnagTitleOK=!0,null==this.newSnagCode?(this.newSnagCodeOK=!1,e=!1):this.newSnagCodeOK=!0,void 0==this.newSnagStatus||""==this.newSnagStatus?(this.newSnagStatus="",e=!1,this.newSnagStatusOK=!1):(this.newSnagStatus=this.newSnagStatus.value,""==this.newSnagStatus?(this.newSnagStatusOK=!1,e=!1):this.newSnagStatusOK=!0),void 0==this.newSnagStatus&&(this.newSnagStatus="",e=!1,this.newSnagStatusOK=!1),1==e){const e=Xa()(this.newSnagDate).format("YYYY-MM-DD HH:mm:ss");this.insertSnagToDatabase({newSnagDate:e,newSnagTitle:this.newSnagTitle,newSnagCode:this.newSnagCode,newSnagStatus:this.newSnagStatus})}},resetInputFields(){this.newSnagDate="",this.newSnagTitle="",this.newSnagCode="",this.newSnagStatus="",this.newSnagDateOK=!0,this.newSnagTitleOK=!0,this.newSnagCodeOK=!0,this.newSnagStatusOK=!0}}};const $a=(0,ga.A)(Wa,[["render",Va]]);var Qa=$a;const za=(0,i.eW)(" Edit Snag "),ja={class:"container",id:"formContainer"},qa={class:"row insertFormRow align-items-center even"},Ga=(0,i.Lk)("div",{class:"col-md-3"},[(0,i.Lk)("label",{for:"editSnagDate"},"Required by Date *")],-1),Ja={class:"col-md-9"},Za=(0,i.eW)("This field is required"),ei={class:"row insertFormRow align-items-center"},ti=(0,i.Lk)("div",{class:"col-md-3"},[(0,i.Lk)("label",{for:"editSnagTitle"},"Item *")],-1),ai={class:"col-md-9"},ii=(0,i.eW)("This field is required"),ni={class:"row insertFormRow align-items-center even"},li=(0,i.Lk)("div",{class:"col-md-3"},[(0,i.Lk)("label",{for:"editSnagStatus"},"Status *")],-1),si={class:"col-md-9"},oi=(0,i.eW)("This field is required"),di={class:"row insertFormRow align-items-center"},ri=(0,i.Lk)("div",{class:"col-md-3"},[(0,i.Lk)("label",{for:"username"},"Code *")],-1),ci={class:"col-md-9"},pi=(0,i.eW)("This field is required"),hi={class:"row insertFormRow align-items-center"},ui={class:"col-md-6 text-left"},gi={class:"col-md-6 text-end"};function mi(e,t,a,n,l,s){const o=(0,i.g2)("Calendar"),d=(0,i.g2)("InlineMessage"),r=(0,i.g2)("InputText"),c=(0,i.g2)("Dropdown"),p=(0,i.g2)("Button"),h=(0,i.g2)("Dialog"),u=(0,i.gN)("tooltip");return(0,i.uX)(),(0,i.Wv)(h,{"onUpdate:visible":[a.closeEditDialog,t[7]||(t[7]=e=>l.localEditSnagDialog=e)],visible:l.localEditSnagDialog,modal:"",style:{width:"50rem"},breakpoints:{"1199px":"75vw","575px":"90vw"}},{header:(0,i.k6)((()=>[za])),default:(0,i.k6)((()=>[(0,i.Lk)("div",ja,[(0,i.Lk)("div",qa,[Ga,(0,i.Lk)("div",Ja,[(0,i.bF)(o,{value:l.editSnagDate,modelValue:l.editSnagDate,"onUpdate:modelValue":t[0]||(t[0]=e=>l.editSnagDate=e),onChange:t[1]||(t[1]=t=>e.changeDate("from")),style:{"margin-left":"0"},id:"editSnagDate",class:"dateDisplayInput",showIcon:"",dateFormat:"dd/mm/yy",placeholder:"dd/mm/yy",mask:"99/99/9999"},null,8,["value","modelValue"]),l.editSnagDateOK?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.Wv)(d,{key:0},{default:(0,i.k6)((()=>[Za])),_:1}))])]),(0,i.Lk)("div",ei,[ti,(0,i.Lk)("div",ai,[(0,i.bF)(r,{onInput:t[2]||(t[2]=e=>l.editSnagTitleOK=!0),id:"editSnagTitle",modelValue:l.editSnagTitle,"onUpdate:modelValue":t[3]||(t[3]=e=>l.editSnagTitle=e)},null,8,["modelValue"]),l.editSnagTitleOK?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.Wv)(d,{key:0},{default:(0,i.k6)((()=>[ii])),_:1}))])]),(0,i.Lk)("div",ni,[li,(0,i.Lk)("div",si,[(0,i.bF)(c,{modelValue:l.editSnagStatus,"onUpdate:modelValue":t[4]||(t[4]=e=>l.editSnagStatus=e),options:a.allStatuses,optionLabel:"name",placeholder:l.editSnagStatus},null,8,["modelValue","options","placeholder"]),l.editSnagStatusOK?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.Wv)(d,{key:0},{default:(0,i.k6)((()=>[oi])),_:1}))])]),(0,i.Lk)("div",di,[ri,(0,i.Lk)("div",ci,[(0,i.bF)(r,{onInput:t[5]||(t[5]=e=>l.editSnagCodeOK=!0),id:"editSnagCode",modelValue:l.editSnagCode,"onUpdate:modelValue":t[6]||(t[6]=e=>l.editSnagCode=e)},null,8,["modelValue"]),l.editSnagCodeOK?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.Wv)(d,{key:0},{default:(0,i.k6)((()=>[pi])),_:1}))])]),(0,i.Lk)("div",hi,[(0,i.Lk)("div",ui,[(0,i.bo)((0,i.bF)(p,{onClick:a.closeEditDialog,style:{"min-width":"120px"},icon:"pi pi-times-circle",type:"button",class:"p-button-text redButton",label:"Cancel"},null,8,["onClick"]),[[u,{value:"Cancel",showDelay:1e3,hideDelay:300},void 0,{bottom:!0}]])]),(0,i.Lk)("div",gi,[(0,i.bo)((0,i.bF)(p,{style:{"min-width":"120px"},type:"button",icon:"pi pi-pencil",class:"p-button-text",onClick:s.saveChanges,label:"Save changes"},null,8,["onClick"]),[[u,{value:"Save changes",showDelay:1e3,hideDelay:300},void 0,{bottom:!0}]])])])])])),_:1},8,["onUpdate:visible","visible"])}var vi={props:["snagData","editSnagDialog","allStatuses","closeEditDialog","editSnagInDatabase"],components:{Dialog:ha.A,Calendar:Ka.A,InlineMessage:Oa.A,InputText:Ua.A,Dropdown:Ya.A,Button:pa.A},data(){return{localEditSnagDialog:this.editSnagDialog,editSnagDate:"",editSnagTitle:"",editSnagCode:"",editSnagStatus:"0",editSnagDateOK:!0,editSnagTitleOK:!0,editSnagCodeOK:!0,editSnagStatusOK:!0}},watch:{editSnagDialog(e){this.localEditSnagDialog=e},snagData(e){this.editSnagDate=Xa()(String(e.date)).format("DD/MM/YYYY"),this.editSnagTitle=e.caption,this.editSnagCode=e.code,this.editSnagStatus=e.status}},methods:{saveChanges(){var e=!0;if(""==this.editSnagDate?(this.editSnagDateOK=!1,e=!1):this.editSnagDateOK=!0,""==this.editSnagTitle?(this.editSnagTitleOK=!1,e=!1):this.editSnagTitleOK=!0,""==this.editSnagCode?(this.editSnagCodeOK=!1,e=!1):this.editSnagCodeOK=!0,this.editSnagStatus.name&&(this.editSnagStatus=this.editSnagStatus.value),""==this.editSnagStatus?(this.editSnagStatusOK=!1,e=!1):this.editSnagStatusOK=!0,1==e){const e=Xa()(this.editSnagDate).format("YYYY-MM-DD HH:mm:ss");this.editSnagInDatabase({editSnagDate:e,editSnagTitle:this.editSnagTitle,editSnagCode:this.editSnagCode,editSnagStatus:this.editSnagStatus})}},resetInputFields(){this.editSnagDate="",this.editSnagTitle="",this.editSnagCode="",this.editSnagStatus="0",this.editSnagDateOK=!0,this.editSnagTitleOK=!0,this.editSnagCodeOK=!0,this.editSnagStatusOK=!0}}};const fi=(0,ga.A)(vi,[["render",mi]]);var bi=fi;const yi=(0,i.Lk)("span",{class:"font-bold text-2xl block mb-2 mt-4"},null,-1),ki={class:"mb-0"},wi={class:"flex text-end gap-2 mt-4"};function Di(e,t,a,l,s,o){const d=(0,i.g2)("Button"),r=(0,i.g2)("Dialog");return(0,i.uX)(),(0,i.Wv)(r,{visible:s.localDisplayInfoDialog,"onUpdate:visible":t[0]||(t[0]=e=>s.localDisplayInfoDialog=e),modal:"",style:{width:"25rem"},breakpoints:{"1199px":"75vw","575px":"90vw"}},{header:(0,i.k6)((()=>[(0,i.Lk)("h4",null,(0,n.v_)(a.infoModalHeader),1)])),default:(0,i.k6)((()=>[yi,(0,i.Lk)("p",ki,(0,n.v_)(a.infoModalMessage),1),(0,i.Lk)("div",wi,[(0,i.bF)(d,{label:"Ok",onClick:a.closeInfo},null,8,["onClick"])])])),_:1},8,["visible"])}var Si={props:["displayInfoDialog","infoModalHeader","infoModalMessage","closeInfo"],components:{Dialog:ha.A,Button:pa.A},data(){return{localDisplayInfoDialog:this.displayInfoDialog}},watch:{displayInfoDialog(e){this.localDisplayInfoDialog=e}}};const Ci=(0,ga.A)(Si,[["render",Di]]);var xi=Ci,Ii=a(3185),Fi=a(9224),Li={name:"ProgressBar",props:{value:{type:Number,default:null},mode:{type:String,default:"determinate"},showValue:{type:Boolean,default:!0}},computed:{containerClass(){return["p-progressbar p-component",{"p-progressbar-determinate":this.determinate,"p-progressbar-indeterminate":this.indeterminate}]},progressStyle(){return{width:this.value+"%",display:"flex"}},indeterminate(){return"indeterminate"===this.mode},determinate(){return"determinate"===this.mode}}};const Ti=["aria-valuenow"],Mi={key:0,class:"p-progressbar-label"},Bi={key:1,class:"p-progressbar-indeterminate-container"},Pi=(0,i.Lk)("div",{class:"p-progressbar-value p-progressbar-value-animate"},null,-1),Ai=[Pi];function Ei(e,t,a,l,s,o){return(0,i.uX)(),(0,i.CE)("div",{role:"progressbar",class:(0,n.C4)(o.containerClass),"aria-valuemin":"0","aria-valuenow":a.value,"aria-valuemax":"100"},[o.determinate?((0,i.uX)(),(0,i.CE)("div",{key:0,class:"p-progressbar-value p-progressbar-value-animate",style:(0,n.Tr)(o.progressStyle)},[null!=a.value&&0!==a.value&&a.showValue?((0,i.uX)(),(0,i.CE)("div",Mi,[(0,i.RG)(e.$slots,"default",{},(()=>[(0,i.eW)((0,n.v_)(a.value+"%"),1)]))])):(0,i.Q3)("",!0)],4)):(0,i.Q3)("",!0),o.indeterminate?((0,i.uX)(),(0,i.CE)("div",Bi,Ai)):(0,i.Q3)("",!0)],10,Ti)}function Ni(e,t){void 0===t&&(t={});var a=t.insertAt;if(e&&"undefined"!==typeof document){var i=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css","top"===a&&i.firstChild?i.insertBefore(n,i.firstChild):i.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}}var Ri="\n.p-progressbar {\n    position: relative;\n    overflow: hidden;\n}\n.p-progressbar-determinate .p-progressbar-value {\n    height: 100%;\n    width: 0%;\n    position: absolute;\n    display: none;\n    border: 0 none;\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-align: center;\n        -ms-flex-align: center;\n            align-items: center;\n    -webkit-box-pack: center;\n        -ms-flex-pack: center;\n            justify-content: center;\n    overflow: hidden;\n}\n.p-progressbar-determinate .p-progressbar-label {\n    display: -webkit-inline-box;\n    display: -ms-inline-flexbox;\n    display: inline-flex;\n}\n.p-progressbar-determinate .p-progressbar-value-animate {\n    -webkit-transition: width 1s ease-in-out;\n    transition: width 1s ease-in-out;\n}\n.p-progressbar-indeterminate .p-progressbar-value::before {\n    content: '';\n    position: absolute;\n    background-color: inherit;\n    top: 0;\n    left: 0;\n    bottom: 0;\n    will-change: left, right;\n    -webkit-animation: p-progressbar-indeterminate-anim 2.1s cubic-bezier(0.65, 0.815, 0.735, 0.395) infinite;\n    animation: p-progressbar-indeterminate-anim 2.1s cubic-bezier(0.65, 0.815, 0.735, 0.395) infinite;\n}\n.p-progressbar-indeterminate .p-progressbar-value::after {\n    content: '';\n    position: absolute;\n    background-color: inherit;\n    top: 0;\n    left: 0;\n    bottom: 0;\n    will-change: left, right;\n    -webkit-animation: p-progressbar-indeterminate-anim-short 2.1s cubic-bezier(0.165, 0.84, 0.44, 1) infinite;\n    animation: p-progressbar-indeterminate-anim-short 2.1s cubic-bezier(0.165, 0.84, 0.44, 1) infinite;\n    -webkit-animation-delay: 1.15s;\n    animation-delay: 1.15s;\n}\n@-webkit-keyframes p-progressbar-indeterminate-anim {\n0% {\n        left: -35%;\n        right: 100%;\n}\n60% {\n        left: 100%;\n        right: -90%;\n}\n100% {\n        left: 100%;\n        right: -90%;\n}\n}\n@keyframes p-progressbar-indeterminate-anim {\n0% {\n        left: -35%;\n        right: 100%;\n}\n60% {\n        left: 100%;\n        right: -90%;\n}\n100% {\n        left: 100%;\n        right: -90%;\n}\n}\n@-webkit-keyframes p-progressbar-indeterminate-anim-short {\n0% {\n        left: -200%;\n        right: 100%;\n}\n60% {\n        left: 107%;\n        right: -8%;\n}\n100% {\n        left: 107%;\n        right: -8%;\n}\n}\n@keyframes p-progressbar-indeterminate-anim-short {\n0% {\n        left: -200%;\n        right: 100%;\n}\n60% {\n        left: 107%;\n        right: -8%;\n}\n100% {\n        left: 107%;\n        right: -8%;\n}\n}\n";Ni(Ri),Li.render=Ei;var _i={name:"Message",emits:["close"],props:{severity:{type:String,default:"info"},closable:{type:Boolean,default:!0},sticky:{type:Boolean,default:!0},life:{type:Number,default:3e3},icon:{type:String,default:null}},timeout:null,data(){return{visible:!0}},mounted(){this.sticky||setTimeout((()=>{this.visible=!1}),this.life)},methods:{close(e){this.visible=!1,this.$emit("close",e)}},computed:{containerClass(){return"p-message p-component p-message-"+this.severity},iconClass(){return["p-message-icon pi",this.icon?this.icon:{"pi-info-circle":"info"===this.severity,"pi-check":"success"===this.severity,"pi-exclamation-triangle":"warn"===this.severity,"pi-times-circle":"error"===this.severity}]}},directives:{ripple:Nt.A}};const Vi={class:"p-message-wrapper"},Ki={class:"p-message-text"},Oi=(0,i.Lk)("i",{class:"p-message-close-icon pi pi-times"},null,-1),Ui=[Oi];function Yi(e,t,a,s,o,d){const r=(0,i.gN)("ripple");return(0,i.uX)(),(0,i.Wv)(l.eB,{name:"p-message",appear:""},{default:(0,i.k6)((()=>[(0,i.bo)((0,i.Lk)("div",{class:(0,n.C4)(d.containerClass),role:"alert"},[(0,i.Lk)("div",Vi,[(0,i.Lk)("span",{class:(0,n.C4)(d.iconClass)},null,2),(0,i.Lk)("div",Ki,[(0,i.RG)(e.$slots,"default")]),a.closable?(0,i.bo)(((0,i.uX)(),(0,i.CE)("button",{key:0,class:"p-message-close p-link",onClick:t[0]||(t[0]=e=>d.close(e)),type:"button"},Ui)),[[r]]):(0,i.Q3)("",!0)])],2),[[l.aG,o.visible]])])),_:3})}function Hi(e,t){void 0===t&&(t={});var a=t.insertAt;if(e&&"undefined"!==typeof document){var i=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css","top"===a&&i.firstChild?i.insertBefore(n,i.firstChild):i.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}}var Xi="\n.p-message-wrapper {\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-align: center;\n        -ms-flex-align: center;\n            align-items: center;\n}\n.p-message-close {\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-align: center;\n        -ms-flex-align: center;\n            align-items: center;\n    -webkit-box-pack: center;\n        -ms-flex-pack: center;\n            justify-content: center;\n}\n.p-message-close.p-link {\n    margin-left: auto;\n    overflow: hidden;\n    position: relative;\n}\n.p-message-enter-from {\n    opacity: 0;\n}\n.p-message-enter-active {\n    -webkit-transition: opacity 0.3s;\n    transition: opacity 0.3s;\n}\n.p-message.p-message-leave-from {\n    max-height: 1000px;\n}\n.p-message.p-message-leave-to {\n    max-height: 0;\n    opacity: 0;\n    margin: 0 !important;\n}\n.p-message-leave-active {\n    overflow: hidden;\n    -webkit-transition: max-height 0.3s cubic-bezier(0, 1, 0, 1), opacity 0.3s, margin 0.15s;\n    transition: max-height 0.3s cubic-bezier(0, 1, 0, 1), opacity 0.3s, margin 0.15s;\n}\n.p-message-leave-active .p-message-close {\n    display: none;\n}\n";Hi(Xi),_i.render=Yi;var Wi={name:"FileUpload",emits:["select","uploader","before-upload","progress","upload","error","before-send","clear","remove"],props:{name:{type:String,default:null},url:{type:String,default:null},mode:{type:String,default:"advanced"},multiple:{type:Boolean,default:!1},accept:{type:String,default:null},disabled:{type:Boolean,default:!1},auto:{type:Boolean,default:!1},maxFileSize:{type:Number,default:null},invalidFileSizeMessage:{type:String,default:"{0}: Invalid file size, file size should be smaller than {1}."},invalidFileTypeMessage:{type:String,default:"{0}: Invalid file type, allowed file types: {1}."},fileLimit:{type:Number,default:null},invalidFileLimitMessage:{type:String,default:"Maximum number of files exceeded, limit is {0} at most."},withCredentials:{type:Boolean,default:!1},previewWidth:{type:Number,default:50},chooseLabel:{type:String,default:null},uploadLabel:{type:String,default:null},cancelLabel:{type:String,default:null},customUpload:{type:Boolean,default:!1},showUploadButton:{type:Boolean,default:!0},showCancelButton:{type:Boolean,default:!0},chooseIcon:{type:String,default:"pi pi-plus"},uploadIcon:{type:String,default:"pi pi-upload"},cancelIcon:{type:String,default:"pi pi-times"},style:null,class:null},duplicateIEEvent:!1,data(){return{uploadedFileCount:0,files:[],messages:[],focused:!1,progress:null}},methods:{onFileSelect(e){if("drop"!==e.type&&this.isIE11()&&this.duplicateIEEvent)return void(this.duplicateIEEvent=!1);this.messages=[],this.files=this.files||[];let t=e.dataTransfer?e.dataTransfer.files:e.target.files;for(let a of t)this.isFileSelected(a)||this.validate(a)&&(this.isImage(a)&&(a.objectURL=window.URL.createObjectURL(a)),this.files.push(a));this.$emit("select",{originalEvent:e,files:this.files}),this.fileLimit&&this.checkFileLimit(),this.auto&&this.hasFiles&&!this.isFileLimitExceeded()&&this.upload(),"drop"!==e.type&&this.isIE11()?this.clearIEInput():this.clearInputElement()},choose(){this.$refs.fileInput.click()},upload(){if(this.customUpload)this.fileLimit&&(this.uploadedFileCount+=this.files.length),this.$emit("uploader",{files:this.files}),this.clear();else{let e=new XMLHttpRequest,t=new FormData;this.$emit("before-upload",{xhr:e,formData:t});for(let a of this.files)t.append(this.name,a,a.name);e.upload.addEventListener("progress",(e=>{e.lengthComputable&&(this.progress=Math.round(100*e.loaded/e.total)),this.$emit("progress",{originalEvent:e,progress:this.progress})})),e.onreadystatechange=()=>{4===e.readyState&&(this.progress=0,e.status>=200&&e.status<300?(this.fileLimit&&(this.uploadedFileCount+=this.files.length),this.$emit("upload",{xhr:e,files:this.files})):this.$emit("error",{xhr:e,files:this.files}),this.clear())},e.open("POST",this.url,!0),this.$emit("before-send",{xhr:e,formData:t}),e.withCredentials=this.withCredentials,e.send(t)}},clear(){this.files=[],this.messages=null,this.$emit("clear"),this.isAdvanced&&this.clearInputElement()},onFocus(){this.focused=!0},onBlur(){this.focused=!1},isFileSelected(e){if(this.files&&this.files.length)for(let t of this.files)if(t.name+t.type+t.size===e.name+e.type+e.size)return!0;return!1},isIE11(){return!!window["MSInputMethodContext"]&&!!document["documentMode"]},validate(e){return this.accept&&!this.isFileTypeValid(e)?(this.messages.push(this.invalidFileTypeMessage.replace("{0}",e.name).replace("{1}",this.accept)),!1):!(this.maxFileSize&&e.size>this.maxFileSize)||(this.messages.push(this.invalidFileSizeMessage.replace("{0}",e.name).replace("{1}",this.formatSize(this.maxFileSize))),!1)},isFileTypeValid(e){let t=this.accept.split(",").map((e=>e.trim()));for(let a of t){let t=this.isWildcard(a)?this.getTypeClass(e.type)===this.getTypeClass(a):e.type==a||this.getFileExtension(e).toLowerCase()===a.toLowerCase();if(t)return!0}return!1},getTypeClass(e){return e.substring(0,e.indexOf("/"))},isWildcard(e){return-1!==e.indexOf("*")},getFileExtension(e){return"."+e.name.split(".").pop()},isImage(e){return/^image\//.test(e.type)},onDragEnter(e){this.disabled||(e.stopPropagation(),e.preventDefault())},onDragOver(e){this.disabled||(Et.DV.addClass(this.$refs.content,"p-fileupload-highlight"),e.stopPropagation(),e.preventDefault())},onDragLeave(){this.disabled||Et.DV.removeClass(this.$refs.content,"p-fileupload-highlight")},onDrop(e){if(!this.disabled){Et.DV.removeClass(this.$refs.content,"p-fileupload-highlight"),e.stopPropagation(),e.preventDefault();const t=e.dataTransfer?e.dataTransfer.files:e.target.files,a=this.multiple||t&&1===t.length;a&&this.onFileSelect(e)}},onBasicUploaderClick(){this.hasFiles?this.upload():this.$refs.fileInput.click()},remove(e){this.clearInputElement();let t=this.files.splice(e,1)[0];this.files=[...this.files],this.$emit("remove",{file:t,files:this.files})},clearInputElement(){this.$refs.fileInput.value=""},clearIEInput(){this.$refs.fileInput&&(this.duplicateIEEvent=!0,this.$refs.fileInput.value="")},formatSize(e){if(0===e)return"0 B";let t=1e3,a=3,i=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],n=Math.floor(Math.log(e)/Math.log(t));return parseFloat((e/Math.pow(t,n)).toFixed(a))+" "+i[n]},isFileLimitExceeded(){return this.fileLimit&&this.fileLimit<=this.files.length+this.uploadedFileCount&&this.focused&&(this.focused=!1),this.fileLimit&&this.fileLimit<this.files.length+this.uploadedFileCount},checkFileLimit(){this.isFileLimitExceeded()&&this.messages.push(this.invalidFileLimitMessage.replace("{0}",this.fileLimit.toString()))},onMessageClose(){this.messages=null}},computed:{isAdvanced(){return"advanced"===this.mode},isBasic(){return"basic"===this.mode},advancedChooseButtonClass(){return["p-button p-component p-fileupload-choose",this.class,{"p-disabled":this.disabled,"p-focus":this.focused}]},basicChooseButtonClass(){return["p-button p-component p-fileupload-choose",this.class,{"p-fileupload-choose-selected":this.hasFiles,"p-disabled":this.disabled,"p-focus":this.focused}]},advancedChooseIconClass(){return["p-button-icon p-button-icon-left pi-fw",this.chooseIcon]},basicChooseButtonIconClass(){return["p-button-icon p-button-icon-left",!this.hasFiles||this.auto?this.uploadIcon:this.chooseIcon]},basicChooseButtonLabel(){return this.auto?this.chooseButtonLabel:this.hasFiles?this.files.map((e=>e.name)).join(", "):this.chooseButtonLabel},hasFiles(){return this.files&&this.files.length>0},chooseDisabled(){return this.disabled||this.fileLimit&&this.fileLimit<=this.files.length+this.uploadedFileCount},uploadDisabled(){return this.disabled||!this.hasFiles||this.fileLimit&&this.fileLimit<this.files.length},cancelDisabled(){return this.disabled||!this.hasFiles},chooseButtonLabel(){return this.chooseLabel||this.$primevue.config.locale.choose},uploadButtonLabel(){return this.uploadLabel||this.$primevue.config.locale.upload},cancelButtonLabel(){return this.cancelLabel||this.$primevue.config.locale.cancel}},components:{FileUploadButton:pa.A,FileUploadProgressBar:Li,FileUploadMessage:_i},directives:{ripple:Nt.A}};const $i={key:0,class:"p-fileupload p-fileupload-advanced p-component"},Qi={class:"p-fileupload-buttonbar"},zi=["multiple","accept","disabled"],ji={class:"p-button-label"},qi={key:1,class:"p-fileupload-files"},Gi=["alt","src","width"],Ji={class:"p-fileupload-filename"},Zi={key:2,class:"p-fileupload-empty"},en={key:1,class:"p-fileupload p-fileupload-basic p-component"},tn={class:"p-button-label"},an=["accept","disabled","multiple"];function nn(e,t,a,s,o,d){const r=(0,i.g2)("FileUploadButton"),c=(0,i.g2)("FileUploadProgressBar"),p=(0,i.g2)("FileUploadMessage"),h=(0,i.gN)("ripple");return d.isAdvanced?((0,i.uX)(),(0,i.CE)("div",$i,[(0,i.Lk)("div",Qi,[(0,i.bo)(((0,i.uX)(),(0,i.CE)("span",{class:(0,n.C4)(d.advancedChooseButtonClass),style:(0,n.Tr)(a.style),onClick:t[1]||(t[1]=(...e)=>d.choose&&d.choose(...e)),onKeydown:t[2]||(t[2]=(0,l.jR)(((...e)=>d.choose&&d.choose(...e)),["enter"])),onFocus:t[3]||(t[3]=(...e)=>d.onFocus&&d.onFocus(...e)),onBlur:t[4]||(t[4]=(...e)=>d.onBlur&&d.onBlur(...e)),tabindex:"0"},[(0,i.Lk)("input",{ref:"fileInput",type:"file",onChange:t[0]||(t[0]=(...e)=>d.onFileSelect&&d.onFileSelect(...e)),multiple:a.multiple,accept:a.accept,disabled:d.chooseDisabled},null,40,zi),(0,i.Lk)("span",{class:(0,n.C4)(d.advancedChooseIconClass)},null,2),(0,i.Lk)("span",ji,(0,n.v_)(d.chooseButtonLabel),1)],38)),[[h]]),a.showUploadButton?((0,i.uX)(),(0,i.Wv)(r,{key:0,label:d.uploadButtonLabel,icon:a.uploadIcon,onClick:d.upload,disabled:d.uploadDisabled},null,8,["label","icon","onClick","disabled"])):(0,i.Q3)("",!0),a.showCancelButton?((0,i.uX)(),(0,i.Wv)(r,{key:1,label:d.cancelButtonLabel,icon:a.cancelIcon,onClick:d.clear,disabled:d.cancelDisabled},null,8,["label","icon","onClick","disabled"])):(0,i.Q3)("",!0)]),(0,i.Lk)("div",{ref:"content",class:"p-fileupload-content",onDragenter:t[5]||(t[5]=(...e)=>d.onDragEnter&&d.onDragEnter(...e)),onDragover:t[6]||(t[6]=(...e)=>d.onDragOver&&d.onDragOver(...e)),onDragleave:t[7]||(t[7]=(...e)=>d.onDragLeave&&d.onDragLeave(...e)),onDrop:t[8]||(t[8]=(...e)=>d.onDrop&&d.onDrop(...e))},[d.hasFiles?((0,i.uX)(),(0,i.Wv)(c,{key:0,value:o.progress},null,8,["value"])):(0,i.Q3)("",!0),((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(o.messages,(e=>((0,i.uX)(),(0,i.Wv)(p,{key:e,severity:"error",onClose:d.onMessageClose},{default:(0,i.k6)((()=>[(0,i.eW)((0,n.v_)(e),1)])),_:2},1032,["onClose"])))),128)),d.hasFiles?((0,i.uX)(),(0,i.CE)("div",qi,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(o.files,((e,t)=>((0,i.uX)(),(0,i.CE)("div",{key:e.name+e.type+e.size,class:"p-fileupload-row"},[(0,i.Lk)("div",null,[d.isImage(e)?((0,i.uX)(),(0,i.CE)("img",{key:0,role:"presentation",alt:e.name,src:e.objectURL,width:a.previewWidth},null,8,Gi)):(0,i.Q3)("",!0)]),(0,i.Lk)("div",Ji,(0,n.v_)(e.name),1),(0,i.Lk)("div",null,(0,n.v_)(d.formatSize(e.size)),1),(0,i.Lk)("div",null,[(0,i.bF)(r,{type:"button",icon:"pi pi-times",onClick:e=>d.remove(t)},null,8,["onClick"])])])))),128))])):(0,i.Q3)("",!0),e.$slots.empty&&!d.hasFiles?((0,i.uX)(),(0,i.CE)("div",Zi,[(0,i.RG)(e.$slots,"empty")])):(0,i.Q3)("",!0)],544)])):d.isBasic?((0,i.uX)(),(0,i.CE)("div",en,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(o.messages,(e=>((0,i.uX)(),(0,i.Wv)(p,{key:e,severity:"error",onClose:d.onMessageClose},{default:(0,i.k6)((()=>[(0,i.eW)((0,n.v_)(e),1)])),_:2},1032,["onClose"])))),128)),(0,i.bo)(((0,i.uX)(),(0,i.CE)("span",{class:(0,n.C4)(d.basicChooseButtonClass),style:(0,n.Tr)(a.style),onMouseup:t[12]||(t[12]=(...e)=>d.onBasicUploaderClick&&d.onBasicUploaderClick(...e)),onKeydown:t[13]||(t[13]=(0,l.jR)(((...e)=>d.choose&&d.choose(...e)),["enter"])),onFocus:t[14]||(t[14]=(...e)=>d.onFocus&&d.onFocus(...e)),onBlur:t[15]||(t[15]=(...e)=>d.onBlur&&d.onBlur(...e)),tabindex:"0"},[(0,i.Lk)("span",{class:(0,n.C4)(d.basicChooseButtonIconClass)},null,2),(0,i.Lk)("span",tn,(0,n.v_)(d.basicChooseButtonLabel),1),d.hasFiles?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("input",{key:0,ref:"fileInput",type:"file",accept:a.accept,disabled:a.disabled,multiple:a.multiple,onChange:t[9]||(t[9]=(...e)=>d.onFileSelect&&d.onFileSelect(...e)),onFocus:t[10]||(t[10]=(...e)=>d.onFocus&&d.onFocus(...e)),onBlur:t[11]||(t[11]=(...e)=>d.onBlur&&d.onBlur(...e))},null,40,an))],38)),[[h]])])):(0,i.Q3)("",!0)}function ln(e,t){void 0===t&&(t={});var a=t.insertAt;if(e&&"undefined"!==typeof document){var i=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css","top"===a&&i.firstChild?i.insertBefore(n,i.firstChild):i.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}}var sn="\n.p-fileupload-content {\n    position: relative;\n}\n.p-fileupload-row {\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-align: center;\n        -ms-flex-align: center;\n            align-items: center;\n}\n.p-fileupload-row > div {\n    -webkit-box-flex: 1;\n        -ms-flex: 1 1 auto;\n            flex: 1 1 auto;\n    width: 25%;\n}\n.p-fileupload-row > div:last-child {\n    text-align: right;\n}\n.p-fileupload-content .p-progressbar {\n    width: 100%;\n    position: absolute;\n    top: 0;\n    left: 0;\n}\n.p-button.p-fileupload-choose {\n    position: relative;\n    overflow: hidden;\n}\n.p-button.p-fileupload-choose input[type='file'] {\n    display: none;\n}\n.p-fileupload-choose.p-fileupload-choose-selected input[type='file'] {\n    display: none;\n}\n.p-fileupload-filename {\n    word-break: break-all;\n}\n.p-fluid .p-fileupload .p-button {\n    width: auto;\n}\n";ln(sn),Wi.render=nn;var on=a(7065),dn=a(8355),rn=a(6587),cn=a.n(rn),pn=a(4369),hn={props:["systemId"],components:{RightSidePanel:va,NewSnagDialog:Qa,EditSnagDialog:bi,InfoDialog:xi,InputText:Ua.A,Button:pa.A,DataTable:Ii.A,Column:Fi.A,Calendar:Ka.A,Dialog:ha.A,InlineMessage:Oa.A,Dropdown:Ya.A,FileUpload:Wi,Checkbox:on.A},emits:["extend-session","showSearchbar"],data(){return{checkAll:!1,ProjectRef:"61196AD9FF1A440A9267D3044E8B595E",showTable:!0,first:0,snagsPage:1,pageSize:100,totalRecords:0,rowsPerPageOptions:[25,50,100,250,500],searchQuery:"",captionFilter:"",codeFilter:"",statusFilter:"",worksPackageFilter:"",areaFilter:"",createdByFilter:"",actionByFilter:"",closedByFilter:"",captionFilterMode:"",codeFilterMode:"",statusFilterMode:"",worksPackageFilterMode:"",areaFilterMode:"",createdByFilterMode:"",actionByFilterMode:"",closedByFilterMode:"",snagDetails:[],snagDetailsData:[],events:[{status:"created",date:"2024-02-01",createdBy:"Ryan Bradley",icon:"pi pi-cog",color:"blue",notes:""},{status:"Uploaded image",date:"2024-02-02",createdBy:"Ryan Bradley",icon:"pi pi-image",color:"lightblue",notes:""},{status:"Edited",date:"2024-02-02",createdBy:"Noel Mullen",icon:"pi pi-pencil",color:"lightblue",notes:"Changed title"},{status:"Accepted",date:"2024-02-02",createdBy:"Noel Mullen",icon:"pi pi-check",color:"green",notes:"All looks ok"},{status:"Closed",date:"2024-02-02",createdBy:"Noel Mullen",icon:"pi pi-star",color:"lightgreen",notes:""},{status:"Reopened",date:"2024-02-02",createdBy:"Ryan Bradley",icon:"pi pi-refresh",color:"blue",notes:"It needs to be reopened"},{status:"Accepted",date:"2024-02-02",createdBy:"Noel Mullen",icon:"pi pi-check",color:"green",notes:"All looks ok"},{status:"Closed",date:"2024-02-02",createdBy:"Evan Blake",icon:"pi pi-star",color:"lightgreen"}],howManyTrips:"",AllPageMarked:!1,AllMarked:!1,sendMultipleInvoiceDialog:!1,showInvoiceSelectedButton:!1,selectedIDsForInvoicing:[],checkedIDs:[],invoiceDate:"",invoiceDateOK:!0,sendInvoiceDialog:!1,displayUnInvoiceConfirm:!1,dataTable:"dataTable",downloadedReport:"",binaryfile:"",photoIdForDelete:"",displayDeletePhotoConfirm:!1,uploadFIlename:"",displayUploadModal:!1,allStatuses:[],ClickedRowId:"",tableHeight:"calc( 100vh - 215px)",displayDeleteConfirm:!1,deletingTripName:"",snagNotes:"",newSnagDialogState:!1,editSnagDialogState:!1,isLoading:!0,userType:"",userLocale:"",loading1:!0,loading2:!0,filters1:null,visibleImagesModal:!1,snagImages:[],picturesTabShow:!1,activeTab:0,SnagDate:"",tripUserEmail:"",tripFrom:"",tripTo:"",tripFixedCosts:"",tripCargoName:"",tripDistance:"",tripDistanceCosts:"",tripVatPercentage:"",tripSum:"",tripSumVAT:"",tripCompanyName:"",tripComments:"",tripCreated:"",tripUserFullName:"",openedcargoname:"",displayInfoDialog:!1,InfoModalHeader:"",InfoModalMessage:"",snagData:{},panelClass:"closedPanel",filters:{global:{value:null,matchMode:pn.Rn.CONTAINS},code:{constraints:[{value:null,matchMode:pn.Rn.CONTAINS}]},caption:{constraints:[{value:null,matchMode:pn.Rn.CONTAINS}]},status:{constraints:[{value:null,matchMode:pn.Rn.CONTAINS}]},createdBy:{constraints:[{value:null,matchMode:pn.Rn.CONTAINS}]},area:{constraints:[{value:null,matchMode:pn.Rn.CONTAINS}]},worksPackage:{constraints:[{value:null,matchMode:pn.Rn.CONTAINS}]},closedBy:{constraints:[{value:null,matchMode:pn.Rn.CONTAINS}]},assignedTo:{constraints:[{value:null,matchMode:pn.Rn.CONTAINS}]}},matchModes:[{label:"Starts With",value:pn.Rn.STARTS_WITH},{label:"Contains",value:pn.Rn.CONTAINS}],allSnags:[],fromDate:"",toDate:""}},methods:{checkAllHandler(){this.allSnags.forEach((e=>{e.checked=this.checkAll}))},async downloadSnagPDF(){const e=this.snagDetails["snag"]["key"],t=this.snagDetails["snag"]["code"],a=this.snagDetails["snag"]["caption"],i=t+" - "+a+".pdf",n=this._rootRestUrl,l=new XMLHttpRequest;l.open("GET",n+"/api/PDF/DownloadSnagPDF/?snagKey="+e,!0),l.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),l.responseType="blob",l.onreadystatechange=function(){if(4==this.readyState&&200==this.status)if(window.navigator.msSaveOrOpenBlob)window.navigator.msSaveBlob(this.response,i);else{const e=window.document.createElement("a"),t=l.getResponseHeader("Content-Type");e.href=window.URL.createObjectURL(new Blob([this.response],{type:t})),e.download=i,document.body.appendChild(e),e.click(),document.body.removeChild(e)}},l.send(null)},selectingForInvoice(e){if(this.checkedIDs[e]){const t=this.selectedIDsForInvoicing.indexOf(e);this.selectedIDsForInvoicing.splice(t,1)}else this.selectedIDsForInvoicing.push(e);this.selectedIDsForInvoicing.length>0?this.showInvoiceSelectedButton=!0:(this.showInvoiceSelectedButton=!1,this.AllPageMarked=!1)},invoiceSelected(){this.invoiceDate=Xa()().format("DD/MM/YYYY HH:mm"),this.sendMultipleInvoiceDialog=!0},reorganizePagination(){cn()(".p-paginator-current").detach().appendTo(".p-paginator-left-content"),cn()(".p-paginator-rpp-options").detach().appendTo(".p-paginator-right-content")},moveSearchBoxToTop(){cn()("#hereMoveSearch").empty(),cn()("#searchBox").detach().appendTo("#hereMoveSearch")},newSnag(){this.newSnagDialogState=!0},async editSnagInDatabase(e){this.panelClass="closedPanel",this.isLoading=!0;const t=this.$store.getters.token,a=this._rootRestUrl;let i=JSON.stringify({key:this.ClickedRowId,sessionId:t,caption:e.editSnagTitle,code:e.editSnagCode,status:e.editSnagStatus,userEmail:"",date:e.editSnagDate.toString()}),n={headers:{"Content-Type":"application/json"}};try{await dn.A.put(a+"/api/Snags/EditSnag",i,n).then((()=>{this.getSnags(),this.getCompanies(),this.editSnagDialogState=!1,this.displayInfoDialog=!0,this.InfoModalHeader="Info",this.InfoModalMessage="Changes are saved",this.isLoading=!1}))}catch(l){this.editSnagDialogState=!1,this.displayInfoDialog=!0,this.InfoModalHeader="Error "+l.response.status,this.InfoModalMessage=l.response.data.Message,this.isLoading=!1}this.extendTime()},async InsertSnagToDatabase(e){this.panelClass="closedPanel",this.isLoading=!0;const t=this._rootRestUrl;let a=JSON.stringify({ProjectRef:this.ProjectRef,type:"Snag",key:"",code:e.newSnagCode,caption:e.newSnagTitle,status:e.newSnagStatus,date:e.newSnagDate.toString()}),i={headers:{"Content-Type":"application/json"}};try{await dn.A.post(t+"/api/Snags/InsertSnag",a,i).then((()=>{this.getSnags(),this.getCompanies(),this.newSnagDialogState=!1,this.displayInfoDialog=!0,this.InfoModalHeader="Info",this.InfoModalMessage="Snag is inserted",this.isLoading=!1}))}catch(n){401==n.response.status&&(alert("Your session is expired! Please login"),localStorage.clear()),this.newSnagDialogState=!1,this.displayInfoDialog=!0,this.InfoModalHeader="Error "+n.response.status,this.InfoModalMessage=n.response.data.Message,this.isLoading=!1}this.extendTime()},closeInfo(){this.displayInfoDialog=!1},handleClose(e){},closeInsertDialog(){this.newSnagDialogState=!1},closeEditDialog(){this.editSnagDialogState=!1},editClick(){this.editSnagDialogState=!0},deleteClick(){this.displayDeleteConfirm=!0},deletePhotoId(e){this.displayDeletePhotoConfirm=!0,this.photoIdForDelete=e},deletePhotoModal(e){this.photoIdForDelete=e,this.deletePhoto()},async deletePhoto(){this.panelClass="closedPanel",this.isLoading=!0;const e=this.$store.getters.token,t=this._rootRestUrl;let a=JSON.stringify({sessionId:e,key:this.photoIdForDelete}),i={headers:{"Content-Type":"application/json"}};try{await dn.A.post(t+"/api/v1/Trip/DeleteTripFile",a,i).then((()=>{this.getSnags(),this.getCompanies(),this.displayDeletePhotoConfirm=!1,this.visibleImagesModal=!1,this.displayInfoDialog=!0,this.InfoModalHeader="Info",this.InfoModalMessage="Photo is deleted",this.isLoading=!1}))}catch(n){401==n.response.status&&(alert("Your session is expired! Please login"),localStorage.clear()),this.displayDeletePhotoConfirm=!1,this.visibleImagesModal=!1,this.displayInfoDialog=!0,this.InfoModalHeader="Error "+n.response.status,this.InfoModalMessage=n.response.data.Message,this.isLoading=!1}this.extendTime()},async deleteTrip(){this.panelClass="closedPanel",this.isLoading=!0;const e=this.$store.getters.token,t=this._rootRestUrl;let a=JSON.stringify({sessionId:e,key:this.ClickedRowId}),i={headers:{"Content-Type":"application/json"}};try{await dn.A.post(t+"/api/v1/Trip/DeleteTrip",a,i).then((()=>{this.getSnags(),this.getCompanies(),this.displayDeleteConfirm=!1,this.displayInfoDialog=!0,this.InfoModalHeader="Info",this.InfoModalMessage="Trip is deleted",this.isLoading=!1}))}catch(n){401==n.response.status&&(alert("Your session is expired! Please login"),localStorage.clear()),this.displayDeleteConfirm=!1,this.displayInfoDialog=!0,this.InfoModalHeader="Error "+n.response.status,this.InfoModalMessage=n.response.data.Message,this.isLoading=!1}this.extendTime()},downloadClick(){},refreshData(){null==this.fromDate&&(this.fromDate=""),null==this.toDate&&(this.toDate=""),this.fromDate.length>0&&(10!=this.fromDate.length&&(this.fromDate=this.format_date(this.fromDate,"DD/MM/YYYY")),10!=this.toDate.length&&(this.toDate=this.format_date(this.toDate,"DD/MM/YYYY"))),this.getSnags(),this.getCompanies()},onSwiper(){},format_date_to_full(e,t){if(e){var a=e.substring(6,10),i=e.substring(3,5),n=e.substring(0,2);return a+"-"+i+"-"+n+" "+t}},format_date_to_full_time(e){if(e){var t=e.substring(6,10),a=e.substring(3,5),i=e.substring(0,2),n=e.substring(11,13),l=e.substring(14,16),s="00";return t+"-"+a+"-"+i+" "+n+":"+l+":"+s}},format_date_to_dateTime(e){var t=e.substring(0,4),a=e.substring(5,7),i=e.substring(8,10),n=e.substring(11,13),l=e.substring(14,16);return i+"/"+a+"/"+t+" "+n+":"+l},async getCompanies(){},extendTime(){this.$emit("extend-session")},async getSnags(e){localStorage.setItem("fromDate",this.fromDate),localStorage.setItem("toDate",this.toDate),this.panelClass="closedPanel",this.isLoading=!0;const t=this._rootRestUrl;let a={headers:{"Content-Type":"application/json"}};var i=[],n=!1;if(""!=this.captionFilter&&null!=this.captionFilter&&(n="contains"==this.captionFilterMode,i.push({name:"caption",value:this.captionFilter,isLike:n,isDate:!1})),""!=this.codeFilter&null!=this.codeFilter&&(n="contains"==this.codeFilterMode,i.push({name:"code",value:this.codeFilter,isLike:n,isDate:!1})),""!=this.statusFilter&null!=this.statusFilter&&(n="contains"==this.statusFilterMode,i.push({name:"status",value:this.statusFilter,isLike:n,isDate:!1})),""!=this.worksPackageFilter&null!=this.worksPackageFilter&&(n="contains"==this.worksPackageFilterMode,i.push({name:"worksPackage",value:this.worksPackageFilter,isLike:n,isDate:!1})),""!=this.areaFilter&null!=this.areaFilter&&(n="contains"==this.areaFilterMode,i.push({name:"area",value:this.areaFilter,isthisLike:!0,isDate:!1})),""!=this.closedByFilter&null!=this.closedByFilter&&(n="contains"==this.closedByFilterMode,i.push({name:"closedBy",value:this.closedByFilter,isLike:n,isDate:!1})),""!=this.actionByFilter&null!=this.actionByFilter&&(n="contains"==this.actionByFilterMode,i.push({name:"assignedTo",value:this.actionByFilter,isLike:n,isDate:!1})),""!=this.createdByFilter&null!=this.createdByFilter&&(n="contains"==this.createdByFilterMode,i.push({name:"createdBy",value:this.createdByFilter,isLike:n,isDate:!1})),void 0!=this.fromDate&&void 0!=this.toDate&&null!=this.fromDate&&null!=this.toDate&&""!=this.fromDate&&""!=this.toDate){var l=this.fromDate,s=this.toDate;l=1e4*Xa()(l).format("x")+621355968e9,s=1e4*Xa()(s).format("x")+621355968e9,i.push({name:"created",value:l+","+s,isLike:n,isDate:!0})}""!=this.searchQuery&&(i+="&searchQuery="+this.searchQuery);var o="";"all"==e?(o=0,this.pageSize=this.totalRecords):o=+this.snagsPage;let d={pageSize:this.pageSize,pageNumber:o,searchQuery:this.searchQuery,filters:i};d=JSON.stringify(d);try{await dn.A.post(t+"/api/Snags/GetAllSnags/",d,a).then((e=>{this.allSnags=e.data.snags,this.totalRecords=e.data.totalRecords,0==this.totalRecords?this.showTable=!1:this.showTable=!0,this.isLoading=!1,this.reorganizePagination(),0==this.allStatuses.length&&this.getStatuses()})),cn()("#sidebar").click()}catch(r){401==r.response.status&&(alert("Your session is expired! Please login"),localStorage.clear()),this.displayInfoDialog=!0,this.InfoModalHeader="Error "+r.response.status,this.InfoModalMessage=r.response.data.Message,this.isLoading=!1}this.extendTime()},async getStatuses(){const e=this._rootRestUrl;let t=JSON.stringify({category:"SNSTAT"}),a={headers:{"Content-Type":"application/json"}};try{await dn.A.get(e+"/api/LookUps/GetStatusLookUps?category=SNSTAT",t,a).then((e=>{this.allStatuses=e.data;var t=JSON.stringify(e.data);t=t.replaceAll('"shortCode"','"value"'),t=t.replaceAll('"description"','"name"'),this.allStatuses=cn().parseJSON(t)}))}catch(i){401==i.response.status&&(alert("Your session is expired! Please login"),localStorage.clear()),this.displayInfoDialog=!0,this.InfoModalHeader="Error "+i.response.status,this.InfoModalMessage=i.response.data.Message,this.isLoading=!1}this.extendTime()},onRowClick(e){this.ClickedRowId=e.data.key,this.snagData={date:e.data.date,caption:e.data.caption,status:e.data.status,code:e.data.code},cn()(".hiddenFields").each((function(){cn()(this).closest("tr").removeClass("highlight")})),cn()(".hiddenFields").each((function(){cn()(this).attr("data")==e.data.key&&cn()(this).closest("tr").addClass("highlight")}))},onRowSelect(e){"I"!=e.originalEvent.target.tagName&&"SPAN"!=e.originalEvent.target.tagName&&(cn()(".hiddenFields").each((function(){cn()(this).closest("tr").removeClass("highlight")})),cn()(".hiddenFields").each((function(){cn()(this).attr("data")==e.data.key&&cn()(this).closest("tr").addClass("highlight")})),this.getDocumentDetails(),this.snagImages.length>0?(this.picturesTabShow=!1,this.activeTab=0):this.picturesTabShow=!0)},openDialogAddPhoto(){this.displayUploadModal=!0},customUploader(e){var t=Date.now(),a=e.files[0];this.uploadImage(a,t+"_"+a.name)},async uploadImage(e,t){this.isLoading=!0;const a=this.$store.getters.token,i=this._rootRestUrl,n=this.ClickedRowId;let l={headers:{"Content-Type":"multipart/form-data"}};var s=new FormData;s.append("Key",""),s.append("Caption",t),s.append("SnagRef",n),s.append("ProjectRef",this.ProjectRef),s.append("SessionId",a),s.append("File",e);try{await dn.A.post(i+"/api/Attachments/InsertPhoto",s,l).then((()=>{this.displayInfoDialog=!0,this.InfoModalHeader="Info",this.InfoModalMessage="Photo is added",this.isLoading=!1,this.displayUploadModal=!1,this.getSnags()}))}catch(o){this.displayInfoDialog=!0,this.InfoModalHeader="Alert!",this.InfoModalMessage="Error occured while uploading photo. Photo is not added!",this.isLoading=!1,this.displayUploadModal=!1,this.getSnags()}this.extendTime()},setInvoiceDateToday(){this.invoiceDate=Xa()().format("DD/MM/YYYY HH:mm"),this.sendInvoiceDialog=!0},invoiceThisTrip(){var e=!0;""==this.invoiceDate?(this.invoiceDateOK=!1,e=!1):this.invoiceDateOK=!0,1==e&&this.markAsInvoicedInDatabase()},invoiceMultipleTrips(){var e=!0;""==this.invoiceDate?(this.invoiceDateOK=!1,e=!1):this.invoiceDateOK=!0,1==e&&this.markAsInvoicedMultipleInDatabase()},async markAsInvoicedInDatabase(){this.isLoading=!0;var e=this.format_date(Xa()(this.invoiceDate,"DD/MM/YYYY HH:mm"),"YYYY-MM-DD HH:mm:ss");const t=this.$store.getters.token,a=this._rootRestUrl;let i=JSON.stringify({tripKey:this.ClickedRowId,sessionId:t,date:e,isInvoiceSent:!0}),n={headers:{"Content-Type":"application/json"}};try{await dn.A.post(a+"/api/v1/Trip/MarkInvoiceAsSent",i,n).then((()=>{this.getSnags(),this.getCompanies(),this.displayInfoDialog=!0,this.sendInvoiceDialog=!1,this.InfoModalHeader="Info",this.InfoModalMessage="Trip is marked as invoiced",this.isLoading=!1,this.checkedIDs=[],this.AllPageMarked=!1}))}catch(l){401==l.response.status&&(alert("Your session is expired! Please login"),localStorage.clear()),this.sendInvoiceDialog=!1,this.displayInfoDialog=!0,this.InfoModalHeader="Error "+l.response.status,this.InfoModalMessage=l.response.data.Message,this.isLoading=!1}this.extendTime()},async markAsInvoicedMultipleInDatabase(){this.isLoading=!0;var e=this.format_date(Xa()(this.invoiceDate,"DD/MM/YYYY HH:mm"),"YYYY-MM-DD HH:mm:ss");const t=this.$store.getters.token,a=this._rootRestUrl;var i='{"sessionId": "'+t+'",';i+='     "invoices": [ ';var n=0,l=[];this.selectedIDsForInvoicing.forEach((t=>{l.push(t),n++,i+="{",i+='"tripKey": "'+t+'",',i+='"isInvoiceSent": true,',i+='"invoiceDate": "'+e+'"',i+="}",n<this.selectedIDsForInvoicing.length&&(i+=",")})),i+="  ]",i+="  }";let s=i,o={headers:{"Content-Type":"application/json"}};try{await dn.A.post(a+"/api/v1/Trip/MarkInvoicesAsSent",s,o).then((()=>{this.getSnags(),this.getCompanies(),this.displayInfoDialog=!0,this.sendMultipleInvoiceDialog=!1,this.showInvoiceSelectedButton=!1,this.InfoModalHeader="Info",this.InfoModalMessage="Trips are marked as invoiced",this.isLoading=!1,l.forEach((e=>{this.checkedIDs[e]=!1;const t=this.selectedIDsForInvoicing.indexOf(e);this.selectedIDsForInvoicing.splice(t,1)}))}))}catch(d){401==d.response.status&&(alert("Your session is expired! Please login"),localStorage.clear()),this.sendInvoiceDialog=!1,this.displayInfoDialog=!0,this.InfoModalHeader="Error "+d.response.status,this.InfoModalMessage=d.response.data.Message,this.isLoading=!1}this.AllPageMarked=!1,this.AllMarked=!1,this.extendTime()},async unInvoiceThisTrip(){this.isLoading=!0;const e=this.$store.getters.token,t=this._rootRestUrl;let a=JSON.stringify({tripKey:this.ClickedRowId,sessionId:e,date:"",isInvoiceSent:!1}),i={headers:{"Content-Type":"application/json"}};try{await dn.A.post(t+"/api/v1/Trip/MarkInvoiceAsSent",a,i).then((()=>{this.getSnags(),this.getCompanies(),this.editSnagDialogState=!1,this.displayInfoDialog=!0,this.displayUnInvoiceConfirm=!1,this.InfoModalHeader="Info",this.InfoModalMessage="Trip is marked as invoiced",this.isLoading=!1}))}catch(n){401==n.response.status&&(alert("Your session is expired! Please login"),localStorage.clear()),this.displayUnInvoiceConfirm=!1,this.displayInfoDialog=!0,this.InfoModalHeader="Error "+n.response.status,this.InfoModalMessage=n.response.data.Message,this.isLoading=!1}this.extendTime()},async getDocumentDetails(){const e=this._rootRestUrl;let t=JSON.stringify({key:this.ClickedRowId}),a={headers:{"Content-Type":"application/json"}};this.isLoading=!0;try{await dn.A.get(e+"/api/Snags/GetSnagDetails/?snagKey="+this.ClickedRowId,t,a).then((e=>{this.snagDetails=e.data,this.isLoading=!1,this.fillPanelData()}))}catch(i){401==i.response.status&&(alert("Your session is expired! Please login"),localStorage.clear()),this.displayInfoDialog=!0,this.InfoModalHeader="Error "+i.response.status,this.InfoModalMessage=i.response.data.Message,this.isLoading=!1}this.extendTime(),this.isLoading=!1},fillPanelData(){this.snagDetailsData=this.snagDetails["snag"];var e=this.snagDetails["snagAttachments"];e.length>0?(this.snagNotes=this.snagDetailsData["notes"],this.snagImages=e,this.picturesTabShow=!0):(this.picturesTabShow=!1,this.snagImages=[]),this.openPanel()},openPanel(){this.panelClass="openedPanel"},closePanel(){this.panelClass="closedPanel"},initFilters1(){this.filters1={global:{value:null,matchMode:pn.Rn.CONTAINS},userFullName:{operator:pn.tl.AND,constraints:[{value:null,matchMode:pn.Rn.CONTAINS}]},from:{operator:pn.tl.AND,constraints:[{value:null,matchMode:pn.Rn.CONTAINS}]},to:{operator:pn.tl.AND,constraints:[{value:null,matchMode:pn.Rn.CONTAINS}]},companyName:{operator:pn.tl.AND,constraints:[{value:null,matchMode:pn.Rn.CONTAINS}]},cargoName:{operator:pn.tl.AND,constraints:[{value:null,matchMode:pn.Rn.CONTAINS}]},distance:{operator:pn.tl.AND,constraints:[{value:null,matchMode:pn.Rn.CONTAINS}]},sumVAT:{operator:pn.tl.AND,constraints:[{value:null,matchMode:pn.Rn.CONTAINS}]},comments:{operator:pn.tl.AND,constraints:[{value:null,matchMode:pn.Rn.CONTAINS}]}}},clearFilter1(){this.initFilters1()},getFiles(){},format_date(e,t){if(e)return Xa()(String(e)).format(t)},showloader(e){this.isLoading=e},async downloadReport(){this.getSnags(),this.isLoading=!0,10!=this.fromDate.length&&(this.fromDate=this.format_date(this.fromDate,"DD/MM/YYYY")),10!=this.toDate.length&&(this.toDate=this.format_date(this.toDate,"DD/MM/YYYY"));const e=this.format_date_to_full(this.fromDate,"00:00:00"),t=this.format_date_to_full(this.toDate,"23:59:59"),a=this.$store.getters.token,i=e,n=t,l=this._rootRestUrl,s="EN";let o=JSON.stringify({sessionId:a,DateFrom:i,DateTo:n,locale:s}),d={headers:{"Content-Type":"application/json"}};try{await dn.A.get(l+"/api/v1/Trip/CSV/Trips/?sessionId="+a+"&DateFrom="+i+"&DateTo="+n+"&locale="+s,o,d).then((e=>{this.downloadedReport=e.data;var t="Report "+this.format_date(i,"YYYY-MM-DD")+" - "+this.format_date(n,"YYYY-MM-DD");this.downloadCSV(this.downloadedReport,t)}))}catch(r){401==r.response.status&&(alert("Your session is expired! Please login"),localStorage.clear()),this.displayUnInvoiceConfirm=!1,this.displayInfoDialog=!0,this.InfoModalHeader="Error "+r.response.status,this.InfoModalMessage=r.response.data.Message,this.isLoading=!1}this.extendTime()},correctData(){this.allSnags.forEach(((e,t)=>{const a=Object.entries(e);a.forEach((e=>{if(e.checked=!1,"invSent"==e[0]){var a="";a=1==e[1]?"Yes":"No",this.allSnags[t]["invSent"]=a}}))}))},downloadCSV(e,t){const a=document.createElement("a");a.setAttribute("href",`data:text/csv;charset=utf-8,${e}`),a.setAttribute("download",t),a.style.display="none",document.body.appendChild(a),a.click(),document.body.removeChild(a),this.isLoading=!1},downloadPDF(){cn()("#downloadPDFlink").remove()},formatMoney(e,t,a,i,n){t=isNaN(t=Math.abs(t))?2:t,a="undefined"===typeof a?".":a,i="undefined"===typeof i?",":i;var l=e<0?"-":"",s=String(parseInt(e=Math.abs(Number(e)||0).toFixed(t))),o=(o=s.length)>3?o%3:0;return n+" "+l+(o?s.substr(0,o)+i:"")+s.substr(o).replace(/(\decSep{3})(?=\decSep)/g,"$1"+i)+(t?a+Math.abs(e-s).toFixed(t).slice(2):"")},showContextMenu:function(e){if("ADMIN"==this.userType.toUpperCase()){e.preventDefault();var t=document.getElementById("div-context-menu");t&&(t.style.left=e.pageX+"px",t.style.top=e.pageY-50+"px",t.style.display="block",t.cid=e.target.id.replace(/title-/,""))}},hideContextMenu:function(){const e=document.getElementById("div-context-menu");e&&(e.style.display="none")},onClick:function(){this.hideContextMenu()},onPage(e){this.pageSize=e.rows,this.snagsPage=1*e["originalEvent"]["page"]+1,this.getSnags()},onSearchInput(){0==this.searchQuery.length&&(this.first=0,this.snagsPage=1,this.getSnags())},onSearch(){(this.searchQuery.length>2||0==this.searchQuery.length)&&(this.first=0,this.snagsPage=1,this.getSnags())},onFilter(e){this.captionFilter=e.filters.caption.constraints[0].value,this.codeFilter=e.filters.code.constraints[0].value,this.statusFilter=e.filters.status.constraints[0].value,this.worksPackageFilter=e.filters.worksPackage.constraints[0].value,this.areaFilter=e.filters.area.constraints[0].value,this.createdByFilter=e.filters.createdBy.constraints[0].value,this.actionByFilter=e.filters.assignedTo.constraints[0].value,this.closedByFilter=e.filters.closedBy.constraints[0].value,null===this.filters.caption.value&&(this.filters.caption.constraints[0].value=null,this.filters.caption.value=null),null===this.filters.code.value&&(this.filters.code.constraints[0].value=null,this.filters.code.value=null),null===this.filters.status.value&&(this.filters.status.constraints[0].value=null,this.filters.status.value=null),null===this.filters.worksPackage.value&&(this.filters.worksPackage.constraints[0].value=null,this.filters.worksPackage.value=null),null===this.filters.area.value&&(this.filters.area.constraints[0].value=null,this.filters.area.value=null),null===this.filters.createdBy.value&&(this.filters.createdBy.constraints[0].value=null,this.filters.createdBy.value=null),null===this.filters.assignedTo.value&&(this.filters.assignedTo.constraints[0].value=null,this.filters.assignedTo.value=null),null===this.filters.closedBy.value&&(this.filters.closedBy.constraints[0].value=null,this.filters.closedBy.value=null),this.captionFilterMode=e.filters.caption.constraints[0].matchMode,this.codeFilterMode=e.filters.code.constraints[0].matchMode,this.statusFilterMode=e.filters.status.constraints[0].matchMode,this.worksPackageFilterMode=e.filters.worksPackage.constraints[0].matchMode,this.areaFilterMode=e.filters.area.constraints[0].matchMode,this.createdByFilterMode=e.filters.createdBy.constraints[0].matchMode,this.actionByFilterMode=e.filters.assignedTo.constraints[0].matchMode,this.closedByFilterMode=e.filters.closedBy.constraints[0].matchMode,null!=this.captionFilter?cn()(".captionColumn .pi-filter-icon").addClass("yellowIcon"):cn()(".captionColumn .pi-filter-icon").removeClass("yellowIcon"),null!=this.codeFilter?cn()(".codeColumn .pi-filter-icon").addClass("yellowIcon"):cn()(".codeColumn .pi-filter-icon").removeClass("yellowIcon"),null!=this.statusFilter?cn()(".statusColumn .pi-filter-icon").addClass("yellowIcon"):cn()(".statusColumn .pi-filter-icon").removeClass("yellowIcon"),null!=this.worksPackageFilter?cn()(".workspackageColumn .pi-filter-icon").addClass("yellowIcon"):cn()(".workspackageColumn .pi-filter-icon").removeClass("yellowIcon"),null!=this.areaFilter?cn()(".areaColumn .pi-filter-icon").addClass("yellowIcon"):cn()(".areaColumn .pi-filter-icon").removeClass("yellowIcon"),null!=this.createdByFilter?cn()(".openedColumn .pi-filter-icon").addClass("yellowIcon"):cn()(".openedColumn .pi-filter-icon").removeClass("yellowIcon"),null!=this.actionByFilter?cn()(".assignedToColumn .pi-filter-icon").addClass("yellowIcon"):cn()(".assignedToColumn .pi-filter-icon").removeClass("yellowIcon"),null!=this.closedByFilter?cn()(".closedByColumn .pi-filter-icon").addClass("yellowIcon"):cn()(".closedByColumn .pi-filter-icon").removeClass("yellowIcon"),this.getSnags()},async SelectAllPage(){var e="",t=[];this.selectedIDsForInvoicing=[],cn()(".p-checkbox").each((function(){var e=cn()(this).parent().attr("data");t.push(e)})),0==this.AllPageMarked?(e="mark",this.showInvoiceSelectedButton=!0):(e="unmark",this.showInvoiceSelectedButton=!1),"mark"==e?t.forEach((e=>{this.selectedIDsForInvoicing.push(e),this.checkedIDs[e]=!0,this.AllPageMarked=!0})):(this.checkedIDs=[],this.AllPageMarked=!1)},SelectAll(e){"select"==e?0==this.AllMarked?this.showInvoiceSelectedButton=!0:this.showInvoiceSelectedButton=!1:(this.selectedIDsForInvoicing=[],this.checkedIDs=[],this.AllMarked=!1,this.AllPageMarked=!1,this.showInvoiceSelectedButton=!1),this.selectedIDsForInvoicing=[],"select"==e&&(this.AllMarked=!0,this.allSnags.forEach((e=>{const t=Object.entries(e);var a="";t.forEach((e=>{"id"==e[0]&&(a=e[1]),"invSent"==e[0]&&"No"==e[1]&&(this.selectedIDsForInvoicing.push(a),this.checkedIDs[a]=!0)}))}))),this.selectedIDsForInvoicing.lenght>0&&(this.showInvoiceSelectedButton=!0)}},mounted(){var e=document.getElementById("app");e.addEventListener("click",this.onClick),this.$emit("showSearchbar",!0),this.getSnags(),this.getCompanies(),this.moveSearchBoxToTop(),cn()("#editIconsPanel").detach().appendTo(".p-tabview-nav-content")},created(){this.aSystemDoc=localStorage.getItem("docType"),this.initFilters1(),this.loading1=!1}};const un=(0,ga.A)(hn,[["render",He]]);var gn=un}}]);
//# sourceMappingURL=4.c189b38f.js.map
"use strict";(self["webpackChunkSnags"]=self["webpackChunkSnags"]||[]).push([[359],{3359:function(i,e,t){t.r(e),t.d(e,{default:function(){return v}});var s=t(3396),o=t(7139);const n={id:"timerDialog",class:"text-center"},d=(0,s._)("h5",null,"Your session will expire soon!",-1),a=(0,s.Uk)(" - "),r=["src"];function h(i,e,t,h,l,c){const p=(0,s.up)("base-dialog"),g=(0,s.up)("base-spinner"),u=(0,s.up)("vue3-flip-countdown"),w=(0,s.up)("top-bar"),m=(0,s.up)("menu-link"),v=(0,s.up)("sidebar-cde"),S=(0,s.up)("router-view");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(p,{show:!!l.error,title:"Error"},null,8,["show"]),(0,s.Wm)(p,{show:l.isLoading,title:"Authenticating...",fixed:""},{default:(0,s.w5)((()=>[(0,s.Wm)(g)])),_:1},8,["show"]),(0,s.Wm)(p,{show:l.showCountDownDialog,fixed:""},{default:(0,s.w5)((()=>[(0,s._)("div",n,[d,(0,s.Wm)(u,{showDays:!1,showHours:!1,mainColor:"#e2e2e2",secondFlipColor:"#ffffff",mainFlipBackgroundColor:"#147d95",secondFlipBackgroundColor:"#730e27",deadline:l.deadline,onTimeElapsed:e[0]||(e[0]=i=>c.sessionExpired())},null,8,["deadline"]),(0,s._)("button",{class:"btn btn-primary",id:"extendSessionButton",onClick:e[1]||(e[1]=(...i)=>c.closeTimeDialog&&c.closeTimeDialog(...i))},"Keep alive")])])),_:1},8,["show"]),(0,s.Wm)(w,{onEmitSearch:c.emitedSearch,"show-search":l.showSearch,"menu-icon":l.iconCloseOpen2,"background-style":"rgb(255,255,255,0.6)","title-color":"black","title-text":l.MainTitleText},null,8,["onEmitSearch","show-search","menu-icon","title-text"]),(0,s._)("div",{class:"wrapper",onMouseup:e[4]||(e[4]=i=>c.endDragging()),style:{position:"relative"}},[l.showMenu?((0,s.wg)(),(0,s.iD)("div",{key:0,id:"sidebar",class:"sidebar table-dark position-relative",style:(0,o.j5)({width:`${l.dividerPosition}px`,minWidth:`${l.dividerPosition}px`})},[l.showLeftMenu?((0,s.wg)(),(0,s.iD)("div",{key:0,class:(0,o.C_)(["sidebarTopMenu",{textcenter:l.isCentered}])},[(0,s.Wm)(m,{atitle:"Snags",link:"/pages/snags",icon:"fa-solid fa-list",iconsize:"21",isActive:l.isActive},null,8,["isActive"]),"ADMIN"==l.userType?((0,s.wg)(),(0,s.j4)(m,{key:0,atitle:"Manage users",link:"/pages/manageUsers",icon:"fa-solid fa-users",iconsize:"17",isActive:l.isActive},null,8,["isActive"])):(0,s.kq)("",!0),l.isCDE?((0,s.wg)(),(0,s.j4)(v,{key:1,isActive:l.isActive},null,8,["isActive"])):(0,s.kq)("",!0),a,(0,s._)("img",{src:i._rootLoginLogo,class:"sideBarAppLogo"},null,8,r)],2)):(0,s.kq)("",!0)],4)):(0,s.kq)("",!0),l.showMenu?((0,s.wg)(),(0,s.iD)("div",{key:1,id:"divider",class:"divider",style:(0,o.j5)({left:`${l.dividerPosition}px`}),onMousedown:e[2]||(e[2]=i=>c.startDragging())},null,36)):(0,s.kq)("",!0),(0,s._)("div",{id:"content",class:"content",style:(0,o.j5)({paddingLeft:`${l.dividerPosition}px`,width:`${l.contentWidth}px`})},[(0,s._)("section",null,[(0,s._)("div",{class:"container-fluid allContent",style:(0,o.j5)({padding:`${this.padding0}`})},[(0,s.Wm)(S,{onExtendSession:e[3]||(e[3]=i=>c.showExtendPopupDialog())})],4)])],4)],32)],64)}var l=t(6797),c=t.n(l),p=t(6265),g=t.n(p),u={props:["emitSearch"],components:{},data(){return{showLeftMenu:!0,countdownSize:"width:20rem",deadline:"2023-12-25 00:00:00",timerExtend:"",showCountDownDialog:!1,isLoading:!1,error:!1,TopBackgroundStyle:"",showSearch:!1,MainTitleText:"",showMenu:!0,userType:"",isCDE:!1,isQMS:!1,isSafetyfile:!1,padding0:"12px",menuMinSize:0,breakPointHideSidebarDescriptions:120,dividerPosition:210,contentWidth:window.innerWidth,isActive:!0,isCentered:!1,iconCloseOpen:"&#9776;",iconCloseOpen2:"&#9776;",timeout:""}},methods:{handleDragging(i){const e=i.pageX/window.innerWidth*100;localStorage.getItem("dividerPosition")&&(this.dividerPosition=localStorage.getItem("dividerPosition")),i.pageX+1>this.menuMinSize&&e<=30&&(this.dividerPosition=e/100*window.innerWidth),this.contentWidth=window.innerWidth,i.pageX<this.breakPointHideSidebarDescriptions?(this.isActive=!1,this.iconCloseOpen="&#9776;"):(this.isActive=!0,this.iconCloseOpen="&#9776;",this.isCentered=!1),this.emitter.emit("newDimensions",this.dividerPosition),localStorage.setItem("dividerPosition",this.dividerPosition),this.dividerPosition<50?this.showLeftMenu=!1:this.showLeftMenu=!0},startDragging(){document.addEventListener("mousemove",this.handleDragging)},endDragging(){document.removeEventListener("mousemove",this.handleDragging)},setToFullScreenWidth(){this.contentWidth=window.innerWidth;var i=localStorage.getItem("isSideBarOpen");localStorage.getItem("dividerPosition")?this.dividerPosition=localStorage.getItem("dividerPosition"):(localStorage.setItem("dividerPosition",200),this.dividerPosition=200),localStorage.getItem("isSideBarOpen")?"true"===i?(this.iconCloseOpen="&#9776;",this.isActive=!1,this.sidebarColapseOnLoad()):(this.iconCloseOpen="&times;",this.isActive=!1,this.sidebarColapseOnLoad()):"&#9776;"===this.iconCloseOpen?(localStorage.setItem("isSideBarOpen",!0),this.sidebarColapseOnLoad()):(localStorage.setItem("isSideBarOpen",!1),this.sidebarColapseOnLoad()),this.dividerPosition<50?this.showLeftMenu=!1:this.showLeftMenu=!0},getDimensions(){window.innerWidth>442?(this.dividerPosition=200,this.contentWidth=window.innerWidth,this.isActive=!0,this.iconCloseOpen="&times;",this.isCentered=!1):(this.dividerPosition=this.menuMinSize,this.isActive=!1,this.iconCloseOpen="&#9776;"),window.innerWidth<500&&(this.dividerPosition=this.menuMinSize,this.contentWidth=window.innerWidth,this.isActive=!1,this.iconCloseOpen="&#9776;")},sidebarColapse(){"&#9776;"===this.iconCloseOpen?(localStorage.getItem("dividerPosition")?this.dividerPosition=localStorage.getItem("dividerPosition"):this.dividerPosition=200,this.dividerPosition<200&&(this.dividerPosition=200),this.contentWidth=window.innerWidth,this.isActive=!0,this.isCentered=!1,this.iconCloseOpen="&times;",localStorage.setItem("isSideBarOpen",!0),this.showLeftMenu=!0):(this.dividerPosition=this.menuMinSize,this.contentWidth=window.innerWidth,this.isActive=!1,this.iconCloseOpen="&#9776;",localStorage.setItem("isSideBarOpen",!1),this.showLeftMenu=!1),this.emitter.emit("newDimensions",this.dividerPosition),localStorage.setItem("dividerPosition",this.dividerPosition)},sidebarColapseOnLoad(){"&#9776;"===this.iconCloseOpen?(localStorage.getItem("dividerPosition")?this.dividerPosition=localStorage.getItem("dividerPosition"):this.dividerPosition=200,this.contentWidth=window.innerWidth,this.isActive=!0,this.isCentered=!1,this.iconCloseOpen="&times;",localStorage.setItem("isSideBarOpen",!0)):(this.dividerPosition=this.menuMinSize,this.contentWidth=window.innerWidth,this.isActive=!1,this.iconCloseOpen="&#9776;",localStorage.setItem("isSideBarOpen",!1)),this.dividerPosition<this.breakPointHideSidebarDescriptions&&(this.isActive=!1,this.iconCloseOpen="&#9776;")},manualLogout(){this.$store.dispatch("logout"),this.showMenu=!1,this.$router.replace("/")},showSeachbar(i){this.showSearch=i},appType(i){this.isCDE=!1,this.isQMS=!1,this.isSafetyfile=!1,"CDE"==i&&(this.isCDE=!0),"QMS"==i&&(this.isQMS=!0),"SafetyFile"==i&&(this.isSafetyfile=!0)},showExtendPopupDialog(){const i=15,e=i-1;var t=localStorage.getItem("expiresIn");const s=c()(),o=1*s+6e4*i;this.deadline=c()(o).format("YYYY-MM-DD HH:mm:ss"),this._whenSessionExpire=this.LocalDeadLine,t=6e4*e,clearTimeout(this.timeout),this.timeout=setTimeout((()=>{this.showCountDownDialog=!0}),t)},async extendSessionInDatabase(){const i=this.$store.getters.token,e=localStorage.getItem("_rootRestUrl");let t=JSON.stringify({sessionId:i}),s={headers:{"Content-Type":"application/json"}};await g().put(e+"/api/v1/Auth/ExtendSession/",t,s).then((()=>{this.showExtendPopupDialog()})).catch((function(i){"401"==i.response.status&&(localStorage.clear(),document.location="/"),console.table(i)})),this.showExtendPopupDialog()},sessionExpired(){this.$store.dispatch("logout")},closeTimeDialog(){this.showCountDownDialog=!1,this.extendSessionInDatabase()},emitedSearch(){}},mounted(){window.addEventListener("resize",this.getDimensions),this.showExtendPopupDialog()},unmounted(){window.removeEventListener("resize",this.getDimensions)},created(){const i=localStorage.getItem("appType");"CDE"==i&&(this.isCDE=!0),this.setToFullScreenWidth(),this.$store.getters.isAuthenticated||this.$router.replace("/"),window.innerWidth}},w=t(89);const m=(0,w.Z)(u,[["render",h]]);var v=m}}]);
//# sourceMappingURL=359.35670055.js.map
"use strict";(self["webpackChunkSnags"]=self["webpackChunkSnags"]||[]).push([[56],{7056:function(e,t,i){i.r(t),i.d(t,{default:function(){return Ji}});var a=i(3396),n=i(7139),s=i(9242);const l={class:"p-input-icon-right",id:"searchBox"},o={class:"row"},d={class:"col-md-4"},r=(0,a.Uk)("   "),c=(0,a.Uk)("   "),h={class:"col-md-8 text-end"},p=(0,a.Uk)(" Loading data. Please wait... "),u={style:{display:"inline-block",width:"85%","padding-right":"50px"}},g={key:0,style:{fdisplay:"inline-block",display:"block",width:"15%"}},m=(0,a._)("i",{class:"fa fa-camera"},null,-1),f=[m],v=(0,a._)("div",{style:{right:"20px",position:"absolute"}},[(0,a._)("div",{style:{float:"right"}},"Actions")],-1),b={class:"actionButtonsHolderTable"},w=(0,a._)("i",{class:"fa-solid fa-square fa-stack-2x"},null,-1),y=(0,a._)("i",{class:"fa-stack-1x fa-solid fa-pen-to-square",style:{color:"white"}},null,-1),S=[w,y],D=(0,a._)("i",{class:"fa-solid fa-square fa-stack-2x"},null,-1),k=(0,a._)("i",{class:"fa-stack-1x fa-solid fa-trash-can",style:{color:"white"}},null,-1),C=[D,k],I={key:0,class:"alert alert-danger text-center"},x={class:"row"},_={class:"col-md-12 text-end"},T={class:"row"},M={class:"col text-center"},F={id:"detailsHeadline"},P={class:"row",style:{}},A={class:"col text-center",style:{padding:"19px"}},B={class:"table table-striped table-sm",id:"detailsTable"},N=(0,a._)("td",{style:{width:"160px"}},"Assigneg To:",-1),O=(0,a._)("td",null,"Title",-1),K=(0,a._)("td",null,"Code",-1),U=(0,a._)("td",null,"Inspection No",-1),L={class:"row"},Y={class:"col text-end",style:{padding:"0"}},E={class:"row",style:{"margin-top":"12px"}},W={class:"col text-end",style:{padding:"0"}},R=(0,a.Uk)(" Enter new snag "),H={class:"container",id:"formContainer"},V={class:"row insertFormRow align-items-center even"},$=(0,a._)("div",{class:"col-md-3"},[(0,a._)("label",{for:"newSnagDate"},"Date *")],-1),z={class:"col-md-9"},q=(0,a.Uk)("This field is required"),j={class:"row insertFormRow align-items-center"},Z=(0,a._)("div",{class:"col-md-3"},[(0,a._)("label",{for:"newSnagTitle"},"Item *")],-1),Q={class:"col-md-9"},G=(0,a.Uk)("This field is required"),J={class:"row insertFormRow align-items-center even"},X=(0,a._)("div",{class:"col-md-3"},[(0,a._)("label",{for:"newSnagCode"},"Code *")],-1),ee={class:"col-md-9"},te=(0,a.Uk)("This field is required"),ie={class:"row insertFormRow align-items-center"},ae=(0,a._)("div",{class:"col-md-3"},[(0,a._)("label",{for:"newSnagStatus"},"Status * ")],-1),ne={class:"col-md-9"},se=(0,a.Uk)("This field is required"),le={class:"row insertFormRow align-items-center"},oe={class:"col-md-6 text-left"},de={class:"col-md-6 text-end"},re=(0,a.Uk)(" Edit Snag "),ce={class:"container",id:"formContainer"},he={class:"row insertFormRow align-items-center even"},pe=(0,a._)("div",{class:"col-md-3"},[(0,a._)("label",{for:"editSnagDate"},"Date *")],-1),ue={class:"col-md-9"},ge=(0,a.Uk)("This field is required"),me={class:"row insertFormRow align-items-center"},fe=(0,a._)("div",{class:"col-md-3"},[(0,a._)("label",{for:"editSnagTitle"},"Item *")],-1),ve={class:"col-md-9"},be=(0,a.Uk)("This field is required"),we={class:"row insertFormRow align-items-center even"},ye=(0,a._)("div",{class:"col-md-3"},[(0,a._)("label",{for:"editSnagStatus"},"Status *")],-1),Se={class:"col-md-9"},De=(0,a.Uk)("This field is required"),ke={class:"row insertFormRow align-items-center"},Ce=(0,a._)("div",{class:"col-md-3"},[(0,a._)("label",{for:"username"},"Code *")],-1),Ie={class:"col-md-9"},xe=(0,a.Uk)("This field is required"),_e={class:"row insertFormRow align-items-center"},Te={class:"col-md-6 text-left"},Me={class:"col-md-6 text-end"},Fe=(0,a._)("span",{class:"font-bold text-2xl block mb-2 mt-4"},null,-1),Pe={class:"mb-0"},Ae={class:"flex text-end gap-2 mt-4"},Be=(0,a._)("h4",null," Please confirm",-1),Ne=(0,a._)("span",{class:"font-bold text-2xl block mb-2 mt-4"},null,-1),Oe={class:"mb-0"},Ke=(0,a.Uk)("Are you sure that you want to Delete Snag "),Ue=(0,a.Uk)("?"),Le={class:"row",style:{"margin-top":"30px"}},Ye={class:"col-md-6 text-start"},Ee={class:"col-md-6 text-end"},We=(0,a._)("h4",null," Please confirm",-1),Re=(0,a._)("span",{class:"font-bold text-2xl block mb-2 mt-4"},null,-1),He={class:"mb-0"},Ve=(0,a.Uk)("Are you sure that you want to remove mark 'Invoiced'"),$e=(0,a._)("br",null,null,-1),ze=(0,a.Uk)(" for trip "),qe=(0,a.Uk)("?"),je={class:"row",style:{"margin-top":"30px"}},Ze={class:"col-md-6 text-start"},Qe={class:"col-md-6 text-end"},Ge=(0,a.Uk)(" Mark this trip as Invoiced "),Je={class:"container",id:"formContainer"},Xe={class:"row insertFormRow align-items-center even"},et=(0,a._)("div",{class:"col-md-3"},[(0,a._)("label",{for:"invoiceDate"},"Invoice Date *")],-1),tt={class:"col-md-9"},it=(0,a.Uk)("This field is required"),at={class:"row insertFormRow align-items-center"},nt={class:"col-md-6 text-left"},st={class:"col-md-6 text-end"},lt={key:0},ot={key:1},dt=(0,a.Uk)("Mark selected "),rt={style:{"font-weight":"bold"}},ct=(0,a.Uk)(" as Invoiced"),ht={class:"container",id:"formContainer"},pt={class:"row insertFormRow align-items-center even"},ut=(0,a._)("div",{class:"col-md-3"},[(0,a._)("label",{for:"invoiceDate"},"Invoice Date *")],-1),gt={class:"col-md-9"},mt=(0,a.Uk)("This field is required"),ft={class:"row insertFormRow align-items-center"},vt={class:"col-md-6 text-left"},bt={class:"col-md-6 text-end"},wt=(0,a._)("h4",null," Please confirm",-1),yt=(0,a._)("span",{class:"font-bold text-2xl block mb-2 mt-4"},null,-1),St=(0,a._)("p",{class:"mb-0"},"Are you sure that you want to delete this photo?",-1),Dt={class:"row",style:{"margin-top":"30px"}},kt={class:"col-md-6 text-start"},Ct={class:"col-md-6 text-end"},It=(0,a._)("h4",null," Upload photo",-1),xt={class:"row",style:{"margin-top":"30px"}},_t={class:"col"},Tt=(0,a._)("p",null,"Drag and drop files to here to upload.",-1),Mt={id:"div-context-menu",class:"cls-context-menu",style:{left:"11px",top:"13px",display:"none"}},Ft={key:0},Pt={key:1},At={key:2};function Bt(e,t,i,m,w,y){const D=(0,a.up)("base-spinner"),k=(0,a.up)("base-dialog"),Bt=(0,a.up)("InputText"),Nt=(0,a.up)("Button"),Ot=(0,a.up)("Calendar"),Kt=(0,a.up)("Column"),Ut=(0,a.up)("DataTable"),Lt=(0,a.up)("TabPanel"),Yt=(0,a.up)("SwiperCarousel"),Et=(0,a.up)("TabView"),Wt=(0,a.up)("Dialog"),Rt=(0,a.up)("InlineMessage"),Ht=(0,a.up)("Dropdown"),Vt=(0,a.up)("FileUpload"),$t=(0,a.Q2)("tooltip");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(k,{show:w.isLoading,title:"Authenticating...",fixed:""},{default:(0,a.w5)((()=>[(0,a.Wm)(D)])),_:1},8,["show"]),(0,a._)("span",l,[(0,a.Wm)(Bt,{modelValue:w.searchQuery,"onUpdate:modelValue":t[0]||(t[0]=e=>w.searchQuery=e),placeholder:"Keyword Search",onChange:y.onSearch,onInput:y.onSearchInput},null,8,["modelValue","onChange","onInput"]),(0,a._)("i",{class:"pi pi-search",onClick:t[1]||(t[1]=(...e)=>y.onSearch&&y.onSearch(...e))})]),(0,a._)("div",{style:{width:"100%"},onContextmenu:t[12]||(t[12]=e=>y.showContextMenu(e))},[(0,a.Wm)(Ut,{totalRecords:w.totalRecords,id:w.dataTable,value:w.allSnags,lazy:"",paginator:!0,rows:w.pageSize,first:w.first,dataKey:"id",stripedRows:"",filters:w.filters,"onUpdate:filters":t[8]||(t[8]=e=>w.filters=e),filterDisplay:"menu",key:"key",onPage:t[9]||(t[9]=e=>y.onPage(e)),onSort:t[10]||(t[10]=t=>e.onSort(t)),onFilter:t[11]||(t[11]=e=>y.onFilter(e)),onRowSelect:y.onRowSelect,onRowClick:y.onRowClick,paginatorTemplate:"CurrentPageReport FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink RowsPerPageDropdown",paginatorStart:"CurrentPageReport",rowsPerPageOptions:[25,50,100,250,500],responsiveLayout:"scroll",currentPageReportTemplate:"Showing {first} to {last} of total {totalRecords} snags",globalFilterFields:["code","title"],selectionMode:"single",loading:w.loading1,scrollable:"",scrollHeight:w.tableHeight},{header:(0,a.w5)((()=>[(0,a._)("div",o,[(0,a._)("div",d,[(0,a.wy)((0,a.Wm)(Nt,{style:{"min-width":"120px"},type:"button",icon:"pi pi-pencil",class:"p-button-text",id:"newSnagButton",onClick:y.newSnag,label:"New snag"},null,8,["onClick"]),[[$t,{value:"New Snag",showDelay:1e3,hideDelay:300},void 0,{bottom:!0}]]),r,(0,a.wy)((0,a.Wm)(Nt,{style:{"min-width":"120px"},type:"button",icon:"pi pi-download",class:"p-button-text",id:"downloadReport",onClick:y.downloadReport,label:"Download Report"},null,8,["onClick"]),[[$t,{value:"Download report",showDelay:1e3,hideDelay:300},void 0,{bottom:!0}]]),c,w.showInvoiceSelectedButton&&"ADMIN"==w.userType?(0,a.wy)(((0,a.wg)(),(0,a.j4)(Nt,{key:0,style:{"min-width":"120px"},type:"button",icon:"pi pi-check-circle",class:"p-button-text",id:"invoiceSelected",onClick:y.invoiceSelected,label:"Invoice selected"},null,8,["onClick"])),[[$t,{value:"Invoice selected",showDelay:1e3,hideDelay:300},void 0,{bottom:!0}]]):(0,a.kq)("",!0)]),(0,a._)("div",h,[(0,a.wy)((0,a.Wm)(Ot,{style:{width:"160px"},id:"fromDateBox",class:"dateDisplayInput",modelValue:w.fromDate,"onUpdate:modelValue":t[2]||(t[2]=e=>w.fromDate=e),showIcon:"",dateFormat:"dd/mm/yy",placeholder:"dd/mm/yy",mask:"99/99/9999",onChange:t[3]||(t[3]=t=>e.changeDate("from"))},null,8,["modelValue"]),[[$t,{value:"Date from",showDelay:1e3,hideDelay:300},void 0,{bottom:!0}]]),(0,a.wy)((0,a.Wm)(Ot,{style:{width:"160px"},id:"toDateBox",class:"dateDisplayInput",modelValue:w.toDate,"onUpdate:modelValue":t[4]||(t[4]=e=>w.toDate=e),showIcon:"",dateFormat:"dd/mm/yy",placeholder:"dd/mm/yy",mask:"99/99/9999",onChange:t[5]||(t[5]=t=>e.changeDate("to"))},null,8,["modelValue"]),[[$t,{value:"Date to",showDelay:1e3,hideDelay:300},void 0,{bottom:!0}]]),(0,a.Wm)(Nt,{type:"button",icon:"pi pi-refresh",class:"p-button-text",id:"refreshButton",onClick:y.refreshData},null,8,["onClick"])])])])),empty:(0,a.w5)((()=>[])),loading:(0,a.w5)((()=>[p])),paginatorstart:(0,a.w5)((()=>[])),paginatorend:(0,a.w5)((()=>[])),default:(0,a.w5)((()=>[(0,a.Wm)(Kt,{field:"date",header:"Date Opened",style:{"min-width":"10rem","min-height":"43px"}},{body:(0,a.w5)((({data:e})=>[(0,a.Uk)((0,n.zw)(y.format_date(e.date,"DD/MM/YYYY")),1)])),_:1}),(0,a.Wm)(Kt,{field:"code",header:"Code",bodyStyle:"text-align: left",style:{"min-height":"43px"}},{filter:(0,a.w5)((({filterModel:e,filterCallback:t})=>[(0,a.Wm)(Bt,{type:"text",modelValue:e.value,"onUpdate:modelValue":t=>e.value=t,onKeydown:(0,s.D2)((e=>t()),["enter"]),class:"p-column-filter",placeholder:"Search"},null,8,["modelValue","onUpdate:modelValue","onKeydown"])])),_:1}),(0,a.Wm)(Kt,{field:"caption",header:"Item",bodyStyle:"text-align: left",style:{"min-height":"43px","min-width":"320px"}},{body:(0,a.w5)((({data:e})=>[(0,a._)("div",u,(0,n.zw)(e.caption),1),""!=e.hasPhoto?((0,a.wg)(),(0,a.iD)("div",g,f)):(0,a.kq)("",!0)])),filter:(0,a.w5)((({filterModel:e,filterCallback:t})=>[(0,a.Wm)(Bt,{type:"text",modelValue:e.value,"onUpdate:modelValue":t=>e.value=t,onKeydown:(0,s.D2)((e=>t()),["enter"]),class:"p-column-filter",placeholder:"Search"},null,8,["modelValue","onUpdate:modelValue","onKeydown"])])),_:1}),(0,a.Wm)(Kt,{field:"status",header:"Status",bodyStyle:"text-align: left",style:{"min-height":"43px"}},{filter:(0,a.w5)((({filterModel:e,filterCallback:t})=>[(0,a.Wm)(Bt,{type:"text",modelValue:e.value,"onUpdate:modelValue":t=>e.value=t,onKeydown:(0,s.D2)((e=>t()),["enter"]),class:"p-column-filter",placeholder:"Search"},null,8,["modelValue","onUpdate:modelValue","onKeydown"])])),_:1}),(0,a.Wm)(Kt,{field:"assignedTo",header:"Action By",bodyStyle:"text-align: left",style:{"min-height":"43px"}}),(0,a.Wm)(Kt,{field:"area",header:"Location",bodyStyle:"text-align: left",style:{"min-height":"43px"}}),(0,a.Wm)(Kt,{field:"workpackage",header:"Work Package",bodyStyle:"text-align: left",style:{"min-height":"43px"}}),(0,a.Wm)(Kt,{field:"createdBy",header:"Owner",bodyStyle:"text-align: left",style:{"min-height":"43px"}}),(0,a.Wm)(Kt,{field:"signOffDate",header:"Closed Date",style:{"min-width":"10rem","min-height":"43px"}},{body:(0,a.w5)((({data:e})=>[(0,a.Uk)((0,n.zw)(y.format_date(e.closeddate,"DD/MM/YYYY")),1)])),_:1}),(0,a.Wm)(Kt,{field:"closedBy",header:"Closed By",bodyStyle:"text-align: left",style:{"min-height":"43px"}}),(0,a.Wm)(Kt,{field:"",header:"",bodyStyle:"text-align: left",style:{"min-height":"43px"}},{header:(0,a.w5)((()=>[v])),body:(0,a.w5)((()=>[(0,a._)("div",b,[(0,a.wy)(((0,a.wg)(),(0,a.iD)("div",{class:"fa-stack fa-2x actionIcons",style:{"font-size":"15px"},onClick:t[6]||(t[6]=(...e)=>y.editClick&&y.editClick(...e))},S)),[[$t,{value:"Edit Snag",showDelay:1e3,hideDelay:300},void 0,{bottom:!0}]]),(0,a.wy)(((0,a.wg)(),(0,a.iD)("div",{class:"fa-stack fa-2x actionIcons",style:{"font-size":"15px",color:"#aa0000"},onClick:t[7]||(t[7]=(...e)=>y.deleteClick&&y.deleteClick(...e))},C)),[[$t,{value:"Delete Snag",showDelay:1e3,hideDelay:300},void 0,{left:!0}]])])])),_:1})])),_:1},8,["totalRecords","id","value","rows","first","filters","onRowSelect","onRowClick","loading","scrollHeight"])],32),w.showTable?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("div",I," Snags not found! ")),(0,a._)("div",{id:"RightSidepanel",class:(0,n.C_)(["RightSidepanel",w.panelClass])},[(0,a._)("div",x,[(0,a._)("div",_,[(0,a._)("i",{class:"pi pi-times cursorHand closePanelButton",onClick:t[13]||(t[13]=(...e)=>y.closePanel&&y.closePanel(...e))})])]),(0,a._)("div",T,[(0,a._)("div",M,[(0,a._)("h5",F,(0,n.zw)(w.tripCargoName),1)])]),(0,a._)("div",P,[(0,a._)("div",A,[(0,a.Wm)(Et,{activeIndex:w.activeTab,"onUpdate:activeIndex":t[14]||(t[14]=e=>w.activeTab=e)},{default:(0,a.w5)((()=>[(0,a.Wm)(Lt,{header:"Details"},{default:(0,a.w5)((()=>[(0,a._)("table",B,[(0,a._)("tbody",null,[(0,a._)("tr",null,[N,(0,a._)("td",null,(0,n.zw)(w.snagDetailsData.assignedTo),1)]),(0,a._)("tr",null,[O,(0,a._)("td",null,(0,n.zw)(w.snagDetailsData.caption),1)]),(0,a._)("tr",null,[K,(0,a._)("td",null,(0,n.zw)(w.snagDetailsData.code),1)]),(0,a._)("tr",null,[U,(0,a._)("td",null,(0,n.zw)(w.snagDetailsData.inspectionNo),1)])])]),(0,a._)("div",L,[(0,a._)("div",Y,[(0,a.wy)((0,a.Wm)(Nt,{onClick:y.openDialogAddPhoto,style:{"min-width":"120px"},type:"button",class:"p-button-text addphotobutton",label:"Add photo"},null,8,["onClick"]),[[$t,{value:"Add photo",showDelay:1e3,hideDelay:300},void 0,{bottom:!0}]])])])])),_:1}),w.picturesTabShow?((0,a.wg)(),(0,a.j4)(Lt,{key:0,header:"Pictures"},{default:(0,a.w5)((()=>[(0,a.Wm)(Yt,{tripImages:w.tripImages,onShowloader:y.showloader,openedcargoname:w.openedcargoname,onSwiper:e.onSwiper,onDeletePhoto:y.deletePhotoId,onDeletePhotomodal:y.deletePhotoModal,userType:w.userType},null,8,["tripImages","onShowloader","openedcargoname","onSwiper","onDeletePhoto","onDeletePhotomodal","userType"]),(0,a._)("div",E,[(0,a._)("div",W,[(0,a.wy)((0,a.Wm)(Nt,{onClick:y.openDialogAddPhoto,style:{"min-width":"120px"},type:"button",class:"p-button-text addphotobutton",label:"Add photo"},null,8,["onClick"]),[[$t,{value:"Add photo",showDelay:1e3,hideDelay:300},void 0,{bottom:!0}]])])])])),_:1})):(0,a.kq)("",!0)])),_:1},8,["activeIndex"])])]),(0,a.Wm)(Wt,{modal:"",visible:w.visibleImagesModal,"onUpdate:visible":t[15]||(t[15]=e=>w.visibleImagesModal=e),style:{width:"50rem"},breakpoints:{"1199px":"75vw","575px":"90vw"}},{default:(0,a.w5)((()=>[(0,a.Wm)(Yt,{tripImages:w.tripImages,onDeletePhotomodal:y.deletePhotoModal},null,8,["tripImages","onDeletePhotomodal"])])),_:1},8,["visible"])],2),(0,a.Wm)(Wt,{"onUpdate:visible":[y.handleClose,t[23]||(t[23]=e=>w.newSnagDialog=e)],visible:w.newSnagDialog,modal:"",style:{width:"50rem"},breakpoints:{"1199px":"75vw","575px":"90vw"}},{header:(0,a.w5)((()=>[R])),default:(0,a.w5)((()=>[(0,a._)("div",H,[(0,a._)("div",V,[$,(0,a._)("div",z,[(0,a.Wm)(Ot,{onChange:t[16]||(t[16]=t=>e.changeDate("from")),style:{"margin-left":"0"},id:"newSnagDate",class:"dateDisplayInput",modelValue:w.newSnagDate,"onUpdate:modelValue":t[17]||(t[17]=e=>w.newSnagDate=e),showIcon:"",dateFormat:"dd/mm/yy",placeholder:"dd/mm/yy",mask:"99/99/9999"},null,8,["modelValue"]),w.newSnagDateOK?(0,a.kq)("",!0):((0,a.wg)(),(0,a.j4)(Rt,{key:0},{default:(0,a.w5)((()=>[q])),_:1}))])]),(0,a._)("div",j,[Z,(0,a._)("div",Q,[(0,a.Wm)(Bt,{onInput:t[18]||(t[18]=e=>w.newSnagTitleOK=!0),id:"newSnagTitle",modelValue:w.newSnagTitle,"onUpdate:modelValue":t[19]||(t[19]=e=>w.newSnagTitle=e),size:"small"},null,8,["modelValue"]),w.newSnagTitleOK?(0,a.kq)("",!0):((0,a.wg)(),(0,a.j4)(Rt,{key:0},{default:(0,a.w5)((()=>[G])),_:1}))])]),(0,a._)("div",J,[X,(0,a._)("div",ee,[(0,a.Wm)(Bt,{onInput:t[20]||(t[20]=e=>w.newSnagCodeOK=!0),id:"newSnagCode",modelValue:w.newSnagCode,"onUpdate:modelValue":t[21]||(t[21]=e=>w.newSnagCode=e),size:"small"},null,8,["modelValue"]),w.newSnagCodeOK?(0,a.kq)("",!0):((0,a.wg)(),(0,a.j4)(Rt,{key:0},{default:(0,a.w5)((()=>[te])),_:1}))])]),(0,a._)("div",ie,[ae,(0,a._)("div",ne,[(0,a.Wm)(Ht,{modelValue:w.newSnagStatus,"onUpdate:modelValue":t[22]||(t[22]=e=>w.newSnagStatus=e),options:w.allStatuses,filter:"",optionLabel:"name",placeholder:"Select Status"},null,8,["modelValue","options"]),w.newSnagStatusOK?(0,a.kq)("",!0):((0,a.wg)(),(0,a.j4)(Rt,{key:0},{default:(0,a.w5)((()=>[se])),_:1}))])]),(0,a._)("div",le,[(0,a._)("div",oe,[(0,a.wy)((0,a.Wm)(Nt,{onClick:y.closeInsertDialog,style:{"min-width":"120px"},icon:"pi pi-times-circle",type:"button",class:"p-button-text redButton",label:"Cancel"},null,8,["onClick"]),[[$t,{value:"Cancel",showDelay:1e3,hideDelay:300},void 0,{bottom:!0}]])]),(0,a._)("div",de,[(0,a.wy)((0,a.Wm)(Nt,{style:{"min-width":"120px"},type:"button",icon:"pi pi-pencil",class:"p-button-text",onClick:y.saveSnag,label:"Save snag"},null,8,["onClick"]),[[$t,{value:"Save snag",showDelay:1e3,hideDelay:300},void 0,{bottom:!0}]])])])])])),_:1},8,["onUpdate:visible","visible"]),(0,a.Wm)(Wt,{"onUpdate:visible":[y.handleClose,t[31]||(t[31]=e=>w.editSnagDialog=e)],visible:w.editSnagDialog,modal:"",style:{width:"50rem"},breakpoints:{"1199px":"75vw","575px":"90vw"}},{header:(0,a.w5)((()=>[re])),default:(0,a.w5)((()=>[(0,a._)("div",ce,[(0,a._)("div",he,[pe,(0,a._)("div",ue,[(0,a.Wm)(Ot,{value:w.editSnagDate,modelValue:w.editSnagDate,"onUpdate:modelValue":t[24]||(t[24]=e=>w.editSnagDate=e),onChange:t[25]||(t[25]=t=>e.changeDate("from")),style:{"margin-left":"0"},id:"editSnagDate",class:"dateDisplayInput",showIcon:"",dateFormat:"dd/mm/yy",placeholder:"dd/mm/yy",mask:"99/99/9999"},null,8,["value","modelValue"]),w.editSnagDateOK?(0,a.kq)("",!0):((0,a.wg)(),(0,a.j4)(Rt,{key:0},{default:(0,a.w5)((()=>[ge])),_:1}))])]),(0,a._)("div",me,[fe,(0,a._)("div",ve,[(0,a.Wm)(Bt,{onInput:t[26]||(t[26]=e=>w.editSnagTitleOK=!0),id:"editSnagTitle",modelValue:w.editSnagTitle,"onUpdate:modelValue":t[27]||(t[27]=e=>w.editSnagTitle=e),size:"small"},null,8,["modelValue"]),w.editSnagTitleOK?(0,a.kq)("",!0):((0,a.wg)(),(0,a.j4)(Rt,{key:0},{default:(0,a.w5)((()=>[be])),_:1}))])]),(0,a._)("div",we,[ye,(0,a._)("div",Se,[(0,a.Wm)(Ht,{modelValue:w.editSnagStatus,"onUpdate:modelValue":t[28]||(t[28]=e=>w.editSnagStatus=e),options:w.allStatuses,filter:"",optionLabel:"name",placeholder:w.editSnagStatus},null,8,["modelValue","options","placeholder"]),w.editSnagStatusOK?(0,a.kq)("",!0):((0,a.wg)(),(0,a.j4)(Rt,{key:0},{default:(0,a.w5)((()=>[De])),_:1}))])]),(0,a._)("div",ke,[Ce,(0,a._)("div",Ie,[(0,a.Wm)(Bt,{onInput:t[29]||(t[29]=e=>w.editSnagCodeOK=!0),id:"editSnagCode",modelValue:w.editSnagCode,"onUpdate:modelValue":t[30]||(t[30]=e=>w.editSnagCode=e),size:"small"},null,8,["modelValue"]),w.editSnagCodeOK?(0,a.kq)("",!0):((0,a.wg)(),(0,a.j4)(Rt,{key:0},{default:(0,a.w5)((()=>[xe])),_:1}))])]),(0,a._)("div",_e,[(0,a._)("div",Te,[(0,a.wy)((0,a.Wm)(Nt,{onClick:y.closeEditDialog,style:{"min-width":"120px"},icon:"pi pi-times-circle",type:"button",class:"p-button-text redButton",label:"Cancel"},null,8,["onClick"]),[[$t,{value:"Cancel",showDelay:1e3,hideDelay:300},void 0,{bottom:!0}]])]),(0,a._)("div",Me,[(0,a.wy)((0,a.Wm)(Nt,{style:{"min-width":"120px"},type:"button",icon:"pi pi-pencil",class:"p-button-text",onClick:y.editSnag,label:"Save changes"},null,8,["onClick"]),[[$t,{value:"Save changes",showDelay:1e3,hideDelay:300},void 0,{bottom:!0}]])])])])])),_:1},8,["onUpdate:visible","visible"]),(0,a.Wm)(Wt,{visible:w.displayInfoDialog,"onUpdate:visible":t[32]||(t[32]=e=>w.displayInfoDialog=e),modal:"",style:{width:"20rem"},breakpoints:{"1199px":"75vw","575px":"90vw"}},{header:(0,a.w5)((()=>[(0,a._)("h4",null,(0,n.zw)(w.InfoModalHeader),1)])),default:(0,a.w5)((()=>[Fe,(0,a._)("p",Pe,(0,n.zw)(w.InfoModalMessage),1),(0,a._)("div",Ae,[(0,a.Wm)(Nt,{label:"Ok",onClick:y.closeInfo},null,8,["onClick"])])])),_:1},8,["visible"]),(0,a.Wm)(Wt,{visible:w.displayDeleteConfirm,"onUpdate:visible":t[34]||(t[34]=e=>w.displayDeleteConfirm=e),modal:"",style:{width:"30rem"},breakpoints:{"1199px":"75vw","575px":"90vw"}},{header:(0,a.w5)((()=>[Be])),default:(0,a.w5)((()=>[Ne,(0,a._)("p",Oe,[Ke,(0,a._)("strong",null,"'"+(0,n.zw)(w.editSnagCargoName)+"'",1),Ue]),(0,a._)("div",Le,[(0,a._)("div",Ye,[(0,a.Wm)(Nt,{class:"redButton",label:"Cancel",onClick:t[33]||(t[33]=e=>w.displayDeleteConfirm=!1)})]),(0,a._)("div",Ee,[(0,a.Wm)(Nt,{label:"Yes, delete",onClick:y.deleteTrip},null,8,["onClick"])])])])),_:1},8,["visible"]),(0,a.Wm)(Wt,{visible:w.displayUnInvoiceConfirm,"onUpdate:visible":t[36]||(t[36]=e=>w.displayUnInvoiceConfirm=e),modal:"",style:{width:"30rem"},breakpoints:{"1199px":"75vw","575px":"90vw"}},{header:(0,a.w5)((()=>[We])),default:(0,a.w5)((()=>[Re,(0,a._)("p",He,[Ve,$e,ze,(0,a._)("strong",null,"'"+(0,n.zw)(w.editSnagCargoName)+"'",1),qe]),(0,a._)("div",je,[(0,a._)("div",Ze,[(0,a.Wm)(Nt,{class:"redButton",label:"Cancel",onClick:t[35]||(t[35]=t=>e.displayInvoiceConfirm=!1)})]),(0,a._)("div",Qe,[(0,a.Wm)(Nt,{label:"Yes, remove it",onClick:y.unInvoiceThisTrip},null,8,["onClick"])])])])),_:1},8,["visible"]),(0,a.Wm)(Wt,{"onUpdate:visible":[y.handleClose,t[40]||(t[40]=e=>w.sendInvoiceDialog=e)],visible:w.sendInvoiceDialog,modal:"",style:{width:"50rem"},breakpoints:{"1199px":"75vw","575px":"90vw"}},{header:(0,a.w5)((()=>[Ge])),default:(0,a.w5)((()=>[(0,a._)("div",Je,[(0,a._)("div",Xe,[et,(0,a._)("div",tt,[(0,a.Wm)(Ot,{hourFormat:"24",showTime:"",onChange:t[37]||(t[37]=t=>e.changeDate("from")),style:{"margin-left":"0"},id:"invoiceDate",class:"dateDisplayInput",modelValue:w.invoiceDate,"onUpdate:modelValue":t[38]||(t[38]=e=>w.invoiceDate=e),showIcon:"",dateFormat:"dd/mm/yy",placeholder:"dd/mm/yy",mask:"99/99/9999"},null,8,["modelValue"]),w.invoiceDateOK?(0,a.kq)("",!0):((0,a.wg)(),(0,a.j4)(Rt,{key:0},{default:(0,a.w5)((()=>[it])),_:1}))])]),(0,a._)("div",at,[(0,a._)("div",nt,[(0,a.wy)((0,a.Wm)(Nt,{onClick:t[39]||(t[39]=e=>w.sendInvoiceDialog=!1),style:{"min-width":"120px"},icon:"pi pi-times-circle",type:"button",class:"p-button-text redButton",label:"Cancel"},null,512),[[$t,{value:"Cancel",showDelay:1e3,hideDelay:300},void 0,{bottom:!0}]])]),(0,a._)("div",st,[(0,a.wy)((0,a.Wm)(Nt,{style:{"min-width":"120px"},type:"button",icon:"pi pi-check-circle",class:"p-button-text",onClick:y.invoiceThisTrip,label:"Mark as Invoiced"},null,8,["onClick"]),[[$t,{value:"Mark as Invoiced",showDelay:1e3,hideDelay:300},void 0,{bottom:!0}]])])])])])),_:1},8,["onUpdate:visible","visible"]),(0,a.Wm)(Wt,{"onUpdate:visible":[y.handleClose,t[44]||(t[44]=e=>w.sendMultipleInvoiceDialog=e)],visible:w.sendMultipleInvoiceDialog,modal:"",header:"header",style:{width:"50rem"},breakpoints:{"1199px":"75vw","575px":"90vw"}},{header:(0,a.w5)((()=>[1==w.selectedIDsForInvoicing.length?((0,a.wg)(),(0,a.iD)("span",lt,"Mark selected trip as Invoiced")):(0,a.kq)("",!0),w.selectedIDsForInvoicing.length>1?((0,a.wg)(),(0,a.iD)("span",ot,[dt,(0,a._)("span",rt,(0,n.zw)(w.selectedIDsForInvoicing.length)+" trips ",1),ct])):(0,a.kq)("",!0)])),default:(0,a.w5)((()=>[(0,a._)("div",ht,[(0,a._)("div",pt,[ut,(0,a._)("div",gt,[(0,a.Wm)(Ot,{hourFormat:"24",showTime:"",onChange:t[41]||(t[41]=t=>e.changeDate("from")),style:{"margin-left":"0"},id:"invoiceMultipleDate",class:"dateDisplayInput",modelValue:w.invoiceDate,"onUpdate:modelValue":t[42]||(t[42]=e=>w.invoiceDate=e),showIcon:"",dateFormat:"dd/mm/yy",placeholder:"dd/mm/yy",mask:"99/99/9999"},null,8,["modelValue"]),w.invoiceDateOK?(0,a.kq)("",!0):((0,a.wg)(),(0,a.j4)(Rt,{key:0},{default:(0,a.w5)((()=>[mt])),_:1}))])]),(0,a._)("div",ft,[(0,a._)("div",vt,[(0,a.wy)((0,a.Wm)(Nt,{onClick:t[43]||(t[43]=e=>w.sendMultipleInvoiceDialog=!1),style:{"min-width":"120px"},icon:"pi pi-times-circle",type:"button",class:"p-button-text redButton",label:"Cancel"},null,512),[[$t,{value:"Cancel",showDelay:1e3,hideDelay:300},void 0,{bottom:!0}]])]),(0,a._)("div",bt,[(0,a.wy)((0,a.Wm)(Nt,{style:{"min-width":"120px"},type:"button",icon:"pi pi-check-circle",class:"p-button-text",onClick:y.invoiceMultipleTrips,label:"Mark as Invoiced"},null,8,["onClick"]),[[$t,{value:"Mark as Invoiced",showDelay:1e3,hideDelay:300},void 0,{bottom:!0}]])])])])])),_:1},8,["onUpdate:visible","visible"]),(0,a.Wm)(Wt,{visible:w.displayDeletePhotoConfirm,"onUpdate:visible":t[46]||(t[46]=e=>w.displayDeletePhotoConfirm=e),modal:"",style:{width:"30rem"},breakpoints:{"1199px":"75vw","575px":"90vw"}},{header:(0,a.w5)((()=>[wt])),default:(0,a.w5)((()=>[yt,St,(0,a._)("div",Dt,[(0,a._)("div",kt,[(0,a.Wm)(Nt,{class:"redButton",label:"Cancel",onClick:t[45]||(t[45]=e=>w.displayDeletePhotoConfirm=!1)})]),(0,a._)("div",Ct,[(0,a.Wm)(Nt,{label:"Yes, delete",onClick:y.deletePhoto},null,8,["onClick"])])])])),_:1},8,["visible"]),(0,a.Wm)(Wt,{visible:w.displayUploadModal,"onUpdate:visible":t[48]||(t[48]=e=>w.displayUploadModal=e),modal:"",style:{width:"60rem"},breakpoints:{"1199px":"75vw","575px":"90vw"}},{header:(0,a.w5)((()=>[It])),default:(0,a.w5)((()=>[(0,a._)("div",xt,[(0,a._)("div",_t,[(0,a.Wm)(Vt,{name:"files[]",customUpload:!0,url:"/api/upload",onUploader:t[47]||(t[47]=e=>y.customUploader(e)),multiple:!1,accept:"image/*",maxFileSize:1e7},{empty:(0,a.w5)((()=>[Tt])),_:1})])])])),_:1},8,["visible"]),(0,a._)("div",Mt,[(0,a._)("ul",null,[(0,a._)("ul",null,[w.AllPageMarked||w.AllMarked?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("li",Ft,[(0,a._)("a",{onClick:t[49]||(t[49]=e=>y.SelectAllPage("select"))},"Select all records on current page")])),w.AllPageMarked||w.AllMarked?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("li",Pt,[(0,a._)("a",{onClick:t[50]||(t[50]=e=>y.SelectAll("select"))},"Select all on all pages")])),w.AllMarked||w.AllPageMarked?((0,a.wg)(),(0,a.iD)("li",At,[(0,a._)("a",{onClick:t[51]||(t[51]=e=>y.SelectAll("deselect"))},"Deselect All ")])):(0,a.kq)("",!0)])])])],64)}var Nt=i(5424),Ot=i(3717),Kt=i(6709),Ut=i(1826),Lt=i(2711),Yt=i(2419),Et=i(2679),Wt=i(1937),Rt=i(5030),Ht={name:"TabView",emits:["update:activeIndex","tab-change","tab-click"],props:{activeIndex:{type:Number,default:0},lazy:{type:Boolean,default:!1},scrollable:{type:Boolean,default:!1},tabindex:{type:Number,default:0},selectOnFocus:{type:Boolean,default:!1},previousButtonProps:null,nextButtonProps:null},data(){return{d_activeIndex:this.activeIndex,focusedTabIndex:-1,isPrevButtonDisabled:!0,isNextButtonDisabled:!1}},watch:{activeIndex(e){this.d_activeIndex=e,this.scrollInView({index:e})}},mounted(){this.updateInkBar()},updated(){this.updateInkBar()},methods:{isTabPanel(e){return"TabPanel"===e.type.name},isTabActive(e){return this.d_activeIndex===e},getTabProp(e,t){return e.props?e.props[t]:void 0},getKey(e,t){return this.getTabProp(e,"header")||t},getTabHeaderActionId(e){return`${this.id}_${e}_header_action`},getTabContentId(e){return`${this.id}_${e}_content`},onScroll(e){this.scrollable&&this.updateButtonState(),e.preventDefault()},onPrevButtonClick(){const e=this.$refs.content,t=Wt.p7.getWidth(e)-this.getVisibleButtonWidths(),i=e.scrollLeft-t;e.scrollLeft=i<=0?0:i},onNextButtonClick(){const e=this.$refs.content,t=Wt.p7.getWidth(e)-this.getVisibleButtonWidths(),i=e.scrollLeft+t,a=e.scrollWidth-t;e.scrollLeft=i>=a?a:i},onTabClick(e,t,i){this.changeActiveIndex(e,t,i),this.$emit("tab-click",{originalEvent:e,index:i})},onTabKeyDown(e,t,i){switch(e.code){case"ArrowLeft":this.onTabArrowLeftKey(e);break;case"ArrowRight":this.onTabArrowRightKey(e);break;case"Home":this.onTabHomeKey(e);break;case"End":this.onTabEndKey(e);break;case"PageDown":this.onPageDownKey(e);break;case"PageUp":this.onPageUpKey(e);break;case"Enter":case"Space":this.onTabEnterKey(e,t,i);break}},onTabArrowRightKey(e){const t=this.findNextHeaderAction(e.target.parentElement);t?this.changeFocusedTab(e,t):this.onTabHomeKey(e),e.preventDefault()},onTabArrowLeftKey(e){const t=this.findPrevHeaderAction(e.target.parentElement);t?this.changeFocusedTab(e,t):this.onTabEndKey(e),e.preventDefault()},onTabHomeKey(e){const t=this.findFirstHeaderAction();this.changeFocusedTab(e,t),e.preventDefault()},onTabEndKey(e){const t=this.findLastHeaderAction();this.changeFocusedTab(e,t),e.preventDefault()},onPageDownKey(e){this.scrollInView({index:this.$refs.nav.children.length-2}),e.preventDefault()},onPageUpKey(e){this.scrollInView({index:0}),e.preventDefault()},onTabEnterKey(e,t,i){this.changeActiveIndex(e,t,i),e.preventDefault()},findNextHeaderAction(e,t=!1){const i=t?e:e.nextElementSibling;return i?Wt.p7.hasClass(i,"p-disabled")||Wt.p7.hasClass(i,"p-tabview-ink-bar")?this.findNextHeaderAction(i):Wt.p7.findSingle(i,".p-tabview-header-action"):null},findPrevHeaderAction(e,t=!1){const i=t?e:e.previousElementSibling;return i?Wt.p7.hasClass(i,"p-disabled")||Wt.p7.hasClass(i,"p-tabview-ink-bar")?this.findPrevHeaderAction(i):Wt.p7.findSingle(i,".p-tabview-header-action"):null},findFirstHeaderAction(){return this.findNextHeaderAction(this.$refs.nav.firstElementChild,!0)},findLastHeaderAction(){return this.findPrevHeaderAction(this.$refs.nav.lastElementChild,!0)},changeActiveIndex(e,t,i){this.getTabProp(t,"disabled")||this.d_activeIndex===i||(this.d_activeIndex=i,this.$emit("update:activeIndex",i),this.$emit("tab-change",{originalEvent:e,index:i}),this.scrollInView({index:i}))},changeFocusedTab(e,t){if(t&&(Wt.p7.focus(t),this.scrollInView({element:t}),this.selectOnFocus)){const i=parseInt(t.parentElement.dataset.index,10),a=this.tabs[i];this.changeActiveIndex(e,a,i)}},scrollInView({element:e,index:t=-1}){const i=e||this.$refs.nav.children[t];i&&i.scrollIntoView&&i.scrollIntoView({block:"nearest"})},updateInkBar(){let e=this.$refs.nav.children[this.d_activeIndex];this.$refs.inkbar.style.width=Wt.p7.getWidth(e)+"px",this.$refs.inkbar.style.left=Wt.p7.getOffset(e).left-Wt.p7.getOffset(this.$refs.nav).left+"px"},updateButtonState(){const e=this.$refs.content,{scrollLeft:t,scrollWidth:i}=e,a=Wt.p7.getWidth(e);this.isPrevButtonDisabled=0===t,this.isNextButtonDisabled=parseInt(t)===i-a},getVisibleButtonWidths(){const{prevBtn:e,nextBtn:t}=this.$refs;return[e,t].reduce(((e,t)=>t?e+Wt.p7.getWidth(t):e),0)},getTabHeaderClass(e,t){return["p-tabview-header",this.getTabProp(e,"headerClass"),{"p-highlight":this.d_activeIndex===t,"p-disabled":this.getTabProp(e,"disabled")}]},getTabContentClass(e){return["p-tabview-panel",this.getTabProp(e,"contentClass")]}},computed:{contentClasses(){return["p-tabview p-component",{"p-tabview-scrollable":this.scrollable}]},tabs(){return this.$slots.default().reduce(((e,t)=>(this.isTabPanel(t)?e.push(t):t.children&&t.children instanceof Array&&t.children.forEach((t=>{this.isTabPanel(t)&&e.push(t)})),e)),[])},prevButtonAriaLabel(){return this.$primevue.config.locale.aria?this.$primevue.config.locale.aria.previous:void 0},nextButtonAriaLabel(){return this.$primevue.config.locale.aria?this.$primevue.config.locale.aria.next:void 0},id(){return this.$attrs.id||(0,Wt.Th)()}},directives:{ripple:Rt.Z}};const Vt={class:"p-tabview-nav-container"},$t=["tabindex","aria-label"],zt=(0,a._)("span",{class:"pi pi-chevron-left","aria-hidden":"true"},null,-1),qt=[zt],jt={ref:"nav",class:"p-tabview-nav",role:"tablist"},Zt=["data-index"],Qt=["id","tabindex","aria-disabled","aria-selected","aria-controls","onClick","onKeydown"],Gt={key:0,class:"p-tabview-title"},Jt={ref:"inkbar",class:"p-tabview-ink-bar",role:"presentation","aria-hidden":"true"},Xt=["tabindex","aria-label"],ei=(0,a._)("span",{class:"pi pi-chevron-right","aria-hidden":"true"},null,-1),ti=[ei],ii={class:"p-tabview-panels"},ai=["aria-labelledby"];function ni(e,t,i,l,o,d){const r=(0,a.Q2)("ripple");return(0,a.wg)(),(0,a.iD)("div",{class:(0,n.C_)(d.contentClasses)},[(0,a._)("div",Vt,[i.scrollable&&!o.isPrevButtonDisabled?(0,a.wy)(((0,a.wg)(),(0,a.iD)("button",(0,a.dG)({key:0,ref:"prevBtn",type:"button",class:"p-tabview-nav-prev p-tabview-nav-btn p-link",tabindex:i.tabindex,"aria-label":d.prevButtonAriaLabel,onClick:t[0]||(t[0]=(...e)=>d.onPrevButtonClick&&d.onPrevButtonClick(...e))},i.previousButtonProps),qt,16,$t)),[[r]]):(0,a.kq)("",!0),(0,a._)("div",{ref:"content",class:"p-tabview-nav-content",onScroll:t[1]||(t[1]=(...e)=>d.onScroll&&d.onScroll(...e))},[(0,a._)("ul",jt,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(d.tabs,((e,t)=>((0,a.wg)(),(0,a.iD)("li",(0,a.dG)({key:d.getKey(e,t),style:d.getTabProp(e,"headerStyle"),class:d.getTabHeaderClass(e,t),role:"presentation","data-index":t},d.getTabProp(e,"headerProps")),[(0,a.wy)(((0,a.wg)(),(0,a.iD)("a",(0,a.dG)({id:d.getTabHeaderActionId(t),class:"p-tabview-nav-link p-tabview-header-action",tabindex:d.getTabProp(e,"disabled")||!d.isTabActive(t)?-1:i.tabindex,role:"tab","aria-disabled":d.getTabProp(e,"disabled"),"aria-selected":d.isTabActive(t),"aria-controls":d.getTabContentId(t),onClick:i=>d.onTabClick(i,e,t),onKeydown:i=>d.onTabKeyDown(i,e,t)},d.getTabProp(e,"headerActionProps")),[e.props&&e.props.header?((0,a.wg)(),(0,a.iD)("span",Gt,(0,n.zw)(e.props.header),1)):(0,a.kq)("",!0),e.children&&e.children.header?((0,a.wg)(),(0,a.j4)((0,a.LL)(e.children.header),{key:1})):(0,a.kq)("",!0)],16,Qt)),[[r]])],16,Zt)))),128)),(0,a._)("li",Jt,null,512)],512)],544),i.scrollable&&!o.isNextButtonDisabled?(0,a.wy)(((0,a.wg)(),(0,a.iD)("button",(0,a.dG)({key:1,ref:"nextBtn",type:"button",class:"p-tabview-nav-next p-tabview-nav-btn p-link",tabindex:i.tabindex,"aria-label":d.nextButtonAriaLabel,onClick:t[2]||(t[2]=(...e)=>d.onNextButtonClick&&d.onNextButtonClick(...e))},i.nextButtonProps),ti,16,Xt)),[[r]]):(0,a.kq)("",!0)]),(0,a._)("div",ii,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(d.tabs,((e,t)=>((0,a.wg)(),(0,a.iD)(a.HY,{key:d.getKey(e,t)},[!i.lazy||d.isTabActive(t)?(0,a.wy)(((0,a.wg)(),(0,a.iD)("div",(0,a.dG)({key:0,style:d.getTabProp(e,"contentStyle"),class:d.getTabContentClass(e),role:"tabpanel","aria-labelledby":d.getTabHeaderActionId(t)},d.getTabProp(e,"contentProps")),[((0,a.wg)(),(0,a.j4)((0,a.LL)(e)))],16,ai)),[[s.F8,!!i.lazy||d.isTabActive(t)]]):(0,a.kq)("",!0)],64)))),128))])],2)}function si(e,t){void 0===t&&(t={});var i=t.insertAt;if(e&&"undefined"!==typeof document){var a=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css","top"===i&&a.firstChild?a.insertBefore(n,a.firstChild):a.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}}var li="\n.p-tabview-nav-container {\n    position: relative;\n}\n.p-tabview-scrollable .p-tabview-nav-container {\n    overflow: hidden;\n}\n.p-tabview-nav-content {\n    overflow-x: auto;\n    overflow-y: hidden;\n    scroll-behavior: smooth;\n    scrollbar-width: none;\n    -ms-scroll-chaining: contain auto;\n        overscroll-behavior: contain auto;\n}\n.p-tabview-nav {\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    margin: 0;\n    padding: 0;\n    list-style-type: none;\n    -webkit-box-flex: 1;\n        -ms-flex: 1 1 auto;\n            flex: 1 1 auto;\n}\n.p-tabview-header-action {\n    cursor: pointer;\n    -webkit-user-select: none;\n       -moz-user-select: none;\n        -ms-user-select: none;\n            user-select: none;\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-align: center;\n        -ms-flex-align: center;\n            align-items: center;\n    position: relative;\n    text-decoration: none;\n    overflow: hidden;\n}\n.p-tabview-ink-bar {\n    display: none;\n    z-index: 1;\n}\n.p-tabview-header-action:focus {\n    z-index: 1;\n}\n.p-tabview-title {\n    line-height: 1;\n    white-space: nowrap;\n}\n.p-tabview-nav-btn {\n    position: absolute;\n    top: 0;\n    z-index: 2;\n    height: 100%;\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-align: center;\n        -ms-flex-align: center;\n            align-items: center;\n    -webkit-box-pack: center;\n        -ms-flex-pack: center;\n            justify-content: center;\n}\n.p-tabview-nav-prev {\n    left: 0;\n}\n.p-tabview-nav-next {\n    right: 0;\n}\n.p-tabview-nav-content::-webkit-scrollbar {\n    display: none;\n}\n";si(li),Ht.render=ni;var oi={name:"TabPanel",props:{header:null,headerStyle:null,headerClass:null,headerProps:null,headerActionProps:null,contentStyle:null,contentClass:null,contentProps:null,disabled:Boolean}};function di(e,t,i,n,s,l){return(0,a.WI)(e.$slots,"default")}oi.render=di;var ri=i(5517),ci={name:"ProgressBar",props:{value:{type:Number,default:null},mode:{type:String,default:"determinate"},showValue:{type:Boolean,default:!0}},computed:{containerClass(){return["p-progressbar p-component",{"p-progressbar-determinate":this.determinate,"p-progressbar-indeterminate":this.indeterminate}]},progressStyle(){return{width:this.value+"%",display:"flex"}},indeterminate(){return"indeterminate"===this.mode},determinate(){return"determinate"===this.mode}}};const hi=["aria-valuenow"],pi={key:0,class:"p-progressbar-label"},ui={key:1,class:"p-progressbar-indeterminate-container"},gi=(0,a._)("div",{class:"p-progressbar-value p-progressbar-value-animate"},null,-1),mi=[gi];function fi(e,t,i,s,l,o){return(0,a.wg)(),(0,a.iD)("div",{role:"progressbar",class:(0,n.C_)(o.containerClass),"aria-valuemin":"0","aria-valuenow":i.value,"aria-valuemax":"100"},[o.determinate?((0,a.wg)(),(0,a.iD)("div",{key:0,class:"p-progressbar-value p-progressbar-value-animate",style:(0,n.j5)(o.progressStyle)},[null!=i.value&&0!==i.value&&i.showValue?((0,a.wg)(),(0,a.iD)("div",pi,[(0,a.WI)(e.$slots,"default",{},(()=>[(0,a.Uk)((0,n.zw)(i.value+"%"),1)]))])):(0,a.kq)("",!0)],4)):(0,a.kq)("",!0),o.indeterminate?((0,a.wg)(),(0,a.iD)("div",ui,mi)):(0,a.kq)("",!0)],10,hi)}function vi(e,t){void 0===t&&(t={});var i=t.insertAt;if(e&&"undefined"!==typeof document){var a=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css","top"===i&&a.firstChild?a.insertBefore(n,a.firstChild):a.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}}var bi="\n.p-progressbar {\n    position: relative;\n    overflow: hidden;\n}\n.p-progressbar-determinate .p-progressbar-value {\n    height: 100%;\n    width: 0%;\n    position: absolute;\n    display: none;\n    border: 0 none;\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-align: center;\n        -ms-flex-align: center;\n            align-items: center;\n    -webkit-box-pack: center;\n        -ms-flex-pack: center;\n            justify-content: center;\n    overflow: hidden;\n}\n.p-progressbar-determinate .p-progressbar-label {\n    display: -webkit-inline-box;\n    display: -ms-inline-flexbox;\n    display: inline-flex;\n}\n.p-progressbar-determinate .p-progressbar-value-animate {\n    -webkit-transition: width 1s ease-in-out;\n    transition: width 1s ease-in-out;\n}\n.p-progressbar-indeterminate .p-progressbar-value::before {\n    content: '';\n    position: absolute;\n    background-color: inherit;\n    top: 0;\n    left: 0;\n    bottom: 0;\n    will-change: left, right;\n    -webkit-animation: p-progressbar-indeterminate-anim 2.1s cubic-bezier(0.65, 0.815, 0.735, 0.395) infinite;\n    animation: p-progressbar-indeterminate-anim 2.1s cubic-bezier(0.65, 0.815, 0.735, 0.395) infinite;\n}\n.p-progressbar-indeterminate .p-progressbar-value::after {\n    content: '';\n    position: absolute;\n    background-color: inherit;\n    top: 0;\n    left: 0;\n    bottom: 0;\n    will-change: left, right;\n    -webkit-animation: p-progressbar-indeterminate-anim-short 2.1s cubic-bezier(0.165, 0.84, 0.44, 1) infinite;\n    animation: p-progressbar-indeterminate-anim-short 2.1s cubic-bezier(0.165, 0.84, 0.44, 1) infinite;\n    -webkit-animation-delay: 1.15s;\n    animation-delay: 1.15s;\n}\n@-webkit-keyframes p-progressbar-indeterminate-anim {\n0% {\n        left: -35%;\n        right: 100%;\n}\n60% {\n        left: 100%;\n        right: -90%;\n}\n100% {\n        left: 100%;\n        right: -90%;\n}\n}\n@keyframes p-progressbar-indeterminate-anim {\n0% {\n        left: -35%;\n        right: 100%;\n}\n60% {\n        left: 100%;\n        right: -90%;\n}\n100% {\n        left: 100%;\n        right: -90%;\n}\n}\n@-webkit-keyframes p-progressbar-indeterminate-anim-short {\n0% {\n        left: -200%;\n        right: 100%;\n}\n60% {\n        left: 107%;\n        right: -8%;\n}\n100% {\n        left: 107%;\n        right: -8%;\n}\n}\n@keyframes p-progressbar-indeterminate-anim-short {\n0% {\n        left: -200%;\n        right: 100%;\n}\n60% {\n        left: 107%;\n        right: -8%;\n}\n100% {\n        left: 107%;\n        right: -8%;\n}\n}\n";vi(bi),ci.render=fi;var wi={name:"Message",emits:["close"],props:{severity:{type:String,default:"info"},closable:{type:Boolean,default:!0},sticky:{type:Boolean,default:!0},life:{type:Number,default:3e3},icon:{type:String,default:null}},timeout:null,data(){return{visible:!0}},mounted(){this.sticky||setTimeout((()=>{this.visible=!1}),this.life)},methods:{close(e){this.visible=!1,this.$emit("close",e)}},computed:{containerClass(){return"p-message p-component p-message-"+this.severity},iconClass(){return["p-message-icon pi",this.icon?this.icon:{"pi-info-circle":"info"===this.severity,"pi-check":"success"===this.severity,"pi-exclamation-triangle":"warn"===this.severity,"pi-times-circle":"error"===this.severity}]}},directives:{ripple:Rt.Z}};const yi={class:"p-message-wrapper"},Si={class:"p-message-text"},Di=(0,a._)("i",{class:"p-message-close-icon pi pi-times"},null,-1),ki=[Di];function Ci(e,t,i,l,o,d){const r=(0,a.Q2)("ripple");return(0,a.wg)(),(0,a.j4)(s.uT,{name:"p-message",appear:""},{default:(0,a.w5)((()=>[(0,a.wy)((0,a._)("div",{class:(0,n.C_)(d.containerClass),role:"alert"},[(0,a._)("div",yi,[(0,a._)("span",{class:(0,n.C_)(d.iconClass)},null,2),(0,a._)("div",Si,[(0,a.WI)(e.$slots,"default")]),i.closable?(0,a.wy)(((0,a.wg)(),(0,a.iD)("button",{key:0,class:"p-message-close p-link",onClick:t[0]||(t[0]=e=>d.close(e)),type:"button"},ki)),[[r]]):(0,a.kq)("",!0)])],2),[[s.F8,o.visible]])])),_:3})}function Ii(e,t){void 0===t&&(t={});var i=t.insertAt;if(e&&"undefined"!==typeof document){var a=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css","top"===i&&a.firstChild?a.insertBefore(n,a.firstChild):a.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}}var xi="\n.p-message-wrapper {\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-align: center;\n        -ms-flex-align: center;\n            align-items: center;\n}\n.p-message-close {\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-align: center;\n        -ms-flex-align: center;\n            align-items: center;\n    -webkit-box-pack: center;\n        -ms-flex-pack: center;\n            justify-content: center;\n}\n.p-message-close.p-link {\n    margin-left: auto;\n    overflow: hidden;\n    position: relative;\n}\n.p-message-enter-from {\n    opacity: 0;\n}\n.p-message-enter-active {\n    -webkit-transition: opacity 0.3s;\n    transition: opacity 0.3s;\n}\n.p-message.p-message-leave-from {\n    max-height: 1000px;\n}\n.p-message.p-message-leave-to {\n    max-height: 0;\n    opacity: 0;\n    margin: 0 !important;\n}\n.p-message-leave-active {\n    overflow: hidden;\n    -webkit-transition: max-height 0.3s cubic-bezier(0, 1, 0, 1), opacity 0.3s, margin 0.15s;\n    transition: max-height 0.3s cubic-bezier(0, 1, 0, 1), opacity 0.3s, margin 0.15s;\n}\n.p-message-leave-active .p-message-close {\n    display: none;\n}\n";Ii(xi),wi.render=Ci;var _i={name:"FileUpload",emits:["select","uploader","before-upload","progress","upload","error","before-send","clear","remove"],props:{name:{type:String,default:null},url:{type:String,default:null},mode:{type:String,default:"advanced"},multiple:{type:Boolean,default:!1},accept:{type:String,default:null},disabled:{type:Boolean,default:!1},auto:{type:Boolean,default:!1},maxFileSize:{type:Number,default:null},invalidFileSizeMessage:{type:String,default:"{0}: Invalid file size, file size should be smaller than {1}."},invalidFileTypeMessage:{type:String,default:"{0}: Invalid file type, allowed file types: {1}."},fileLimit:{type:Number,default:null},invalidFileLimitMessage:{type:String,default:"Maximum number of files exceeded, limit is {0} at most."},withCredentials:{type:Boolean,default:!1},previewWidth:{type:Number,default:50},chooseLabel:{type:String,default:null},uploadLabel:{type:String,default:null},cancelLabel:{type:String,default:null},customUpload:{type:Boolean,default:!1},showUploadButton:{type:Boolean,default:!0},showCancelButton:{type:Boolean,default:!0},chooseIcon:{type:String,default:"pi pi-plus"},uploadIcon:{type:String,default:"pi pi-upload"},cancelIcon:{type:String,default:"pi pi-times"},style:null,class:null},duplicateIEEvent:!1,data(){return{uploadedFileCount:0,files:[],messages:[],focused:!1,progress:null}},methods:{onFileSelect(e){if("drop"!==e.type&&this.isIE11()&&this.duplicateIEEvent)return void(this.duplicateIEEvent=!1);this.messages=[],this.files=this.files||[];let t=e.dataTransfer?e.dataTransfer.files:e.target.files;for(let i of t)this.isFileSelected(i)||this.validate(i)&&(this.isImage(i)&&(i.objectURL=window.URL.createObjectURL(i)),this.files.push(i));this.$emit("select",{originalEvent:e,files:this.files}),this.fileLimit&&this.checkFileLimit(),this.auto&&this.hasFiles&&!this.isFileLimitExceeded()&&this.upload(),"drop"!==e.type&&this.isIE11()?this.clearIEInput():this.clearInputElement()},choose(){this.$refs.fileInput.click()},upload(){if(this.customUpload)this.fileLimit&&(this.uploadedFileCount+=this.files.length),this.$emit("uploader",{files:this.files}),this.clear();else{let e=new XMLHttpRequest,t=new FormData;this.$emit("before-upload",{xhr:e,formData:t});for(let i of this.files)t.append(this.name,i,i.name);e.upload.addEventListener("progress",(e=>{e.lengthComputable&&(this.progress=Math.round(100*e.loaded/e.total)),this.$emit("progress",{originalEvent:e,progress:this.progress})})),e.onreadystatechange=()=>{4===e.readyState&&(this.progress=0,e.status>=200&&e.status<300?(this.fileLimit&&(this.uploadedFileCount+=this.files.length),this.$emit("upload",{xhr:e,files:this.files})):this.$emit("error",{xhr:e,files:this.files}),this.clear())},e.open("POST",this.url,!0),this.$emit("before-send",{xhr:e,formData:t}),e.withCredentials=this.withCredentials,e.send(t)}},clear(){this.files=[],this.messages=null,this.$emit("clear"),this.isAdvanced&&this.clearInputElement()},onFocus(){this.focused=!0},onBlur(){this.focused=!1},isFileSelected(e){if(this.files&&this.files.length)for(let t of this.files)if(t.name+t.type+t.size===e.name+e.type+e.size)return!0;return!1},isIE11(){return!!window["MSInputMethodContext"]&&!!document["documentMode"]},validate(e){return this.accept&&!this.isFileTypeValid(e)?(this.messages.push(this.invalidFileTypeMessage.replace("{0}",e.name).replace("{1}",this.accept)),!1):!(this.maxFileSize&&e.size>this.maxFileSize)||(this.messages.push(this.invalidFileSizeMessage.replace("{0}",e.name).replace("{1}",this.formatSize(this.maxFileSize))),!1)},isFileTypeValid(e){let t=this.accept.split(",").map((e=>e.trim()));for(let i of t){let t=this.isWildcard(i)?this.getTypeClass(e.type)===this.getTypeClass(i):e.type==i||this.getFileExtension(e).toLowerCase()===i.toLowerCase();if(t)return!0}return!1},getTypeClass(e){return e.substring(0,e.indexOf("/"))},isWildcard(e){return-1!==e.indexOf("*")},getFileExtension(e){return"."+e.name.split(".").pop()},isImage(e){return/^image\//.test(e.type)},onDragEnter(e){this.disabled||(e.stopPropagation(),e.preventDefault())},onDragOver(e){this.disabled||(Wt.p7.addClass(this.$refs.content,"p-fileupload-highlight"),e.stopPropagation(),e.preventDefault())},onDragLeave(){this.disabled||Wt.p7.removeClass(this.$refs.content,"p-fileupload-highlight")},onDrop(e){if(!this.disabled){Wt.p7.removeClass(this.$refs.content,"p-fileupload-highlight"),e.stopPropagation(),e.preventDefault();const t=e.dataTransfer?e.dataTransfer.files:e.target.files,i=this.multiple||t&&1===t.length;i&&this.onFileSelect(e)}},onBasicUploaderClick(){this.hasFiles?this.upload():this.$refs.fileInput.click()},remove(e){this.clearInputElement();let t=this.files.splice(e,1)[0];this.files=[...this.files],this.$emit("remove",{file:t,files:this.files})},clearInputElement(){this.$refs.fileInput.value=""},clearIEInput(){this.$refs.fileInput&&(this.duplicateIEEvent=!0,this.$refs.fileInput.value="")},formatSize(e){if(0===e)return"0 B";let t=1e3,i=3,a=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],n=Math.floor(Math.log(e)/Math.log(t));return parseFloat((e/Math.pow(t,n)).toFixed(i))+" "+a[n]},isFileLimitExceeded(){return this.fileLimit&&this.fileLimit<=this.files.length+this.uploadedFileCount&&this.focused&&(this.focused=!1),this.fileLimit&&this.fileLimit<this.files.length+this.uploadedFileCount},checkFileLimit(){this.isFileLimitExceeded()&&this.messages.push(this.invalidFileLimitMessage.replace("{0}",this.fileLimit.toString()))},onMessageClose(){this.messages=null}},computed:{isAdvanced(){return"advanced"===this.mode},isBasic(){return"basic"===this.mode},advancedChooseButtonClass(){return["p-button p-component p-fileupload-choose",this.class,{"p-disabled":this.disabled,"p-focus":this.focused}]},basicChooseButtonClass(){return["p-button p-component p-fileupload-choose",this.class,{"p-fileupload-choose-selected":this.hasFiles,"p-disabled":this.disabled,"p-focus":this.focused}]},advancedChooseIconClass(){return["p-button-icon p-button-icon-left pi-fw",this.chooseIcon]},basicChooseButtonIconClass(){return["p-button-icon p-button-icon-left",!this.hasFiles||this.auto?this.uploadIcon:this.chooseIcon]},basicChooseButtonLabel(){return this.auto?this.chooseButtonLabel:this.hasFiles?this.files.map((e=>e.name)).join(", "):this.chooseButtonLabel},hasFiles(){return this.files&&this.files.length>0},chooseDisabled(){return this.disabled||this.fileLimit&&this.fileLimit<=this.files.length+this.uploadedFileCount},uploadDisabled(){return this.disabled||!this.hasFiles||this.fileLimit&&this.fileLimit<this.files.length},cancelDisabled(){return this.disabled||!this.hasFiles},chooseButtonLabel(){return this.chooseLabel||this.$primevue.config.locale.choose},uploadButtonLabel(){return this.uploadLabel||this.$primevue.config.locale.upload},cancelButtonLabel(){return this.cancelLabel||this.$primevue.config.locale.cancel}},components:{FileUploadButton:Ut.Z,FileUploadProgressBar:ci,FileUploadMessage:wi},directives:{ripple:Rt.Z}};const Ti={key:0,class:"p-fileupload p-fileupload-advanced p-component"},Mi={class:"p-fileupload-buttonbar"},Fi=["multiple","accept","disabled"],Pi={class:"p-button-label"},Ai={key:1,class:"p-fileupload-files"},Bi=["alt","src","width"],Ni={class:"p-fileupload-filename"},Oi={key:2,class:"p-fileupload-empty"},Ki={key:1,class:"p-fileupload p-fileupload-basic p-component"},Ui={class:"p-button-label"},Li=["accept","disabled","multiple"];function Yi(e,t,i,l,o,d){const r=(0,a.up)("FileUploadButton"),c=(0,a.up)("FileUploadProgressBar"),h=(0,a.up)("FileUploadMessage"),p=(0,a.Q2)("ripple");return d.isAdvanced?((0,a.wg)(),(0,a.iD)("div",Ti,[(0,a._)("div",Mi,[(0,a.wy)(((0,a.wg)(),(0,a.iD)("span",{class:(0,n.C_)(d.advancedChooseButtonClass),style:(0,n.j5)(i.style),onClick:t[1]||(t[1]=(...e)=>d.choose&&d.choose(...e)),onKeydown:t[2]||(t[2]=(0,s.D2)(((...e)=>d.choose&&d.choose(...e)),["enter"])),onFocus:t[3]||(t[3]=(...e)=>d.onFocus&&d.onFocus(...e)),onBlur:t[4]||(t[4]=(...e)=>d.onBlur&&d.onBlur(...e)),tabindex:"0"},[(0,a._)("input",{ref:"fileInput",type:"file",onChange:t[0]||(t[0]=(...e)=>d.onFileSelect&&d.onFileSelect(...e)),multiple:i.multiple,accept:i.accept,disabled:d.chooseDisabled},null,40,Fi),(0,a._)("span",{class:(0,n.C_)(d.advancedChooseIconClass)},null,2),(0,a._)("span",Pi,(0,n.zw)(d.chooseButtonLabel),1)],38)),[[p]]),i.showUploadButton?((0,a.wg)(),(0,a.j4)(r,{key:0,label:d.uploadButtonLabel,icon:i.uploadIcon,onClick:d.upload,disabled:d.uploadDisabled},null,8,["label","icon","onClick","disabled"])):(0,a.kq)("",!0),i.showCancelButton?((0,a.wg)(),(0,a.j4)(r,{key:1,label:d.cancelButtonLabel,icon:i.cancelIcon,onClick:d.clear,disabled:d.cancelDisabled},null,8,["label","icon","onClick","disabled"])):(0,a.kq)("",!0)]),(0,a._)("div",{ref:"content",class:"p-fileupload-content",onDragenter:t[5]||(t[5]=(...e)=>d.onDragEnter&&d.onDragEnter(...e)),onDragover:t[6]||(t[6]=(...e)=>d.onDragOver&&d.onDragOver(...e)),onDragleave:t[7]||(t[7]=(...e)=>d.onDragLeave&&d.onDragLeave(...e)),onDrop:t[8]||(t[8]=(...e)=>d.onDrop&&d.onDrop(...e))},[d.hasFiles?((0,a.wg)(),(0,a.j4)(c,{key:0,value:o.progress},null,8,["value"])):(0,a.kq)("",!0),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.messages,(e=>((0,a.wg)(),(0,a.j4)(h,{key:e,severity:"error",onClose:d.onMessageClose},{default:(0,a.w5)((()=>[(0,a.Uk)((0,n.zw)(e),1)])),_:2},1032,["onClose"])))),128)),d.hasFiles?((0,a.wg)(),(0,a.iD)("div",Ai,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.files,((e,t)=>((0,a.wg)(),(0,a.iD)("div",{key:e.name+e.type+e.size,class:"p-fileupload-row"},[(0,a._)("div",null,[d.isImage(e)?((0,a.wg)(),(0,a.iD)("img",{key:0,role:"presentation",alt:e.name,src:e.objectURL,width:i.previewWidth},null,8,Bi)):(0,a.kq)("",!0)]),(0,a._)("div",Ni,(0,n.zw)(e.name),1),(0,a._)("div",null,(0,n.zw)(d.formatSize(e.size)),1),(0,a._)("div",null,[(0,a.Wm)(r,{type:"button",icon:"pi pi-times",onClick:e=>d.remove(t)},null,8,["onClick"])])])))),128))])):(0,a.kq)("",!0),e.$slots.empty&&!d.hasFiles?((0,a.wg)(),(0,a.iD)("div",Oi,[(0,a.WI)(e.$slots,"empty")])):(0,a.kq)("",!0)],544)])):d.isBasic?((0,a.wg)(),(0,a.iD)("div",Ki,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.messages,(e=>((0,a.wg)(),(0,a.j4)(h,{key:e,severity:"error",onClose:d.onMessageClose},{default:(0,a.w5)((()=>[(0,a.Uk)((0,n.zw)(e),1)])),_:2},1032,["onClose"])))),128)),(0,a.wy)(((0,a.wg)(),(0,a.iD)("span",{class:(0,n.C_)(d.basicChooseButtonClass),style:(0,n.j5)(i.style),onMouseup:t[12]||(t[12]=(...e)=>d.onBasicUploaderClick&&d.onBasicUploaderClick(...e)),onKeydown:t[13]||(t[13]=(0,s.D2)(((...e)=>d.choose&&d.choose(...e)),["enter"])),onFocus:t[14]||(t[14]=(...e)=>d.onFocus&&d.onFocus(...e)),onBlur:t[15]||(t[15]=(...e)=>d.onBlur&&d.onBlur(...e)),tabindex:"0"},[(0,a._)("span",{class:(0,n.C_)(d.basicChooseButtonIconClass)},null,2),(0,a._)("span",Ui,(0,n.zw)(d.basicChooseButtonLabel),1),d.hasFiles?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("input",{key:0,ref:"fileInput",type:"file",accept:i.accept,disabled:i.disabled,multiple:i.multiple,onChange:t[9]||(t[9]=(...e)=>d.onFileSelect&&d.onFileSelect(...e)),onFocus:t[10]||(t[10]=(...e)=>d.onFocus&&d.onFocus(...e)),onBlur:t[11]||(t[11]=(...e)=>d.onBlur&&d.onBlur(...e))},null,40,Li))],38)),[[p]])])):(0,a.kq)("",!0)}function Ei(e,t){void 0===t&&(t={});var i=t.insertAt;if(e&&"undefined"!==typeof document){var a=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css","top"===i&&a.firstChild?a.insertBefore(n,a.firstChild):a.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}}var Wi="\n.p-fileupload-content {\n    position: relative;\n}\n.p-fileupload-row {\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-align: center;\n        -ms-flex-align: center;\n            align-items: center;\n}\n.p-fileupload-row > div {\n    -webkit-box-flex: 1;\n        -ms-flex: 1 1 auto;\n            flex: 1 1 auto;\n    width: 25%;\n}\n.p-fileupload-row > div:last-child {\n    text-align: right;\n}\n.p-fileupload-content .p-progressbar {\n    width: 100%;\n    position: absolute;\n    top: 0;\n    left: 0;\n}\n.p-button.p-fileupload-choose {\n    position: relative;\n    overflow: hidden;\n}\n.p-button.p-fileupload-choose input[type='file'] {\n    display: none;\n}\n.p-fileupload-choose.p-fileupload-choose-selected input[type='file'] {\n    display: none;\n}\n.p-fileupload-filename {\n    word-break: break-all;\n}\n.p-fluid .p-fileupload .p-button {\n    width: auto;\n}\n";Ei(Wi),_i.render=Yi;var Ri=i(6265),Hi=i.n(Ri),Vi=i(7387),$i=i.n(Vi),zi=i(2724),qi=i(6797),ji=i.n(qi),Zi={props:["systemId"],components:{InputText:Kt.Z,Button:Ut.Z,DataTable:Nt.Z,Column:Ot.Z,Calendar:Lt.Z,Dialog:Yt.Z,TabView:Ht,TabPanel:oi,InlineMessage:Et.Z,Dropdown:ri.Z,FileUpload:_i},emits:["extend-session","showSearchbar"],data(){return{ProjectRef:"61196AD9FF1A440A9267D3044E8B595E",showTable:!0,first:0,snagsPage:1,pageSize:100,totalRecords:0,searchQuery:"",captionFilter:"",codeFilter:"",snagDetails:[],snagDetailsData:[],howManyTrips:"",AllPageMarked:!1,AllMarked:!1,sendMultipleInvoiceDialog:!1,showInvoiceSelectedButton:!1,selectedIDsForInvoicing:[],checkedIDs:[],invoiceDate:"",invoiceDateOK:!0,sendInvoiceDialog:!1,displayUnInvoiceConfirm:!1,dataTable:"dataTable",downloadedReport:"",binaryfile:"",photoIdForDelete:"",displayDeletePhotoConfirm:!1,uploadFIlename:"",displayUploadModal:!1,allStatuses:[{key:"Ready",name:"Ready"},{key:"Completed",name:"Completed"}],ClickedRowId:"",tableHeight:"calc( 100vh - 215px)",displayDeleteConfirm:!1,deletingTripName:"",newSnagDialog:!1,editSnagDialog:!1,isLoading:!0,userType:"",userLocale:"",loading1:!0,loading2:!0,filters1:null,visibleImagesModal:!1,tripImages:[],picturesTabShow:!1,activeTab:0,SnagDate:"",tripUserEmail:"",tripFrom:"",tripTo:"",tripFixedCosts:"",tripCargoName:"",tripDistance:"",tripDistanceCosts:"",tripVatPercentage:"",tripSum:"",tripSumVAT:"",tripCompanyName:"",tripComments:"",tripCreated:"",tripUserFullName:"",openedcargoname:"",displayInfoDialog:!1,InfoModalHeader:"",InfoModalMessage:"",newSnagDate:"",newSnagFrom:"",newSnagTo:"",newSnagTitle:"",newSnagCode:"0",newSnagStatus:"0",newSnagStatusCosts:"0",newSnagCompanyName:"",newSnagComments:"",newSnagDateOK:!0,newSnagFromOK:!0,newSnagToOK:!0,newSnagTitleOK:!0,newSnagCodeOK:!0,newSnagStatusOK:!0,newSnagStatusCostsOK:!0,newSnagCompanyNameOK:!0,newSnagCommentsOK:!0,editSnagDate:"",editSnagTitle:"",editSnagCode:"",editSnagCargoName:"",editSnagFixedCosts:"0",editSnagDistance:"0",editSnagDistanceCosts:"0",editSnagStatus:"",editSnagComments:"",editSnagDateOK:!0,editSnagTitleOK:!0,editSnagCodeOK:!0,editSnagCargoNameOK:!0,editSnagFixedCostsOK:!0,editSnagDistanceOK:!0,editSnagDistanceCostsOK:!0,editSnagStatusOK:!0,editSnagCommentsOK:!0,editSnagInvoiced:"",panelClass:"closedPanel",filters:{global:{value:null,matchMode:zi.a6.CONTAINS},code:{operator:zi.pg.AND,constraints:[{value:null,matchMode:zi.a6.CONTAINS}]},caption:{operator:zi.pg.AND,constraints:[{value:null,matchMode:zi.a6.CONTAINS}]},status:{operator:zi.pg.AND,constraints:[{value:null,matchMode:zi.a6.CONTAINS}]},createdBy:{operator:zi.pg.AND,constraints:[{value:null,matchMode:zi.a6.CONTAINS}]},area:{operator:zi.pg.AND,constraints:[{value:null,matchMode:zi.a6.CONTAINS}]},worksPackage:{operator:zi.pg.AND,constraints:[{value:null,matchMode:zi.a6.CONTAINS}]},closedBy:{operator:zi.pg.AND,constraints:[{value:null,matchMode:zi.a6.CONTAINS}]},assignedTo:{operator:zi.pg.AND,constraints:[{value:null,matchMode:zi.a6.CONTAINS}]}},aSystemDoc:"",matchModes:[{label:"Starts With",value:zi.a6.STARTS_WITH},{label:"Contains",value:zi.a6.CONTAINS}],allSnags:[],fromDate:"",toDate:""}},methods:{selectingForInvoice(e){if(this.checkedIDs[e]){const t=this.selectedIDsForInvoicing.indexOf(e);this.selectedIDsForInvoicing.splice(t,1)}else this.selectedIDsForInvoicing.push(e);this.selectedIDsForInvoicing.length>0?this.showInvoiceSelectedButton=!0:(this.showInvoiceSelectedButton=!1,this.AllPageMarked=!1)},invoiceSelected(){this.invoiceDate=ji()().format("DD/MM/YYYY HH:mm"),this.sendMultipleInvoiceDialog=!0},reorganizePagination(){$i()(".p-paginator-current").detach().appendTo(".p-paginator-left-content"),$i()(".p-paginator-rpp-options").detach().appendTo(".p-paginator-right-content")},moveSearchBoxToTop(){$i()("#hereMoveSearch").empty(),$i()("#searchBox").detach().appendTo("#hereMoveSearch")},newSnag(){this.resetInputFields(),this.newSnagDate=this.format_date(ji()(),"DD/MM/YYYY"),this.newSnagDialog=!0},editSnag(){var e=!0;""==this.editSnagDate?(this.editSnagDateOK=!1,e=!1):this.editSnagDateOK=!0,""==this.editSnagTitle?(this.editSnagTitleOK=!1,e=!1):this.editSnagTitleOK=!0,""==this.editSnagCode?(this.editSnagCodeOK=!1,e=!1):this.editSnagCodeOK=!0,this.editSnagStatus.name&&(this.editSnagStatus=this.editSnagStatus.name),""==this.editSnagStatus?(this.editSnagStatusOK=!1,e=!1):this.editSnagStatusOK=!0,1==e&&this.editSnagInDatabase()},editSnagInDatabase(){this.panelClass="closedPanel",this.isLoading=!0;var e=this.format_date(ji()(this.editSnagDate,"DD/MM/YYYY HH:mm"),"YYYY-MM-DD HH:mm:ss");const t=this.$store.getters.token,i=this._rootRestUrl;let a=JSON.stringify({key:this.ClickedRowId,sessionId:t,caption:this.editSnagTitle,code:this.editSnagCode,status:this.editSnagStatus,userEmail:"",date:e}),n={headers:{"Content-Type":"application/json"}};Hi().put(i+"/api/Snags/EditSnag",a,n).then((()=>{this.getSnags(),this.getCompanies(),this.editSnagDialog=!1,this.displayInfoDialog=!0,this.InfoModalHeader="Info",this.InfoModalMessage="Changes are saved",this.isLoading=!1})).catch((function(e){console.table(e),this.editSnagDialog=!1,this.displayInfoDialog=!0,this.InfoModalHeader="Error!",this.InfoModalMessage="An error occured while saving changes!",this.isLoading=!1})),this.extendTime()},saveSnag(){var e=!0;""==this.newSnagDate?(this.newSnagDateOK=!1,e=!1):this.newSnagDateOK=!0,""==this.newSnagTitle?(this.newSnagTitleOK=!1,e=!1):this.newSnagTitleOK=!0,null==this.newSnagCode?(this.newSnagCodeOK=!1,e=!1):this.newSnagCodeOK=!0,void 0==this.newSnagStatus||""==this.newSnagStatus?(this.newSnagStatus="",e=!1,this.newSnagStatusOK=!1):(this.newSnagStatus=this.newSnagStatus.name,""==this.newSnagStatus?(this.newSnagStatusOK=!1,e=!1):this.newSnagStatusOK=!0),void 0==this.newSnagStatus&&(this.newSnagStatus="",e=!1,this.newSnagStatusOK=!1),1==e&&this.InsertSnagToDatabase()},async InsertSnagToDatabase(){this.panelClass="closedPanel",this.isLoading=!0;var e=this.format_date(ji()(this.newSnagDate,"DD/MM/YYYY HH:mm"),"YYYY-MM-DD HH:mm:ss");const t=this._rootRestUrl;let i=JSON.stringify({ProjectRef:this.ProjectRef,type:"SNAG",key:"",code:this.newSnagCode,caption:this.newSnagTitle,status:this.newSnagStatus,date:e}),a={headers:{"Content-Type":"application/json"}};await Hi().post(t+"/api/Snags/InsertSnag",i,a).then((()=>{this.getSnags(),this.getCompanies(),this.newSnagDialog=!1,this.displayInfoDialog=!0,this.InfoModalHeader="Info",this.InfoModalMessage="Snag is inserted",this.isLoading=!1})).catch((function(e){"401"==e.response.status&&localStorage.clear(),console.table(e),this.newSnagDialog=!1,this.displayInfoDialog=!0,this.InfoModalHeader="Error!",this.InfoModalMessage="An error occured while saving snag!",this.isLoading=!1})),this.extendTime()},closeInfo(){this.displayInfoDialog=!1},handleClose(e){},closeInsertDialog(){this.newSnagDialog=!1,this.resetInputFields()},closeEditDialog(){this.editSnagDialog=!1,this.resetInputFields()},resetInputFields(){this.newSnagDate="",this.newSnagFrom="",this.newSnagTo="",this.newSnagTitle="",this.newSnagCode="0",this.newSnagStatus="0",this.newSnagStatusCosts="0",this.newSnagCompanyName="",this.newSnagComments="",this.newSnagDateOK=!0,this.newSnagFromOK=!0,this.newSnagToOK=!0,this.newSnagTitleOK=!0,this.newSnagCodeOK=!0,this.newSnagStatusOK=!0,this.newSnagStatusCostsOK=!0,this.newSnagCompanyNameOK=!0,this.newSnagCommentsOK=!0,this.editSnagDate="",this.editSnagTitle="",this.editSnagCode="",this.editSnagCargoName="",this.editSnagFixedCosts="0",this.editSnagDistance="0",this.editSnagDistanceCosts="0",this.editSnagStatus="",this.editSnagComments="",this.editSnagDateOK=!0,this.editSnagTitleOK=!0,this.editSnagCodeOK=!0,this.editSnagCargoNameOK=!0,this.editSnagFixedCostsOK=!0,this.editSnagDistanceOK=!0,this.editSnagDistanceCostsOK=!0,this.editSnagStatusOK=!0,this.editSnagCommentsOK=!0},editClick(){this.editSnagDialog=!0},deleteClick(){this.displayDeleteConfirm=!0},deletePhotoId(e){this.displayDeletePhotoConfirm=!0,this.photoIdForDelete=e},deletePhotoModal(e){this.photoIdForDelete=e,this.deletePhoto()},async deletePhoto(){this.panelClass="closedPanel",this.isLoading=!0;const e=this.$store.getters.token,t=this._rootRestUrl;let i=JSON.stringify({sessionId:e,key:this.photoIdForDelete}),a={headers:{"Content-Type":"application/json"}};await Hi().post(t+"/api/v1/Trip/DeleteTripFile",i,a).then((()=>{this.getSnags(),this.getCompanies(),this.displayDeletePhotoConfirm=!1,this.visibleImagesModal=!1,this.displayInfoDialog=!0,this.InfoModalHeader="Info",this.InfoModalMessage="Photo is deleted",this.isLoading=!1})).catch((function(e){"401"==e.response.status&&localStorage.clear(),console.table(e),this.displayDeleteConfirm=!1,this.displayDeletePhotoConfirm=!0,this.visibleImagesModal=!1,this.InfoModalHeader="Error!",this.InfoModalMessage="An error occured while deleting photo!",this.isLoading=!1})),this.extendTime()},async deleteTrip(){this.panelClass="closedPanel",this.isLoading=!0;const e=this.$store.getters.token,t=this._rootRestUrl;let i=JSON.stringify({sessionId:e,key:this.ClickedRowId}),a={headers:{"Content-Type":"application/json"}};await Hi().post(t+"/api/v1/Trip/DeleteTrip",i,a).then((()=>{this.getSnags(),this.getCompanies(),this.displayDeleteConfirm=!1,this.displayInfoDialog=!0,this.InfoModalHeader="Info",this.InfoModalMessage="Trip is deleted",this.isLoading=!1})).catch((function(e){"401"==e.response.status&&localStorage.clear(),console.table(e),this.displayDeleteConfirm=!1,this.displayInfoDialog=!0,this.InfoModalHeader="Error!",this.InfoModalMessage="An error occured while deleting trip!",this.isLoading=!1})),this.extendTime()},downloadClick(){alert("Download clicked")},refreshData(){10!=this.fromDate.length&&(this.fromDate=this.format_date(this.fromDate,"DD/MM/YYYY")),10!=this.toDate.length&&(this.toDate=this.format_date(this.toDate,"DD/MM/YYYY")),this.getSnags(),this.getCompanies()},format_date_to_full(e,t){var i=e.substring(6,10),a=e.substring(3,5),n=e.substring(0,2);return i+"-"+a+"-"+n+" "+t},format_date_to_full_time(e){var t=e.substring(6,10),i=e.substring(3,5),a=e.substring(0,2),n=e.substring(11,13),s=e.substring(14,16),l="00";return t+"-"+i+"-"+a+" "+n+":"+s+":"+l},format_date_to_dateTime(e){var t=e.substring(0,4),i=e.substring(5,7),a=e.substring(8,10),n=e.substring(11,13),s=e.substring(14,16);return a+"/"+i+"/"+t+" "+n+":"+s},async getCompanies(){},extendTime(){this.$emit("extend-session")},async getSnags(){10!=this.fromDate.length&&(this.fromDate=this.format_date(this.fromDate,"DD/MM/YYYY")),10!=this.toDate.length&&(this.toDate=this.format_date(this.toDate,"DD/MM/YYYY")),localStorage.setItem("fromDate",this.fromDate),localStorage.setItem("toDate",this.toDate),this.panelClass="closedPanel",this.isLoading=!0;const e=this._rootRestUrl;let t=JSON.stringify({pageNumber:this.snagsPage}),i={headers:{"Content-Type":"application/json"}};var a="";""!=this.captionFilter&&(a+="&caption="+this.captionFilter),""!=this.codeFilter&&(a+="&code="+this.codeFilter),""!=this.searchQuery&&(a+="&searchQuery="+this.searchQuery),await Hi().get(e+"/api/Snags/GetAllSnags/?pageNumber="+this.snagsPage+a,t,i).then((e=>{this.allSnags=e.data.snags,this.totalRecords=e.data.totalRecords,0==this.totalRecords?this.showTable=!1:this.showTable=!0,this.isLoading=!1,this.reorganizePagination()})).catch((function(e){"401"==e.response.status&&localStorage.clear()})),this.extendTime()},onRowClick(e){this.ClickedRowId=e.data.key,this.editSnagDate=this.format_date(e.data.date,"DD/MM/YYYY"),this.editSnagTitle=e.data.caption,this.editSnagStatus=e.data.status,this.editSnagCode=e.data.code,$i()(".hiddenFields").each((function(){$i()(this).closest("tr").removeClass("highlight")})),$i()(".hiddenFields").each((function(){$i()(this).attr("data")==e.data.id&&$i()(this).closest("tr").addClass("highlight")}))},onRowSelect(e){"I"!=e.originalEvent.target.tagName&&"SPAN"!=e.originalEvent.target.tagName&&($i()(".hiddenFields").each((function(){$i()(this).closest("tr").removeClass("highlight")})),$i()(".hiddenFields").each((function(){$i()(this).attr("data")==e.data.id&&$i()(this).closest("tr").addClass("highlight")})),this.getDocumentDetails(),""==this.tripImages?(this.picturesTabShow=!1,this.activeTab=0):this.picturesTabShow=!0)},openDialogAddPhoto(){this.displayUploadModal=!0},customUploader(e){var t=Date.now(),i=e.files[0];this.uploadImage(i,t+"_"+i.name)},async uploadImage(e,t){this.isLoading=!0;const i=this.$store.getters.token,a=this._rootRestUrl,n=this.ClickedRowId;let s={headers:{"Content-Type":"multipart/form-data"}};var l=new FormData;l.append("Key",""),l.append("Caption",t),l.append("SnagRef",n),l.append("ProjectRef",this.ProjectRef),l.append("SessionId",i),l.append("File",e);try{await Hi().post(a+"/api/Attachments/InsertPhoto",l,s).then((()=>{this.displayInfoDialog=!0,this.InfoModalHeader="Info",this.InfoModalMessage="Photo is added",this.isLoading=!1,this.displayUploadModal=!1,this.getSnags()}))}catch(o){this.displayInfoDialog=!0,this.InfoModalHeader="Alert!",this.InfoModalMessage="Error occured while uploading photo. Photo is not added!",this.isLoading=!1,this.displayUploadModal=!1,this.getSnags()}this.extendTime()},setInvoiceDateToday(){this.invoiceDate=ji()().format("DD/MM/YYYY HH:mm"),this.sendInvoiceDialog=!0},invoiceThisTrip(){var e=!0;""==this.invoiceDate?(this.invoiceDateOK=!1,e=!1):this.invoiceDateOK=!0,1==e&&this.markAsInvoicedInDatabase()},invoiceMultipleTrips(){var e=!0;""==this.invoiceDate?(this.invoiceDateOK=!1,e=!1):this.invoiceDateOK=!0,1==e&&this.markAsInvoicedMultipleInDatabase()},async markAsInvoicedInDatabase(){this.isLoading=!0;var e=this.format_date(ji()(this.invoiceDate,"DD/MM/YYYY HH:mm"),"YYYY-MM-DD HH:mm:ss");const t=this.$store.getters.token,i=this._rootRestUrl;let a=JSON.stringify({tripKey:this.ClickedRowId,sessionId:t,date:e,isInvoiceSent:!0}),n={headers:{"Content-Type":"application/json"}};await Hi().post(i+"/api/v1/Trip/MarkInvoiceAsSent",a,n).then((()=>{this.getSnags(),this.getCompanies(),this.displayInfoDialog=!0,this.sendInvoiceDialog=!1,this.InfoModalHeader="Info",this.InfoModalMessage="Trip is marked as invoiced",this.isLoading=!1,this.checkedIDs=[],this.AllPageMarked=!1})).catch((function(e){"401"==e.response.status&&localStorage.clear(),console.table(e),this.sendInvoiceDialog=!1,this.InfoModalHeader="Error!",this.InfoModalMessage=e.response.data,this.infoDialogStyle=[{width:"40rem"}],this.displayInfoDialog=!0,this.isLoading=!1})),this.extendTime()},async markAsInvoicedMultipleInDatabase(){this.isLoading=!0;var e=this.format_date(ji()(this.invoiceDate,"DD/MM/YYYY HH:mm"),"YYYY-MM-DD HH:mm:ss");const t=this.$store.getters.token,i=this._rootRestUrl;var a='{"sessionId": "'+t+'",';a+='     "invoices": [ ';var n=0,s=[];this.selectedIDsForInvoicing.forEach((t=>{s.push(t),n++,a+="{",a+='"tripKey": "'+t+'",',a+='"isInvoiceSent": true,',a+='"invoiceDate": "'+e+'"',a+="}",n<this.selectedIDsForInvoicing.length&&(a+=",")})),a+="  ]",a+="  }";let l=a,o={headers:{"Content-Type":"application/json"}};await Hi().post(i+"/api/v1/Trip/MarkInvoicesAsSent",l,o).then((()=>{this.getSnags(),this.getCompanies(),this.displayInfoDialog=!0,this.sendMultipleInvoiceDialog=!1,this.showInvoiceSelectedButton=!1,this.InfoModalHeader="Info",this.InfoModalMessage="Trips are marked as invoiced",this.isLoading=!1,s.forEach((e=>{this.checkedIDs[e]=!1;const t=this.selectedIDsForInvoicing.indexOf(e);this.selectedIDsForInvoicing.splice(t,1)}))})).catch((function(e){console.table(e),this.sendInvoiceDialog=!1,this.InfoModalHeader="Error!",this.InfoModalMessage=e.response.data,this.infoDialogStyle=[{width:"40rem"}],this.displayInfoDialog=!0,this.isLoading=!1})),this.AllPageMarked=!1,this.AllMarked=!1,this.extendTime()},async unInvoiceThisTrip(){this.isLoading=!0;const e=this.$store.getters.token,t=this._rootRestUrl;let i=JSON.stringify({tripKey:this.ClickedRowId,sessionId:e,date:"",isInvoiceSent:!1}),a={headers:{"Content-Type":"application/json"}};await Hi().post(t+"/api/v1/Trip/MarkInvoiceAsSent",i,a).then((()=>{this.getSnags(),this.getCompanies(),this.editSnagDialog=!1,this.displayInfoDialog=!0,this.displayUnInvoiceConfirm=!1,this.InfoModalHeader="Info",this.InfoModalMessage="Trip is marked as invoiced",this.isLoading=!1})).catch((function(e){"401"==e.response.status&&localStorage.clear(),console.table(e),this.displayUnInvoiceConfirm=!1,this.InfoModalHeader="Error!",this.InfoModalMessage=e.response.data,this.infoDialogStyle=[{width:"40rem"}],this.displayInfoDialog=!0,this.isLoading=!1})),this.extendTime()},async getDocumentDetails(){const e=this._rootRestUrl;let t=JSON.stringify({key:this.ClickedRowId}),i={headers:{"Content-Type":"application/json"}};this.isLoading=!0,await Hi().get(e+"/api/Snags/GetSnagDetails/?snagKey="+this.ClickedRowId,t,i).then((e=>{this.snagDetails=e.data,this.isLoading=!1,this.fillPanelData()})).catch((function(e){"401"==e.response.status&&localStorage.clear(),console.table(e),this.displayInfoDialog=!0,this.InfoModalHeader="Error!",this.InfoModalMessage="An error occured while getting snag details!",this.isLoading=!1})),this.extendTime(),this.isLoading=!1},fillPanelData(){this.snagDetailsData=this.snagDetails["snag"];var e=this.snagDetails["snagAttachments"];e.length>0?(this.tripImages=e,this.picturesTabShow=!0):(this.picturesTabShow=!1,this.tripImages=[]),this.openPanel()},openPanel(){this.panelClass="openedPanel"},closePanel(){this.panelClass="closedPanel"},initFilters1(){this.filters1={global:{value:null,matchMode:zi.a6.CONTAINS},userFullName:{operator:zi.pg.AND,constraints:[{value:null,matchMode:zi.a6.CONTAINS}]},from:{operator:zi.pg.AND,constraints:[{value:null,matchMode:zi.a6.CONTAINS}]},to:{operator:zi.pg.AND,constraints:[{value:null,matchMode:zi.a6.CONTAINS}]},companyName:{operator:zi.pg.AND,constraints:[{value:null,matchMode:zi.a6.CONTAINS}]},cargoName:{operator:zi.pg.AND,constraints:[{value:null,matchMode:zi.a6.CONTAINS}]},distance:{operator:zi.pg.AND,constraints:[{value:null,matchMode:zi.a6.CONTAINS}]},sumVAT:{operator:zi.pg.AND,constraints:[{value:null,matchMode:zi.a6.CONTAINS}]},comments:{operator:zi.pg.AND,constraints:[{value:null,matchMode:zi.a6.CONTAINS}]}}},clearFilter1(){this.initFilters1()},getFiles(){},format_date(e,t){if(e)return ji()(String(e)).format(t)},showloader(e){this.isLoading=e},async downloadReport(){this.getSnags(),this.isLoading=!0,10!=this.fromDate.length&&(this.fromDate=this.format_date(this.fromDate,"DD/MM/YYYY")),10!=this.toDate.length&&(this.toDate=this.format_date(this.toDate,"DD/MM/YYYY"));const e=this.format_date_to_full(this.fromDate,"00:00:00"),t=this.format_date_to_full(this.toDate,"23:59:59"),i=this.$store.getters.token,a=e,n=t,s=this._rootRestUrl,l="EN";let o=JSON.stringify({sessionId:i,DateFrom:a,DateTo:n,locale:l}),d={headers:{"Content-Type":"application/json"}};await Hi().get(s+"/api/v1/Trip/CSV/Trips/?sessionId="+i+"&DateFrom="+a+"&DateTo="+n+"&locale="+l,o,d).then((e=>{this.downloadedReport=e.data;var t="Report "+this.format_date(a,"YYYY-MM-DD")+" - "+this.format_date(n,"YYYY-MM-DD");this.downloadCSV(this.downloadedReport,t)})).catch((function(e){this.isLoading=!1,"401"==e.response.status&&localStorage.clear()})),this.extendTime()},correctData(){this.allSnags.forEach(((e,t)=>{const i=Object.entries(e);i.forEach((e=>{if("invSent"==e[0]){var i="";i=1==e[1]?"Yes":"No",this.allSnags[t]["invSent"]=i}}))}))},downloadCSV(e,t){const i=document.createElement("a");i.setAttribute("href",`data:text/csv;charset=utf-8,${e}`),i.setAttribute("download",t),i.style.display="none",document.body.appendChild(i),i.click(),document.body.removeChild(i),this.isLoading=!1},formatMoney(e,t,i,a,n){t=isNaN(t=Math.abs(t))?2:t,i="undefined"===typeof i?".":i,a="undefined"===typeof a?",":a;var s=e<0?"-":"",l=String(parseInt(e=Math.abs(Number(e)||0).toFixed(t))),o=(o=l.length)>3?o%3:0;return n+" "+s+(o?l.substr(0,o)+a:"")+l.substr(o).replace(/(\decSep{3})(?=\decSep)/g,"$1"+a)+(t?i+Math.abs(e-l).toFixed(t).slice(2):"")},showContextMenu:function(e){if("ADMIN"==this.userType.toUpperCase()){e.preventDefault();var t=document.getElementById("div-context-menu");t.style.left=e.pageX+"px",t.style.top=e.pageY-50+"px",t.style.display="block",t.cid=e.target.id.replace(/title-/,"")}},hideContextMenu:function(){document.getElementById("div-context-menu").style.display="none"},onClick:function(){this.hideContextMenu()},onPage(e){this.snagsPage=1*e["originalEvent"]["page"]+1,this.getSnags()},onSearchInput(){0==this.searchQuery.length&&(this.first=0,this.snagsPage=1,this.getSnags())},onSearch(){(this.searchQuery.length>2||0==this.searchQuery.length)&&(this.first=0,this.snagsPage=1,this.getSnags())},onFilter(e){this.captionFilter="",this.codeFilter="";var t=e.filters.caption.constraints;t.forEach((e=>{""!=e["value"]&&null!=e["value"]&&(this.captionFilter=e["value"])}));var i=e.filters.code.constraints;i.forEach((e=>{""!=e["value"]&&null!=e["value"]&&(this.codeFilter=e["value"])})),this.getSnags()},async SelectAllPage(){var e="",t=[];this.selectedIDsForInvoicing=[],$i()(".p-checkbox").each((function(){var e=$i()(this).parent().attr("data");t.push(e)})),0==this.AllPageMarked?(e="mark",this.showInvoiceSelectedButton=!0):(e="unmark",this.showInvoiceSelectedButton=!1),"mark"==e?t.forEach((e=>{this.selectedIDsForInvoicing.push(e),this.checkedIDs[e]=!0,this.AllPageMarked=!0})):(this.checkedIDs=[],this.AllPageMarked=!1)},SelectAll(e){"select"==e?0==this.AllMarked?this.showInvoiceSelectedButton=!0:this.showInvoiceSelectedButton=!1:(this.selectedIDsForInvoicing=[],this.checkedIDs=[],this.AllMarked=!1,this.AllPageMarked=!1,this.showInvoiceSelectedButton=!1),this.selectedIDsForInvoicing=[],"select"==e&&(this.AllMarked=!0,this.allSnags.forEach((e=>{const t=Object.entries(e);var i="";t.forEach((e=>{"id"==e[0]&&(i=e[1]),"invSent"==e[0]&&"No"==e[1]&&(this.selectedIDsForInvoicing.push(i),this.checkedIDs[i]=!0)}))}))),this.selectedIDsForInvoicing.lenght>0&&(this.showInvoiceSelectedButton=!0)}},mounted(){var e=document.getElementById("app");e.addEventListener("click",this.onClick),void 0!=localStorage.getItem("fromDate")?this.fromDate=localStorage.getItem("fromDate"):this.fromDate=ji()().startOf("isoWeek").format("DD/MM/YYYY"),void 0!=localStorage.getItem("toDate")?this.toDate=localStorage.getItem("toDate"):this.toDate=ji()().endOf("isoWeek").format("DD/MM/YYYY"),this.$emit("showSearchbar",!0),this.getSnags(),this.getCompanies(),this.moveSearchBoxToTop(),$i()("#editIconsPanel").detach().appendTo(".p-tabview-nav-content")},created(){this.aSystemDoc=localStorage.getItem("docType"),this.initFilters1(),this.loading1=!1}},Qi=i(89);const Gi=(0,Qi.Z)(Zi,[["render",Bt]]);var Ji=Gi}}]);
//# sourceMappingURL=56.a5324a8e.js.map
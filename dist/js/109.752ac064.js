"use strict";(self["webpackChunkSnags"]=self["webpackChunkSnags"]||[]).push([[109],{6109:function(e,t,i){i.r(t),i.d(t,{default:function(){return Ja}});var a=i(3396),n=i(7139),s=i(9242);const l={class:"p-input-icon-right",id:"searchBox"},o={class:"row"},r={class:"d-none d-xl-block col-md-4"},d=(0,a.Uk)("   "),c=(0,a.Uk)("   "),p=(0,a.Uk)("   "),h={class:"d-block d-xl-none d-col-md-4"},u=(0,a.Uk)("   "),g=(0,a.Uk)("   "),m=(0,a.Uk)("   "),f=(0,a._)("div",{class:"col-md-4 text-center"},null,-1),v={class:"col-md-4 text-end"},y=(0,a.Uk)(" Loading data. Please wait... "),w={class:"closedByName"},b={class:"closedByDate"},k={style:{display:"inline-block",width:"85%","padding-right":"50px"}},D={key:0,style:{display:"block",width:"15%"}},S={key:0,src:"/images/pin.png",style:{height:"18px"}},C={key:1,src:"/images/pin.png",style:{height:"18px",visibility:"hidden"}},x=(0,a._)("i",{class:"fa fa-camera"},null,-1),I={key:0,class:"statusOpen statusBlock"},_={key:1,class:"statusClosed statusBlock"},T={key:2,class:"statusActioned statusBlock"},M={key:3,class:"statusReturned statusBlock"},F={class:"closedByName"},B={class:"closedByDate"},P={class:"closedByName"},A={class:"closedByDate"},U=(0,a._)("div",{style:{right:"20px",position:"absolute"}},[(0,a._)("div",{style:{float:"right"}},"Actions")],-1),L={class:"actionButtonsHolderTable"},N=(0,a._)("i",{class:"fa-solid fa-square fa-stack-2x"},null,-1),O=(0,a._)("i",{class:"fa-stack-1x fa-solid fa-pen-to-square",style:{color:"white"}},null,-1),K=[N,O],W=(0,a._)("i",{class:"fa-solid fa-square fa-stack-2x"},null,-1),Y=(0,a._)("i",{class:"fa-stack-1x fa-solid fa-trash-can",style:{color:"white"}},null,-1),E=[W,Y],R={key:0,class:"alert alert-danger text-center"},V={class:"row"},z={class:"col-md-12 text-end"},H={class:"row"},$={class:"col text-center"},q={class:"detailsHeadlineCode"},j={class:"detailsHeadline"},Q={class:"row"},Z={class:"col text-center"},J={class:"text-end",id:"editIconsPanel"},G={class:"actionButtonsHolder"},X=(0,a._)("i",{class:"fa-solid fa-square fa-stack-2x"},null,-1),ee=(0,a._)("i",{class:"fa-stack-1x fa-solid fa-pen-to-square",style:{color:"white"}},null,-1),te=[X,ee],ie=(0,a._)("i",{class:"fa-solid fa-square fa-stack-2x"},null,-1),ae=(0,a._)("i",{class:"fa-stack-1x fa-solid fa-trash-can",style:{color:"white"}},null,-1),ne=[ie,ae],se={class:"row",style:{}},le={class:"col text-center",style:{padding:"19px"}},oe={class:"row",style:{"margin-bottom":"10px"}},re={class:"col text-start",style:{padding:"0"}},de={class:"table table-striped table-sm",id:"detailsTable"},ce=(0,a._)("td",{style:{width:"160px"}},"Date Opened:",-1),pe=(0,a._)("td",{style:{width:"160px"}},"Action by:",-1),he=(0,a._)("td",null,"Location:",-1),ue=(0,a._)("td",null,"Works Package:",-1),ge=(0,a._)("td",null,"Owner:",-1),me=(0,a._)("td",null,"Closed by:",-1),fe=(0,a._)("td",null,"Notes:",-1),ve=["textContent"],ye={class:"row"},we=(0,a._)("div",{class:"col-md-6 text-left",style:{padding:"0"}},null,-1),be={class:"col-md-6 text-end",style:{padding:"0"}},ke={class:"row",style:{"margin-top":"12px"}},De={class:"col text-end",style:{padding:"0"}},Se=(0,a._)("img",{src:"/images/pindrawing.jpg"},null,-1),Ce={class:"historyHolder"},xe={class:"row"},Ie={class:"col-md-12"},_e={class:"mt-3"},Te={class:"historyStatus"},Me={class:"historyDate"},Fe={class:"historyName"},Be=(0,a._)("div",{class:"historyNotes"},[(0,a._)("textarea",{class:"textAreaComments"},"Comments")],-1),Pe=(0,a.Uk)(" Enter new snag "),Ae={class:"container",id:"formContainer"},Ue={class:"row insertFormRow align-items-center even"},Le=(0,a._)("div",{class:"col-md-3"},[(0,a._)("label",{for:"newSnagDate"},"Required by Date *")],-1),Ne={class:"col-md-9"},Oe=(0,a.Uk)("This field is required"),Ke={class:"row insertFormRow align-items-center"},We=(0,a._)("div",{class:"col-md-3"},[(0,a._)("label",{for:"newSnagTitle"},"Item *")],-1),Ye={class:"col-md-9"},Ee=(0,a.Uk)("This field is required"),Re={class:"row insertFormRow align-items-center even"},Ve=(0,a._)("div",{class:"col-md-3"},[(0,a._)("label",{for:"newSnagCode"},"Code *")],-1),ze={class:"col-md-9"},He=(0,a.Uk)("This field is required"),$e={class:"row insertFormRow align-items-center"},qe=(0,a._)("div",{class:"col-md-3"},[(0,a._)("label",{for:"newSnagStatus"},"Status * ")],-1),je={class:"col-md-9"},Qe=(0,a.Uk)("This field is required"),Ze={class:"row insertFormRow align-items-center"},Je={class:"col-md-6 text-left"},Ge={class:"col-md-6 text-end"},Xe=(0,a.Uk)(" Edit Snag "),et={class:"container",id:"formContainer"},tt={class:"row insertFormRow align-items-center even"},it=(0,a._)("div",{class:"col-md-3"},[(0,a._)("label",{for:"editSnagDate"},"Required by Date *")],-1),at={class:"col-md-9"},nt=(0,a.Uk)("This field is required"),st={class:"row insertFormRow align-items-center"},lt=(0,a._)("div",{class:"col-md-3"},[(0,a._)("label",{for:"editSnagTitle"},"Item *")],-1),ot={class:"col-md-9"},rt=(0,a.Uk)("This field is required"),dt={class:"row insertFormRow align-items-center even"},ct=(0,a._)("div",{class:"col-md-3"},[(0,a._)("label",{for:"editSnagStatus"},"Status *")],-1),pt={class:"col-md-9"},ht=(0,a.Uk)("This field is required"),ut={class:"row insertFormRow align-items-center"},gt=(0,a._)("div",{class:"col-md-3"},[(0,a._)("label",{for:"username"},"Code *")],-1),mt={class:"col-md-9"},ft=(0,a.Uk)("This field is required"),vt={class:"row insertFormRow align-items-center"},yt={class:"col-md-6 text-left"},wt={class:"col-md-6 text-end"},bt=(0,a._)("span",{class:"font-bold text-2xl block mb-2 mt-4"},null,-1),kt={class:"mb-0"},Dt={class:"flex text-end gap-2 mt-4"},St=(0,a._)("h4",null," Please confirm",-1),Ct=(0,a._)("span",{class:"font-bold text-2xl block mb-2 mt-4"},null,-1),xt={class:"mb-0"},It=(0,a.Uk)("Are you sure that you want to Delete Snag "),_t=(0,a.Uk)("?"),Tt={class:"row",style:{"margin-top":"30px"}},Mt={class:"col-md-6 text-start"},Ft={class:"col-md-6 text-end"},Bt=(0,a._)("h4",null," Please confirm",-1),Pt=(0,a._)("span",{class:"font-bold text-2xl block mb-2 mt-4"},null,-1),At={class:"mb-0"},Ut=(0,a.Uk)("Are you sure that you want to remove mark 'Invoiced'"),Lt=(0,a._)("br",null,null,-1),Nt=(0,a.Uk)(" for trip "),Ot=(0,a.Uk)("?"),Kt={class:"row",style:{"margin-top":"30px"}},Wt={class:"col-md-6 text-start"},Yt={class:"col-md-6 text-end"},Et=(0,a.Uk)(" Mark this trip as Invoiced "),Rt={class:"container",id:"formContainer"},Vt={class:"row insertFormRow align-items-center even"},zt=(0,a._)("div",{class:"col-md-3"},[(0,a._)("label",{for:"invoiceDate"},"Invoice Date *")],-1),Ht={class:"col-md-9"},$t=(0,a.Uk)("This field is required"),qt={class:"row insertFormRow align-items-center"},jt={class:"col-md-6 text-left"},Qt={class:"col-md-6 text-end"},Zt={key:0},Jt={key:1},Gt=(0,a.Uk)("Mark selected "),Xt={style:{"font-weight":"bold"}},ei=(0,a.Uk)(" as Invoiced"),ti={class:"container",id:"formContainer"},ii={class:"row insertFormRow align-items-center even"},ai=(0,a._)("div",{class:"col-md-3"},[(0,a._)("label",{for:"invoiceDate"},"Invoice Date *")],-1),ni={class:"col-md-9"},si=(0,a.Uk)("This field is required"),li={class:"row insertFormRow align-items-center"},oi={class:"col-md-6 text-left"},ri={class:"col-md-6 text-end"},di=(0,a._)("h4",null," Please confirm",-1),ci=(0,a._)("span",{class:"font-bold text-2xl block mb-2 mt-4"},null,-1),pi=(0,a._)("p",{class:"mb-0"},"Are you sure that you want to delete this photo?",-1),hi={class:"row",style:{"margin-top":"30px"}},ui={class:"col-md-6 text-start"},gi={class:"col-md-6 text-end"},mi=(0,a._)("h4",null," Upload photo",-1),fi={class:"row",style:{"margin-top":"30px"}},vi={class:"col"},yi=(0,a._)("p",null,"Drag and drop files to here to upload.",-1),wi={id:"div-context-menu",class:"cls-context-menu",style:{left:"11px",top:"13px",display:"none"}},bi={key:0},ki={key:1},Di={key:2};function Si(e,t,i,N,O,W){const Y=(0,a.up)("base-spinner"),X=(0,a.up)("base-dialog"),ee=(0,a.up)("InputText"),ie=(0,a.up)("Button"),ae=(0,a.up)("Calendar"),Si=(0,a.up)("Column"),Ci=(0,a.up)("Dropdown"),xi=(0,a.up)("DataTable"),Ii=(0,a.up)("TabPanel"),_i=(0,a.up)("SwiperCarousel"),Ti=(0,a.up)("TabView"),Mi=(0,a.up)("Timeline"),Fi=(0,a.up)("Dialog"),Bi=(0,a.up)("InlineMessage"),Pi=(0,a.up)("FileUpload"),Ai=(0,a.Q2)("tooltip");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(X,{show:O.isLoading,title:"Authenticating...",fixed:""},{default:(0,a.w5)((()=>[(0,a.Wm)(Y)])),_:1},8,["show"]),(0,a._)("span",l,[(0,a.Wm)(ee,{modelValue:O.searchQuery,"onUpdate:modelValue":t[0]||(t[0]=e=>O.searchQuery=e),placeholder:"Keyword Search",onChange:W.onSearch,onInput:W.onSearchInput},null,8,["modelValue","onChange","onInput"]),(0,a._)("i",{class:"pi pi-search",onClick:t[1]||(t[1]=(...e)=>W.onSearch&&W.onSearch(...e))})]),(0,a._)("div",{class:"dataTableHolder",style:{width:"100%"},onContextmenu:t[15]||(t[15]=e=>W.showContextMenu(e))},[(0,a.Wm)(xi,{totalRecords:O.totalRecords,id:O.dataTable,value:O.allSnags,lazy:"",paginator:!0,rows:O.pageSize,first:O.first,dataKey:"id",stripedRows:"",filters:O.filters,"onUpdate:filters":t[10]||(t[10]=e=>O.filters=e),filterDisplay:"menu",key:"key",onPage:t[11]||(t[11]=e=>W.onPage(e)),onSort:t[12]||(t[12]=t=>e.onSort(t)),onFilter:t[13]||(t[13]=e=>W.onFilter(e)),onRowSelect:W.onRowSelect,onRowClick:W.onRowClick,onRowsChange:t[14]||(t[14]=t=>e.onRows(t)),paginatorTemplate:"CurrentPageReport FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink RowsPerPageDropdown",paginatorStart:"CurrentPageReport",rowsPerPageOptions:O.rowsPerPageOptions,responsiveLayout:"scroll",currentPageReportTemplate:"Showing {first} to {last} of total {totalRecords} snags",globalFilterFields:["code","title"],selectionMode:"single",loading:O.loading1,scrollable:"",scrollHeight:O.tableHeight},{header:(0,a.w5)((()=>[(0,a._)("div",o,[(0,a._)("div",r,[(0,a.wy)((0,a.Wm)(ie,{style:{"min-width":"120px"},type:"button",icon:"pi pi-pencil",class:"p-button-text",id:"newSnagButton",onClick:W.newSnag,label:"New snag"},null,8,["onClick"]),[[Ai,{value:"New Snag",showDelay:1e3,hideDelay:300},void 0,{bottom:!0}]]),d,(0,a.wy)((0,a.Wm)(ie,{style:{"min-width":"120px"},type:"button",icon:"pi pi-download",class:"p-button-text",id:"downloadReport",onClick:W.downloadReport,label:"Download Report"},null,8,["onClick"]),[[Ai,{value:"Download report",showDelay:1e3,hideDelay:300},void 0,{bottom:!0}]]),c,O.showInvoiceSelectedButton&&"ADMIN"==O.userType?(0,a.wy)(((0,a.wg)(),(0,a.j4)(ie,{key:0,style:{"min-width":"120px"},type:"button",icon:"pi pi-check-circle",class:"p-button-text",id:"invoiceSelected",onClick:W.invoiceSelected,label:"Invoice selected"},null,8,["onClick"])),[[Ai,{value:"Invoice selected",showDelay:1e3,hideDelay:300},void 0,{bottom:!0}]]):(0,a.kq)("",!0),(0,a.wy)((0,a.Wm)(ie,{style:{"min-width":"120px"},type:"button",icon:"pi pi-pencil",class:"p-button-text",id:"newSnagButton",onClick:t[2]||(t[2]=e=>W.getSnags("all")),label:"Load all snags"},null,512),[[Ai,{value:"Load all snags",showDelay:1e3,hideDelay:300},void 0,{bottom:!0}]]),p]),(0,a._)("div",h,[(0,a.wy)((0,a.Wm)(ie,{type:"button",icon:"pi pi-pencil",class:"p-button-text",id:"newSnagButton",onClick:W.newSnag,label:""},null,8,["onClick"]),[[Ai,{value:"New Snag",showDelay:1e3,hideDelay:300},void 0,{bottom:!0}]]),u,(0,a.wy)((0,a.Wm)(ie,{type:"button",icon:"pi pi-download",class:"p-button-text",id:"downloadReport",onClick:W.downloadReport,label:""},null,8,["onClick"]),[[Ai,{value:"Download report",showDelay:1e3,hideDelay:300},void 0,{bottom:!0}]]),g,O.showInvoiceSelectedButton&&"ADMIN"==O.userType?(0,a.wy)(((0,a.wg)(),(0,a.j4)(ie,{key:0,style:{"min-width":"120px"},type:"button",icon:"pi pi-check-circle",class:"p-button-text",id:"invoiceSelected",onClick:W.invoiceSelected,label:"Invoice selected"},null,8,["onClick"])),[[Ai,{value:"Invoice selected",showDelay:1e3,hideDelay:300},void 0,{bottom:!0}]]):(0,a.kq)("",!0),(0,a.wy)((0,a.Wm)(ie,{type:"button",icon:"pi pi-pencil",class:"p-button-text",id:"newSnagButton",onClick:t[3]||(t[3]=e=>W.getSnags("all")),label:""},null,512),[[Ai,{value:"Load all snags",showDelay:1e3,hideDelay:300},void 0,{bottom:!0}]]),m]),f,(0,a._)("div",v,[(0,a.wy)((0,a.Wm)(ae,{style:{width:"160px"},id:"fromDateBox",class:"dateDisplayInput",modelValue:O.fromDate,"onUpdate:modelValue":t[4]||(t[4]=e=>O.fromDate=e),showIcon:"",dateFormat:"dd/mm/yy",placeholder:"dd/mm/yy",mask:"99/99/9999",onChange:t[5]||(t[5]=t=>e.changeDate("from"))},null,8,["modelValue"]),[[Ai,{value:"Date from",showDelay:1e3,hideDelay:300},void 0,{bottom:!0}]]),(0,a.wy)((0,a.Wm)(ae,{style:{width:"160px"},id:"toDateBox",class:"dateDisplayInput",modelValue:O.toDate,"onUpdate:modelValue":t[6]||(t[6]=e=>O.toDate=e),showIcon:"",dateFormat:"dd/mm/yy",placeholder:"dd/mm/yy",mask:"99/99/9999",onChange:t[7]||(t[7]=t=>e.changeDate("to"))},null,8,["modelValue"]),[[Ai,{value:"Date to",showDelay:1e3,hideDelay:300},void 0,{bottom:!0}]]),(0,a.Wm)(ie,{type:"button",icon:"pi pi-refresh",class:"p-button-text",id:"refreshButton",onClick:W.refreshData},null,8,["onClick"])])])])),empty:(0,a.w5)((()=>[])),loading:(0,a.w5)((()=>[y])),paginatorstart:(0,a.w5)((()=>[])),paginatorend:(0,a.w5)((()=>[])),default:(0,a.w5)((()=>[(0,a.Wm)(Si,{class:"openedColumn",field:"date",filterField:"createdBy",header:"Opened",style:{display:"grid","min-width":"10rem","min-height":"43px"}},{body:(0,a.w5)((({data:e})=>[(0,a._)("span",w,(0,n.zw)(e.createdBy),1),(0,a._)("span",b,(0,n.zw)(W.format_date(e.created,"DD/MM/YYYY")),1)])),filter:(0,a.w5)((({filterModel:e,filterCallback:t})=>[(0,a.Wm)(ee,{type:"text",modelValue:e.value,"onUpdate:modelValue":t=>e.value=t,onKeydown:(0,s.D2)((e=>t()),["enter"]),class:"p-column-filter",placeholder:"Enter name"},null,8,["modelValue","onUpdate:modelValue","onKeydown"]),(0,a.Wm)(ie,{type:"button",class:"p-button-text myClearButton",onClick:i=>{e.value=null,t()},label:"Clear"},null,8,["onClick"])])),_:1}),(0,a.Wm)(Si,{class:"codeColumn",field:"code",header:"Code",bodyStyle:"text-align: left",style:{"min-height":"43px"}},{filter:(0,a.w5)((({filterModel:e,filterCallback:t})=>[(0,a.Wm)(ee,{type:"text",modelValue:e.value,"onUpdate:modelValue":t=>e.value=t,onKeydown:(0,s.D2)((e=>t()),["enter"]),class:"p-column-filter",placeholder:"Search"},null,8,["modelValue","onUpdate:modelValue","onKeydown"]),(0,a.Wm)(ie,{type:"button",class:"p-button-text myClearButton",onClick:i=>{e.value=null,t()},label:"Clear"},null,8,["onClick"])])),_:1}),(0,a.Wm)(Si,{class:"captionColumn",field:"caption",header:"Item",bodyStyle:"text-align: left",style:{"text-align":"left","min-height":"43px","min-width":"320px"}},{body:(0,a.w5)((({data:e})=>[(0,a._)("div",k,(0,n.zw)(e.caption),1),""!=e.hasPhoto?((0,a.wg)(),(0,a.iD)("div",D,["Architrave"==e.caption?((0,a.wg)(),(0,a.iD)("img",S)):(0,a.kq)("",!0),"Architrave"!=e.caption?((0,a.wg)(),(0,a.iD)("img",C)):(0,a.kq)("",!0),x])):(0,a.kq)("",!0)])),filter:(0,a.w5)((({filterModel:e,filterCallback:t})=>[(0,a.Wm)(ee,{type:"text",modelValue:e.value,"onUpdate:modelValue":t=>e.value=t,onKeydown:(0,s.D2)((e=>t()),["enter"]),class:"p-column-filter",placeholder:"Search"},null,8,["modelValue","onUpdate:modelValue","onKeydown"]),(0,a.Wm)(ie,{type:"button",class:"p-button-text myClearButton",onClick:i=>{e.value=null,t()},label:"Clear"},null,8,["onClick"])])),_:1}),(0,a.Wm)(Si,{class:"statusColumn",field:"status",header:"Status",bodyStyle:"text-align: left",style:{"min-height":"43px","max-width":"100px !important"}},{body:(0,a.w5)((({data:e})=>["Open"==e.status?((0,a.wg)(),(0,a.iD)("div",I,(0,n.zw)(e.status),1)):(0,a.kq)("",!0),"Closed"==e.status?((0,a.wg)(),(0,a.iD)("div",_,(0,n.zw)(e.status),1)):(0,a.kq)("",!0),"Actioned"==e.status?((0,a.wg)(),(0,a.iD)("div",T,(0,n.zw)(e.status),1)):(0,a.kq)("",!0),"Returned"==e.status?((0,a.wg)(),(0,a.iD)("div",M,(0,n.zw)(e.status),1)):(0,a.kq)("",!0)])),filter:(0,a.w5)((({filterModel:t})=>[(0,a.Wm)(Ci,{modelValue:t.value,"onUpdate:modelValue":e=>t.value=e,options:O.allStatuses,filter:"",optionLabel:"name",optionValue:"value",placeholder:"Select Status"},null,8,["modelValue","onUpdate:modelValue","options"]),(0,a.Wm)(ie,{type:"button",class:"p-button-text myClearButton",onClick:i=>{t.value=null,e.filterCallback()},label:"Clear"},null,8,["onClick"])])),_:1}),(0,a.Wm)(Si,{class:"assignedToColumn",field:"assignedTo",filterField:"assignedTo",header:"Action By",bodyStyle:"text-align: left",style:{display:"grid","min-height":"43px"}},{body:(0,a.w5)((({data:e})=>[(0,a._)("span",F,(0,n.zw)(e.assignedTo),1),(0,a._)("span",B,(0,n.zw)(W.format_date(e.date,"DD/MM/YYYY")),1)])),filter:(0,a.w5)((({filterModel:e,filterCallback:t})=>[(0,a.Wm)(ee,{type:"text",modelValue:e.value,"onUpdate:modelValue":t=>e.value=t,onKeydown:(0,s.D2)((e=>t()),["enter"]),class:"p-column-filter",placeholder:"Enter name"},null,8,["modelValue","onUpdate:modelValue","onKeydown"]),(0,a.Wm)(ie,{type:"button",class:"p-button-text myClearButton",onClick:i=>{e.value=null,t()},label:"Clear"},null,8,["onClick"])])),_:1}),(0,a.Wm)(Si,{class:"areaColumn",field:"area",header:"Location",bodyStyle:"text-align: left",style:{"min-height":"43px"}},{filter:(0,a.w5)((({filterModel:e,filterCallback:t})=>[(0,a.Wm)(ee,{type:"text",modelValue:e.value,"onUpdate:modelValue":t=>e.value=t,onKeydown:(0,s.D2)((e=>t()),["enter"]),class:"p-column-filter",placeholder:"Search"},null,8,["modelValue","onUpdate:modelValue","onKeydown"]),(0,a.Wm)(ie,{type:"button",class:"p-button-text myClearButton",onClick:i=>{e.value=null,t()},label:"Clear"},null,8,["onClick"])])),_:1}),(0,a.Wm)(Si,{class:"workspackageColumn",field:"worksPackage",header:"Works Package",bodyStyle:"text-align: left",style:{"min-height":"43px"}},{filter:(0,a.w5)((({filterModel:e,filterCallback:t})=>[(0,a.Wm)(ee,{type:"text",modelValue:e.value,"onUpdate:modelValue":t=>e.value=t,onKeydown:(0,s.D2)((e=>t()),["enter"]),class:"p-column-filter",placeholder:"Search"},null,8,["modelValue","onUpdate:modelValue","onKeydown"]),(0,a.Wm)(ie,{type:"button",class:"p-button-text myClearButton",onClick:i=>{e.value=null,t()},label:"Clear"},null,8,["onClick"])])),_:1}),(0,a.Wm)(Si,{class:"closedByColumn",field:"closedBy",filterField:"closedBy",header:"Closed By",bodyStyle:"text-align: left",style:{display:"grid","min-height":"43px"}},{body:(0,a.w5)((({data:e})=>[(0,a._)("span",P,(0,n.zw)(e.closedBy),1),(0,a._)("span",A,(0,n.zw)(W.format_date(e.signOffDate,"DD/MM/YYYY")),1)])),filter:(0,a.w5)((({filterModel:e,filterCallback:t})=>[(0,a.Wm)(ee,{type:"text",modelValue:e.value,"onUpdate:modelValue":t=>e.value=t,onKeydown:(0,s.D2)((e=>t()),["enter"]),class:"p-column-filter",placeholder:"Enter name"},null,8,["modelValue","onUpdate:modelValue","onKeydown"]),(0,a.Wm)(ie,{type:"button",class:"p-button-text myClearButton",onClick:i=>{e.value=null,t()},label:"Clear"},null,8,["onClick"])])),_:1}),(0,a.Wm)(Si,{field:"",header:"",bodyStyle:"text-align: left",style:{"min-height":"43px"}},{header:(0,a.w5)((()=>[U])),body:(0,a.w5)((()=>[(0,a._)("div",L,[(0,a.wy)(((0,a.wg)(),(0,a.iD)("div",{class:"fa-stack fa-2x actionIcons",style:{"font-size":"15px"},onClick:t[8]||(t[8]=(...e)=>W.editClick&&W.editClick(...e))},K)),[[Ai,{value:"Edit Snag",showDelay:1e3,hideDelay:300},void 0,{bottom:!0}]]),(0,a.wy)(((0,a.wg)(),(0,a.iD)("div",{class:"fa-stack fa-2x actionIcons",style:{"font-size":"15px",color:"#aa0000"},onClick:t[9]||(t[9]=(...e)=>W.deleteClick&&W.deleteClick(...e))},E)),[[Ai,{value:"Delete Snag",showDelay:1e3,hideDelay:300},void 0,{left:!0}]])])])),_:1})])),_:1},8,["totalRecords","id","value","rows","first","filters","onRowSelect","onRowClick","rowsPerPageOptions","loading","scrollHeight"])],32),O.showTable?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("div",R," Snags not found! ")),(0,a._)("div",{id:"RightSidepanel",class:(0,n.C_)(["RightSidepanel",O.panelClass])},[(0,a._)("div",V,[(0,a._)("div",z,[(0,a._)("i",{class:"pi pi-times cursorHand closePanelButton",onClick:t[16]||(t[16]=(...e)=>W.closePanel&&W.closePanel(...e))})])]),(0,a._)("div",H,[(0,a._)("div",$,[(0,a._)("h5",q,(0,n.zw)(O.snagDetailsData.code),1),(0,a._)("h5",j,(0,n.zw)(O.snagDetailsData.caption),1)])]),(0,a._)("div",Q,[(0,a._)("div",Z,[(0,a._)("div",{class:(0,n.C_)("statusBlock status"+O.snagDetailsData.status)},(0,n.zw)(O.snagDetailsData.status),3)])]),(0,a._)("div",J,[(0,a._)("div",G,[(0,a.wy)(((0,a.wg)(),(0,a.iD)("div",{class:"fa-stack fa-2x actionIcons",style:{"font-size":"15px"},onClick:t[17]||(t[17]=(...e)=>W.editClick&&W.editClick(...e))},te)),[[Ai,{value:"Edit snag",showDelay:1e3,hideDelay:300},void 0,{bottom:!0}]]),(0,a.wy)(((0,a.wg)(),(0,a.iD)("div",{class:"fa-stack fa-2x actionIcons",style:{"font-size":"15px",color:"#aa0000"},onClick:t[18]||(t[18]=(...e)=>W.deleteClick&&W.deleteClick(...e))},ne)),[[Ai,{value:"Delete snag",showDelay:1e3,hideDelay:300},void 0,{left:!0}]])])]),(0,a._)("div",se,[(0,a._)("div",le,[(0,a.Wm)(Ti,{activeIndex:O.activeTab,"onUpdate:activeIndex":t[19]||(t[19]=e=>O.activeTab=e)},{default:(0,a.w5)((()=>[(0,a.Wm)(Ii,{header:"Details"},{default:(0,a.w5)((()=>[(0,a._)("div",oe,[(0,a._)("div",re,[(0,a.wy)((0,a.Wm)(ie,{type:"button",icon:"pi pi-file-pdf",class:"p-button-text donwloadPDFbutton",onClick:W.downloadSnagPDF,label:"Download PDF"},null,8,["onClick"]),[[Ai,{value:"Download PDF",showDelay:1e3,hideDelay:300},void 0,{bottom:!0}]])])]),(0,a._)("table",de,[(0,a._)("tbody",null,[(0,a._)("tr",null,[ce,(0,a._)("td",null,(0,n.zw)(O.snagDetailsData.date),1)]),(0,a._)("tr",null,[pe,(0,a._)("td",null,(0,n.zw)(O.snagDetailsData.assignedTo),1)]),(0,a._)("tr",null,[he,(0,a._)("td",null,(0,n.zw)(O.snagDetailsData.area),1)]),(0,a._)("tr",null,[ue,(0,a._)("td",null,(0,n.zw)(O.snagDetailsData.worksPackage),1)]),(0,a._)("tr",null,[ge,(0,a._)("td",null,(0,n.zw)(O.snagDetailsData.createdBy),1)]),(0,a._)("tr",null,[me,(0,a._)("td",null,(0,n.zw)(O.snagDetailsData.closedBy),1)]),(0,a._)("tr",null,[fe,(0,a._)("td",null,[(0,a._)("textarea",{rows:"5",textContent:(0,n.zw)(O.snagDetailsData.notes),style:{width:"100%"},readonly:""},null,8,ve)])])])]),(0,a._)("div",ye,[we,(0,a._)("div",be,[(0,a.wy)((0,a.Wm)(ie,{onClick:W.openDialogAddPhoto,style:{"min-width":"120px"},type:"button",class:"p-button-text addphotobutton",label:"Add photo"},null,8,["onClick"]),[[Ai,{value:"Add photo",showDelay:1e3,hideDelay:300},void 0,{bottom:!0}]])])])])),_:1}),O.picturesTabShow?((0,a.wg)(),(0,a.j4)(Ii,{key:0,header:"Pictures ("+O.snagImages.length+")"},{default:(0,a.w5)((()=>[(0,a.Wm)(_i,{notes:O.snagNotes,tripImages:O.snagImages,onShowloader:W.showloader,openedcargoname:O.openedcargoname,onSwiper:W.onSwiper,onDeletePhoto:W.deletePhotoId,onDeletePhotomodal:W.deletePhotoModal,userType:O.userType},null,8,["notes","tripImages","onShowloader","openedcargoname","onSwiper","onDeletePhoto","onDeletePhotomodal","userType"]),(0,a._)("div",ke,[(0,a._)("div",De,[(0,a.wy)((0,a.Wm)(ie,{onClick:W.openDialogAddPhoto,style:{"min-width":"120px"},type:"button",class:"p-button-text addphotobutton",label:"Add photo"},null,8,["onClick"]),[[Ai,{value:"Add photo",showDelay:1e3,hideDelay:300},void 0,{bottom:!0}]])])])])),_:1},8,["header"])):(0,a.kq)("",!0),(0,a.Wm)(Ii,{header:"Drawing"},{default:(0,a.w5)((()=>[Se])),_:1})])),_:1},8,["activeIndex"])])]),(0,a._)("div",Ce,[(0,a._)("div",xe,[(0,a._)("div",Ie,[(0,a.Wm)(Mi,{value:O.events,align:"alternate"},{marker:(0,a.w5)((e=>[(0,a._)("span",{class:"flex w-2rem h-2rem align-items-center justify-content-center text-white border-circle z-1 shadow-1",style:(0,n.j5)({backgroundColor:e.item.color})},[(0,a._)("i",{class:(0,n.C_)(e.item.icon)},null,2)],4)])),content:(0,a.w5)((e=>[(0,a._)("div",_e,[(0,a._)("div",Te,(0,n.zw)(e.item.status),1),(0,a._)("div",Me,(0,n.zw)(e.item.date),1),(0,a._)("div",Fe,(0,n.zw)(e.item.createdBy),1),Be])])),_:1},8,["value"])])])]),(0,a.Wm)(Fi,{modal:"",visible:O.visibleImagesModal,"onUpdate:visible":t[20]||(t[20]=e=>O.visibleImagesModal=e),style:{width:"50rem"},breakpoints:{"1199px":"75vw","575px":"90vw"}},{default:(0,a.w5)((()=>[(0,a.Wm)(_i,{snagImages:O.snagImages,onDeletePhotomodal:W.deletePhotoModal},null,8,["snagImages","onDeletePhotomodal"])])),_:1},8,["visible"])],2),(0,a.Wm)(Fi,{"onUpdate:visible":[W.handleClose,t[28]||(t[28]=e=>O.newSnagDialog=e)],visible:O.newSnagDialog,modal:"",style:{width:"50rem"},breakpoints:{"1199px":"75vw","575px":"90vw"}},{header:(0,a.w5)((()=>[Pe])),default:(0,a.w5)((()=>[(0,a._)("div",Ae,[(0,a._)("div",Ue,[Le,(0,a._)("div",Ne,[(0,a.Wm)(ae,{onChange:t[21]||(t[21]=t=>e.changeDate("from")),style:{"margin-left":"0"},id:"newSnagDate",class:"dateDisplayInput",modelValue:O.newSnagDate,"onUpdate:modelValue":t[22]||(t[22]=e=>O.newSnagDate=e),showIcon:"",dateFormat:"dd/mm/yy",placeholder:"dd/mm/yy",mask:"99/99/9999"},null,8,["modelValue"]),O.newSnagDateOK?(0,a.kq)("",!0):((0,a.wg)(),(0,a.j4)(Bi,{key:0},{default:(0,a.w5)((()=>[Oe])),_:1}))])]),(0,a._)("div",Ke,[We,(0,a._)("div",Ye,[(0,a.Wm)(ee,{onInput:t[23]||(t[23]=e=>O.newSnagTitleOK=!0),id:"newSnagTitle",modelValue:O.newSnagTitle,"onUpdate:modelValue":t[24]||(t[24]=e=>O.newSnagTitle=e)},null,8,["modelValue"]),O.newSnagTitleOK?(0,a.kq)("",!0):((0,a.wg)(),(0,a.j4)(Bi,{key:0},{default:(0,a.w5)((()=>[Ee])),_:1}))])]),(0,a._)("div",Re,[Ve,(0,a._)("div",ze,[(0,a.Wm)(ee,{onInput:t[25]||(t[25]=e=>O.newSnagCodeOK=!0),id:"newSnagCode",modelValue:O.newSnagCode,"onUpdate:modelValue":t[26]||(t[26]=e=>O.newSnagCode=e)},null,8,["modelValue"]),O.newSnagCodeOK?(0,a.kq)("",!0):((0,a.wg)(),(0,a.j4)(Bi,{key:0},{default:(0,a.w5)((()=>[He])),_:1}))])]),(0,a._)("div",$e,[qe,(0,a._)("div",je,[(0,a.Wm)(Ci,{modelValue:O.newSnagStatus,"onUpdate:modelValue":t[27]||(t[27]=e=>O.newSnagStatus=e),options:O.allStatuses,optionLabel:"name",placeholder:"Select Status"},null,8,["modelValue","options"]),O.newSnagStatusOK?(0,a.kq)("",!0):((0,a.wg)(),(0,a.j4)(Bi,{key:0},{default:(0,a.w5)((()=>[Qe])),_:1}))])]),(0,a._)("div",Ze,[(0,a._)("div",Je,[(0,a.wy)((0,a.Wm)(ie,{onClick:W.closeInsertDialog,style:{"min-width":"120px"},icon:"pi pi-times-circle",type:"button",class:"p-button-text redButton",label:"Cancel"},null,8,["onClick"]),[[Ai,{value:"Cancel",showDelay:1e3,hideDelay:300},void 0,{bottom:!0}]])]),(0,a._)("div",Ge,[(0,a.wy)((0,a.Wm)(ie,{style:{"min-width":"120px"},type:"button",icon:"pi pi-pencil",class:"p-button-text",onClick:W.saveSnag,label:"Save snag"},null,8,["onClick"]),[[Ai,{value:"Save snag",showDelay:1e3,hideDelay:300},void 0,{bottom:!0}]])])])])])),_:1},8,["onUpdate:visible","visible"]),(0,a.Wm)(Fi,{"onUpdate:visible":[W.handleClose,t[36]||(t[36]=e=>O.editSnagDialog=e)],visible:O.editSnagDialog,modal:"",style:{width:"50rem"},breakpoints:{"1199px":"75vw","575px":"90vw"}},{header:(0,a.w5)((()=>[Xe])),default:(0,a.w5)((()=>[(0,a._)("div",et,[(0,a._)("div",tt,[it,(0,a._)("div",at,[(0,a.Wm)(ae,{value:O.editSnagDate,modelValue:O.editSnagDate,"onUpdate:modelValue":t[29]||(t[29]=e=>O.editSnagDate=e),onChange:t[30]||(t[30]=t=>e.changeDate("from")),style:{"margin-left":"0"},id:"editSnagDate",class:"dateDisplayInput",showIcon:"",dateFormat:"dd/mm/yy",placeholder:"dd/mm/yy",mask:"99/99/9999"},null,8,["value","modelValue"]),O.editSnagDateOK?(0,a.kq)("",!0):((0,a.wg)(),(0,a.j4)(Bi,{key:0},{default:(0,a.w5)((()=>[nt])),_:1}))])]),(0,a._)("div",st,[lt,(0,a._)("div",ot,[(0,a.Wm)(ee,{onInput:t[31]||(t[31]=e=>O.editSnagTitleOK=!0),id:"editSnagTitle",modelValue:O.editSnagTitle,"onUpdate:modelValue":t[32]||(t[32]=e=>O.editSnagTitle=e)},null,8,["modelValue"]),O.editSnagTitleOK?(0,a.kq)("",!0):((0,a.wg)(),(0,a.j4)(Bi,{key:0},{default:(0,a.w5)((()=>[rt])),_:1}))])]),(0,a._)("div",dt,[ct,(0,a._)("div",pt,[(0,a.Wm)(Ci,{modelValue:O.editSnagStatus,"onUpdate:modelValue":t[33]||(t[33]=e=>O.editSnagStatus=e),options:O.allStatuses,optionLabel:"name",placeholder:O.editSnagStatus},null,8,["modelValue","options","placeholder"]),O.editSnagStatusOK?(0,a.kq)("",!0):((0,a.wg)(),(0,a.j4)(Bi,{key:0},{default:(0,a.w5)((()=>[ht])),_:1}))])]),(0,a._)("div",ut,[gt,(0,a._)("div",mt,[(0,a.Wm)(ee,{onInput:t[34]||(t[34]=e=>O.editSnagCodeOK=!0),id:"editSnagCode",modelValue:O.editSnagCode,"onUpdate:modelValue":t[35]||(t[35]=e=>O.editSnagCode=e)},null,8,["modelValue"]),O.editSnagCodeOK?(0,a.kq)("",!0):((0,a.wg)(),(0,a.j4)(Bi,{key:0},{default:(0,a.w5)((()=>[ft])),_:1}))])]),(0,a._)("div",vt,[(0,a._)("div",yt,[(0,a.wy)((0,a.Wm)(ie,{onClick:W.closeEditDialog,style:{"min-width":"120px"},icon:"pi pi-times-circle",type:"button",class:"p-button-text redButton",label:"Cancel"},null,8,["onClick"]),[[Ai,{value:"Cancel",showDelay:1e3,hideDelay:300},void 0,{bottom:!0}]])]),(0,a._)("div",wt,[(0,a.wy)((0,a.Wm)(ie,{style:{"min-width":"120px"},type:"button",icon:"pi pi-pencil",class:"p-button-text",onClick:W.editSnag,label:"Save changes"},null,8,["onClick"]),[[Ai,{value:"Save changes",showDelay:1e3,hideDelay:300},void 0,{bottom:!0}]])])])])])),_:1},8,["onUpdate:visible","visible"]),(0,a.Wm)(Fi,{visible:O.displayInfoDialog,"onUpdate:visible":t[37]||(t[37]=e=>O.displayInfoDialog=e),modal:"",style:{width:"25rem"},breakpoints:{"1199px":"75vw","575px":"90vw"}},{header:(0,a.w5)((()=>[(0,a._)("h4",null,(0,n.zw)(O.InfoModalHeader),1)])),default:(0,a.w5)((()=>[bt,(0,a._)("p",kt,(0,n.zw)(O.InfoModalMessage),1),(0,a._)("div",Dt,[(0,a.Wm)(ie,{label:"Ok",onClick:W.closeInfo},null,8,["onClick"])])])),_:1},8,["visible"]),(0,a.Wm)(Fi,{visible:O.displayDeleteConfirm,"onUpdate:visible":t[39]||(t[39]=e=>O.displayDeleteConfirm=e),modal:"",style:{width:"30rem"},breakpoints:{"1199px":"75vw","575px":"90vw"}},{header:(0,a.w5)((()=>[St])),default:(0,a.w5)((()=>[Ct,(0,a._)("p",xt,[It,(0,a._)("strong",null,"'"+(0,n.zw)(O.editSnagCargoName)+"'",1),_t]),(0,a._)("div",Tt,[(0,a._)("div",Mt,[(0,a.Wm)(ie,{class:"redButton",label:"Cancel",onClick:t[38]||(t[38]=e=>O.displayDeleteConfirm=!1)})]),(0,a._)("div",Ft,[(0,a.Wm)(ie,{label:"Yes, delete",onClick:W.deleteTrip},null,8,["onClick"])])])])),_:1},8,["visible"]),(0,a.Wm)(Fi,{visible:O.displayUnInvoiceConfirm,"onUpdate:visible":t[41]||(t[41]=e=>O.displayUnInvoiceConfirm=e),modal:"",style:{width:"30rem"},breakpoints:{"1199px":"75vw","575px":"90vw"}},{header:(0,a.w5)((()=>[Bt])),default:(0,a.w5)((()=>[Pt,(0,a._)("p",At,[Ut,Lt,Nt,(0,a._)("strong",null,"'"+(0,n.zw)(O.editSnagCargoName)+"'",1),Ot]),(0,a._)("div",Kt,[(0,a._)("div",Wt,[(0,a.Wm)(ie,{class:"redButton",label:"Cancel",onClick:t[40]||(t[40]=t=>e.displayInvoiceConfirm=!1)})]),(0,a._)("div",Yt,[(0,a.Wm)(ie,{label:"Yes, remove it",onClick:W.unInvoiceThisTrip},null,8,["onClick"])])])])),_:1},8,["visible"]),(0,a.Wm)(Fi,{"onUpdate:visible":[W.handleClose,t[45]||(t[45]=e=>O.sendInvoiceDialog=e)],visible:O.sendInvoiceDialog,modal:"",style:{width:"50rem"},breakpoints:{"1199px":"75vw","575px":"90vw"}},{header:(0,a.w5)((()=>[Et])),default:(0,a.w5)((()=>[(0,a._)("div",Rt,[(0,a._)("div",Vt,[zt,(0,a._)("div",Ht,[(0,a.Wm)(ae,{hourFormat:"24",showTime:"",onChange:t[42]||(t[42]=t=>e.changeDate("from")),style:{"margin-left":"0"},id:"invoiceDate",class:"dateDisplayInput",modelValue:O.invoiceDate,"onUpdate:modelValue":t[43]||(t[43]=e=>O.invoiceDate=e),showIcon:"",dateFormat:"dd/mm/yy",placeholder:"dd/mm/yy",mask:"99/99/9999"},null,8,["modelValue"]),O.invoiceDateOK?(0,a.kq)("",!0):((0,a.wg)(),(0,a.j4)(Bi,{key:0},{default:(0,a.w5)((()=>[$t])),_:1}))])]),(0,a._)("div",qt,[(0,a._)("div",jt,[(0,a.wy)((0,a.Wm)(ie,{onClick:t[44]||(t[44]=e=>O.sendInvoiceDialog=!1),style:{"min-width":"120px"},icon:"pi pi-times-circle",type:"button",class:"p-button-text redButton",label:"Cancel"},null,512),[[Ai,{value:"Cancel",showDelay:1e3,hideDelay:300},void 0,{bottom:!0}]])]),(0,a._)("div",Qt,[(0,a.wy)((0,a.Wm)(ie,{style:{"min-width":"120px"},type:"button",icon:"pi pi-check-circle",class:"p-button-text",onClick:W.invoiceThisTrip,label:"Mark as Invoiced"},null,8,["onClick"]),[[Ai,{value:"Mark as Invoiced",showDelay:1e3,hideDelay:300},void 0,{bottom:!0}]])])])])])),_:1},8,["onUpdate:visible","visible"]),(0,a.Wm)(Fi,{"onUpdate:visible":[W.handleClose,t[49]||(t[49]=e=>O.sendMultipleInvoiceDialog=e)],visible:O.sendMultipleInvoiceDialog,modal:"",header:"header",style:{width:"50rem"},breakpoints:{"1199px":"75vw","575px":"90vw"}},{header:(0,a.w5)((()=>[1==O.selectedIDsForInvoicing.length?((0,a.wg)(),(0,a.iD)("span",Zt,"Mark selected trip as Invoiced")):(0,a.kq)("",!0),O.selectedIDsForInvoicing.length>1?((0,a.wg)(),(0,a.iD)("span",Jt,[Gt,(0,a._)("span",Xt,(0,n.zw)(O.selectedIDsForInvoicing.length)+" trips ",1),ei])):(0,a.kq)("",!0)])),default:(0,a.w5)((()=>[(0,a._)("div",ti,[(0,a._)("div",ii,[ai,(0,a._)("div",ni,[(0,a.Wm)(ae,{hourFormat:"24",showTime:"",onChange:t[46]||(t[46]=t=>e.changeDate("from")),style:{"margin-left":"0"},id:"invoiceMultipleDate",class:"dateDisplayInput",modelValue:O.invoiceDate,"onUpdate:modelValue":t[47]||(t[47]=e=>O.invoiceDate=e),showIcon:"",dateFormat:"dd/mm/yy",placeholder:"dd/mm/yy",mask:"99/99/9999"},null,8,["modelValue"]),O.invoiceDateOK?(0,a.kq)("",!0):((0,a.wg)(),(0,a.j4)(Bi,{key:0},{default:(0,a.w5)((()=>[si])),_:1}))])]),(0,a._)("div",li,[(0,a._)("div",oi,[(0,a.wy)((0,a.Wm)(ie,{onClick:t[48]||(t[48]=e=>O.sendMultipleInvoiceDialog=!1),style:{"min-width":"120px"},icon:"pi pi-times-circle",type:"button",class:"p-button-text redButton",label:"Cancel"},null,512),[[Ai,{value:"Cancel",showDelay:1e3,hideDelay:300},void 0,{bottom:!0}]])]),(0,a._)("div",ri,[(0,a.wy)((0,a.Wm)(ie,{style:{"min-width":"120px"},type:"button",icon:"pi pi-check-circle",class:"p-button-text",onClick:W.invoiceMultipleTrips,label:"Mark as Invoiced"},null,8,["onClick"]),[[Ai,{value:"Mark as Invoiced",showDelay:1e3,hideDelay:300},void 0,{bottom:!0}]])])])])])),_:1},8,["onUpdate:visible","visible"]),(0,a.Wm)(Fi,{visible:O.displayDeletePhotoConfirm,"onUpdate:visible":t[51]||(t[51]=e=>O.displayDeletePhotoConfirm=e),modal:"",style:{width:"30rem"},breakpoints:{"1199px":"75vw","575px":"90vw"}},{header:(0,a.w5)((()=>[di])),default:(0,a.w5)((()=>[ci,pi,(0,a._)("div",hi,[(0,a._)("div",ui,[(0,a.Wm)(ie,{class:"redButton",label:"Cancel",onClick:t[50]||(t[50]=e=>O.displayDeletePhotoConfirm=!1)})]),(0,a._)("div",gi,[(0,a.Wm)(ie,{label:"Yes, delete",onClick:W.deletePhoto},null,8,["onClick"])])])])),_:1},8,["visible"]),(0,a.Wm)(Fi,{visible:O.displayUploadModal,"onUpdate:visible":t[53]||(t[53]=e=>O.displayUploadModal=e),modal:"",style:{width:"60rem"},breakpoints:{"1199px":"75vw","575px":"90vw"}},{header:(0,a.w5)((()=>[mi])),default:(0,a.w5)((()=>[(0,a._)("div",fi,[(0,a._)("div",vi,[(0,a.Wm)(Pi,{name:"files[]",customUpload:!0,url:"/api/upload",onUploader:t[52]||(t[52]=e=>W.customUploader(e)),multiple:!1,accept:"image/*",maxFileSize:1e7},{empty:(0,a.w5)((()=>[yi])),_:1})])])])),_:1},8,["visible"]),(0,a._)("div",wi,[(0,a._)("ul",null,[(0,a._)("ul",null,[O.AllPageMarked||O.AllMarked?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("li",bi,[(0,a._)("a",{onClick:t[54]||(t[54]=e=>W.SelectAllPage("select"))},"Select all records on current page")])),O.AllPageMarked||O.AllMarked?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("li",ki,[(0,a._)("a",{onClick:t[55]||(t[55]=e=>W.SelectAll("select"))},"Select all on all pages")])),O.AllMarked||O.AllPageMarked?((0,a.wg)(),(0,a.iD)("li",Di,[(0,a._)("a",{onClick:t[56]||(t[56]=e=>W.SelectAll("deselect"))},"Deselect All ")])):(0,a.kq)("",!0)])])])],64)}var Ci=i(5424),xi=i(3717),Ii=i(6709),_i=i(1826),Ti=i(2711),Mi=i(2419),Fi=i(2679),Bi=i(1937),Pi=i(5030),Ai={name:"TabView",emits:["update:activeIndex","tab-change","tab-click"],props:{activeIndex:{type:Number,default:0},lazy:{type:Boolean,default:!1},scrollable:{type:Boolean,default:!1},tabindex:{type:Number,default:0},selectOnFocus:{type:Boolean,default:!1},previousButtonProps:null,nextButtonProps:null},data(){return{d_activeIndex:this.activeIndex,focusedTabIndex:-1,isPrevButtonDisabled:!0,isNextButtonDisabled:!1}},watch:{activeIndex(e){this.d_activeIndex=e,this.scrollInView({index:e})}},mounted(){this.updateInkBar()},updated(){this.updateInkBar()},methods:{isTabPanel(e){return"TabPanel"===e.type.name},isTabActive(e){return this.d_activeIndex===e},getTabProp(e,t){return e.props?e.props[t]:void 0},getKey(e,t){return this.getTabProp(e,"header")||t},getTabHeaderActionId(e){return`${this.id}_${e}_header_action`},getTabContentId(e){return`${this.id}_${e}_content`},onScroll(e){this.scrollable&&this.updateButtonState(),e.preventDefault()},onPrevButtonClick(){const e=this.$refs.content,t=Bi.p7.getWidth(e)-this.getVisibleButtonWidths(),i=e.scrollLeft-t;e.scrollLeft=i<=0?0:i},onNextButtonClick(){const e=this.$refs.content,t=Bi.p7.getWidth(e)-this.getVisibleButtonWidths(),i=e.scrollLeft+t,a=e.scrollWidth-t;e.scrollLeft=i>=a?a:i},onTabClick(e,t,i){this.changeActiveIndex(e,t,i),this.$emit("tab-click",{originalEvent:e,index:i})},onTabKeyDown(e,t,i){switch(e.code){case"ArrowLeft":this.onTabArrowLeftKey(e);break;case"ArrowRight":this.onTabArrowRightKey(e);break;case"Home":this.onTabHomeKey(e);break;case"End":this.onTabEndKey(e);break;case"PageDown":this.onPageDownKey(e);break;case"PageUp":this.onPageUpKey(e);break;case"Enter":case"Space":this.onTabEnterKey(e,t,i);break}},onTabArrowRightKey(e){const t=this.findNextHeaderAction(e.target.parentElement);t?this.changeFocusedTab(e,t):this.onTabHomeKey(e),e.preventDefault()},onTabArrowLeftKey(e){const t=this.findPrevHeaderAction(e.target.parentElement);t?this.changeFocusedTab(e,t):this.onTabEndKey(e),e.preventDefault()},onTabHomeKey(e){const t=this.findFirstHeaderAction();this.changeFocusedTab(e,t),e.preventDefault()},onTabEndKey(e){const t=this.findLastHeaderAction();this.changeFocusedTab(e,t),e.preventDefault()},onPageDownKey(e){this.scrollInView({index:this.$refs.nav.children.length-2}),e.preventDefault()},onPageUpKey(e){this.scrollInView({index:0}),e.preventDefault()},onTabEnterKey(e,t,i){this.changeActiveIndex(e,t,i),e.preventDefault()},findNextHeaderAction(e,t=!1){const i=t?e:e.nextElementSibling;return i?Bi.p7.hasClass(i,"p-disabled")||Bi.p7.hasClass(i,"p-tabview-ink-bar")?this.findNextHeaderAction(i):Bi.p7.findSingle(i,".p-tabview-header-action"):null},findPrevHeaderAction(e,t=!1){const i=t?e:e.previousElementSibling;return i?Bi.p7.hasClass(i,"p-disabled")||Bi.p7.hasClass(i,"p-tabview-ink-bar")?this.findPrevHeaderAction(i):Bi.p7.findSingle(i,".p-tabview-header-action"):null},findFirstHeaderAction(){return this.findNextHeaderAction(this.$refs.nav.firstElementChild,!0)},findLastHeaderAction(){return this.findPrevHeaderAction(this.$refs.nav.lastElementChild,!0)},changeActiveIndex(e,t,i){this.getTabProp(t,"disabled")||this.d_activeIndex===i||(this.d_activeIndex=i,this.$emit("update:activeIndex",i),this.$emit("tab-change",{originalEvent:e,index:i}),this.scrollInView({index:i}))},changeFocusedTab(e,t){if(t&&(Bi.p7.focus(t),this.scrollInView({element:t}),this.selectOnFocus)){const i=parseInt(t.parentElement.dataset.index,10),a=this.tabs[i];this.changeActiveIndex(e,a,i)}},scrollInView({element:e,index:t=-1}){const i=e||this.$refs.nav.children[t];i&&i.scrollIntoView&&i.scrollIntoView({block:"nearest"})},updateInkBar(){let e=this.$refs.nav.children[this.d_activeIndex];this.$refs.inkbar.style.width=Bi.p7.getWidth(e)+"px",this.$refs.inkbar.style.left=Bi.p7.getOffset(e).left-Bi.p7.getOffset(this.$refs.nav).left+"px"},updateButtonState(){const e=this.$refs.content,{scrollLeft:t,scrollWidth:i}=e,a=Bi.p7.getWidth(e);this.isPrevButtonDisabled=0===t,this.isNextButtonDisabled=parseInt(t)===i-a},getVisibleButtonWidths(){const{prevBtn:e,nextBtn:t}=this.$refs;return[e,t].reduce(((e,t)=>t?e+Bi.p7.getWidth(t):e),0)},getTabHeaderClass(e,t){return["p-tabview-header",this.getTabProp(e,"headerClass"),{"p-highlight":this.d_activeIndex===t,"p-disabled":this.getTabProp(e,"disabled")}]},getTabContentClass(e){return["p-tabview-panel",this.getTabProp(e,"contentClass")]}},computed:{contentClasses(){return["p-tabview p-component",{"p-tabview-scrollable":this.scrollable}]},tabs(){return this.$slots.default().reduce(((e,t)=>(this.isTabPanel(t)?e.push(t):t.children&&t.children instanceof Array&&t.children.forEach((t=>{this.isTabPanel(t)&&e.push(t)})),e)),[])},prevButtonAriaLabel(){return this.$primevue.config.locale.aria?this.$primevue.config.locale.aria.previous:void 0},nextButtonAriaLabel(){return this.$primevue.config.locale.aria?this.$primevue.config.locale.aria.next:void 0},id(){return this.$attrs.id||(0,Bi.Th)()}},directives:{ripple:Pi.Z}};const Ui={class:"p-tabview-nav-container"},Li=["tabindex","aria-label"],Ni=(0,a._)("span",{class:"pi pi-chevron-left","aria-hidden":"true"},null,-1),Oi=[Ni],Ki={ref:"nav",class:"p-tabview-nav",role:"tablist"},Wi=["data-index"],Yi=["id","tabindex","aria-disabled","aria-selected","aria-controls","onClick","onKeydown"],Ei={key:0,class:"p-tabview-title"},Ri={ref:"inkbar",class:"p-tabview-ink-bar",role:"presentation","aria-hidden":"true"},Vi=["tabindex","aria-label"],zi=(0,a._)("span",{class:"pi pi-chevron-right","aria-hidden":"true"},null,-1),Hi=[zi],$i={class:"p-tabview-panels"},qi=["aria-labelledby"];function ji(e,t,i,l,o,r){const d=(0,a.Q2)("ripple");return(0,a.wg)(),(0,a.iD)("div",{class:(0,n.C_)(r.contentClasses)},[(0,a._)("div",Ui,[i.scrollable&&!o.isPrevButtonDisabled?(0,a.wy)(((0,a.wg)(),(0,a.iD)("button",(0,a.dG)({key:0,ref:"prevBtn",type:"button",class:"p-tabview-nav-prev p-tabview-nav-btn p-link",tabindex:i.tabindex,"aria-label":r.prevButtonAriaLabel,onClick:t[0]||(t[0]=(...e)=>r.onPrevButtonClick&&r.onPrevButtonClick(...e))},i.previousButtonProps),Oi,16,Li)),[[d]]):(0,a.kq)("",!0),(0,a._)("div",{ref:"content",class:"p-tabview-nav-content",onScroll:t[1]||(t[1]=(...e)=>r.onScroll&&r.onScroll(...e))},[(0,a._)("ul",Ki,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(r.tabs,((e,t)=>((0,a.wg)(),(0,a.iD)("li",(0,a.dG)({key:r.getKey(e,t),style:r.getTabProp(e,"headerStyle"),class:r.getTabHeaderClass(e,t),role:"presentation","data-index":t},r.getTabProp(e,"headerProps")),[(0,a.wy)(((0,a.wg)(),(0,a.iD)("a",(0,a.dG)({id:r.getTabHeaderActionId(t),class:"p-tabview-nav-link p-tabview-header-action",tabindex:r.getTabProp(e,"disabled")||!r.isTabActive(t)?-1:i.tabindex,role:"tab","aria-disabled":r.getTabProp(e,"disabled"),"aria-selected":r.isTabActive(t),"aria-controls":r.getTabContentId(t),onClick:i=>r.onTabClick(i,e,t),onKeydown:i=>r.onTabKeyDown(i,e,t)},r.getTabProp(e,"headerActionProps")),[e.props&&e.props.header?((0,a.wg)(),(0,a.iD)("span",Ei,(0,n.zw)(e.props.header),1)):(0,a.kq)("",!0),e.children&&e.children.header?((0,a.wg)(),(0,a.j4)((0,a.LL)(e.children.header),{key:1})):(0,a.kq)("",!0)],16,Yi)),[[d]])],16,Wi)))),128)),(0,a._)("li",Ri,null,512)],512)],544),i.scrollable&&!o.isNextButtonDisabled?(0,a.wy)(((0,a.wg)(),(0,a.iD)("button",(0,a.dG)({key:1,ref:"nextBtn",type:"button",class:"p-tabview-nav-next p-tabview-nav-btn p-link",tabindex:i.tabindex,"aria-label":r.nextButtonAriaLabel,onClick:t[2]||(t[2]=(...e)=>r.onNextButtonClick&&r.onNextButtonClick(...e))},i.nextButtonProps),Hi,16,Vi)),[[d]]):(0,a.kq)("",!0)]),(0,a._)("div",$i,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(r.tabs,((e,t)=>((0,a.wg)(),(0,a.iD)(a.HY,{key:r.getKey(e,t)},[!i.lazy||r.isTabActive(t)?(0,a.wy)(((0,a.wg)(),(0,a.iD)("div",(0,a.dG)({key:0,style:r.getTabProp(e,"contentStyle"),class:r.getTabContentClass(e),role:"tabpanel","aria-labelledby":r.getTabHeaderActionId(t)},r.getTabProp(e,"contentProps")),[((0,a.wg)(),(0,a.j4)((0,a.LL)(e)))],16,qi)),[[s.F8,!!i.lazy||r.isTabActive(t)]]):(0,a.kq)("",!0)],64)))),128))])],2)}function Qi(e,t){void 0===t&&(t={});var i=t.insertAt;if(e&&"undefined"!==typeof document){var a=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css","top"===i&&a.firstChild?a.insertBefore(n,a.firstChild):a.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}}var Zi="\n.p-tabview-nav-container {\n    position: relative;\n}\n.p-tabview-scrollable .p-tabview-nav-container {\n    overflow: hidden;\n}\n.p-tabview-nav-content {\n    overflow-x: auto;\n    overflow-y: hidden;\n    scroll-behavior: smooth;\n    scrollbar-width: none;\n    -ms-scroll-chaining: contain auto;\n        overscroll-behavior: contain auto;\n}\n.p-tabview-nav {\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    margin: 0;\n    padding: 0;\n    list-style-type: none;\n    -webkit-box-flex: 1;\n        -ms-flex: 1 1 auto;\n            flex: 1 1 auto;\n}\n.p-tabview-header-action {\n    cursor: pointer;\n    -webkit-user-select: none;\n       -moz-user-select: none;\n        -ms-user-select: none;\n            user-select: none;\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-align: center;\n        -ms-flex-align: center;\n            align-items: center;\n    position: relative;\n    text-decoration: none;\n    overflow: hidden;\n}\n.p-tabview-ink-bar {\n    display: none;\n    z-index: 1;\n}\n.p-tabview-header-action:focus {\n    z-index: 1;\n}\n.p-tabview-title {\n    line-height: 1;\n    white-space: nowrap;\n}\n.p-tabview-nav-btn {\n    position: absolute;\n    top: 0;\n    z-index: 2;\n    height: 100%;\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-align: center;\n        -ms-flex-align: center;\n            align-items: center;\n    -webkit-box-pack: center;\n        -ms-flex-pack: center;\n            justify-content: center;\n}\n.p-tabview-nav-prev {\n    left: 0;\n}\n.p-tabview-nav-next {\n    right: 0;\n}\n.p-tabview-nav-content::-webkit-scrollbar {\n    display: none;\n}\n";Qi(Zi),Ai.render=ji;var Ji={name:"TabPanel",props:{header:null,headerStyle:null,headerClass:null,headerProps:null,headerActionProps:null,contentStyle:null,contentClass:null,contentProps:null,disabled:Boolean}};function Gi(e,t,i,n,s,l){return(0,a.WI)(e.$slots,"default")}Ji.render=Gi;var Xi=i(5517),ea={name:"ProgressBar",props:{value:{type:Number,default:null},mode:{type:String,default:"determinate"},showValue:{type:Boolean,default:!0}},computed:{containerClass(){return["p-progressbar p-component",{"p-progressbar-determinate":this.determinate,"p-progressbar-indeterminate":this.indeterminate}]},progressStyle(){return{width:this.value+"%",display:"flex"}},indeterminate(){return"indeterminate"===this.mode},determinate(){return"determinate"===this.mode}}};const ta=["aria-valuenow"],ia={key:0,class:"p-progressbar-label"},aa={key:1,class:"p-progressbar-indeterminate-container"},na=(0,a._)("div",{class:"p-progressbar-value p-progressbar-value-animate"},null,-1),sa=[na];function la(e,t,i,s,l,o){return(0,a.wg)(),(0,a.iD)("div",{role:"progressbar",class:(0,n.C_)(o.containerClass),"aria-valuemin":"0","aria-valuenow":i.value,"aria-valuemax":"100"},[o.determinate?((0,a.wg)(),(0,a.iD)("div",{key:0,class:"p-progressbar-value p-progressbar-value-animate",style:(0,n.j5)(o.progressStyle)},[null!=i.value&&0!==i.value&&i.showValue?((0,a.wg)(),(0,a.iD)("div",ia,[(0,a.WI)(e.$slots,"default",{},(()=>[(0,a.Uk)((0,n.zw)(i.value+"%"),1)]))])):(0,a.kq)("",!0)],4)):(0,a.kq)("",!0),o.indeterminate?((0,a.wg)(),(0,a.iD)("div",aa,sa)):(0,a.kq)("",!0)],10,ta)}function oa(e,t){void 0===t&&(t={});var i=t.insertAt;if(e&&"undefined"!==typeof document){var a=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css","top"===i&&a.firstChild?a.insertBefore(n,a.firstChild):a.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}}var ra="\n.p-progressbar {\n    position: relative;\n    overflow: hidden;\n}\n.p-progressbar-determinate .p-progressbar-value {\n    height: 100%;\n    width: 0%;\n    position: absolute;\n    display: none;\n    border: 0 none;\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-align: center;\n        -ms-flex-align: center;\n            align-items: center;\n    -webkit-box-pack: center;\n        -ms-flex-pack: center;\n            justify-content: center;\n    overflow: hidden;\n}\n.p-progressbar-determinate .p-progressbar-label {\n    display: -webkit-inline-box;\n    display: -ms-inline-flexbox;\n    display: inline-flex;\n}\n.p-progressbar-determinate .p-progressbar-value-animate {\n    -webkit-transition: width 1s ease-in-out;\n    transition: width 1s ease-in-out;\n}\n.p-progressbar-indeterminate .p-progressbar-value::before {\n    content: '';\n    position: absolute;\n    background-color: inherit;\n    top: 0;\n    left: 0;\n    bottom: 0;\n    will-change: left, right;\n    -webkit-animation: p-progressbar-indeterminate-anim 2.1s cubic-bezier(0.65, 0.815, 0.735, 0.395) infinite;\n    animation: p-progressbar-indeterminate-anim 2.1s cubic-bezier(0.65, 0.815, 0.735, 0.395) infinite;\n}\n.p-progressbar-indeterminate .p-progressbar-value::after {\n    content: '';\n    position: absolute;\n    background-color: inherit;\n    top: 0;\n    left: 0;\n    bottom: 0;\n    will-change: left, right;\n    -webkit-animation: p-progressbar-indeterminate-anim-short 2.1s cubic-bezier(0.165, 0.84, 0.44, 1) infinite;\n    animation: p-progressbar-indeterminate-anim-short 2.1s cubic-bezier(0.165, 0.84, 0.44, 1) infinite;\n    -webkit-animation-delay: 1.15s;\n    animation-delay: 1.15s;\n}\n@-webkit-keyframes p-progressbar-indeterminate-anim {\n0% {\n        left: -35%;\n        right: 100%;\n}\n60% {\n        left: 100%;\n        right: -90%;\n}\n100% {\n        left: 100%;\n        right: -90%;\n}\n}\n@keyframes p-progressbar-indeterminate-anim {\n0% {\n        left: -35%;\n        right: 100%;\n}\n60% {\n        left: 100%;\n        right: -90%;\n}\n100% {\n        left: 100%;\n        right: -90%;\n}\n}\n@-webkit-keyframes p-progressbar-indeterminate-anim-short {\n0% {\n        left: -200%;\n        right: 100%;\n}\n60% {\n        left: 107%;\n        right: -8%;\n}\n100% {\n        left: 107%;\n        right: -8%;\n}\n}\n@keyframes p-progressbar-indeterminate-anim-short {\n0% {\n        left: -200%;\n        right: 100%;\n}\n60% {\n        left: 107%;\n        right: -8%;\n}\n100% {\n        left: 107%;\n        right: -8%;\n}\n}\n";oa(ra),ea.render=la;var da={name:"Message",emits:["close"],props:{severity:{type:String,default:"info"},closable:{type:Boolean,default:!0},sticky:{type:Boolean,default:!0},life:{type:Number,default:3e3},icon:{type:String,default:null}},timeout:null,data(){return{visible:!0}},mounted(){this.sticky||setTimeout((()=>{this.visible=!1}),this.life)},methods:{close(e){this.visible=!1,this.$emit("close",e)}},computed:{containerClass(){return"p-message p-component p-message-"+this.severity},iconClass(){return["p-message-icon pi",this.icon?this.icon:{"pi-info-circle":"info"===this.severity,"pi-check":"success"===this.severity,"pi-exclamation-triangle":"warn"===this.severity,"pi-times-circle":"error"===this.severity}]}},directives:{ripple:Pi.Z}};const ca={class:"p-message-wrapper"},pa={class:"p-message-text"},ha=(0,a._)("i",{class:"p-message-close-icon pi pi-times"},null,-1),ua=[ha];function ga(e,t,i,l,o,r){const d=(0,a.Q2)("ripple");return(0,a.wg)(),(0,a.j4)(s.uT,{name:"p-message",appear:""},{default:(0,a.w5)((()=>[(0,a.wy)((0,a._)("div",{class:(0,n.C_)(r.containerClass),role:"alert"},[(0,a._)("div",ca,[(0,a._)("span",{class:(0,n.C_)(r.iconClass)},null,2),(0,a._)("div",pa,[(0,a.WI)(e.$slots,"default")]),i.closable?(0,a.wy)(((0,a.wg)(),(0,a.iD)("button",{key:0,class:"p-message-close p-link",onClick:t[0]||(t[0]=e=>r.close(e)),type:"button"},ua)),[[d]]):(0,a.kq)("",!0)])],2),[[s.F8,o.visible]])])),_:3})}function ma(e,t){void 0===t&&(t={});var i=t.insertAt;if(e&&"undefined"!==typeof document){var a=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css","top"===i&&a.firstChild?a.insertBefore(n,a.firstChild):a.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}}var fa="\n.p-message-wrapper {\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-align: center;\n        -ms-flex-align: center;\n            align-items: center;\n}\n.p-message-close {\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-align: center;\n        -ms-flex-align: center;\n            align-items: center;\n    -webkit-box-pack: center;\n        -ms-flex-pack: center;\n            justify-content: center;\n}\n.p-message-close.p-link {\n    margin-left: auto;\n    overflow: hidden;\n    position: relative;\n}\n.p-message-enter-from {\n    opacity: 0;\n}\n.p-message-enter-active {\n    -webkit-transition: opacity 0.3s;\n    transition: opacity 0.3s;\n}\n.p-message.p-message-leave-from {\n    max-height: 1000px;\n}\n.p-message.p-message-leave-to {\n    max-height: 0;\n    opacity: 0;\n    margin: 0 !important;\n}\n.p-message-leave-active {\n    overflow: hidden;\n    -webkit-transition: max-height 0.3s cubic-bezier(0, 1, 0, 1), opacity 0.3s, margin 0.15s;\n    transition: max-height 0.3s cubic-bezier(0, 1, 0, 1), opacity 0.3s, margin 0.15s;\n}\n.p-message-leave-active .p-message-close {\n    display: none;\n}\n";ma(fa),da.render=ga;var va={name:"FileUpload",emits:["select","uploader","before-upload","progress","upload","error","before-send","clear","remove"],props:{name:{type:String,default:null},url:{type:String,default:null},mode:{type:String,default:"advanced"},multiple:{type:Boolean,default:!1},accept:{type:String,default:null},disabled:{type:Boolean,default:!1},auto:{type:Boolean,default:!1},maxFileSize:{type:Number,default:null},invalidFileSizeMessage:{type:String,default:"{0}: Invalid file size, file size should be smaller than {1}."},invalidFileTypeMessage:{type:String,default:"{0}: Invalid file type, allowed file types: {1}."},fileLimit:{type:Number,default:null},invalidFileLimitMessage:{type:String,default:"Maximum number of files exceeded, limit is {0} at most."},withCredentials:{type:Boolean,default:!1},previewWidth:{type:Number,default:50},chooseLabel:{type:String,default:null},uploadLabel:{type:String,default:null},cancelLabel:{type:String,default:null},customUpload:{type:Boolean,default:!1},showUploadButton:{type:Boolean,default:!0},showCancelButton:{type:Boolean,default:!0},chooseIcon:{type:String,default:"pi pi-plus"},uploadIcon:{type:String,default:"pi pi-upload"},cancelIcon:{type:String,default:"pi pi-times"},style:null,class:null},duplicateIEEvent:!1,data(){return{uploadedFileCount:0,files:[],messages:[],focused:!1,progress:null}},methods:{onFileSelect(e){if("drop"!==e.type&&this.isIE11()&&this.duplicateIEEvent)return void(this.duplicateIEEvent=!1);this.messages=[],this.files=this.files||[];let t=e.dataTransfer?e.dataTransfer.files:e.target.files;for(let i of t)this.isFileSelected(i)||this.validate(i)&&(this.isImage(i)&&(i.objectURL=window.URL.createObjectURL(i)),this.files.push(i));this.$emit("select",{originalEvent:e,files:this.files}),this.fileLimit&&this.checkFileLimit(),this.auto&&this.hasFiles&&!this.isFileLimitExceeded()&&this.upload(),"drop"!==e.type&&this.isIE11()?this.clearIEInput():this.clearInputElement()},choose(){this.$refs.fileInput.click()},upload(){if(this.customUpload)this.fileLimit&&(this.uploadedFileCount+=this.files.length),this.$emit("uploader",{files:this.files}),this.clear();else{let e=new XMLHttpRequest,t=new FormData;this.$emit("before-upload",{xhr:e,formData:t});for(let i of this.files)t.append(this.name,i,i.name);e.upload.addEventListener("progress",(e=>{e.lengthComputable&&(this.progress=Math.round(100*e.loaded/e.total)),this.$emit("progress",{originalEvent:e,progress:this.progress})})),e.onreadystatechange=()=>{4===e.readyState&&(this.progress=0,e.status>=200&&e.status<300?(this.fileLimit&&(this.uploadedFileCount+=this.files.length),this.$emit("upload",{xhr:e,files:this.files})):this.$emit("error",{xhr:e,files:this.files}),this.clear())},e.open("POST",this.url,!0),this.$emit("before-send",{xhr:e,formData:t}),e.withCredentials=this.withCredentials,e.send(t)}},clear(){this.files=[],this.messages=null,this.$emit("clear"),this.isAdvanced&&this.clearInputElement()},onFocus(){this.focused=!0},onBlur(){this.focused=!1},isFileSelected(e){if(this.files&&this.files.length)for(let t of this.files)if(t.name+t.type+t.size===e.name+e.type+e.size)return!0;return!1},isIE11(){return!!window["MSInputMethodContext"]&&!!document["documentMode"]},validate(e){return this.accept&&!this.isFileTypeValid(e)?(this.messages.push(this.invalidFileTypeMessage.replace("{0}",e.name).replace("{1}",this.accept)),!1):!(this.maxFileSize&&e.size>this.maxFileSize)||(this.messages.push(this.invalidFileSizeMessage.replace("{0}",e.name).replace("{1}",this.formatSize(this.maxFileSize))),!1)},isFileTypeValid(e){let t=this.accept.split(",").map((e=>e.trim()));for(let i of t){let t=this.isWildcard(i)?this.getTypeClass(e.type)===this.getTypeClass(i):e.type==i||this.getFileExtension(e).toLowerCase()===i.toLowerCase();if(t)return!0}return!1},getTypeClass(e){return e.substring(0,e.indexOf("/"))},isWildcard(e){return-1!==e.indexOf("*")},getFileExtension(e){return"."+e.name.split(".").pop()},isImage(e){return/^image\//.test(e.type)},onDragEnter(e){this.disabled||(e.stopPropagation(),e.preventDefault())},onDragOver(e){this.disabled||(Bi.p7.addClass(this.$refs.content,"p-fileupload-highlight"),e.stopPropagation(),e.preventDefault())},onDragLeave(){this.disabled||Bi.p7.removeClass(this.$refs.content,"p-fileupload-highlight")},onDrop(e){if(!this.disabled){Bi.p7.removeClass(this.$refs.content,"p-fileupload-highlight"),e.stopPropagation(),e.preventDefault();const t=e.dataTransfer?e.dataTransfer.files:e.target.files,i=this.multiple||t&&1===t.length;i&&this.onFileSelect(e)}},onBasicUploaderClick(){this.hasFiles?this.upload():this.$refs.fileInput.click()},remove(e){this.clearInputElement();let t=this.files.splice(e,1)[0];this.files=[...this.files],this.$emit("remove",{file:t,files:this.files})},clearInputElement(){this.$refs.fileInput.value=""},clearIEInput(){this.$refs.fileInput&&(this.duplicateIEEvent=!0,this.$refs.fileInput.value="")},formatSize(e){if(0===e)return"0 B";let t=1e3,i=3,a=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],n=Math.floor(Math.log(e)/Math.log(t));return parseFloat((e/Math.pow(t,n)).toFixed(i))+" "+a[n]},isFileLimitExceeded(){return this.fileLimit&&this.fileLimit<=this.files.length+this.uploadedFileCount&&this.focused&&(this.focused=!1),this.fileLimit&&this.fileLimit<this.files.length+this.uploadedFileCount},checkFileLimit(){this.isFileLimitExceeded()&&this.messages.push(this.invalidFileLimitMessage.replace("{0}",this.fileLimit.toString()))},onMessageClose(){this.messages=null}},computed:{isAdvanced(){return"advanced"===this.mode},isBasic(){return"basic"===this.mode},advancedChooseButtonClass(){return["p-button p-component p-fileupload-choose",this.class,{"p-disabled":this.disabled,"p-focus":this.focused}]},basicChooseButtonClass(){return["p-button p-component p-fileupload-choose",this.class,{"p-fileupload-choose-selected":this.hasFiles,"p-disabled":this.disabled,"p-focus":this.focused}]},advancedChooseIconClass(){return["p-button-icon p-button-icon-left pi-fw",this.chooseIcon]},basicChooseButtonIconClass(){return["p-button-icon p-button-icon-left",!this.hasFiles||this.auto?this.uploadIcon:this.chooseIcon]},basicChooseButtonLabel(){return this.auto?this.chooseButtonLabel:this.hasFiles?this.files.map((e=>e.name)).join(", "):this.chooseButtonLabel},hasFiles(){return this.files&&this.files.length>0},chooseDisabled(){return this.disabled||this.fileLimit&&this.fileLimit<=this.files.length+this.uploadedFileCount},uploadDisabled(){return this.disabled||!this.hasFiles||this.fileLimit&&this.fileLimit<this.files.length},cancelDisabled(){return this.disabled||!this.hasFiles},chooseButtonLabel(){return this.chooseLabel||this.$primevue.config.locale.choose},uploadButtonLabel(){return this.uploadLabel||this.$primevue.config.locale.upload},cancelButtonLabel(){return this.cancelLabel||this.$primevue.config.locale.cancel}},components:{FileUploadButton:_i.Z,FileUploadProgressBar:ea,FileUploadMessage:da},directives:{ripple:Pi.Z}};const ya={key:0,class:"p-fileupload p-fileupload-advanced p-component"},wa={class:"p-fileupload-buttonbar"},ba=["multiple","accept","disabled"],ka={class:"p-button-label"},Da={key:1,class:"p-fileupload-files"},Sa=["alt","src","width"],Ca={class:"p-fileupload-filename"},xa={key:2,class:"p-fileupload-empty"},Ia={key:1,class:"p-fileupload p-fileupload-basic p-component"},_a={class:"p-button-label"},Ta=["accept","disabled","multiple"];function Ma(e,t,i,l,o,r){const d=(0,a.up)("FileUploadButton"),c=(0,a.up)("FileUploadProgressBar"),p=(0,a.up)("FileUploadMessage"),h=(0,a.Q2)("ripple");return r.isAdvanced?((0,a.wg)(),(0,a.iD)("div",ya,[(0,a._)("div",wa,[(0,a.wy)(((0,a.wg)(),(0,a.iD)("span",{class:(0,n.C_)(r.advancedChooseButtonClass),style:(0,n.j5)(i.style),onClick:t[1]||(t[1]=(...e)=>r.choose&&r.choose(...e)),onKeydown:t[2]||(t[2]=(0,s.D2)(((...e)=>r.choose&&r.choose(...e)),["enter"])),onFocus:t[3]||(t[3]=(...e)=>r.onFocus&&r.onFocus(...e)),onBlur:t[4]||(t[4]=(...e)=>r.onBlur&&r.onBlur(...e)),tabindex:"0"},[(0,a._)("input",{ref:"fileInput",type:"file",onChange:t[0]||(t[0]=(...e)=>r.onFileSelect&&r.onFileSelect(...e)),multiple:i.multiple,accept:i.accept,disabled:r.chooseDisabled},null,40,ba),(0,a._)("span",{class:(0,n.C_)(r.advancedChooseIconClass)},null,2),(0,a._)("span",ka,(0,n.zw)(r.chooseButtonLabel),1)],38)),[[h]]),i.showUploadButton?((0,a.wg)(),(0,a.j4)(d,{key:0,label:r.uploadButtonLabel,icon:i.uploadIcon,onClick:r.upload,disabled:r.uploadDisabled},null,8,["label","icon","onClick","disabled"])):(0,a.kq)("",!0),i.showCancelButton?((0,a.wg)(),(0,a.j4)(d,{key:1,label:r.cancelButtonLabel,icon:i.cancelIcon,onClick:r.clear,disabled:r.cancelDisabled},null,8,["label","icon","onClick","disabled"])):(0,a.kq)("",!0)]),(0,a._)("div",{ref:"content",class:"p-fileupload-content",onDragenter:t[5]||(t[5]=(...e)=>r.onDragEnter&&r.onDragEnter(...e)),onDragover:t[6]||(t[6]=(...e)=>r.onDragOver&&r.onDragOver(...e)),onDragleave:t[7]||(t[7]=(...e)=>r.onDragLeave&&r.onDragLeave(...e)),onDrop:t[8]||(t[8]=(...e)=>r.onDrop&&r.onDrop(...e))},[r.hasFiles?((0,a.wg)(),(0,a.j4)(c,{key:0,value:o.progress},null,8,["value"])):(0,a.kq)("",!0),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.messages,(e=>((0,a.wg)(),(0,a.j4)(p,{key:e,severity:"error",onClose:r.onMessageClose},{default:(0,a.w5)((()=>[(0,a.Uk)((0,n.zw)(e),1)])),_:2},1032,["onClose"])))),128)),r.hasFiles?((0,a.wg)(),(0,a.iD)("div",Da,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.files,((e,t)=>((0,a.wg)(),(0,a.iD)("div",{key:e.name+e.type+e.size,class:"p-fileupload-row"},[(0,a._)("div",null,[r.isImage(e)?((0,a.wg)(),(0,a.iD)("img",{key:0,role:"presentation",alt:e.name,src:e.objectURL,width:i.previewWidth},null,8,Sa)):(0,a.kq)("",!0)]),(0,a._)("div",Ca,(0,n.zw)(e.name),1),(0,a._)("div",null,(0,n.zw)(r.formatSize(e.size)),1),(0,a._)("div",null,[(0,a.Wm)(d,{type:"button",icon:"pi pi-times",onClick:e=>r.remove(t)},null,8,["onClick"])])])))),128))])):(0,a.kq)("",!0),e.$slots.empty&&!r.hasFiles?((0,a.wg)(),(0,a.iD)("div",xa,[(0,a.WI)(e.$slots,"empty")])):(0,a.kq)("",!0)],544)])):r.isBasic?((0,a.wg)(),(0,a.iD)("div",Ia,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.messages,(e=>((0,a.wg)(),(0,a.j4)(p,{key:e,severity:"error",onClose:r.onMessageClose},{default:(0,a.w5)((()=>[(0,a.Uk)((0,n.zw)(e),1)])),_:2},1032,["onClose"])))),128)),(0,a.wy)(((0,a.wg)(),(0,a.iD)("span",{class:(0,n.C_)(r.basicChooseButtonClass),style:(0,n.j5)(i.style),onMouseup:t[12]||(t[12]=(...e)=>r.onBasicUploaderClick&&r.onBasicUploaderClick(...e)),onKeydown:t[13]||(t[13]=(0,s.D2)(((...e)=>r.choose&&r.choose(...e)),["enter"])),onFocus:t[14]||(t[14]=(...e)=>r.onFocus&&r.onFocus(...e)),onBlur:t[15]||(t[15]=(...e)=>r.onBlur&&r.onBlur(...e)),tabindex:"0"},[(0,a._)("span",{class:(0,n.C_)(r.basicChooseButtonIconClass)},null,2),(0,a._)("span",_a,(0,n.zw)(r.basicChooseButtonLabel),1),r.hasFiles?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("input",{key:0,ref:"fileInput",type:"file",accept:i.accept,disabled:i.disabled,multiple:i.multiple,onChange:t[9]||(t[9]=(...e)=>r.onFileSelect&&r.onFileSelect(...e)),onFocus:t[10]||(t[10]=(...e)=>r.onFocus&&r.onFocus(...e)),onBlur:t[11]||(t[11]=(...e)=>r.onBlur&&r.onBlur(...e))},null,40,Ta))],38)),[[h]])])):(0,a.kq)("",!0)}function Fa(e,t){void 0===t&&(t={});var i=t.insertAt;if(e&&"undefined"!==typeof document){var a=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css","top"===i&&a.firstChild?a.insertBefore(n,a.firstChild):a.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}}var Ba="\n.p-fileupload-content {\n    position: relative;\n}\n.p-fileupload-row {\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-align: center;\n        -ms-flex-align: center;\n            align-items: center;\n}\n.p-fileupload-row > div {\n    -webkit-box-flex: 1;\n        -ms-flex: 1 1 auto;\n            flex: 1 1 auto;\n    width: 25%;\n}\n.p-fileupload-row > div:last-child {\n    text-align: right;\n}\n.p-fileupload-content .p-progressbar {\n    width: 100%;\n    position: absolute;\n    top: 0;\n    left: 0;\n}\n.p-button.p-fileupload-choose {\n    position: relative;\n    overflow: hidden;\n}\n.p-button.p-fileupload-choose input[type='file'] {\n    display: none;\n}\n.p-fileupload-choose.p-fileupload-choose-selected input[type='file'] {\n    display: none;\n}\n.p-fileupload-filename {\n    word-break: break-all;\n}\n.p-fluid .p-fileupload .p-button {\n    width: auto;\n}\n";Fa(Ba),va.render=Ma;var Pa={name:"Timeline",props:{value:null,align:{mode:String,default:"left"},layout:{mode:String,default:"vertical"},dataKey:null},methods:{getKey(e,t){return this.dataKey?Bi.gb.resolveFieldData(e,this.dataKey):t}},computed:{containerClass(){return["p-timeline p-component","p-timeline-"+this.align,"p-timeline-"+this.layout]}}};const Aa={class:"p-timeline-event-opposite"},Ua={class:"p-timeline-event-separator"},La=(0,a._)("div",{class:"p-timeline-event-marker"},null,-1),Na=(0,a._)("div",{class:"p-timeline-event-connector"},null,-1),Oa={class:"p-timeline-event-content"};function Ka(e,t,i,s,l,o){return(0,a.wg)(),(0,a.iD)("div",{class:(0,n.C_)(o.containerClass)},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(i.value,((t,n)=>((0,a.wg)(),(0,a.iD)("div",{key:o.getKey(t,n),class:"p-timeline-event"},[(0,a._)("div",Aa,[(0,a.WI)(e.$slots,"opposite",{item:t,index:n})]),(0,a._)("div",Ua,[(0,a.WI)(e.$slots,"marker",{item:t,index:n},(()=>[La])),n!==i.value.length-1?(0,a.WI)(e.$slots,"connector",{key:0,item:t,index:n},(()=>[Na])):(0,a.kq)("",!0)]),(0,a._)("div",Oa,[(0,a.WI)(e.$slots,"content",{item:t,index:n})])])))),128))],2)}function Wa(e,t){void 0===t&&(t={});var i=t.insertAt;if(e&&"undefined"!==typeof document){var a=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css","top"===i&&a.firstChild?a.insertBefore(n,a.firstChild):a.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}}var Ya="\n.p-timeline {\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-flex: 1;\n        -ms-flex-positive: 1;\n            flex-grow: 1;\n    -webkit-box-orient: vertical;\n    -webkit-box-direction: normal;\n        -ms-flex-direction: column;\n            flex-direction: column;\n}\n.p-timeline-left .p-timeline-event-opposite {\n    text-align: right;\n}\n.p-timeline-left .p-timeline-event-content {\n    text-align: left;\n}\n.p-timeline-right .p-timeline-event {\n    -webkit-box-orient: horizontal;\n    -webkit-box-direction: reverse;\n        -ms-flex-direction: row-reverse;\n            flex-direction: row-reverse;\n}\n.p-timeline-right .p-timeline-event-opposite {\n    text-align: left;\n}\n.p-timeline-right .p-timeline-event-content {\n    text-align: right;\n}\n.p-timeline-vertical.p-timeline-alternate .p-timeline-event:nth-child(even) {\n    -webkit-box-orient: horizontal;\n    -webkit-box-direction: reverse;\n        -ms-flex-direction: row-reverse;\n            flex-direction: row-reverse;\n}\n.p-timeline-vertical.p-timeline-alternate .p-timeline-event:nth-child(odd) .p-timeline-event-opposite {\n    text-align: right;\n}\n.p-timeline-vertical.p-timeline-alternate .p-timeline-event:nth-child(odd) .p-timeline-event-content {\n    text-align: left;\n}\n.p-timeline-vertical.p-timeline-alternate .p-timeline-event:nth-child(even) .p-timeline-event-opposite {\n    text-align: left;\n}\n.p-timeline-vertical.p-timeline-alternate .p-timeline-event:nth-child(even) .p-timeline-event-content {\n    text-align: right;\n}\n.p-timeline-event {\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    position: relative;\n    min-height: 70px;\n}\n.p-timeline-event:last-child {\n    min-height: 0;\n}\n.p-timeline-event-opposite {\n    -webkit-box-flex: 1;\n        -ms-flex: 1;\n            flex: 1;\n    padding: 0 1rem;\n}\n.p-timeline-event-content {\n    -webkit-box-flex: 1;\n        -ms-flex: 1;\n            flex: 1;\n    padding: 0 1rem;\n}\n.p-timeline-event-separator {\n    -webkit-box-flex: 0;\n        -ms-flex: 0;\n            flex: 0;\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-align: center;\n        -ms-flex-align: center;\n            align-items: center;\n    -webkit-box-orient: vertical;\n    -webkit-box-direction: normal;\n        -ms-flex-direction: column;\n            flex-direction: column;\n}\n.p-timeline-event-marker {\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -ms-flex-item-align: baseline;\n        align-self: baseline;\n}\n.p-timeline-event-connector {\n    -webkit-box-flex: 1;\n        -ms-flex-positive: 1;\n            flex-grow: 1;\n}\n.p-timeline-horizontal {\n    -webkit-box-orient: horizontal;\n    -webkit-box-direction: normal;\n        -ms-flex-direction: row;\n            flex-direction: row;\n}\n.p-timeline-horizontal .p-timeline-event {\n    -webkit-box-orient: vertical;\n    -webkit-box-direction: normal;\n        -ms-flex-direction: column;\n            flex-direction: column;\n    -webkit-box-flex: 1;\n        -ms-flex: 1;\n            flex: 1;\n}\n.p-timeline-horizontal .p-timeline-event:last-child {\n    -webkit-box-flex: 0;\n        -ms-flex: 0;\n            flex: 0;\n}\n.p-timeline-horizontal .p-timeline-event-separator {\n    -webkit-box-orient: horizontal;\n    -webkit-box-direction: normal;\n        -ms-flex-direction: row;\n            flex-direction: row;\n}\n.p-timeline-horizontal .p-timeline-event-connector {\n    width: 100%;\n}\n.p-timeline-bottom .p-timeline-event {\n    -webkit-box-orient: vertical;\n    -webkit-box-direction: reverse;\n        -ms-flex-direction: column-reverse;\n            flex-direction: column-reverse;\n}\n.p-timeline-horizontal.p-timeline-alternate .p-timeline-event:nth-child(even) {\n    -webkit-box-orient: vertical;\n    -webkit-box-direction: reverse;\n        -ms-flex-direction: column-reverse;\n            flex-direction: column-reverse;\n}\n";Wa(Ya),Pa.render=Ka;var Ea=i(6265),Ra=i.n(Ea),Va=i(7387),za=i.n(Va),Ha=i(2724),$a=i(6797),qa=i.n($a),ja={props:["systemId"],components:{InputText:Ii.Z,Button:_i.Z,DataTable:Ci.Z,Column:xi.Z,Calendar:Ti.Z,Dialog:Mi.Z,TabView:Ai,TabPanel:Ji,InlineMessage:Fi.Z,Timeline:Pa,Dropdown:Xi.Z,FileUpload:va},emits:["extend-session","showSearchbar"],data(){return{ProjectRef:"61196AD9FF1A440A9267D3044E8B595E",showTable:!0,first:0,snagsPage:1,pageSize:100,totalRecords:0,rowsPerPageOptions:[25,50,100,250,500],searchQuery:"",captionFilter:"",codeFilter:"",statusFilter:"",worksPackageFilter:"",areaFilter:"",createdByFilter:"",actionByFilter:"",closedByFilter:"",captionFilterMode:"",codeFilterMode:"",statusFilterMode:"",worksPackageFilterMode:"",areaFilterMode:"",createdByFilterMode:"",actionByFilterMode:"",closedByFilterMode:"",snagDetails:[],snagDetailsData:[],events:[{status:"created",date:"2024-02-01",createdBy:"Ryan Bradley",icon:"pi pi-cog",color:"blue",notes:""},{status:"Uploaded image",date:"2024-02-02",createdBy:"Ryan Bradley",icon:"pi pi-image",color:"lightblue",notes:""},{status:"Edited",date:"2024-02-02",createdBy:"Noel Mullen",icon:"pi pi-pencil",color:"lightblue",notes:"Changed title"},{status:"Accepted",date:"2024-02-02",createdBy:"Noel Mullen",icon:"pi pi-check",color:"green",notes:"All looks ok"},{status:"Closed",date:"2024-02-02",createdBy:"Noel Mullen",icon:"pi pi-star",color:"lightgreen",notes:""},{status:"Reopened",date:"2024-02-02",createdBy:"Ryan Bradley",icon:"pi pi-refresh",color:"blue",notes:"It needs to be reopened"},{status:"Accepted",date:"2024-02-02",createdBy:"Noel Mullen",icon:"pi pi-check",color:"green",notes:"All looks ok"},{status:"Closed",date:"2024-02-02",createdBy:"Evan Blake",icon:"pi pi-star",color:"lightgreen"}],howManyTrips:"",AllPageMarked:!1,AllMarked:!1,sendMultipleInvoiceDialog:!1,showInvoiceSelectedButton:!1,selectedIDsForInvoicing:[],checkedIDs:[],invoiceDate:"",invoiceDateOK:!0,sendInvoiceDialog:!1,displayUnInvoiceConfirm:!1,dataTable:"dataTable",downloadedReport:"",binaryfile:"",photoIdForDelete:"",displayDeletePhotoConfirm:!1,uploadFIlename:"",displayUploadModal:!1,allStatuses:[],ClickedRowId:"",tableHeight:"calc( 100vh - 215px)",displayDeleteConfirm:!1,deletingTripName:"",snagNotes:"",newSnagDialog:!1,editSnagDialog:!1,isLoading:!0,userType:"",userLocale:"",loading1:!0,loading2:!0,filters1:null,visibleImagesModal:!1,snagImages:[],picturesTabShow:!1,activeTab:0,SnagDate:"",tripUserEmail:"",tripFrom:"",tripTo:"",tripFixedCosts:"",tripCargoName:"",tripDistance:"",tripDistanceCosts:"",tripVatPercentage:"",tripSum:"",tripSumVAT:"",tripCompanyName:"",tripComments:"",tripCreated:"",tripUserFullName:"",openedcargoname:"",displayInfoDialog:!1,InfoModalHeader:"",InfoModalMessage:"",newSnagDate:"",newSnagFrom:"",newSnagTo:"",newSnagTitle:"",newSnagCode:"",newSnagStatus:"0",newSnagStatusCosts:"0",newSnagCompanyName:"",newSnagComments:"",newSnagDateOK:!0,newSnagFromOK:!0,newSnagToOK:!0,newSnagTitleOK:!0,newSnagCodeOK:!0,newSnagStatusOK:!0,newSnagStatusCostsOK:!0,newSnagCompanyNameOK:!0,newSnagCommentsOK:!0,editSnagDate:"",editSnagTitle:"",editSnagCode:"",editSnagCargoName:"",editSnagFixedCosts:"0",editSnagDistance:"0",editSnagDistanceCosts:"0",editSnagStatus:"",editSnagComments:"",editSnagDateOK:!0,editSnagTitleOK:!0,editSnagCodeOK:!0,editSnagCargoNameOK:!0,editSnagFixedCostsOK:!0,editSnagDistanceOK:!0,editSnagDistanceCostsOK:!0,editSnagStatusOK:!0,editSnagCommentsOK:!0,editSnagInvoiced:"",panelClass:"closedPanel",filters:{global:{value:null,matchMode:Ha.a6.CONTAINS},code:{constraints:[{value:null,matchMode:Ha.a6.CONTAINS}]},caption:{constraints:[{value:null,matchMode:Ha.a6.CONTAINS}]},status:{constraints:[{value:null,matchMode:Ha.a6.CONTAINS}]},createdBy:{constraints:[{value:null,matchMode:Ha.a6.CONTAINS}]},area:{constraints:[{value:null,matchMode:Ha.a6.CONTAINS}]},worksPackage:{constraints:[{value:null,matchMode:Ha.a6.CONTAINS}]},closedBy:{constraints:[{value:null,matchMode:Ha.a6.CONTAINS}]},assignedTo:{constraints:[{value:null,matchMode:Ha.a6.CONTAINS}]}},matchModes:[{label:"Starts With",value:Ha.a6.STARTS_WITH},{label:"Contains",value:Ha.a6.CONTAINS}],allSnags:[],fromDate:"",toDate:""}},methods:{async downloadSnagPDF(){const e=this.snagDetails["snag"]["key"],t=this.snagDetails["snag"]["code"],i=this.snagDetails["snag"]["caption"],a=t+" - "+i+".pdf",n=this._rootRestUrl,s=new XMLHttpRequest;s.open("GET",n+"/api/PDF/DownloadSnagPDF/?snagKey="+e,!0),s.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),s.responseType="blob",s.onreadystatechange=function(){if(4==this.readyState&&200==this.status)if(window.navigator.msSaveOrOpenBlob)window.navigator.msSaveBlob(this.response,a);else{const e=window.document.createElement("a"),t=s.getResponseHeader("Content-Type");e.href=window.URL.createObjectURL(new Blob([this.response],{type:t})),e.download=a,document.body.appendChild(e),e.click(),document.body.removeChild(e)}},s.send(null)},selectingForInvoice(e){if(this.checkedIDs[e]){const t=this.selectedIDsForInvoicing.indexOf(e);this.selectedIDsForInvoicing.splice(t,1)}else this.selectedIDsForInvoicing.push(e);this.selectedIDsForInvoicing.length>0?this.showInvoiceSelectedButton=!0:(this.showInvoiceSelectedButton=!1,this.AllPageMarked=!1)},invoiceSelected(){this.invoiceDate=qa()().format("DD/MM/YYYY HH:mm"),this.sendMultipleInvoiceDialog=!0},reorganizePagination(){za()(".p-paginator-current").detach().appendTo(".p-paginator-left-content"),za()(".p-paginator-rpp-options").detach().appendTo(".p-paginator-right-content")},moveSearchBoxToTop(){za()("#hereMoveSearch").empty(),za()("#searchBox").detach().appendTo("#hereMoveSearch")},newSnag(){this.resetInputFields(),this.newSnagDate=this.format_date(qa()(),"DD/MM/YYYY"),this.newSnagDialog=!0},editSnag(){var e=!0;""==this.editSnagDate?(this.editSnagDateOK=!1,e=!1):this.editSnagDateOK=!0,""==this.editSnagTitle?(this.editSnagTitleOK=!1,e=!1):this.editSnagTitleOK=!0,""==this.editSnagCode?(this.editSnagCodeOK=!1,e=!1):this.editSnagCodeOK=!0,this.editSnagStatus.name&&(this.editSnagStatus=this.editSnagStatus.value),""==this.editSnagStatus?(this.editSnagStatusOK=!1,e=!1):this.editSnagStatusOK=!0,1==e&&this.editSnagInDatabase()},async editSnagInDatabase(){this.panelClass="closedPanel",this.isLoading=!0;var e=this.format_date(qa()(this.editSnagDate,"DD/MM/YYYY HH:mm"),"YYYY-MM-DD HH:mm:ss");const t=this.$store.getters.token,i=this._rootRestUrl;let a=JSON.stringify({key:this.ClickedRowId,sessionId:t,caption:this.editSnagTitle,code:this.editSnagCode,status:this.editSnagStatus,userEmail:"",date:e}),n={headers:{"Content-Type":"application/json"}};try{await Ra().put(i+"/api/Snags/EditSnag",a,n).then((()=>{this.getSnags(),this.getCompanies(),this.editSnagDialog=!1,this.displayInfoDialog=!0,this.InfoModalHeader="Info",this.InfoModalMessage="Changes are saved",this.isLoading=!1}))}catch(s){this.editSnagDialog=!1,this.displayInfoDialog=!0,this.InfoModalHeader="Error "+s.response.status,this.InfoModalMessage=s.response.data.Message,this.isLoading=!1}this.extendTime()},saveSnag(){var e=!0;""==this.newSnagDate?(this.newSnagDateOK=!1,e=!1):this.newSnagDateOK=!0,""==this.newSnagTitle?(this.newSnagTitleOK=!1,e=!1):this.newSnagTitleOK=!0,null==this.newSnagCode?(this.newSnagCodeOK=!1,e=!1):this.newSnagCodeOK=!0,void 0==this.newSnagStatus||""==this.newSnagStatus?(this.newSnagStatus="",e=!1,this.newSnagStatusOK=!1):(this.newSnagStatus=this.newSnagStatus.value,""==this.newSnagStatus?(this.newSnagStatusOK=!1,e=!1):this.newSnagStatusOK=!0),void 0==this.newSnagStatus&&(this.newSnagStatus="",e=!1,this.newSnagStatusOK=!1),1==e&&this.InsertSnagToDatabase()},async InsertSnagToDatabase(){this.panelClass="closedPanel",this.isLoading=!0;var e=this.format_date(qa()(this.newSnagDate,"DD/MM/YYYY HH:mm"),"YYYY-MM-DD HH:mm:ss");const t=this._rootRestUrl;let i=JSON.stringify({ProjectRef:this.ProjectRef,type:"Snag",key:"",code:this.newSnagCode,caption:this.newSnagTitle,status:this.newSnagStatus,date:e}),a={headers:{"Content-Type":"application/json"}};try{await Ra().post(t+"/api/Snags/InsertSnag",i,a).then((()=>{this.getSnags(),this.getCompanies(),this.newSnagDialog=!1,this.displayInfoDialog=!0,this.InfoModalHeader="Info",this.InfoModalMessage="Snag is inserted",this.isLoading=!1}))}catch(n){401==n.response.status&&(alert("Your session is expired! Please login"),localStorage.clear()),this.newSnagDialog=!1,this.displayInfoDialog=!0,this.InfoModalHeader="Error "+n.response.status,this.InfoModalMessage=n.response.data.Message,this.isLoading=!1}this.extendTime()},closeInfo(){this.displayInfoDialog=!1},handleClose(e){},closeInsertDialog(){this.newSnagDialog=!1,this.resetInputFields()},closeEditDialog(){this.editSnagDialog=!1},resetInputFields(){this.newSnagDate="",this.newSnagFrom="",this.newSnagTo="",this.newSnagTitle="",this.newSnagCode="",this.newSnagStatus="",this.newSnagStatusCosts="",this.newSnagCompanyName="",this.newSnagComments="",this.newSnagDateOK=!0,this.newSnagFromOK=!0,this.newSnagToOK=!0,this.newSnagTitleOK=!0,this.newSnagCodeOK=!0,this.newSnagStatusOK=!0,this.newSnagStatusCostsOK=!0,this.newSnagCompanyNameOK=!0,this.newSnagCommentsOK=!0,this.editSnagDate="",this.editSnagTitle="",this.editSnagCode="",this.editSnagCargoName="",this.editSnagFixedCosts="0",this.editSnagDistance="0",this.editSnagDistanceCosts="0",this.editSnagStatus="",this.editSnagComments="",this.editSnagDateOK=!0,this.editSnagTitleOK=!0,this.editSnagCodeOK=!0,this.editSnagCargoNameOK=!0,this.editSnagFixedCostsOK=!0,this.editSnagDistanceOK=!0,this.editSnagDistanceCostsOK=!0,this.editSnagStatusOK=!0,this.editSnagCommentsOK=!0},editClick(){this.editSnagDialog=!0},deleteClick(){this.displayDeleteConfirm=!0},deletePhotoId(e){this.displayDeletePhotoConfirm=!0,this.photoIdForDelete=e},deletePhotoModal(e){this.photoIdForDelete=e,this.deletePhoto()},async deletePhoto(){this.panelClass="closedPanel",this.isLoading=!0;const e=this.$store.getters.token,t=this._rootRestUrl;let i=JSON.stringify({sessionId:e,key:this.photoIdForDelete}),a={headers:{"Content-Type":"application/json"}};try{await Ra().post(t+"/api/v1/Trip/DeleteTripFile",i,a).then((()=>{this.getSnags(),this.getCompanies(),this.displayDeletePhotoConfirm=!1,this.visibleImagesModal=!1,this.displayInfoDialog=!0,this.InfoModalHeader="Info",this.InfoModalMessage="Photo is deleted",this.isLoading=!1}))}catch(n){401==n.response.status&&(alert("Your session is expired! Please login"),localStorage.clear()),this.displayDeletePhotoConfirm=!1,this.visibleImagesModal=!1,this.displayInfoDialog=!0,this.InfoModalHeader="Error "+n.response.status,this.InfoModalMessage=n.response.data.Message,this.isLoading=!1}this.extendTime()},async deleteTrip(){this.panelClass="closedPanel",this.isLoading=!0;const e=this.$store.getters.token,t=this._rootRestUrl;let i=JSON.stringify({sessionId:e,key:this.ClickedRowId}),a={headers:{"Content-Type":"application/json"}};try{await Ra().post(t+"/api/v1/Trip/DeleteTrip",i,a).then((()=>{this.getSnags(),this.getCompanies(),this.displayDeleteConfirm=!1,this.displayInfoDialog=!0,this.InfoModalHeader="Info",this.InfoModalMessage="Trip is deleted",this.isLoading=!1}))}catch(n){401==n.response.status&&(alert("Your session is expired! Please login"),localStorage.clear()),this.displayDeleteConfirm=!1,this.displayInfoDialog=!0,this.InfoModalHeader="Error "+n.response.status,this.InfoModalMessage=n.response.data.Message,this.isLoading=!1}this.extendTime()},downloadClick(){},refreshData(){this.fromDate.length>0&&(10!=this.fromDate.length&&(this.fromDate=this.format_date(this.fromDate,"DD/MM/YYYY")),10!=this.toDate.length&&(this.toDate=this.format_date(this.toDate,"DD/MM/YYYY"))),this.getSnags(),this.getCompanies()},onSwiper(){},format_date_to_full(e,t){var i=e.substring(6,10),a=e.substring(3,5),n=e.substring(0,2);return i+"-"+a+"-"+n+" "+t},format_date_to_full_time(e){var t=e.substring(6,10),i=e.substring(3,5),a=e.substring(0,2),n=e.substring(11,13),s=e.substring(14,16),l="00";return t+"-"+i+"-"+a+" "+n+":"+s+":"+l},format_date_to_dateTime(e){var t=e.substring(0,4),i=e.substring(5,7),a=e.substring(8,10),n=e.substring(11,13),s=e.substring(14,16);return a+"/"+i+"/"+t+" "+n+":"+s},async getCompanies(){},extendTime(){this.$emit("extend-session")},async getSnags(e){localStorage.setItem("fromDate",this.fromDate),localStorage.setItem("toDate",this.toDate),this.panelClass="closedPanel",this.isLoading=!0;const t=this._rootRestUrl;let i={headers:{"Content-Type":"application/json"}};var a=[],n=!1;if(""!=this.captionFilter&&null!=this.captionFilter&&(n="contains"==this.captionFilterMode,a.push({name:"caption",value:this.captionFilter,isLike:n,isDate:!1})),""!=this.codeFilter&null!=this.codeFilter&&(n="contains"==this.codeFilterMode,a.push({name:"code",value:this.codeFilter,isLike:n,isDate:!1})),""!=this.statusFilter&null!=this.statusFilter&&(n="contains"==this.statusFilterMode,a.push({name:"status",value:this.statusFilter,isLike:n,isDate:!1})),""!=this.worksPackageFilter&null!=this.worksPackageFilter&&(n="contains"==this.worksPackageFilterMode,a.push({name:"worksPackage",value:this.worksPackageFilter,isLike:n,isDate:!1})),""!=this.areaFilter&null!=this.areaFilter&&(n="contains"==this.areaFilterMode,a.push({name:"area",value:this.areaFilter,isthisLike:!0,isDate:!1})),""!=this.closedByFilter&null!=this.closedByFilter&&(n="contains"==this.closedByFilterMode,a.push({name:"closedBy",value:this.closedByFilter,isLike:n,isDate:!1})),""!=this.actionByFilter&null!=this.actionByFilter&&(n="contains"==this.actionByFilterMode,a.push({name:"assignedTo",value:this.actionByFilter,isLike:n,isDate:!1})),""!=this.createdByFilter&null!=this.createdByFilter&&(n="contains"==this.createdByFilterMode,a.push({name:"createdBy",value:this.createdByFilter,isLike:n,isDate:!1})),void 0!=this.fromDate&&void 0!=this.toDate&&null!=this.fromDate&&null!=this.toDate&&""!=this.fromDate&&""!=this.toDate){var s=this.fromDate,l=this.toDate;s=1e4*qa()(s).format("x")+621355968e9,l=1e4*qa()(l).format("x")+621355968e9,a.push({name:"created",value:s+","+l,isLike:n,isDate:!0})}""!=this.searchQuery&&(a+="&searchQuery="+this.searchQuery);var o="";"all"==e?(o=0,this.pageSize=this.totalRecords):o=+this.snagsPage;let r={pageSize:this.pageSize,pageNumber:o,searchQuery:this.searchQuery,filters:a};r=JSON.stringify(r);try{await Ra().post(t+"/api/Snags/GetAllSnags/",r,i).then((e=>{this.allSnags=e.data.snags,this.totalRecords=e.data.totalRecords,0==this.totalRecords?this.showTable=!1:this.showTable=!0,this.isLoading=!1,this.reorganizePagination(),0==this.allStatuses.length&&this.getStatuses()})),za()("#sidebar").click()}catch(d){401==d.response.status&&(alert("Your session is expired! Please login"),localStorage.clear()),this.displayInfoDialog=!0,this.InfoModalHeader="Error "+d.response.status,this.InfoModalMessage=d.response.data.Message,this.isLoading=!1}this.extendTime()},async getStatuses(){const e=this._rootRestUrl;let t=JSON.stringify({category:"SNSTAT"}),i={headers:{"Content-Type":"application/json"}};try{await Ra().get(e+"/api/LookUps/GetStatusLookUps?category=SNSTAT",t,i).then((e=>{this.allStatuses=e.data;var t=JSON.stringify(e.data);t=t.replaceAll('"shortCode"','"value"'),t=t.replaceAll('"description"','"name"'),this.allStatuses=za().parseJSON(t)}))}catch(a){401==a.response.status&&(alert("Your session is expired! Please login"),localStorage.clear()),this.displayInfoDialog=!0,this.InfoModalHeader="Error "+a.response.status,this.InfoModalMessage=a.response.data.Message,this.isLoading=!1}this.extendTime()},onRowClick(e){this.ClickedRowId=e.data.key,this.editSnagDate=this.format_date(e.data.date,"DD/MM/YYYY"),this.editSnagTitle=e.data.caption,this.editSnagStatus=e.data.status,this.editSnagCode=e.data.code,za()(".hiddenFields").each((function(){za()(this).closest("tr").removeClass("highlight")})),za()(".hiddenFields").each((function(){za()(this).attr("data")==e.data.key&&za()(this).closest("tr").addClass("highlight")}))},onRowSelect(e){"I"!=e.originalEvent.target.tagName&&"SPAN"!=e.originalEvent.target.tagName&&(za()(".hiddenFields").each((function(){za()(this).closest("tr").removeClass("highlight")})),za()(".hiddenFields").each((function(){za()(this).attr("data")==e.data.key&&za()(this).closest("tr").addClass("highlight")})),this.getDocumentDetails(),this.snagImages.length>0?(this.picturesTabShow=!1,this.activeTab=0):this.picturesTabShow=!0)},openDialogAddPhoto(){this.displayUploadModal=!0},customUploader(e){var t=Date.now(),i=e.files[0];this.uploadImage(i,t+"_"+i.name)},async uploadImage(e,t){this.isLoading=!0;const i=this.$store.getters.token,a=this._rootRestUrl,n=this.ClickedRowId;let s={headers:{"Content-Type":"multipart/form-data"}};var l=new FormData;l.append("Key",""),l.append("Caption",t),l.append("SnagRef",n),l.append("ProjectRef",this.ProjectRef),l.append("SessionId",i),l.append("File",e);try{await Ra().post(a+"/api/Attachments/InsertPhoto",l,s).then((()=>{this.displayInfoDialog=!0,this.InfoModalHeader="Info",this.InfoModalMessage="Photo is added",this.isLoading=!1,this.displayUploadModal=!1,this.getSnags()}))}catch(o){this.displayInfoDialog=!0,this.InfoModalHeader="Alert!",this.InfoModalMessage="Error occured while uploading photo. Photo is not added!",this.isLoading=!1,this.displayUploadModal=!1,this.getSnags()}this.extendTime()},setInvoiceDateToday(){this.invoiceDate=qa()().format("DD/MM/YYYY HH:mm"),this.sendInvoiceDialog=!0},invoiceThisTrip(){var e=!0;""==this.invoiceDate?(this.invoiceDateOK=!1,e=!1):this.invoiceDateOK=!0,1==e&&this.markAsInvoicedInDatabase()},invoiceMultipleTrips(){var e=!0;""==this.invoiceDate?(this.invoiceDateOK=!1,e=!1):this.invoiceDateOK=!0,1==e&&this.markAsInvoicedMultipleInDatabase()},async markAsInvoicedInDatabase(){this.isLoading=!0;var e=this.format_date(qa()(this.invoiceDate,"DD/MM/YYYY HH:mm"),"YYYY-MM-DD HH:mm:ss");const t=this.$store.getters.token,i=this._rootRestUrl;let a=JSON.stringify({tripKey:this.ClickedRowId,sessionId:t,date:e,isInvoiceSent:!0}),n={headers:{"Content-Type":"application/json"}};try{await Ra().post(i+"/api/v1/Trip/MarkInvoiceAsSent",a,n).then((()=>{this.getSnags(),this.getCompanies(),this.displayInfoDialog=!0,this.sendInvoiceDialog=!1,this.InfoModalHeader="Info",this.InfoModalMessage="Trip is marked as invoiced",this.isLoading=!1,this.checkedIDs=[],this.AllPageMarked=!1}))}catch(s){401==s.response.status&&(alert("Your session is expired! Please login"),localStorage.clear()),this.sendInvoiceDialog=!1,this.displayInfoDialog=!0,this.InfoModalHeader="Error "+s.response.status,this.InfoModalMessage=s.response.data.Message,this.isLoading=!1}this.extendTime()},async markAsInvoicedMultipleInDatabase(){this.isLoading=!0;var e=this.format_date(qa()(this.invoiceDate,"DD/MM/YYYY HH:mm"),"YYYY-MM-DD HH:mm:ss");const t=this.$store.getters.token,i=this._rootRestUrl;var a='{"sessionId": "'+t+'",';a+='     "invoices": [ ';var n=0,s=[];this.selectedIDsForInvoicing.forEach((t=>{s.push(t),n++,a+="{",a+='"tripKey": "'+t+'",',a+='"isInvoiceSent": true,',a+='"invoiceDate": "'+e+'"',a+="}",n<this.selectedIDsForInvoicing.length&&(a+=",")})),a+="  ]",a+="  }";let l=a,o={headers:{"Content-Type":"application/json"}};try{await Ra().post(i+"/api/v1/Trip/MarkInvoicesAsSent",l,o).then((()=>{this.getSnags(),this.getCompanies(),this.displayInfoDialog=!0,this.sendMultipleInvoiceDialog=!1,this.showInvoiceSelectedButton=!1,this.InfoModalHeader="Info",this.InfoModalMessage="Trips are marked as invoiced",this.isLoading=!1,s.forEach((e=>{this.checkedIDs[e]=!1;const t=this.selectedIDsForInvoicing.indexOf(e);this.selectedIDsForInvoicing.splice(t,1)}))}))}catch(r){401==r.response.status&&(alert("Your session is expired! Please login"),localStorage.clear()),this.sendInvoiceDialog=!1,this.displayInfoDialog=!0,this.InfoModalHeader="Error "+r.response.status,this.InfoModalMessage=r.response.data.Message,this.isLoading=!1}this.AllPageMarked=!1,this.AllMarked=!1,this.extendTime()},async unInvoiceThisTrip(){this.isLoading=!0;const e=this.$store.getters.token,t=this._rootRestUrl;let i=JSON.stringify({tripKey:this.ClickedRowId,sessionId:e,date:"",isInvoiceSent:!1}),a={headers:{"Content-Type":"application/json"}};try{await Ra().post(t+"/api/v1/Trip/MarkInvoiceAsSent",i,a).then((()=>{this.getSnags(),this.getCompanies(),this.editSnagDialog=!1,this.displayInfoDialog=!0,this.displayUnInvoiceConfirm=!1,this.InfoModalHeader="Info",this.InfoModalMessage="Trip is marked as invoiced",this.isLoading=!1}))}catch(n){401==n.response.status&&(alert("Your session is expired! Please login"),localStorage.clear()),this.displayUnInvoiceConfirm=!1,this.displayInfoDialog=!0,this.InfoModalHeader="Error "+n.response.status,this.InfoModalMessage=n.response.data.Message,this.isLoading=!1}this.extendTime()},async getDocumentDetails(){const e=this._rootRestUrl;let t=JSON.stringify({key:this.ClickedRowId}),i={headers:{"Content-Type":"application/json"}};this.isLoading=!0;try{await Ra().get(e+"/api/Snags/GetSnagDetails/?snagKey="+this.ClickedRowId,t,i).then((e=>{this.snagDetails=e.data,this.isLoading=!1,this.fillPanelData()}))}catch(a){401==a.response.status&&(alert("Your session is expired! Please login"),localStorage.clear()),this.displayInfoDialog=!0,this.InfoModalHeader="Error "+a.response.status,this.InfoModalMessage=a.response.data.Message,this.isLoading=!1}this.extendTime(),this.isLoading=!1},fillPanelData(){this.snagDetailsData=this.snagDetails["snag"];var e=this.snagDetails["snagAttachments"];e.length>0?(this.snagNotes=this.snagDetailsData["notes"],this.snagImages=e,this.picturesTabShow=!0):(this.picturesTabShow=!1,this.snagImages=[]),this.openPanel()},openPanel(){this.panelClass="openedPanel"},closePanel(){this.panelClass="closedPanel"},initFilters1(){this.filters1={global:{value:null,matchMode:Ha.a6.CONTAINS},userFullName:{operator:Ha.pg.AND,constraints:[{value:null,matchMode:Ha.a6.CONTAINS}]},from:{operator:Ha.pg.AND,constraints:[{value:null,matchMode:Ha.a6.CONTAINS}]},to:{operator:Ha.pg.AND,constraints:[{value:null,matchMode:Ha.a6.CONTAINS}]},companyName:{operator:Ha.pg.AND,constraints:[{value:null,matchMode:Ha.a6.CONTAINS}]},cargoName:{operator:Ha.pg.AND,constraints:[{value:null,matchMode:Ha.a6.CONTAINS}]},distance:{operator:Ha.pg.AND,constraints:[{value:null,matchMode:Ha.a6.CONTAINS}]},sumVAT:{operator:Ha.pg.AND,constraints:[{value:null,matchMode:Ha.a6.CONTAINS}]},comments:{operator:Ha.pg.AND,constraints:[{value:null,matchMode:Ha.a6.CONTAINS}]}}},clearFilter1(){this.initFilters1()},getFiles(){},format_date(e,t){if(e)return qa()(String(e)).format(t)},showloader(e){this.isLoading=e},async downloadReport(){this.getSnags(),this.isLoading=!0,10!=this.fromDate.length&&(this.fromDate=this.format_date(this.fromDate,"DD/MM/YYYY")),10!=this.toDate.length&&(this.toDate=this.format_date(this.toDate,"DD/MM/YYYY"));const e=this.format_date_to_full(this.fromDate,"00:00:00"),t=this.format_date_to_full(this.toDate,"23:59:59"),i=this.$store.getters.token,a=e,n=t,s=this._rootRestUrl,l="EN";let o=JSON.stringify({sessionId:i,DateFrom:a,DateTo:n,locale:l}),r={headers:{"Content-Type":"application/json"}};try{await Ra().get(s+"/api/v1/Trip/CSV/Trips/?sessionId="+i+"&DateFrom="+a+"&DateTo="+n+"&locale="+l,o,r).then((e=>{this.downloadedReport=e.data;var t="Report "+this.format_date(a,"YYYY-MM-DD")+" - "+this.format_date(n,"YYYY-MM-DD");this.downloadCSV(this.downloadedReport,t)}))}catch(d){401==d.response.status&&(alert("Your session is expired! Please login"),localStorage.clear()),this.displayUnInvoiceConfirm=!1,this.displayInfoDialog=!0,this.InfoModalHeader="Error "+d.response.status,this.InfoModalMessage=d.response.data.Message,this.isLoading=!1}this.extendTime()},correctData(){this.allSnags.forEach(((e,t)=>{const i=Object.entries(e);i.forEach((e=>{if("invSent"==e[0]){var i="";i=1==e[1]?"Yes":"No",this.allSnags[t]["invSent"]=i}}))}))},downloadCSV(e,t){const i=document.createElement("a");i.setAttribute("href",`data:text/csv;charset=utf-8,${e}`),i.setAttribute("download",t),i.style.display="none",document.body.appendChild(i),i.click(),document.body.removeChild(i),this.isLoading=!1},downloadPDF(){za()("#downloadPDFlink").remove()},formatMoney(e,t,i,a,n){t=isNaN(t=Math.abs(t))?2:t,i="undefined"===typeof i?".":i,a="undefined"===typeof a?",":a;var s=e<0?"-":"",l=String(parseInt(e=Math.abs(Number(e)||0).toFixed(t))),o=(o=l.length)>3?o%3:0;return n+" "+s+(o?l.substr(0,o)+a:"")+l.substr(o).replace(/(\decSep{3})(?=\decSep)/g,"$1"+a)+(t?i+Math.abs(e-l).toFixed(t).slice(2):"")},showContextMenu:function(e){if("ADMIN"==this.userType.toUpperCase()){e.preventDefault();var t=document.getElementById("div-context-menu");t.style.left=e.pageX+"px",t.style.top=e.pageY-50+"px",t.style.display="block",t.cid=e.target.id.replace(/title-/,"")}},hideContextMenu:function(){document.getElementById("div-context-menu").style.display="none"},onClick:function(){this.hideContextMenu()},onPage(e){this.pageSize=e.rows,this.snagsPage=1*e["originalEvent"]["page"]+1,this.getSnags()},onSearchInput(){0==this.searchQuery.length&&(this.first=0,this.snagsPage=1,this.getSnags())},onSearch(){(this.searchQuery.length>2||0==this.searchQuery.length)&&(this.first=0,this.snagsPage=1,this.getSnags())},onFilter(e){this.captionFilter=e.filters.caption.constraints[0].value,this.codeFilter=e.filters.code.constraints[0].value,this.statusFilter=e.filters.status.constraints[0].value,this.worksPackageFilter=e.filters.worksPackage.constraints[0].value,this.areaFilter=e.filters.area.constraints[0].value,this.createdByFilter=e.filters.createdBy.constraints[0].value,this.actionByFilter=e.filters.assignedTo.constraints[0].value,this.closedByFilter=e.filters.closedBy.constraints[0].value,null===this.filters.caption.value&&(this.filters.caption.constraints[0].value=null,this.filters.caption.value=null),null===this.filters.code.value&&(this.filters.code.constraints[0].value=null,this.filters.code.value=null),null===this.filters.status.value&&(this.filters.status.constraints[0].value=null,this.filters.status.value=null),null===this.filters.worksPackage.value&&(this.filters.worksPackage.constraints[0].value=null,this.filters.worksPackage.value=null),null===this.filters.area.value&&(this.filters.area.constraints[0].value=null,this.filters.area.value=null),null===this.filters.createdBy.value&&(this.filters.createdBy.constraints[0].value=null,this.filters.createdBy.value=null),null===this.filters.assignedTo.value&&(this.filters.assignedTo.constraints[0].value=null,this.filters.assignedTo.value=null),null===this.filters.closedBy.value&&(this.filters.closedBy.constraints[0].value=null,this.filters.closedBy.value=null),this.captionFilterMode=e.filters.caption.constraints[0].matchMode,this.codeFilterMode=e.filters.code.constraints[0].matchMode,this.statusFilterMode=e.filters.status.constraints[0].matchMode,this.worksPackageFilterMode=e.filters.worksPackage.constraints[0].matchMode,this.areaFilterMode=e.filters.area.constraints[0].matchMode,this.createdByFilterMode=e.filters.createdBy.constraints[0].matchMode,this.actionByFilterMode=e.filters.assignedTo.constraints[0].matchMode,this.closedByFilterMode=e.filters.closedBy.constraints[0].matchMode,null!=this.captionFilter?za()(".captionColumn .pi-filter-icon").addClass("yellowIcon"):za()(".captionColumn .pi-filter-icon").removeClass("yellowIcon"),null!=this.codeFilter?za()(".codeColumn .pi-filter-icon").addClass("yellowIcon"):za()(".codeColumn .pi-filter-icon").removeClass("yellowIcon"),null!=this.statusFilter?za()(".statusColumn .pi-filter-icon").addClass("yellowIcon"):za()(".statusColumn .pi-filter-icon").removeClass("yellowIcon"),null!=this.worksPackageFilter?za()(".workspackageColumn .pi-filter-icon").addClass("yellowIcon"):za()(".workspackageColumn .pi-filter-icon").removeClass("yellowIcon"),null!=this.areaFilter?za()(".areaColumn .pi-filter-icon").addClass("yellowIcon"):za()(".areaColumn .pi-filter-icon").removeClass("yellowIcon"),null!=this.createdByFilter?za()(".openedColumn .pi-filter-icon").addClass("yellowIcon"):za()(".openedColumn .pi-filter-icon").removeClass("yellowIcon"),null!=this.actionByFilter?za()(".assignedToColumn .pi-filter-icon").addClass("yellowIcon"):za()(".assignedToColumn .pi-filter-icon").removeClass("yellowIcon"),null!=this.closedByFilter?za()(".closedByColumn .pi-filter-icon").addClass("yellowIcon"):za()(".closedByColumn .pi-filter-icon").removeClass("yellowIcon"),this.getSnags()},async SelectAllPage(){var e="",t=[];this.selectedIDsForInvoicing=[],za()(".p-checkbox").each((function(){var e=za()(this).parent().attr("data");t.push(e)})),0==this.AllPageMarked?(e="mark",this.showInvoiceSelectedButton=!0):(e="unmark",this.showInvoiceSelectedButton=!1),"mark"==e?t.forEach((e=>{this.selectedIDsForInvoicing.push(e),this.checkedIDs[e]=!0,this.AllPageMarked=!0})):(this.checkedIDs=[],this.AllPageMarked=!1)},SelectAll(e){"select"==e?0==this.AllMarked?this.showInvoiceSelectedButton=!0:this.showInvoiceSelectedButton=!1:(this.selectedIDsForInvoicing=[],this.checkedIDs=[],this.AllMarked=!1,this.AllPageMarked=!1,this.showInvoiceSelectedButton=!1),this.selectedIDsForInvoicing=[],"select"==e&&(this.AllMarked=!0,this.allSnags.forEach((e=>{const t=Object.entries(e);var i="";t.forEach((e=>{"id"==e[0]&&(i=e[1]),"invSent"==e[0]&&"No"==e[1]&&(this.selectedIDsForInvoicing.push(i),this.checkedIDs[i]=!0)}))}))),this.selectedIDsForInvoicing.lenght>0&&(this.showInvoiceSelectedButton=!0)}},mounted(){var e=document.getElementById("app");e.addEventListener("click",this.onClick),this.$emit("showSearchbar",!0),this.getSnags(),this.getCompanies(),this.moveSearchBoxToTop(),za()("#editIconsPanel").detach().appendTo(".p-tabview-nav-content")},created(){this.aSystemDoc=localStorage.getItem("docType"),this.initFilters1(),this.loading1=!1}},Qa=i(89);const Za=(0,Qa.Z)(ja,[["render",Si]]);var Ja=Za}}]);
//# sourceMappingURL=109.752ac064.js.map
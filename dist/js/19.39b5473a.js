"use strict";(self["webpackChunkSnags"]=self["webpackChunkSnags"]||[]).push([[19],{3019:function(e,s,t){t.r(s),t.d(s,{default:function(){return Ls}});var i=t(3396),a=t(7139);const l={style:{display:"none"},class:"flex justify-content-between"},o={class:"p-input-icon-left",id:"searchBox"},r=(0,i._)("i",{class:"pi pi-search"},null,-1),d={class:"row"},n={class:"col-md-4"},c=(0,i._)("div",{class:"col-md-8 text-end"},null,-1),m=(0,i.Uk)(" Loading data. Please wait... "),w={style:{"padding-left":"16px",width:"100%"}},h={key:0,class:"pi pi-check"},U={key:1,class:"pi pi-times"},u=["data"],p=(0,i._)("div",{style:{right:"20px",position:"absolute"}},[(0,i._)("div",{style:{float:"right"}},"Actions")],-1),g=(0,i._)("i",{class:"fa-solid fa-square fa-stack-2x"},null,-1),v=(0,i._)("i",{class:"fa-stack-1x fa-solid fa-pen-to-square",style:{color:"white"}},null,-1),f=[g,v],y=(0,i._)("i",{class:"fa-solid fa-square fa-stack-2x"},null,-1),_=(0,i._)("i",{class:"fa-stack-1x fa-solid fa-trash-can",style:{color:"white"}},null,-1),O=[y,_],k={class:"row",style:{width:"100%"}},I=(0,i._)("div",{class:"col-md-7"}," Edit user ",-1),K={class:"col-md-5"},b={class:"container",id:"formContainer"},P={class:"row insertFormRow align-items-center even"},A=(0,i._)("div",{class:"col-md-3"},[(0,i._)("label",{for:"editUserName"},"Name")],-1),D={class:"col-md-9"},T=(0,i.Uk)("This field is required"),N={class:"row insertFormRow align-items-center"},S=(0,i._)("div",{class:"col-md-3"},[(0,i._)("label",{for:"editUserSurname"},"Surname")],-1),V={class:"col-md-9"},x=(0,i.Uk)("This field is required"),C={class:"row insertFormRow align-items-center even"},M=(0,i._)("div",{class:"col-md-3"},[(0,i._)("label",{for:"editUserEmail"},"Email")],-1),R={class:"col-md-9"},L=(0,i.Uk)("This field is required"),E={class:"row insertFormRow align-items-center"},W=(0,i._)("div",{class:"col-md-3"},[(0,i._)("label",{for:"editUserActiveUntil"},"Active until")],-1),q={class:"col-md-9"},F=(0,i.Uk)("This field is required"),j={class:"row insertFormRow align-items-center even"},Y=(0,i._)("div",{class:"col-md-3"},[(0,i._)("label",{for:"editUserIsActive"},"Active")],-1),H={class:"col-md-9"},Z=(0,i.Uk)("This field is required"),z={class:"row insertFormRow align-items-center"},$=(0,i._)("div",{class:"col-md-3"},[(0,i._)("label",{for:"editUserType"},"User type")],-1),B={class:"col-md-9"},J=(0,i.Uk)("This field is required"),G={class:"row insertFormRow align-items-center even"},Q=(0,i._)("div",{class:"col-md-3"},[(0,i._)("label",{for:"editUserLanguage"},"Language")],-1),X={class:"col-md-9"},ee=(0,i.Uk)("This field is required"),se={class:"row insertFormRow align-items-center"},te={class:"col-md-6 text-left"},ie={class:"col-md-6 text-end"},ae=(0,i.Uk)(" Add user "),le={class:"container",id:"formContainer"},oe={class:"row insertFormRow align-items-center even"},re=(0,i._)("div",{class:"col-md-3"},[(0,i._)("label",{for:"newUserName"},"Name")],-1),de={class:"col-md-9"},ne=(0,i.Uk)("This field is required"),ce={class:"row insertFormRow align-items-center"},me=(0,i._)("div",{class:"col-md-3"},[(0,i._)("label",{for:"newUserSurname"},"Surname")],-1),we={class:"col-md-9"},he=(0,i.Uk)("This field is required"),Ue={class:"row insertFormRow align-items-center even"},ue=(0,i._)("div",{class:"col-md-3"},[(0,i._)("label",{for:"newUserEmail"},"Email")],-1),pe={class:"col-md-9"},ge=(0,i.Uk)("This field is required"),ve=(0,i.Uk)("Email is not valid"),fe={class:"row insertFormRow align-items-center"},ye=(0,i._)("div",{class:"col-md-3"},[(0,i._)("label",{for:"newUserPassword"},"Password")],-1),_e={class:"col-md-9"},Oe=(0,i.Uk)("This field is required"),ke=(0,i.Uk)("Passwords do NOT match!"),Ie={class:"row insertFormRow align-items-center even"},Ke=(0,i._)("div",{class:"col-md-3"},[(0,i._)("label",{for:"newUserPasswordRepeat"},"Repeat password")],-1),be={class:"col-md-9"},Pe=(0,i.Uk)("This field is required"),Ae=(0,i.Uk)("Passwords do NOT match!"),De={class:"row insertFormRow align-items-center"},Te=(0,i._)("div",{class:"col-md-3"},[(0,i._)("label",{for:"newUserActiveUntil"},"Active until")],-1),Ne={class:"col-md-9"},Se=(0,i.Uk)("This field is required"),Ve={class:"row insertFormRow align-items-center even"},xe=(0,i._)("div",{class:"col-md-3"},[(0,i._)("label",{for:"newUserIsActive"},"Active")],-1),Ce={class:"col-md-9"},Me=(0,i.Uk)("This field is required"),Re={class:"row insertFormRow align-items-center"},Le=(0,i._)("div",{class:"col-md-3"},[(0,i._)("label",{for:"newUserType"},"User type")],-1),Ee={class:"col-md-9"},We=(0,i.Uk)("This field is required"),qe={class:"row insertFormRow align-items-center even"},Fe=(0,i._)("div",{class:"col-md-3"},[(0,i._)("label",{for:"newUserLanguage"},"Language")],-1),je={class:"col-md-9"},Ye=(0,i.Uk)("This field is required"),He={class:"row insertFormRow align-items-center"},Ze={class:"col-md-6 text-left"},ze={class:"col-md-6 text-end"},$e=(0,i._)("span",{class:"font-bold text-2xl block mb-2 mt-4"},null,-1),Be={class:"mb-0"},Je={class:"flex text-end gap-2 mt-4"},Ge=(0,i._)("h4",null," Please confirm",-1),Qe=(0,i._)("span",{class:"font-bold text-2xl block mb-2 mt-4"},null,-1),Xe={class:"mb-0"},es=(0,i.Uk)("Are you sure that you want to delete user "),ss=(0,i.Uk)("?"),ts={class:"row",style:{"margin-top":"30px"}},is={class:"col-md-6 text-start"},as={class:"col-md-6 text-end"},ls=(0,i._)("h4",null," Please Enter new password",-1),os={class:"row insertFormRow align-items-center"},rs=(0,i._)("div",{class:"col-md-3"},[(0,i._)("label",{for:"editUserPassword"},"Password")],-1),ds={class:"col-md-9"},ns=(0,i.Uk)("This field is required"),cs=(0,i.Uk)("Passwords do NOT match!"),ms={class:"row insertFormRow align-items-center even"},ws=(0,i._)("div",{class:"col-md-3"},[(0,i._)("label",{for:"editUserPasswordRepeat"},"Repeat password")],-1),hs={class:"col-md-9"},Us=(0,i.Uk)("This field is required"),us=(0,i.Uk)("Passwords do NOT match!"),ps={class:"row",style:{"margin-top":"30px"}},gs={class:"col-md-6 text-start"},vs={class:"col-md-6 text-end"};function fs(e,s,t,g,v,y){const _=(0,i.up)("base-spinner"),fs=(0,i.up)("base-dialog"),ys=(0,i.up)("InputText"),_s=(0,i.up)("Button"),Os=(0,i.up)("Dropdown"),ks=(0,i.up)("Column"),Is=(0,i.up)("DataTable"),Ks=(0,i.up)("InlineMessage"),bs=(0,i.up)("Calendar"),Ps=(0,i.up)("Dialog"),As=(0,i.Q2)("tooltip");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i.Wm)(fs,{show:v.isLoading,title:"Authenticating...",fixed:""},{default:(0,i.w5)((()=>[(0,i.Wm)(_)])),_:1},8,["show"]),(0,i._)("div",null,[(0,i.Wm)(Is,{id:v.dataTable,value:v.allUsers,paginator:!0,rows:25,dataKey:"id",stripedRows:"",filters:v.filters,"onUpdate:filters":s[3]||(s[3]=e=>v.filters=e),filterDisplay:"menu",key:"key",paginatorTemplate:"CurrentPageReport FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink RowsPerPageDropdown",paginatorStart:"CurrentPageReport",rowsPerPageOptions:[25,50,100],responsiveLayout:"scroll",currentPageReportTemplate:"Showing {first} to {last} of total {totalRecords} users",globalFilterFields:["name","surname","email","type"],selectionMode:"single",onRowSelect:y.onRowSelect,onRowClick:y.onRowClick,loading:v.isLoading,scrollable:""},{header:(0,i.w5)((()=>[(0,i._)("div",l,[(0,i._)("span",o,[r,(0,i.Wm)(ys,{modelValue:v.filters["global"].value,"onUpdate:modelValue":s[0]||(s[0]=e=>v.filters["global"].value=e),placeholder:"Keyword Search"},null,8,["modelValue"])])]),(0,i._)("div",d,[(0,i._)("div",n,[(0,i.wy)((0,i.Wm)(_s,{style:{"min-width":"120px"},type:"button",icon:"pi pi-pencil",class:"p-button-text",id:"newTripButton",onClick:y.addUser,label:"Add user"},null,8,["onClick"]),[[As,{value:"Add user",showDelay:1e3,hideDelay:300},void 0,{bottom:!0}]])]),c])])),empty:(0,i.w5)((()=>[])),loading:(0,i.w5)((()=>[m])),paginatorstart:(0,i.w5)((()=>[])),paginatorend:(0,i.w5)((()=>[])),default:(0,i.w5)((()=>[(0,i.Wm)(ks,{field:"isActive",header:"Active",sortable:!0,dataType:"boolean",style:{"max-width":"100px"},bodyStyle:"width:40px"},{body:(0,i.w5)((({data:e})=>[(0,i._)("div",w,["Active"==e.isActive?((0,i.wg)(),(0,i.iD)("i",h)):(0,i.kq)("",!0),"Not active"==e.isActive?((0,i.wg)(),(0,i.iD)("i",U)):(0,i.kq)("",!0)]),(0,i._)("span",{style:{display:"none"},class:"hiddenFields",data:e.id},null,8,u)])),filter:(0,i.w5)((({filterModel:e})=>[(0,i.Wm)(Os,{options:["Active","Not active"],modelValue:e.value,"onUpdate:modelValue":s=>e.value=s,class:"p-column-filter",placeholder:"Active "},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),(0,i.Wm)(ks,{field:"name",header:"Name",sortable:!0,bodyStyle:"text-align: left",style:{"max-width":"250px"}},{filter:(0,i.w5)((({filterModel:e})=>[(0,i.Wm)(ys,{type:"text",modelValue:e.value,"onUpdate:modelValue":s=>e.value=s,class:"p-column-filter",placeholder:"Name"},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),(0,i.Wm)(ks,{field:"surname",header:"Surname",sortable:!0,bodyStyle:"text-align: left",style:{"max-width":"250px"}},{filter:(0,i.w5)((({filterModel:e})=>[(0,i.Wm)(ys,{type:"text",modelValue:e.value,"onUpdate:modelValue":s=>e.value=s,class:"p-column-filter",placeholder:"Surname"},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),(0,i.Wm)(ks,{field:"email",header:"Email",sortable:!0,bodyStyle:"text-align: left",style:{"max-width":"250px"}},{filter:(0,i.w5)((({filterModel:e})=>[(0,i.Wm)(ys,{type:"text",modelValue:e.value,"onUpdate:modelValue":s=>e.value=s,class:"p-column-filter",placeholder:"Email"},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),(0,i.Wm)(ks,{field:"type",header:"User Type",dataType:"boolean",sortable:!0,bodyStyle:"text-align: left",style:{"max-width":"250px"}},{filter:(0,i.w5)((({filterModel:e})=>[(0,i.Wm)(Os,{options:["Admin","User"],modelValue:e.value,"onUpdate:modelValue":s=>e.value=s,class:"p-column-filter",placeholder:"Type"},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),(0,i.Wm)(ks),"ADMIN"==v.userType?((0,i.wg)(),(0,i.j4)(ks,{key:0,style:{"text-align":"right"},class:"actionsColumns"},{header:(0,i.w5)((()=>[p])),body:(0,i.w5)((()=>[(0,i.wy)(((0,i.wg)(),(0,i.iD)("div",{class:"fa-stack fa-2x actionIcons",style:{"font-size":"15px"},onClick:s[1]||(s[1]=(...e)=>y.editClick&&y.editClick(...e))},f)),[[As,{value:"Edit user",showDelay:1e3,hideDelay:300},void 0,{bottom:!0}]]),(0,i.wy)(((0,i.wg)(),(0,i.iD)("div",{class:"fa-stack fa-2x actionIcons",style:{"font-size":"15px",color:"#aa0000"},onClick:s[2]||(s[2]=(...e)=>y.deleteClick&&y.deleteClick(...e))},O)),[[As,{value:"Delete user",showDelay:1e3,hideDelay:300},void 0,{left:!0}]])])),_:1})):(0,i.kq)("",!0)])),_:1},8,["id","value","filters","onRowSelect","onRowClick","loading"])]),(0,i.Wm)(Ps,{"onUpdate:visible":[y.handleClose,s[15]||(s[15]=e=>v.editUserDialog=e)],visible:v.editUserDialog,modal:"",style:{width:"50rem"},breakpoints:{"1199px":"75vw","575px":"90vw"}},{header:(0,i.w5)((()=>[(0,i._)("div",k,[I,(0,i._)("div",K,[(0,i.wy)((0,i.Wm)(_s,{icon:"pi pi-lock",onClick:y.displayPasswordChange,class:"downloadImageButton",label:"Change password"},null,8,["onClick"]),[[As,"Change password",void 0,{bottom:!0}]])])])])),default:(0,i.w5)((()=>[(0,i._)("div",b,[(0,i._)("div",P,[A,(0,i._)("div",D,[(0,i.Wm)(ys,{onInput:s[4]||(s[4]=e=>v.editUserNameOK=!0),id:"editUserName",modelValue:v.editUserName,"onUpdate:modelValue":s[5]||(s[5]=e=>v.editUserName=e)},null,8,["modelValue"]),v.editUserNameOK?(0,i.kq)("",!0):((0,i.wg)(),(0,i.j4)(Ks,{key:0},{default:(0,i.w5)((()=>[T])),_:1}))])]),(0,i._)("div",N,[S,(0,i._)("div",V,[(0,i.Wm)(ys,{onInput:s[6]||(s[6]=e=>v.editUserSurnameOK=!0),id:"editUserSurname",modelValue:v.editUserSurname,"onUpdate:modelValue":s[7]||(s[7]=e=>v.editUserSurname=e)},null,8,["modelValue"]),v.editUserSurnameOK?(0,i.kq)("",!0):((0,i.wg)(),(0,i.j4)(Ks,{key:0},{default:(0,i.w5)((()=>[x])),_:1}))])]),(0,i._)("div",C,[M,(0,i._)("div",R,[(0,i.Wm)(ys,{onInput:s[8]||(s[8]=e=>v.editUserEmailOK=!0),id:"editUserEmail",modelValue:v.editUserEmail,"onUpdate:modelValue":s[9]||(s[9]=e=>v.editUserEmail=e)},null,8,["modelValue"]),v.editUserEmailOK?(0,i.kq)("",!0):((0,i.wg)(),(0,i.j4)(Ks,{key:0},{default:(0,i.w5)((()=>[L])),_:1}))])]),(0,i._)("div",E,[W,(0,i._)("div",q,[(0,i.Wm)(bs,{hourFormat:"24",value:v.editUserActiveUntil,modelValue:v.editUserActiveUntil,"onUpdate:modelValue":s[10]||(s[10]=e=>v.editUserActiveUntil=e),onChange:s[11]||(s[11]=s=>e.changeDate("from")),style:{"margin-left":"0"},id:"editUserActiveUntil",class:"dateDisplayInput",showIcon:"",dateFormat:"dd/mm/yy",placeholder:"dd/mm/yy",mask:"99/99/9999"},null,8,["value","modelValue"]),v.editUserActiveUntilOK?(0,i.kq)("",!0):((0,i.wg)(),(0,i.j4)(Ks,{key:0},{default:(0,i.w5)((()=>[F])),_:1}))])]),(0,i._)("div",j,[Y,(0,i._)("div",H,[(0,i.Wm)(Os,{modelValue:v.editUserIsActive2,"onUpdate:modelValue":s[12]||(s[12]=e=>v.editUserIsActive2=e),options:v.activeOptions,placeholder:"Please select"},null,8,["modelValue","options"]),v.editUserIsActive2OK?(0,i.kq)("",!0):((0,i.wg)(),(0,i.j4)(Ks,{key:0},{default:(0,i.w5)((()=>[Z])),_:1}))])]),(0,i._)("div",z,[$,(0,i._)("div",B,[(0,i.Wm)(Os,{modelValue:v.editUserType,"onUpdate:modelValue":s[13]||(s[13]=e=>v.editUserType=e),options:v.userTypeOptions,placeholder:"Please select"},null,8,["modelValue","options"]),v.editUserTypeOK?(0,i.kq)("",!0):((0,i.wg)(),(0,i.j4)(Ks,{key:0},{default:(0,i.w5)((()=>[J])),_:1}))])]),(0,i._)("div",G,[Q,(0,i._)("div",X,[(0,i.Wm)(Os,{modelValue:v.editUserLanguage,"onUpdate:modelValue":s[14]||(s[14]=e=>v.editUserLanguage=e),options:v.newUserLanguageOptions,placeholder:"Please select"},null,8,["modelValue","options"]),v.editUserLanguageOK?(0,i.kq)("",!0):((0,i.wg)(),(0,i.j4)(Ks,{key:0},{default:(0,i.w5)((()=>[ee])),_:1}))])]),(0,i._)("div",se,[(0,i._)("div",te,[(0,i.wy)((0,i.Wm)(_s,{onClick:y.closeEditDialog,style:{"min-width":"120px"},icon:"pi pi-times-circle",type:"button",class:"p-button-text redButton",label:"Cancel"},null,8,["onClick"]),[[As,{value:"Cancel",showDelay:1e3,hideDelay:300},void 0,{bottom:!0}]])]),(0,i._)("div",ie,[(0,i.wy)((0,i.Wm)(_s,{style:{"min-width":"120px"},type:"button",icon:"pi pi-pencil",class:"p-button-text",onClick:y.editUser,label:"Save changes"},null,8,["onClick"]),[[As,{value:"Save changes",showDelay:1e3,hideDelay:300},void 0,{bottom:!0}]])])])])])),_:1},8,["onUpdate:visible","visible"]),(0,i.Wm)(Ps,{"onUpdate:visible":[y.handleClose,s[31]||(s[31]=e=>v.newUserDialog=e)],visible:v.newUserDialog,modal:"",style:{width:"50rem"},breakpoints:{"1199px":"75vw","575px":"90vw"}},{header:(0,i.w5)((()=>[ae])),default:(0,i.w5)((()=>[(0,i._)("div",le,[(0,i._)("div",oe,[re,(0,i._)("div",de,[(0,i.Wm)(ys,{onInput:s[16]||(s[16]=e=>v.newUserNameOK=!0),id:"newUserName",modelValue:v.newUserName,"onUpdate:modelValue":s[17]||(s[17]=e=>v.newUserName=e)},null,8,["modelValue"]),v.newUserNameOK?(0,i.kq)("",!0):((0,i.wg)(),(0,i.j4)(Ks,{key:0},{default:(0,i.w5)((()=>[ne])),_:1}))])]),(0,i._)("div",ce,[me,(0,i._)("div",we,[(0,i.Wm)(ys,{onInput:s[18]||(s[18]=e=>v.newUserSurnameOK=!0),id:"newUserSurname",modelValue:v.newUserSurname,"onUpdate:modelValue":s[19]||(s[19]=e=>v.newUserSurname=e)},null,8,["modelValue"]),v.newUserSurnameOK?(0,i.kq)("",!0):((0,i.wg)(),(0,i.j4)(Ks,{key:0},{default:(0,i.w5)((()=>[he])),_:1}))])]),(0,i._)("div",Ue,[ue,(0,i._)("div",pe,[(0,i.Wm)(ys,{onInput:s[20]||(s[20]=e=>v.newUserEmailOK=!0),id:"newUserEmail",modelValue:v.newUserEmail,"onUpdate:modelValue":s[21]||(s[21]=e=>v.newUserEmail=e),pattern:"[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}$"},null,8,["modelValue"]),v.newUserEmailOK?(0,i.kq)("",!0):((0,i.wg)(),(0,i.j4)(Ks,{key:0},{default:(0,i.w5)((()=>[ge])),_:1})),v.emailIsValid?(0,i.kq)("",!0):((0,i.wg)(),(0,i.j4)(Ks,{key:1},{default:(0,i.w5)((()=>[ve])),_:1}))])]),(0,i._)("div",fe,[ye,(0,i._)("div",_e,[(0,i.Wm)(ys,{type:"password",onInput:s[22]||(s[22]=e=>v.newUserPasswordOK=!0),id:"newUserPassword",modelValue:v.newUserPassword,"onUpdate:modelValue":s[23]||(s[23]=e=>v.newUserPassword=e)},null,8,["modelValue"]),v.newUserPasswordOK?(0,i.kq)("",!0):((0,i.wg)(),(0,i.j4)(Ks,{key:0},{default:(0,i.w5)((()=>[Oe])),_:1})),v.newUserPasswordsNotMatchOK?(0,i.kq)("",!0):((0,i.wg)(),(0,i.j4)(Ks,{key:1},{default:(0,i.w5)((()=>[ke])),_:1}))])]),(0,i._)("div",Ie,[Ke,(0,i._)("div",be,[(0,i.Wm)(ys,{type:"password",onInput:s[24]||(s[24]=e=>v.newUserPasswordRepeatOK=!0),id:"newUserPasswordRepeat",modelValue:v.newUserPasswordRepeat,"onUpdate:modelValue":s[25]||(s[25]=e=>v.newUserPasswordRepeat=e)},null,8,["modelValue"]),v.newUserPasswordRepeatOK?(0,i.kq)("",!0):((0,i.wg)(),(0,i.j4)(Ks,{key:0},{default:(0,i.w5)((()=>[Pe])),_:1})),v.newUserPasswordsNotMatchOK?(0,i.kq)("",!0):((0,i.wg)(),(0,i.j4)(Ks,{key:1},{default:(0,i.w5)((()=>[Ae])),_:1}))])]),(0,i._)("div",De,[Te,(0,i._)("div",Ne,[(0,i.Wm)(bs,{hourFormat:"24",value:v.newUserActiveUntil,modelValue:v.newUserActiveUntil,"onUpdate:modelValue":s[26]||(s[26]=e=>v.newUserActiveUntil=e),onChange:s[27]||(s[27]=s=>e.changeDate("from")),style:{"margin-left":"0"},id:"newUserActiveUntil",class:"dateDisplayInput",showIcon:"",dateFormat:"dd/mm/yy",placeholder:"dd/mm/yy",mask:"99/99/9999"},null,8,["value","modelValue"]),v.newUserActiveUntilOK?(0,i.kq)("",!0):((0,i.wg)(),(0,i.j4)(Ks,{key:0},{default:(0,i.w5)((()=>[Se])),_:1}))])]),(0,i._)("div",Ve,[xe,(0,i._)("div",Ce,[(0,i.Wm)(Os,{modelValue:v.newUserIsActive,"onUpdate:modelValue":s[28]||(s[28]=e=>v.newUserIsActive=e),options:v.activeOptions,placeholder:"Please select"},null,8,["modelValue","options"]),v.newUserIsActiveOK?(0,i.kq)("",!0):((0,i.wg)(),(0,i.j4)(Ks,{key:0},{default:(0,i.w5)((()=>[Me])),_:1}))])]),(0,i._)("div",Re,[Le,(0,i._)("div",Ee,[(0,i.Wm)(Os,{modelValue:v.newUserType,"onUpdate:modelValue":s[29]||(s[29]=e=>v.newUserType=e),options:v.userTypeOptions,placeholder:"Please select"},null,8,["modelValue","options"]),v.newUserTypeOK?(0,i.kq)("",!0):((0,i.wg)(),(0,i.j4)(Ks,{key:0},{default:(0,i.w5)((()=>[We])),_:1}))])]),(0,i._)("div",qe,[Fe,(0,i._)("div",je,[(0,i.Wm)(Os,{modelValue:v.newUserLanguage,"onUpdate:modelValue":s[30]||(s[30]=e=>v.newUserLanguage=e),options:v.newUserLanguageOptions,placeholder:"Please select"},null,8,["modelValue","options"]),v.newUserLanguageOK?(0,i.kq)("",!0):((0,i.wg)(),(0,i.j4)(Ks,{key:0},{default:(0,i.w5)((()=>[Ye])),_:1}))])]),(0,i._)("div",He,[(0,i._)("div",Ze,[(0,i.wy)((0,i.Wm)(_s,{onClick:y.closeNewDialog,style:{"min-width":"120px"},icon:"pi pi-times-circle",type:"button",class:"p-button-text redButton",label:"Cancel"},null,8,["onClick"]),[[As,{value:"Cancel",showDelay:1e3,hideDelay:300},void 0,{bottom:!0}]])]),(0,i._)("div",ze,[(0,i.wy)((0,i.Wm)(_s,{style:{"min-width":"120px"},type:"button",icon:"pi pi-pencil",class:"p-button-text",onClick:y.newUser,label:"Add user"},null,8,["onClick"]),[[As,{value:"Save changes",showDelay:1e3,hideDelay:300},void 0,{bottom:!0}]])])])])])),_:1},8,["onUpdate:visible","visible"]),(0,i.Wm)(Ps,{visible:v.displayInfoDialog,"onUpdate:visible":s[32]||(s[32]=e=>v.displayInfoDialog=e),modal:"",style:(0,a.j5)(v.infoDialogStyle),breakpoints:{"1199px":"75vw","575px":"90vw"}},{header:(0,i.w5)((()=>[(0,i._)("h4",null,(0,a.zw)(v.InfoModalHeader),1)])),default:(0,i.w5)((()=>[$e,(0,i._)("p",Be,(0,a.zw)(v.InfoModalMessage),1),(0,i._)("div",Je,[(0,i.Wm)(_s,{label:"Ok",onClick:y.closeInfo},null,8,["onClick"])])])),_:1},8,["visible","style"]),(0,i.Wm)(Ps,{visible:v.displayDeleteConfirm,"onUpdate:visible":s[34]||(s[34]=e=>v.displayDeleteConfirm=e),modal:"",style:{width:"30rem"},breakpoints:{"1199px":"75vw","575px":"90vw"}},{header:(0,i.w5)((()=>[Ge])),default:(0,i.w5)((()=>[Qe,(0,i._)("p",Xe,[es,(0,i._)("strong",null,"'"+(0,a.zw)(v.editUserName)+" "+(0,a.zw)(v.editUserSurname)+"' ",1),ss]),(0,i._)("div",ts,[(0,i._)("div",is,[(0,i.Wm)(_s,{class:"redButton",label:"Cancel",onClick:s[33]||(s[33]=e=>v.displayDeleteConfirm=!1)})]),(0,i._)("div",as,[(0,i.Wm)(_s,{label:"Yes, delete",onClick:y.deleteUser},null,8,["onClick"])])])])),_:1},8,["visible"]),(0,i.Wm)(Ps,{visible:v.newPasswordDialogVisible,"onUpdate:visible":s[40]||(s[40]=e=>v.newPasswordDialogVisible=e),modal:"",style:{width:"40rem"},breakpoints:{"1199px":"75vw","575px":"90vw"}},{header:(0,i.w5)((()=>[ls])),default:(0,i.w5)((()=>[(0,i._)("div",os,[rs,(0,i._)("div",ds,[(0,i.Wm)(ys,{type:"password",onInput:s[35]||(s[35]=e=>{v.newUserPasswordOK=!0,v.editUserPasswordsNotMatchOK=!0}),id:"editUserPassword",modelValue:v.editUserPassword,"onUpdate:modelValue":s[36]||(s[36]=e=>v.editUserPassword=e)},null,8,["modelValue"]),v.editUserPasswordOK?(0,i.kq)("",!0):((0,i.wg)(),(0,i.j4)(Ks,{key:0},{default:(0,i.w5)((()=>[ns])),_:1})),v.editUserPasswordsNotMatchOK?(0,i.kq)("",!0):((0,i.wg)(),(0,i.j4)(Ks,{key:1},{default:(0,i.w5)((()=>[cs])),_:1}))])]),(0,i._)("div",ms,[ws,(0,i._)("div",hs,[(0,i.Wm)(ys,{type:"password",onInput:s[37]||(s[37]=e=>{v.newUserPasswordRepeatOK=!0,v.editUserPasswordsNotMatchOK=!0}),id:"editUserPasswordRepeat",modelValue:v.editUserPasswordRepeat,"onUpdate:modelValue":s[38]||(s[38]=e=>v.editUserPasswordRepeat=e)},null,8,["modelValue"]),v.editUserPasswordRepeatOK?(0,i.kq)("",!0):((0,i.wg)(),(0,i.j4)(Ks,{key:0},{default:(0,i.w5)((()=>[Us])),_:1})),v.editUserPasswordsNotMatchOK?(0,i.kq)("",!0):((0,i.wg)(),(0,i.j4)(Ks,{key:1},{default:(0,i.w5)((()=>[us])),_:1}))])]),(0,i._)("div",ps,[(0,i._)("div",gs,[(0,i.Wm)(_s,{class:"redButton",label:"Cancel",onClick:s[39]||(s[39]=e=>v.newPasswordDialogVisible=!1)})]),(0,i._)("div",vs,[(0,i.Wm)(_s,{label:"Change password",onClick:y.changePassword},null,8,["onClick"])])])])),_:1},8,["visible"])],64)}var ys=t(5424),_s=t(3717),Os=t(6709),ks=t(2711),Is=t(1826),Ks=t(2419),bs=t(2679),Ps=t(5517),As=t(6265),Ds=t.n(As),Ts=t(7387),Ns=t.n(Ts),Ss=t(2724),Vs=t(6797),xs=t.n(Vs),Cs={props:["systemId"],components:{DataTable:ys.Z,Column:_s.Z,InputText:Os.Z,Button:Is.Z,Dialog:Ks.Z,InlineMessage:bs.Z,Calendar:ks.Z,Dropdown:Ps.Z},emits:["extend-session"],data(){return{newPasswordDialogVisible:!1,editUserPasswordsNotMatchOK:!0,emailIsValid:!0,displayDeleteConfirm:!1,displayInfoDialog:!1,InfoModalHeader:"",InfoModalMessage:"",infoDialogStyle:[{width:"20rem"}],dataTable:"dataTable",editUserDialog:!1,newUserDialog:!1,userType:"",activeOptions:["Yes","No"],userTypeOptions:["Admin","User"],newUserLanguageOptions:["Lietuvių","English"],isLoading:!1,tableHeight:"calc( 100vh - 215px)",allUsers:[],newUserName:"",newUserSurname:"",newUserEmail:"",newUserPassword:"",newUserPasswordRepeat:"",newUserIsActive:"",newUserLanguage:"",newUserActiveUntil:"",newUserType:"",newUserNameOK:!0,newUserSurnameOK:!0,newUserEmailOK:!0,newUserPasswordOK:!0,newUserPasswordRepeatOK:!0,newUserIsActiveOK:!0,newUserLanguageOK:!0,newUserActiveUntilOK:!0,newUserTypeOK:!0,newUserPasswordsNotMatchOK:!0,editUserName:"",editUserSurname:"",editUserEmail:"",editUserPassword:"",editUserPasswordRepeat:"",editUserIsActive:"",editUserIsActive2:"",editUserLanguage:"",editUserActiveUntil:"",editUserType:"",editUserNameOK:!0,editUserSurnameOK:!0,editUserEmailOK:!0,editUserPasswordOK:!0,editUserPasswordRepeatOK:!0,editUserIsActiveOK:!0,editUserIsActive2OK:!0,editUserLanguageOK:!0,editUserActiveUntilOK:!0,editUserTypeOK:!0,ediUserPasswordsNotMatchOK:!0,filters:{global:{value:null,matchMode:Ss.a6.CONTAINS},name:{operator:Ss.pg.AND,constraints:[{value:null,matchMode:Ss.a6.CONTAINS}]},surname:{operator:Ss.pg.AND,constraints:[{value:null,matchMode:Ss.a6.CONTAINS}]},email:{operator:Ss.pg.AND,constraints:[{value:null,matchMode:Ss.a6.CONTAINS}]},isActive:{operator:Ss.pg.AND,constraints:[{value:null,matchMode:Ss.a6.STRING}]},type:{operator:Ss.pg.AND,constraints:[{value:null,matchMode:Ss.a6.STRING}]}},matchModes:[{label:"Starts With",value:Ss.a6.STARTS_WITH},{label:"Contains",value:Ss.a6.CONTAINS}]}},mounted(){this.userType=this.$store.getters.getUserType.toUpperCase(),this.getAllUsers(),this.moveSearchBoxToTop()},methods:{extendTime(){this.$emit("extend-session")},closeNewDialog(){this.newUserDialog=!1},closeEditDialog(){this.editUserDialog=!1},handleClose(e){},reorganizePagination(){Ns()(".p-paginator-current").detach().appendTo(".p-paginator-left-content"),Ns()(".p-paginator-rpp-options").detach().appendTo(".p-paginator-right-content")},moveSearchBoxToTop(){Ns()("#hereMoveSearch").empty(),Ns()("#searchBox").detach().appendTo("#hereMoveSearch")},displayPasswordChange(){this.newPasswordDialogVisible=!0,this.resetErrors()},addUser(){this.resetInputFields(),this.newUserDialog=!0},newUser(){this.resetErrors();var e=!0;""==this.newUserActiveUntil?(this.newUserActiveUntilOK=!1,e=!1):this.newUserActiveUntilOK=!0,""==this.newUserName?(this.newUserNameOK=!1,e=!1):this.newUserNameOK=!0,""==this.newUserSurname?(this.newUserSurnameOK=!1,e=!1):this.newUserSurnameOK=!0,""==this.newUserEmail?(this.newUserEmailOK=!1,e=!1):this.isEmailVaid(this.newUserEmail)?this.newUserEmailOK=!0:(this.emailIsValid=!1,e=!1),""==this.newUserPassword?(this.newUserPasswordOK=!1,e=!1):this.newUserPasswordOK=!0,""==this.newUserPasswordRepeat?(this.newUserPasswordRepeatOK=!1,e=!1):this.newUserPasswordRepeatOK=!0,""==this.newUserIsActive?(this.newUserIsActiveOK=!1,e=!1):this.newUserIsActiveOK=!0,""==this.newUserType?(this.newUserTypeOK=!1,e=!1):this.newUserTypeOK=!0,""==this.newUserLanguage?(this.newUserLanguageOK=!1,e=!1):this.newUserLanguageOK=!0,""!=this.newUserPassword&&""!=this.newUserPasswordRepeat&&this.newUserPassword!=this.newUserPasswordRepeat&&(this.newUserPasswordsNotMatchOK=!1,e=!1),1==e&&this.insertUserToDatabase()},async insertUserToDatabase(){this.isLoading=!0;const e=this.format_date(xs()(this.newUserActiveUntil,"DD/MM/YYYY HH:mm"),"YYYY-MM-DD");var s="";s="Admin"==this.newUserType?0:1;var t="";"Lietuvių"==this.newUserLanguage?t="LT":"English"==this.newUserLanguage&&(t="EN");var i="";"Yes"==this.newUserIsActive?i=!0:"No"==this.newUserIsActive&&(i=!1);const a=this.$store.getters.token,l=localStorage.getItem("_rootRestUrl");let o=JSON.stringify({sessionId:a,usersToInsert:[{name:this.newUserName,surname:this.newUserSurname,email:this.newUserEmail,password:this.newUserPassword,language:t,activeUntil:e,isActive:i,type:s}]}),r={headers:{"Content-Type":"application/json"}};await Ds().post(l+"/api/v1/User/Register",o,r).then((()=>{this.getAllUsers(),this.newUserDialog=!1,this.InfoModalHeader="Info",this.InfoModalMessage="User is added",this.infoDialogStyle=[{width:"20rem"}],this.displayInfoDialog=!0,this.isLoading=!1})).catch((e=>{e.response&&(this.InfoModalHeader="Error!",this.InfoModalMessage=e.response.data,this.infoDialogStyle=[{width:"40rem"}],this.displayInfoDialog=!0,console.warn(e.response.data)),this.isLoading=!1})),this.$store.dispatch("autoLogin"),this.extendTime()},editUser(){this.resetErrors();var e=!0;""==this.editUserActiveUntil||null==this.editUserActiveUntil?(this.editUserActiveUntilOK=!1,e=!1):this.editUserActiveUntilOK=!0,""==this.editUserName?(this.editUserNameOK=!1,e=!1):this.editUserNameOK=!0,""==this.editUserSurname?(this.editUserSurnameOK=!1,e=!1):this.editUserSurnameOK=!0,""==this.editUserEmail?(this.editUserEmailOK=!1,e=!1):this.isEmailVaid(this.editUserEmail)?this.editUserEmailOK=!0:(this.emailIsValid=!1,e=!1),""==this.editUserIsActive2?(this.editUserIsActive2OK=!1,e=!1):this.editUserIsActive2OK=!0,""==this.editUserType?(this.editUserTypeOK=!1,e=!1):this.editUserTypeOK=!0,""==this.editUserLanguage?(this.editUserLanguageOK=!1,e=!1):this.editUserLanguageOK=!0,""!=this.editUserPassword&&""!=this.editUserPasswordRepeat&&this.editUserPassword!=this.editUserPasswordRepeat&&(this.editUserPasswordsNotMatchOK=!1,e=!1),1==e&&this.UpdateUserInDatabase()},async UpdateUserInDatabase(){this.isLoading=!0;const e=this.format_date(xs()(this.editUserActiveUntil,"DD/MM/YYYY"),"YYYY-MM-DD");var s="";s="Admin"==this.editUserType?0:1;var t="";"Lietuvių"==this.editUserLanguage?t="LT":"English"==this.editUserLanguage&&(t="EN");var i="";"Yes"==this.editUserIsActive2?i=!0:"No"==this.editUserIsActive2&&(i=!1);const a=this.$store.getters.token,l=localStorage.getItem("_rootRestUrl");let o=JSON.stringify({sessionId:a,user:{userKey:this.ClickedRowId,name:this.editUserName,surname:this.editUserSurname,email:this.editUserEmail,language:t,activeUntil:e,isActive:i,type:s}}),r={headers:{"Content-Type":"application/json"}};await Ds().post(l+"/api/v1/User/EditUser",o,r).then((()=>{this.getAllUsers(),this.editUserDialog=!1,this.InfoModalHeader="Info",this.InfoModalMessage="Changes are saved",this.infoDialogStyle=[{width:"20rem"}],this.displayInfoDialog=!0,this.isLoading=!1})).catch((e=>{e.response&&(this.InfoModalHeader="Error!",this.InfoModalMessage=e.response.data,this.infoDialogStyle=[{width:"40rem"}],this.displayInfoDialog=!0,console.warn(e.response.data)),this.isLoading=!1})),this.$store.dispatch("autoLogin"),this.extendTime()},deleteClick(){this.displayDeleteConfirm=!0},async deleteUser(){this.isLoading=!0;const e=this.$store.getters.token,s=localStorage.getItem("_rootRestUrl");let t=JSON.stringify({sessionId:e,email:this.editUserEmail}),i={headers:{"Content-Type":"application/json"}};await Ds().post(s+"/api/v1/User/DeleteUser",t,i).then((()=>{this.getAllUsers(),this.displayDeleteConfirm=!1,this.displayInfoDialog=!0,this.InfoModalHeader="Info",this.InfoModalMessage="User is deleted",this.isLoading=!1})).catch((e=>{this.displayDeleteConfirm=!1,e.response&&(this.InfoModalHeader="Error!",this.InfoModalMessage=e.response.data,this.infoDialogStyle=[{width:"40rem"}],this.displayInfoDialog=!0,console.warn(e.response.data)),this.isLoading=!1})),this.$store.dispatch("autoLogin"),this.extendTime()},format_date_to_full(e,s){var t=e.substring(6,10),i=e.substring(3,5),a=e.substring(0,2);return t+"-"+i+"-"+a+" "+s},resetErrors(){this.emailIsValid=!0,this.newUserNameOK=!0,this.newUserSurnameOK=!0,this.newUserEmailOK=!0,this.newUserPasswordOK=!0,this.newUserIsActiveOK=!0,this.newUserLanguageOK=!0,this.newUserActiveUntilsOK=!0,this.newUserTypeOK=!0,this.newUserPasswordsNotMatchOK=!0,this.editUserNameOK=!0,this.editUserSurnameOK=!0,this.editUserEmailOK=!0,this.editUserPasswordOK=!0,this.editUserIsActiveOK=!0,this.editUserLanguageOK=!0,this.editUserActiveUntilsOK=!0,this.editUserTypeOK=!0,this.ediUserPasswordsNotMatchOK=!0,this.editUserPasswordsNotMatchOK=!0},resetInputFields(){this.newUserName="",this.newUserSurname="",this.newUserEmail="",this.newUserPassword="",this.newUserIsActive="",this.newUserLanguage="",this.newUserActiveUntil="",this.newUserType="",this.editUserName="",this.editUserSurname="",this.editUserEmail="",this.editUserPassword="",this.editUserIsActive="",this.editUserLanguage="",this.editUserActiveUntil="",this.editUserType="",this.editUserNameOK=!0,this.editUserSurnameOK=!0,this.editUserEmailOK=!0,this.editUserPasswordOK=!0,this.editUserIsActiveOK=!0,this.editUserLanguageOK=!0,this.editUserActiveUntilsOK=!0,this.editUserTypeOK=!0,this.ediUserPasswordsNotMatchOK=!0},editClick(){this.editUserDialog=!0},onRowClick(e){this.ClickedRowId=e.data.id,this.editUserName=e.data.name,this.editUserSurname=e.data.surname,this.editUserEmail=e.data.email,this.editUserType=e.data.type,this.editUserLanguage=e.data.language,this.editUserIsActive=e.data.isActive,this.editUserIsActive2=e.data.isActive2,this.editUserActiveUntil=e.data.activeUntil,Ns()(".hiddenFields").each((function(){Ns()(this).closest("tr").removeClass("highlight")})),Ns()(".hiddenFields").each((function(){Ns()(this).attr("data")==e.data.id&&Ns()(this).closest("tr").addClass("highlight")}))},onRowSelect(e){console.log(e)},async getAllUsers(){this.isLoading=!0;const e=this.$store.getters.token,s=localStorage.getItem("_rootRestUrl");let t=JSON.stringify({sessionId:e}),i={headers:{"Content-Type":"application/json"}};await Ds().get(s+"/api/v1/User/Users/?sessionId="+e,t,i).then((e=>{this.allUsers=e.data,this.correctData(),this.reorganizePagination(),this.isLoading=!1})).catch((function(e){e.response&&"401"==e.response.status&&(localStorage.removeItem("token"),localStorage.removeItem("userId"),localStorage.removeItem("userFullname"),localStorage.removeItem("userType"),localStorage.removeItem("tokenExpiration"),localStorage.removeItem("expiresIn"),document.location="/"),console.table(e)})),this.$store.dispatch("autoLogin"),this.extendTime(),this.isLoading=!1},format_date(e,s){if(e)return xs()(String(e)).format(s)},closeInfo(){this.displayInfoDialog=!1},changePassword(){this.resetErrors();var e=!0;""==this.editUserPassword?(this.editUserPasswordOK=!1,e=!1):this.editUserPasswordOK=!0,""==this.editUserPasswordRepeat?(this.editUserPasswordRepeatOK=!1,e=!1):this.editUserPasswordRepeatOK=!0,""!=this.editUserPassword&&""!=this.editUserPasswordRepeat&&this.editUserPassword!=this.editUserPasswordRepeat&&(this.editUserPasswordsNotMatchOK=!1,e=!1,alert(this.editUserPasswordsNotMatchOK)),1==e&&this.updateUserPasswordInDatabase()},async updateUserPasswordInDatabase(){this.isLoading=!0;const e=this.$store.getters.token,s=localStorage.getItem("_rootRestUrl"),t=this.editUserPassword;let i=JSON.stringify({sessionId:e,email:this.editUserEmail,password:t}),a={headers:{"Content-Type":"application/json"}};await Ds().post(s+"/api/v1/User/ChangePassword",i,a).then((()=>{this.getAllUsers(),this.editUserDialog=!1,this.newPasswordDialogVisible=!1,this.InfoModalHeader="Info",this.InfoModalMessage="Password is changed",this.infoDialogStyle=[{width:"20rem"}],this.displayInfoDialog=!0,this.isLoading=!1})).catch((e=>{e.response&&(this.InfoModalHeader="Error!",this.InfoModalMessage=e.response.data,this.infoDialogStyle=[{width:"40rem"}],this.displayInfoDialog=!0,console.warn(e.response.data)),this.isLoading=!1})),this.$store.dispatch("autoLogin"),this.extendTime()},isEmailVaid(e){const s=/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;return s.test(e)},correctData(){this.allUsers.forEach(((e,s)=>{const t=Object.entries(e);t.forEach((e=>{if("type"==e[0]){var t="";t=0==e[1]?"Admin":"User",this.allUsers[s]["type"]=t}if("isActive"==e[0]){var i="",a="";1==e[1]?(i="Active",a="Yes"):(i="Not active",a="No"),this.allUsers[s]["isActive"]=i,this.allUsers[s]["isActive2"]=a}if("language"==e[0]){var l="";"LT"==e[1]?l="Lietuvių":"EN"==e[1]&&(l="English"),this.allUsers[s]["language"]=l}if("activeUntil"==e[0]){var o=this.format_date(e[1],"DD/MM/YYYY");this.allUsers[s]["activeUntil"]=o}}))}))}}},Ms=t(89);const Rs=(0,Ms.Z)(Cs,[["render",fs]]);var Ls=Rs}}]);
//# sourceMappingURL=19.39b5473a.js.map
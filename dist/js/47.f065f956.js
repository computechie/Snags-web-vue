"use strict";(self["webpackChunkSnags"]=self["webpackChunkSnags"]||[]).push([[47],{9047:function(e,t,i){i.r(t),i.d(t,{default:function(){return Wa}});var a=i(3396),n=i(7139),s=i(9242);const l={class:"p-input-icon-right",id:"searchBox"},o={class:"row"},d={class:"col-md-4"},r=(0,a.Uk)("   "),c=(0,a.Uk)("   "),p=(0,a.Uk)("   "),h={class:"col-md-8 text-end"},u=(0,a.Uk)(" Loading data. Please wait... "),g=["data"],m={style:{display:"inline-block",width:"85%","padding-right":"50px"}},f={key:0,style:{display:"block",width:"15%"}},v={key:0,src:"/images/pin.png",style:{height:"18px"}},w={key:1,src:"/images/pin.png",style:{height:"18px",visibility:"hidden"}},b=(0,a._)("i",{class:"fa fa-camera"},null,-1),y={key:0,class:"statusOpen statusBlock"},S={key:1,class:"statusClosed statusBlock"},D={key:2,class:"statusActioned statusBlock"},k={key:3,class:"statusReturned statusBlock"},x={class:"closedByName"},C={class:"closedByDate"},I=(0,a._)("div",{style:{right:"20px",position:"absolute"}},[(0,a._)("div",{style:{float:"right"}},"Actions")],-1),_={class:"actionButtonsHolderTable"},T=(0,a._)("i",{class:"fa-solid fa-square fa-stack-2x"},null,-1),M=(0,a._)("i",{class:"fa-stack-1x fa-solid fa-pen-to-square",style:{color:"white"}},null,-1),F=[T,M],P=(0,a._)("i",{class:"fa-solid fa-square fa-stack-2x"},null,-1),B=(0,a._)("i",{class:"fa-stack-1x fa-solid fa-trash-can",style:{color:"white"}},null,-1),A=[P,B],U={key:0,class:"alert alert-danger text-center"},L={class:"row"},K={class:"col-md-12 text-end"},O={class:"row"},Y={class:"col text-center"},N={class:"detailsHeadlineCode"},E={class:"detailsHeadline"},W={class:"row"},R={class:"col text-center"},z={class:"text-end",id:"editIconsPanel"},H={class:"actionButtonsHolder"},V=(0,a._)("i",{class:"fa-solid fa-square fa-stack-2x"},null,-1),$=(0,a._)("i",{class:"fa-stack-1x fa-solid fa-pen-to-square",style:{color:"white"}},null,-1),q=[V,$],j=(0,a._)("i",{class:"fa-solid fa-square fa-stack-2x"},null,-1),Q=(0,a._)("i",{class:"fa-stack-1x fa-solid fa-trash-can",style:{color:"white"}},null,-1),Z=[j,Q],J={class:"row",style:{}},G={class:"col text-center",style:{padding:"19px"}},X={class:"table table-striped table-sm",id:"detailsTable"},ee=(0,a._)("td",{style:{width:"160px"}},"Date Opened:",-1),te=(0,a._)("td",{style:{width:"160px"}},"Action by:",-1),ie=(0,a._)("td",null,"Location:",-1),ae=(0,a._)("td",null,"Works Package:",-1),ne=(0,a._)("td",null,"Owner:",-1),se=(0,a._)("td",null,"Closed by:",-1),le=(0,a._)("td",null,"Notes:",-1),oe=["textContent"],de={class:"row"},re=(0,a._)("div",{class:"col-md-6 text-left",style:{padding:"0"}},null,-1),ce={class:"col-md-6 text-end",style:{padding:"0"}},pe={class:"row",style:{"margin-top":"12px"}},he={class:"col text-end",style:{padding:"0"}},ue=(0,a._)("img",{src:"/images/pindrawing.jpg"},null,-1),ge={class:"historyHolder"},me={class:"row"},fe={class:"col-md-12"},ve={class:"mt-3"},we={class:"historyStatus"},be={class:"historyDate"},ye={class:"historyName"},Se=(0,a._)("div",{class:"historyNotes"},[(0,a._)("textarea",{class:"textAreaComments"},"Comments")],-1),De=(0,a.Uk)(" Enter new snag "),ke={class:"container",id:"formContainer"},xe={class:"row insertFormRow align-items-center even"},Ce=(0,a._)("div",{class:"col-md-3"},[(0,a._)("label",{for:"newSnagDate"},"Required by Date *")],-1),Ie={class:"col-md-9"},_e=(0,a.Uk)("This field is required"),Te={class:"row insertFormRow align-items-center"},Me=(0,a._)("div",{class:"col-md-3"},[(0,a._)("label",{for:"newSnagTitle"},"Item *")],-1),Fe={class:"col-md-9"},Pe=(0,a.Uk)("This field is required"),Be={class:"row insertFormRow align-items-center even"},Ae=(0,a._)("div",{class:"col-md-3"},[(0,a._)("label",{for:"newSnagCode"},"Code *")],-1),Ue={class:"col-md-9"},Le=(0,a.Uk)("This field is required"),Ke={class:"row insertFormRow align-items-center"},Oe=(0,a._)("div",{class:"col-md-3"},[(0,a._)("label",{for:"newSnagStatus"},"Status * ")],-1),Ye={class:"col-md-9"},Ne=(0,a.Uk)("This field is required"),Ee={class:"row insertFormRow align-items-center"},We={class:"col-md-6 text-left"},Re={class:"col-md-6 text-end"},ze=(0,a.Uk)(" Edit Snag "),He={class:"container",id:"formContainer"},Ve={class:"row insertFormRow align-items-center even"},$e=(0,a._)("div",{class:"col-md-3"},[(0,a._)("label",{for:"editSnagDate"},"Required by Date *")],-1),qe={class:"col-md-9"},je=(0,a.Uk)("This field is required"),Qe={class:"row insertFormRow align-items-center"},Ze=(0,a._)("div",{class:"col-md-3"},[(0,a._)("label",{for:"editSnagTitle"},"Item *")],-1),Je={class:"col-md-9"},Ge=(0,a.Uk)("This field is required"),Xe={class:"row insertFormRow align-items-center even"},et=(0,a._)("div",{class:"col-md-3"},[(0,a._)("label",{for:"editSnagStatus"},"Status *")],-1),tt={class:"col-md-9"},it=(0,a.Uk)("This field is required"),at={class:"row insertFormRow align-items-center"},nt=(0,a._)("div",{class:"col-md-3"},[(0,a._)("label",{for:"username"},"Code *")],-1),st={class:"col-md-9"},lt=(0,a.Uk)("This field is required"),ot={class:"row insertFormRow align-items-center"},dt={class:"col-md-6 text-left"},rt={class:"col-md-6 text-end"},ct=(0,a._)("span",{class:"font-bold text-2xl block mb-2 mt-4"},null,-1),pt={class:"mb-0"},ht={class:"flex text-end gap-2 mt-4"},ut=(0,a._)("h4",null," Please confirm",-1),gt=(0,a._)("span",{class:"font-bold text-2xl block mb-2 mt-4"},null,-1),mt={class:"mb-0"},ft=(0,a.Uk)("Are you sure that you want to Delete Snag "),vt=(0,a.Uk)("?"),wt={class:"row",style:{"margin-top":"30px"}},bt={class:"col-md-6 text-start"},yt={class:"col-md-6 text-end"},St=(0,a._)("h4",null," Please confirm",-1),Dt=(0,a._)("span",{class:"font-bold text-2xl block mb-2 mt-4"},null,-1),kt={class:"mb-0"},xt=(0,a.Uk)("Are you sure that you want to remove mark 'Invoiced'"),Ct=(0,a._)("br",null,null,-1),It=(0,a.Uk)(" for trip "),_t=(0,a.Uk)("?"),Tt={class:"row",style:{"margin-top":"30px"}},Mt={class:"col-md-6 text-start"},Ft={class:"col-md-6 text-end"},Pt=(0,a.Uk)(" Mark this trip as Invoiced "),Bt={class:"container",id:"formContainer"},At={class:"row insertFormRow align-items-center even"},Ut=(0,a._)("div",{class:"col-md-3"},[(0,a._)("label",{for:"invoiceDate"},"Invoice Date *")],-1),Lt={class:"col-md-9"},Kt=(0,a.Uk)("This field is required"),Ot={class:"row insertFormRow align-items-center"},Yt={class:"col-md-6 text-left"},Nt={class:"col-md-6 text-end"},Et={key:0},Wt={key:1},Rt=(0,a.Uk)("Mark selected "),zt={style:{"font-weight":"bold"}},Ht=(0,a.Uk)(" as Invoiced"),Vt={class:"container",id:"formContainer"},$t={class:"row insertFormRow align-items-center even"},qt=(0,a._)("div",{class:"col-md-3"},[(0,a._)("label",{for:"invoiceDate"},"Invoice Date *")],-1),jt={class:"col-md-9"},Qt=(0,a.Uk)("This field is required"),Zt={class:"row insertFormRow align-items-center"},Jt={class:"col-md-6 text-left"},Gt={class:"col-md-6 text-end"},Xt=(0,a._)("h4",null," Please confirm",-1),ei=(0,a._)("span",{class:"font-bold text-2xl block mb-2 mt-4"},null,-1),ti=(0,a._)("p",{class:"mb-0"},"Are you sure that you want to delete this photo?",-1),ii={class:"row",style:{"margin-top":"30px"}},ai={class:"col-md-6 text-start"},ni={class:"col-md-6 text-end"},si=(0,a._)("h4",null," Upload photo",-1),li={class:"row",style:{"margin-top":"30px"}},oi={class:"col"},di=(0,a._)("p",null,"Drag and drop files to here to upload.",-1),ri={id:"div-context-menu",class:"cls-context-menu",style:{left:"11px",top:"13px",display:"none"}},ci={key:0},pi={key:1},hi={key:2};function ui(e,t,i,T,M,P){const B=(0,a.up)("base-spinner"),V=(0,a.up)("base-dialog"),$=(0,a.up)("InputText"),j=(0,a.up)("Button"),Q=(0,a.up)("Calendar"),ui=(0,a.up)("Column"),gi=(0,a.up)("Dropdown"),mi=(0,a.up)("DataTable"),fi=(0,a.up)("TabPanel"),vi=(0,a.up)("SwiperCarousel"),wi=(0,a.up)("TabView"),bi=(0,a.up)("Timeline"),yi=(0,a.up)("Dialog"),Si=(0,a.up)("InlineMessage"),Di=(0,a.up)("FileUpload"),ki=(0,a.Q2)("tooltip");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(V,{show:M.isLoading,title:"Authenticating...",fixed:""},{default:(0,a.w5)((()=>[(0,a.Wm)(B)])),_:1},8,["show"]),(0,a._)("span",l,[(0,a.Wm)($,{modelValue:M.searchQuery,"onUpdate:modelValue":t[0]||(t[0]=e=>M.searchQuery=e),placeholder:"Keyword Search",onChange:P.onSearch,onInput:P.onSearchInput},null,8,["modelValue","onChange","onInput"]),(0,a._)("i",{class:"pi pi-search",onClick:t[1]||(t[1]=(...e)=>P.onSearch&&P.onSearch(...e))})]),(0,a._)("div",{style:{width:"100%"},onContextmenu:t[14]||(t[14]=e=>P.showContextMenu(e))},[(0,a.Wm)(mi,{totalRecords:M.totalRecords,id:M.dataTable,value:M.allSnags,lazy:"",paginator:!0,rows:M.pageSize,first:M.first,dataKey:"id",stripedRows:"",filters:M.filters,"onUpdate:filters":t[9]||(t[9]=e=>M.filters=e),filterDisplay:"menu",key:"key",onPage:t[10]||(t[10]=e=>P.onPage(e)),onSort:t[11]||(t[11]=t=>e.onSort(t)),onFilter:t[12]||(t[12]=e=>P.onFilter(e)),onRowSelect:P.onRowSelect,onRowClick:P.onRowClick,onRowsChange:t[13]||(t[13]=e=>P.onRows(e)),paginatorTemplate:"CurrentPageReport FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink RowsPerPageDropdown",paginatorStart:"CurrentPageReport",rowsPerPageOptions:M.rowsPerPageOptions,responsiveLayout:"scroll",currentPageReportTemplate:"Showing {first} to {last} of total {totalRecords} snags",globalFilterFields:["code","title"],selectionMode:"single",loading:M.loading1,scrollable:"",scrollHeight:M.tableHeight},{header:(0,a.w5)((()=>[(0,a._)("div",o,[(0,a._)("div",d,[(0,a.wy)((0,a.Wm)(j,{style:{"min-width":"120px"},type:"button",icon:"pi pi-pencil",class:"p-button-text",id:"newSnagButton",onClick:P.newSnag,label:"New snag"},null,8,["onClick"]),[[ki,{value:"New Snag",showDelay:1e3,hideDelay:300},void 0,{bottom:!0}]]),r,(0,a.wy)((0,a.Wm)(j,{style:{"min-width":"120px"},type:"button",icon:"pi pi-download",class:"p-button-text",id:"downloadReport",onClick:P.downloadReport,label:"Download Report"},null,8,["onClick"]),[[ki,{value:"Download report",showDelay:1e3,hideDelay:300},void 0,{bottom:!0}]]),c,M.showInvoiceSelectedButton&&"ADMIN"==M.userType?(0,a.wy)(((0,a.wg)(),(0,a.j4)(j,{key:0,style:{"min-width":"120px"},type:"button",icon:"pi pi-check-circle",class:"p-button-text",id:"invoiceSelected",onClick:P.invoiceSelected,label:"Invoice selected"},null,8,["onClick"])),[[ki,{value:"Invoice selected",showDelay:1e3,hideDelay:300},void 0,{bottom:!0}]]):(0,a.kq)("",!0),(0,a.wy)((0,a.Wm)(j,{style:{"min-width":"120px"},type:"button",icon:"pi pi-pencil",class:"p-button-text",id:"newSnagButton",onClick:t[2]||(t[2]=e=>P.getSnags("all")),label:"Load all snags"},null,512),[[ki,{value:"Load all snags",showDelay:1e3,hideDelay:300},void 0,{bottom:!0}]]),p]),(0,a._)("div",h,[(0,a.wy)((0,a.Wm)(Q,{style:{width:"160px"},id:"fromDateBox",class:"dateDisplayInput",modelValue:M.fromDate,"onUpdate:modelValue":t[3]||(t[3]=e=>M.fromDate=e),showIcon:"",dateFormat:"dd/mm/yy",placeholder:"dd/mm/yy",mask:"99/99/9999",onChange:t[4]||(t[4]=t=>e.changeDate("from"))},null,8,["modelValue"]),[[ki,{value:"Date from",showDelay:1e3,hideDelay:300},void 0,{bottom:!0}]]),(0,a.wy)((0,a.Wm)(Q,{style:{width:"160px"},id:"toDateBox",class:"dateDisplayInput",modelValue:M.toDate,"onUpdate:modelValue":t[5]||(t[5]=e=>M.toDate=e),showIcon:"",dateFormat:"dd/mm/yy",placeholder:"dd/mm/yy",mask:"99/99/9999",onChange:t[6]||(t[6]=t=>e.changeDate("to"))},null,8,["modelValue"]),[[ki,{value:"Date to",showDelay:1e3,hideDelay:300},void 0,{bottom:!0}]]),(0,a.Wm)(j,{type:"button",icon:"pi pi-refresh",class:"p-button-text",id:"refreshButton",onClick:P.refreshData},null,8,["onClick"])])])])),empty:(0,a.w5)((()=>[])),loading:(0,a.w5)((()=>[u])),paginatorstart:(0,a.w5)((()=>[])),paginatorend:(0,a.w5)((()=>[])),default:(0,a.w5)((()=>[(0,a.Wm)(ui,{field:"date",header:"Date Opened",style:{"min-width":"10rem","min-height":"43px"}},{body:(0,a.w5)((({data:e})=>[(0,a.Uk)((0,n.zw)(P.format_date(e.date,"DD/MM/YYYY"))+" ",1),(0,a._)("span",{style:{display:"none"},class:"hiddenFields",data:e.key},null,8,g)])),_:1}),(0,a.Wm)(ui,{field:"code",header:"Code",bodyStyle:"text-align: left",style:{"min-height":"43px"}},{filter:(0,a.w5)((({filterModel:e,filterCallback:t})=>[(0,a.Wm)($,{type:"text",modelValue:e.value,"onUpdate:modelValue":t=>e.value=t,onKeydown:(0,s.D2)((e=>t()),["enter"]),class:"p-column-filter",placeholder:"Search"},null,8,["modelValue","onUpdate:modelValue","onKeydown"])])),_:1}),(0,a.Wm)(ui,{field:"caption",header:"Item",bodyStyle:"text-align: left",style:{"text-align":"left","min-height":"43px","min-width":"320px"}},{body:(0,a.w5)((({data:e})=>[(0,a._)("div",m,(0,n.zw)(e.caption),1),""!=e.hasPhoto?((0,a.wg)(),(0,a.iD)("div",f,["Kitchen Units"==e.caption?((0,a.wg)(),(0,a.iD)("img",v)):(0,a.kq)("",!0),"Kitchen Units"!=e.caption?((0,a.wg)(),(0,a.iD)("img",w)):(0,a.kq)("",!0),b])):(0,a.kq)("",!0)])),filter:(0,a.w5)((({filterModel:e,filterCallback:t})=>[(0,a.Wm)($,{type:"text",modelValue:e.value,"onUpdate:modelValue":t=>e.value=t,onKeydown:(0,s.D2)((e=>t()),["enter"]),class:"p-column-filter",placeholder:"Search"},null,8,["modelValue","onUpdate:modelValue","onKeydown"])])),_:1}),(0,a.Wm)(ui,{field:"status",header:"Status",bodyStyle:"text-align: left",style:{"min-height":"43px"}},{body:(0,a.w5)((({data:e})=>["Open"==e.status?((0,a.wg)(),(0,a.iD)("div",y,(0,n.zw)(e.status),1)):(0,a.kq)("",!0),"Closed"==e.status?((0,a.wg)(),(0,a.iD)("div",S,(0,n.zw)(e.status),1)):(0,a.kq)("",!0),"Actioned"==e.status?((0,a.wg)(),(0,a.iD)("div",D,(0,n.zw)(e.status),1)):(0,a.kq)("",!0),"Returned"==e.status?((0,a.wg)(),(0,a.iD)("div",k,(0,n.zw)(e.status),1)):(0,a.kq)("",!0)])),filter:(0,a.w5)((({filterModel:e})=>[(0,a.Wm)(gi,{modelValue:e.value,"onUpdate:modelValue":t=>e.value=t,options:M.allStatuses,filter:"",optionLabel:"name",optionValue:"value",placeholder:"Select Status"},null,8,["modelValue","onUpdate:modelValue","options"])])),_:1}),(0,a.Wm)(ui,{field:"assignedTo",header:"Action By",bodyStyle:"text-align: left",style:{"min-height":"43px"}}),(0,a.Wm)(ui,{field:"area",header:"Location",bodyStyle:"text-align: left",style:{"min-height":"43px"}}),(0,a.Wm)(ui,{field:"worksPackage",header:"Works Package",bodyStyle:"text-align: left",style:{"min-height":"43px"}},{filter:(0,a.w5)((({filterModel:e,filterCallback:t})=>[(0,a.Wm)($,{type:"text",modelValue:e.value,"onUpdate:modelValue":t=>e.value=t,onKeydown:(0,s.D2)((e=>t()),["enter"]),class:"p-column-filter",placeholder:"Search"},null,8,["modelValue","onUpdate:modelValue","onKeydown"])])),_:1}),(0,a.Wm)(ui,{field:"createdBy",header:"Owner",bodyStyle:"text-align: left",style:{"min-height":"43px"}}),(0,a.Wm)(ui,{field:"closedBy",header:"Closed By",bodyStyle:"text-align: left",style:{display:"grid","min-height":"43px"}},{body:(0,a.w5)((({data:e})=>[(0,a._)("span",x,(0,n.zw)(e.closedBy),1),(0,a._)("span",C,(0,n.zw)(P.format_date(e.signOffDate,"DD/MM/YYYY")),1)])),_:1}),(0,a.Wm)(ui,{field:"",header:"",bodyStyle:"text-align: left",style:{"min-height":"43px"}},{header:(0,a.w5)((()=>[I])),body:(0,a.w5)((()=>[(0,a._)("div",_,[(0,a.wy)(((0,a.wg)(),(0,a.iD)("div",{class:"fa-stack fa-2x actionIcons",style:{"font-size":"15px"},onClick:t[7]||(t[7]=(...e)=>P.editClick&&P.editClick(...e))},F)),[[ki,{value:"Edit Snag",showDelay:1e3,hideDelay:300},void 0,{bottom:!0}]]),(0,a.wy)(((0,a.wg)(),(0,a.iD)("div",{class:"fa-stack fa-2x actionIcons",style:{"font-size":"15px",color:"#aa0000"},onClick:t[8]||(t[8]=(...e)=>P.deleteClick&&P.deleteClick(...e))},A)),[[ki,{value:"Delete Snag",showDelay:1e3,hideDelay:300},void 0,{left:!0}]])])])),_:1})])),_:1},8,["totalRecords","id","value","rows","first","filters","onRowSelect","onRowClick","rowsPerPageOptions","loading","scrollHeight"])],32),M.showTable?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("div",U," Snags not found! ")),(0,a._)("div",{id:"RightSidepanel",class:(0,n.C_)(["RightSidepanel",M.panelClass])},[(0,a._)("div",L,[(0,a._)("div",K,[(0,a._)("i",{class:"pi pi-times cursorHand closePanelButton",onClick:t[15]||(t[15]=(...e)=>P.closePanel&&P.closePanel(...e))})])]),(0,a._)("div",O,[(0,a._)("div",Y,[(0,a._)("h5",N,(0,n.zw)(M.snagDetailsData.code),1),(0,a._)("h5",E,(0,n.zw)(M.snagDetailsData.caption),1)])]),(0,a._)("div",W,[(0,a._)("div",R,[(0,a._)("div",{class:(0,n.C_)("statusBlock status"+M.snagDetailsData.status)},(0,n.zw)(M.snagDetailsData.status),3)])]),(0,a._)("div",z,[(0,a._)("div",H,[(0,a.wy)(((0,a.wg)(),(0,a.iD)("div",{class:"fa-stack fa-2x actionIcons",style:{"font-size":"15px"},onClick:t[16]||(t[16]=(...e)=>P.editClick&&P.editClick(...e))},q)),[[ki,{value:"Edit snag",showDelay:1e3,hideDelay:300},void 0,{bottom:!0}]]),(0,a.wy)(((0,a.wg)(),(0,a.iD)("div",{class:"fa-stack fa-2x actionIcons",style:{"font-size":"15px",color:"#aa0000"},onClick:t[17]||(t[17]=(...e)=>P.deleteClick&&P.deleteClick(...e))},Z)),[[ki,{value:"Delete snag",showDelay:1e3,hideDelay:300},void 0,{left:!0}]])])]),(0,a._)("div",J,[(0,a._)("div",G,[(0,a.Wm)(wi,{activeIndex:M.activeTab,"onUpdate:activeIndex":t[18]||(t[18]=e=>M.activeTab=e)},{default:(0,a.w5)((()=>[(0,a.Wm)(fi,{header:"Details"},{default:(0,a.w5)((()=>[(0,a._)("table",X,[(0,a._)("tbody",null,[(0,a._)("tr",null,[ee,(0,a._)("td",null,(0,n.zw)(M.snagDetailsData.date),1)]),(0,a._)("tr",null,[te,(0,a._)("td",null,(0,n.zw)(M.snagDetailsData.assignedTo),1)]),(0,a._)("tr",null,[ie,(0,a._)("td",null,(0,n.zw)(M.snagDetailsData.area),1)]),(0,a._)("tr",null,[ae,(0,a._)("td",null,(0,n.zw)(M.snagDetailsData.worksPackage),1)]),(0,a._)("tr",null,[ne,(0,a._)("td",null,(0,n.zw)(M.snagDetailsData.createdBy),1)]),(0,a._)("tr",null,[se,(0,a._)("td",null,(0,n.zw)(M.snagDetailsData.closedBy),1)]),(0,a._)("tr",null,[le,(0,a._)("td",null,[(0,a._)("textarea",{rows:"5",textContent:(0,n.zw)(M.snagDetailsData.notes),style:{width:"100%"},readonly:""},null,8,oe)])])])]),(0,a._)("div",de,[re,(0,a._)("div",ce,[(0,a.wy)((0,a.Wm)(j,{onClick:P.openDialogAddPhoto,style:{"min-width":"120px"},type:"button",class:"p-button-text addphotobutton",label:"Add photo"},null,8,["onClick"]),[[ki,{value:"Add photo",showDelay:1e3,hideDelay:300},void 0,{bottom:!0}]])])])])),_:1}),M.picturesTabShow?((0,a.wg)(),(0,a.j4)(fi,{key:0,header:"Pictures ("+M.snagImages.length+")"},{default:(0,a.w5)((()=>[(0,a.Wm)(vi,{tripImages:M.snagImages,onShowloader:P.showloader,openedcargoname:M.openedcargoname,onSwiper:P.onSwiper,onDeletePhoto:P.deletePhotoId,onDeletePhotomodal:P.deletePhotoModal,userType:M.userType},null,8,["tripImages","onShowloader","openedcargoname","onSwiper","onDeletePhoto","onDeletePhotomodal","userType"]),(0,a._)("div",pe,[(0,a._)("div",he,[(0,a.wy)((0,a.Wm)(j,{onClick:P.openDialogAddPhoto,style:{"min-width":"120px"},type:"button",class:"p-button-text addphotobutton",label:"Add photo"},null,8,["onClick"]),[[ki,{value:"Add photo",showDelay:1e3,hideDelay:300},void 0,{bottom:!0}]])])])])),_:1},8,["header"])):(0,a.kq)("",!0),(0,a.Wm)(fi,{header:"Drawing"},{default:(0,a.w5)((()=>[ue])),_:1})])),_:1},8,["activeIndex"])])]),(0,a._)("div",ge,[(0,a._)("div",me,[(0,a._)("div",fe,[(0,a.Wm)(bi,{value:M.events,align:"alternate"},{marker:(0,a.w5)((e=>[(0,a._)("span",{class:"flex w-2rem h-2rem align-items-center justify-content-center text-white border-circle z-1 shadow-1",style:(0,n.j5)({backgroundColor:e.item.color})},[(0,a._)("i",{class:(0,n.C_)(e.item.icon)},null,2)],4)])),content:(0,a.w5)((e=>[(0,a._)("div",ve,[(0,a._)("div",we,(0,n.zw)(e.item.status),1),(0,a._)("div",be,(0,n.zw)(e.item.date),1),(0,a._)("div",ye,(0,n.zw)(e.item.createdBy),1),Se])])),_:1},8,["value"])])])]),(0,a.Wm)(yi,{modal:"",visible:M.visibleImagesModal,"onUpdate:visible":t[19]||(t[19]=e=>M.visibleImagesModal=e),style:{width:"50rem"},breakpoints:{"1199px":"75vw","575px":"90vw"}},{default:(0,a.w5)((()=>[(0,a.Wm)(vi,{snagImages:M.snagImages,onDeletePhotomodal:P.deletePhotoModal},null,8,["snagImages","onDeletePhotomodal"])])),_:1},8,["visible"])],2),(0,a.Wm)(yi,{"onUpdate:visible":[P.handleClose,t[27]||(t[27]=e=>M.newSnagDialog=e)],visible:M.newSnagDialog,modal:"",style:{width:"50rem"},breakpoints:{"1199px":"75vw","575px":"90vw"}},{header:(0,a.w5)((()=>[De])),default:(0,a.w5)((()=>[(0,a._)("div",ke,[(0,a._)("div",xe,[Ce,(0,a._)("div",Ie,[(0,a.Wm)(Q,{onChange:t[20]||(t[20]=t=>e.changeDate("from")),style:{"margin-left":"0"},id:"newSnagDate",class:"dateDisplayInput",modelValue:M.newSnagDate,"onUpdate:modelValue":t[21]||(t[21]=e=>M.newSnagDate=e),showIcon:"",dateFormat:"dd/mm/yy",placeholder:"dd/mm/yy",mask:"99/99/9999"},null,8,["modelValue"]),M.newSnagDateOK?(0,a.kq)("",!0):((0,a.wg)(),(0,a.j4)(Si,{key:0},{default:(0,a.w5)((()=>[_e])),_:1}))])]),(0,a._)("div",Te,[Me,(0,a._)("div",Fe,[(0,a.Wm)($,{onInput:t[22]||(t[22]=e=>M.newSnagTitleOK=!0),id:"newSnagTitle",modelValue:M.newSnagTitle,"onUpdate:modelValue":t[23]||(t[23]=e=>M.newSnagTitle=e)},null,8,["modelValue"]),M.newSnagTitleOK?(0,a.kq)("",!0):((0,a.wg)(),(0,a.j4)(Si,{key:0},{default:(0,a.w5)((()=>[Pe])),_:1}))])]),(0,a._)("div",Be,[Ae,(0,a._)("div",Ue,[(0,a.Wm)($,{onInput:t[24]||(t[24]=e=>M.newSnagCodeOK=!0),id:"newSnagCode",modelValue:M.newSnagCode,"onUpdate:modelValue":t[25]||(t[25]=e=>M.newSnagCode=e)},null,8,["modelValue"]),M.newSnagCodeOK?(0,a.kq)("",!0):((0,a.wg)(),(0,a.j4)(Si,{key:0},{default:(0,a.w5)((()=>[Le])),_:1}))])]),(0,a._)("div",Ke,[Oe,(0,a._)("div",Ye,[(0,a.Wm)(gi,{modelValue:M.newSnagStatus,"onUpdate:modelValue":t[26]||(t[26]=e=>M.newSnagStatus=e),options:M.allStatuses,optionLabel:"name",placeholder:"Select Status"},null,8,["modelValue","options"]),M.newSnagStatusOK?(0,a.kq)("",!0):((0,a.wg)(),(0,a.j4)(Si,{key:0},{default:(0,a.w5)((()=>[Ne])),_:1}))])]),(0,a._)("div",Ee,[(0,a._)("div",We,[(0,a.wy)((0,a.Wm)(j,{onClick:P.closeInsertDialog,style:{"min-width":"120px"},icon:"pi pi-times-circle",type:"button",class:"p-button-text redButton",label:"Cancel"},null,8,["onClick"]),[[ki,{value:"Cancel",showDelay:1e3,hideDelay:300},void 0,{bottom:!0}]])]),(0,a._)("div",Re,[(0,a.wy)((0,a.Wm)(j,{style:{"min-width":"120px"},type:"button",icon:"pi pi-pencil",class:"p-button-text",onClick:P.saveSnag,label:"Save snag"},null,8,["onClick"]),[[ki,{value:"Save snag",showDelay:1e3,hideDelay:300},void 0,{bottom:!0}]])])])])])),_:1},8,["onUpdate:visible","visible"]),(0,a.Wm)(yi,{"onUpdate:visible":[P.handleClose,t[35]||(t[35]=e=>M.editSnagDialog=e)],visible:M.editSnagDialog,modal:"",style:{width:"50rem"},breakpoints:{"1199px":"75vw","575px":"90vw"}},{header:(0,a.w5)((()=>[ze])),default:(0,a.w5)((()=>[(0,a._)("div",He,[(0,a._)("div",Ve,[$e,(0,a._)("div",qe,[(0,a.Wm)(Q,{value:M.editSnagDate,modelValue:M.editSnagDate,"onUpdate:modelValue":t[28]||(t[28]=e=>M.editSnagDate=e),onChange:t[29]||(t[29]=t=>e.changeDate("from")),style:{"margin-left":"0"},id:"editSnagDate",class:"dateDisplayInput",showIcon:"",dateFormat:"dd/mm/yy",placeholder:"dd/mm/yy",mask:"99/99/9999"},null,8,["value","modelValue"]),M.editSnagDateOK?(0,a.kq)("",!0):((0,a.wg)(),(0,a.j4)(Si,{key:0},{default:(0,a.w5)((()=>[je])),_:1}))])]),(0,a._)("div",Qe,[Ze,(0,a._)("div",Je,[(0,a.Wm)($,{onInput:t[30]||(t[30]=e=>M.editSnagTitleOK=!0),id:"editSnagTitle",modelValue:M.editSnagTitle,"onUpdate:modelValue":t[31]||(t[31]=e=>M.editSnagTitle=e)},null,8,["modelValue"]),M.editSnagTitleOK?(0,a.kq)("",!0):((0,a.wg)(),(0,a.j4)(Si,{key:0},{default:(0,a.w5)((()=>[Ge])),_:1}))])]),(0,a._)("div",Xe,[et,(0,a._)("div",tt,[(0,a.Wm)(gi,{modelValue:M.editSnagStatus,"onUpdate:modelValue":t[32]||(t[32]=e=>M.editSnagStatus=e),options:M.allStatuses,optionLabel:"name",placeholder:M.editSnagStatus},null,8,["modelValue","options","placeholder"]),M.editSnagStatusOK?(0,a.kq)("",!0):((0,a.wg)(),(0,a.j4)(Si,{key:0},{default:(0,a.w5)((()=>[it])),_:1}))])]),(0,a._)("div",at,[nt,(0,a._)("div",st,[(0,a.Wm)($,{onInput:t[33]||(t[33]=e=>M.editSnagCodeOK=!0),id:"editSnagCode",modelValue:M.editSnagCode,"onUpdate:modelValue":t[34]||(t[34]=e=>M.editSnagCode=e)},null,8,["modelValue"]),M.editSnagCodeOK?(0,a.kq)("",!0):((0,a.wg)(),(0,a.j4)(Si,{key:0},{default:(0,a.w5)((()=>[lt])),_:1}))])]),(0,a._)("div",ot,[(0,a._)("div",dt,[(0,a.wy)((0,a.Wm)(j,{onClick:P.closeEditDialog,style:{"min-width":"120px"},icon:"pi pi-times-circle",type:"button",class:"p-button-text redButton",label:"Cancel"},null,8,["onClick"]),[[ki,{value:"Cancel",showDelay:1e3,hideDelay:300},void 0,{bottom:!0}]])]),(0,a._)("div",rt,[(0,a.wy)((0,a.Wm)(j,{style:{"min-width":"120px"},type:"button",icon:"pi pi-pencil",class:"p-button-text",onClick:P.editSnag,label:"Save changes"},null,8,["onClick"]),[[ki,{value:"Save changes",showDelay:1e3,hideDelay:300},void 0,{bottom:!0}]])])])])])),_:1},8,["onUpdate:visible","visible"]),(0,a.Wm)(yi,{visible:M.displayInfoDialog,"onUpdate:visible":t[36]||(t[36]=e=>M.displayInfoDialog=e),modal:"",style:{width:"25rem"},breakpoints:{"1199px":"75vw","575px":"90vw"}},{header:(0,a.w5)((()=>[(0,a._)("h4",null,(0,n.zw)(M.InfoModalHeader),1)])),default:(0,a.w5)((()=>[ct,(0,a._)("p",pt,(0,n.zw)(M.InfoModalMessage),1),(0,a._)("div",ht,[(0,a.Wm)(j,{label:"Ok",onClick:P.closeInfo},null,8,["onClick"])])])),_:1},8,["visible"]),(0,a.Wm)(yi,{visible:M.displayDeleteConfirm,"onUpdate:visible":t[38]||(t[38]=e=>M.displayDeleteConfirm=e),modal:"",style:{width:"30rem"},breakpoints:{"1199px":"75vw","575px":"90vw"}},{header:(0,a.w5)((()=>[ut])),default:(0,a.w5)((()=>[gt,(0,a._)("p",mt,[ft,(0,a._)("strong",null,"'"+(0,n.zw)(M.editSnagCargoName)+"'",1),vt]),(0,a._)("div",wt,[(0,a._)("div",bt,[(0,a.Wm)(j,{class:"redButton",label:"Cancel",onClick:t[37]||(t[37]=e=>M.displayDeleteConfirm=!1)})]),(0,a._)("div",yt,[(0,a.Wm)(j,{label:"Yes, delete",onClick:P.deleteTrip},null,8,["onClick"])])])])),_:1},8,["visible"]),(0,a.Wm)(yi,{visible:M.displayUnInvoiceConfirm,"onUpdate:visible":t[40]||(t[40]=e=>M.displayUnInvoiceConfirm=e),modal:"",style:{width:"30rem"},breakpoints:{"1199px":"75vw","575px":"90vw"}},{header:(0,a.w5)((()=>[St])),default:(0,a.w5)((()=>[Dt,(0,a._)("p",kt,[xt,Ct,It,(0,a._)("strong",null,"'"+(0,n.zw)(M.editSnagCargoName)+"'",1),_t]),(0,a._)("div",Tt,[(0,a._)("div",Mt,[(0,a.Wm)(j,{class:"redButton",label:"Cancel",onClick:t[39]||(t[39]=t=>e.displayInvoiceConfirm=!1)})]),(0,a._)("div",Ft,[(0,a.Wm)(j,{label:"Yes, remove it",onClick:P.unInvoiceThisTrip},null,8,["onClick"])])])])),_:1},8,["visible"]),(0,a.Wm)(yi,{"onUpdate:visible":[P.handleClose,t[44]||(t[44]=e=>M.sendInvoiceDialog=e)],visible:M.sendInvoiceDialog,modal:"",style:{width:"50rem"},breakpoints:{"1199px":"75vw","575px":"90vw"}},{header:(0,a.w5)((()=>[Pt])),default:(0,a.w5)((()=>[(0,a._)("div",Bt,[(0,a._)("div",At,[Ut,(0,a._)("div",Lt,[(0,a.Wm)(Q,{hourFormat:"24",showTime:"",onChange:t[41]||(t[41]=t=>e.changeDate("from")),style:{"margin-left":"0"},id:"invoiceDate",class:"dateDisplayInput",modelValue:M.invoiceDate,"onUpdate:modelValue":t[42]||(t[42]=e=>M.invoiceDate=e),showIcon:"",dateFormat:"dd/mm/yy",placeholder:"dd/mm/yy",mask:"99/99/9999"},null,8,["modelValue"]),M.invoiceDateOK?(0,a.kq)("",!0):((0,a.wg)(),(0,a.j4)(Si,{key:0},{default:(0,a.w5)((()=>[Kt])),_:1}))])]),(0,a._)("div",Ot,[(0,a._)("div",Yt,[(0,a.wy)((0,a.Wm)(j,{onClick:t[43]||(t[43]=e=>M.sendInvoiceDialog=!1),style:{"min-width":"120px"},icon:"pi pi-times-circle",type:"button",class:"p-button-text redButton",label:"Cancel"},null,512),[[ki,{value:"Cancel",showDelay:1e3,hideDelay:300},void 0,{bottom:!0}]])]),(0,a._)("div",Nt,[(0,a.wy)((0,a.Wm)(j,{style:{"min-width":"120px"},type:"button",icon:"pi pi-check-circle",class:"p-button-text",onClick:P.invoiceThisTrip,label:"Mark as Invoiced"},null,8,["onClick"]),[[ki,{value:"Mark as Invoiced",showDelay:1e3,hideDelay:300},void 0,{bottom:!0}]])])])])])),_:1},8,["onUpdate:visible","visible"]),(0,a.Wm)(yi,{"onUpdate:visible":[P.handleClose,t[48]||(t[48]=e=>M.sendMultipleInvoiceDialog=e)],visible:M.sendMultipleInvoiceDialog,modal:"",header:"header",style:{width:"50rem"},breakpoints:{"1199px":"75vw","575px":"90vw"}},{header:(0,a.w5)((()=>[1==M.selectedIDsForInvoicing.length?((0,a.wg)(),(0,a.iD)("span",Et,"Mark selected trip as Invoiced")):(0,a.kq)("",!0),M.selectedIDsForInvoicing.length>1?((0,a.wg)(),(0,a.iD)("span",Wt,[Rt,(0,a._)("span",zt,(0,n.zw)(M.selectedIDsForInvoicing.length)+" trips ",1),Ht])):(0,a.kq)("",!0)])),default:(0,a.w5)((()=>[(0,a._)("div",Vt,[(0,a._)("div",$t,[qt,(0,a._)("div",jt,[(0,a.Wm)(Q,{hourFormat:"24",showTime:"",onChange:t[45]||(t[45]=t=>e.changeDate("from")),style:{"margin-left":"0"},id:"invoiceMultipleDate",class:"dateDisplayInput",modelValue:M.invoiceDate,"onUpdate:modelValue":t[46]||(t[46]=e=>M.invoiceDate=e),showIcon:"",dateFormat:"dd/mm/yy",placeholder:"dd/mm/yy",mask:"99/99/9999"},null,8,["modelValue"]),M.invoiceDateOK?(0,a.kq)("",!0):((0,a.wg)(),(0,a.j4)(Si,{key:0},{default:(0,a.w5)((()=>[Qt])),_:1}))])]),(0,a._)("div",Zt,[(0,a._)("div",Jt,[(0,a.wy)((0,a.Wm)(j,{onClick:t[47]||(t[47]=e=>M.sendMultipleInvoiceDialog=!1),style:{"min-width":"120px"},icon:"pi pi-times-circle",type:"button",class:"p-button-text redButton",label:"Cancel"},null,512),[[ki,{value:"Cancel",showDelay:1e3,hideDelay:300},void 0,{bottom:!0}]])]),(0,a._)("div",Gt,[(0,a.wy)((0,a.Wm)(j,{style:{"min-width":"120px"},type:"button",icon:"pi pi-check-circle",class:"p-button-text",onClick:P.invoiceMultipleTrips,label:"Mark as Invoiced"},null,8,["onClick"]),[[ki,{value:"Mark as Invoiced",showDelay:1e3,hideDelay:300},void 0,{bottom:!0}]])])])])])),_:1},8,["onUpdate:visible","visible"]),(0,a.Wm)(yi,{visible:M.displayDeletePhotoConfirm,"onUpdate:visible":t[50]||(t[50]=e=>M.displayDeletePhotoConfirm=e),modal:"",style:{width:"30rem"},breakpoints:{"1199px":"75vw","575px":"90vw"}},{header:(0,a.w5)((()=>[Xt])),default:(0,a.w5)((()=>[ei,ti,(0,a._)("div",ii,[(0,a._)("div",ai,[(0,a.Wm)(j,{class:"redButton",label:"Cancel",onClick:t[49]||(t[49]=e=>M.displayDeletePhotoConfirm=!1)})]),(0,a._)("div",ni,[(0,a.Wm)(j,{label:"Yes, delete",onClick:P.deletePhoto},null,8,["onClick"])])])])),_:1},8,["visible"]),(0,a.Wm)(yi,{visible:M.displayUploadModal,"onUpdate:visible":t[52]||(t[52]=e=>M.displayUploadModal=e),modal:"",style:{width:"60rem"},breakpoints:{"1199px":"75vw","575px":"90vw"}},{header:(0,a.w5)((()=>[si])),default:(0,a.w5)((()=>[(0,a._)("div",li,[(0,a._)("div",oi,[(0,a.Wm)(Di,{name:"files[]",customUpload:!0,url:"/api/upload",onUploader:t[51]||(t[51]=e=>P.customUploader(e)),multiple:!1,accept:"image/*",maxFileSize:1e7},{empty:(0,a.w5)((()=>[di])),_:1})])])])),_:1},8,["visible"]),(0,a._)("div",ri,[(0,a._)("ul",null,[(0,a._)("ul",null,[M.AllPageMarked||M.AllMarked?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("li",ci,[(0,a._)("a",{onClick:t[53]||(t[53]=e=>P.SelectAllPage("select"))},"Select all records on current page")])),M.AllPageMarked||M.AllMarked?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("li",pi,[(0,a._)("a",{onClick:t[54]||(t[54]=e=>P.SelectAll("select"))},"Select all on all pages")])),M.AllMarked||M.AllPageMarked?((0,a.wg)(),(0,a.iD)("li",hi,[(0,a._)("a",{onClick:t[55]||(t[55]=e=>P.SelectAll("deselect"))},"Deselect All ")])):(0,a.kq)("",!0)])])])],64)}var gi=i(5424),mi=i(3717),fi=i(6709),vi=i(1826),wi=i(2711),bi=i(2419),yi=i(2679),Si=i(1937),Di=i(5030),ki={name:"TabView",emits:["update:activeIndex","tab-change","tab-click"],props:{activeIndex:{type:Number,default:0},lazy:{type:Boolean,default:!1},scrollable:{type:Boolean,default:!1},tabindex:{type:Number,default:0},selectOnFocus:{type:Boolean,default:!1},previousButtonProps:null,nextButtonProps:null},data(){return{d_activeIndex:this.activeIndex,focusedTabIndex:-1,isPrevButtonDisabled:!0,isNextButtonDisabled:!1}},watch:{activeIndex(e){this.d_activeIndex=e,this.scrollInView({index:e})}},mounted(){this.updateInkBar()},updated(){this.updateInkBar()},methods:{isTabPanel(e){return"TabPanel"===e.type.name},isTabActive(e){return this.d_activeIndex===e},getTabProp(e,t){return e.props?e.props[t]:void 0},getKey(e,t){return this.getTabProp(e,"header")||t},getTabHeaderActionId(e){return`${this.id}_${e}_header_action`},getTabContentId(e){return`${this.id}_${e}_content`},onScroll(e){this.scrollable&&this.updateButtonState(),e.preventDefault()},onPrevButtonClick(){const e=this.$refs.content,t=Si.p7.getWidth(e)-this.getVisibleButtonWidths(),i=e.scrollLeft-t;e.scrollLeft=i<=0?0:i},onNextButtonClick(){const e=this.$refs.content,t=Si.p7.getWidth(e)-this.getVisibleButtonWidths(),i=e.scrollLeft+t,a=e.scrollWidth-t;e.scrollLeft=i>=a?a:i},onTabClick(e,t,i){this.changeActiveIndex(e,t,i),this.$emit("tab-click",{originalEvent:e,index:i})},onTabKeyDown(e,t,i){switch(e.code){case"ArrowLeft":this.onTabArrowLeftKey(e);break;case"ArrowRight":this.onTabArrowRightKey(e);break;case"Home":this.onTabHomeKey(e);break;case"End":this.onTabEndKey(e);break;case"PageDown":this.onPageDownKey(e);break;case"PageUp":this.onPageUpKey(e);break;case"Enter":case"Space":this.onTabEnterKey(e,t,i);break}},onTabArrowRightKey(e){const t=this.findNextHeaderAction(e.target.parentElement);t?this.changeFocusedTab(e,t):this.onTabHomeKey(e),e.preventDefault()},onTabArrowLeftKey(e){const t=this.findPrevHeaderAction(e.target.parentElement);t?this.changeFocusedTab(e,t):this.onTabEndKey(e),e.preventDefault()},onTabHomeKey(e){const t=this.findFirstHeaderAction();this.changeFocusedTab(e,t),e.preventDefault()},onTabEndKey(e){const t=this.findLastHeaderAction();this.changeFocusedTab(e,t),e.preventDefault()},onPageDownKey(e){this.scrollInView({index:this.$refs.nav.children.length-2}),e.preventDefault()},onPageUpKey(e){this.scrollInView({index:0}),e.preventDefault()},onTabEnterKey(e,t,i){this.changeActiveIndex(e,t,i),e.preventDefault()},findNextHeaderAction(e,t=!1){const i=t?e:e.nextElementSibling;return i?Si.p7.hasClass(i,"p-disabled")||Si.p7.hasClass(i,"p-tabview-ink-bar")?this.findNextHeaderAction(i):Si.p7.findSingle(i,".p-tabview-header-action"):null},findPrevHeaderAction(e,t=!1){const i=t?e:e.previousElementSibling;return i?Si.p7.hasClass(i,"p-disabled")||Si.p7.hasClass(i,"p-tabview-ink-bar")?this.findPrevHeaderAction(i):Si.p7.findSingle(i,".p-tabview-header-action"):null},findFirstHeaderAction(){return this.findNextHeaderAction(this.$refs.nav.firstElementChild,!0)},findLastHeaderAction(){return this.findPrevHeaderAction(this.$refs.nav.lastElementChild,!0)},changeActiveIndex(e,t,i){this.getTabProp(t,"disabled")||this.d_activeIndex===i||(this.d_activeIndex=i,this.$emit("update:activeIndex",i),this.$emit("tab-change",{originalEvent:e,index:i}),this.scrollInView({index:i}))},changeFocusedTab(e,t){if(t&&(Si.p7.focus(t),this.scrollInView({element:t}),this.selectOnFocus)){const i=parseInt(t.parentElement.dataset.index,10),a=this.tabs[i];this.changeActiveIndex(e,a,i)}},scrollInView({element:e,index:t=-1}){const i=e||this.$refs.nav.children[t];i&&i.scrollIntoView&&i.scrollIntoView({block:"nearest"})},updateInkBar(){let e=this.$refs.nav.children[this.d_activeIndex];this.$refs.inkbar.style.width=Si.p7.getWidth(e)+"px",this.$refs.inkbar.style.left=Si.p7.getOffset(e).left-Si.p7.getOffset(this.$refs.nav).left+"px"},updateButtonState(){const e=this.$refs.content,{scrollLeft:t,scrollWidth:i}=e,a=Si.p7.getWidth(e);this.isPrevButtonDisabled=0===t,this.isNextButtonDisabled=parseInt(t)===i-a},getVisibleButtonWidths(){const{prevBtn:e,nextBtn:t}=this.$refs;return[e,t].reduce(((e,t)=>t?e+Si.p7.getWidth(t):e),0)},getTabHeaderClass(e,t){return["p-tabview-header",this.getTabProp(e,"headerClass"),{"p-highlight":this.d_activeIndex===t,"p-disabled":this.getTabProp(e,"disabled")}]},getTabContentClass(e){return["p-tabview-panel",this.getTabProp(e,"contentClass")]}},computed:{contentClasses(){return["p-tabview p-component",{"p-tabview-scrollable":this.scrollable}]},tabs(){return this.$slots.default().reduce(((e,t)=>(this.isTabPanel(t)?e.push(t):t.children&&t.children instanceof Array&&t.children.forEach((t=>{this.isTabPanel(t)&&e.push(t)})),e)),[])},prevButtonAriaLabel(){return this.$primevue.config.locale.aria?this.$primevue.config.locale.aria.previous:void 0},nextButtonAriaLabel(){return this.$primevue.config.locale.aria?this.$primevue.config.locale.aria.next:void 0},id(){return this.$attrs.id||(0,Si.Th)()}},directives:{ripple:Di.Z}};const xi={class:"p-tabview-nav-container"},Ci=["tabindex","aria-label"],Ii=(0,a._)("span",{class:"pi pi-chevron-left","aria-hidden":"true"},null,-1),_i=[Ii],Ti={ref:"nav",class:"p-tabview-nav",role:"tablist"},Mi=["data-index"],Fi=["id","tabindex","aria-disabled","aria-selected","aria-controls","onClick","onKeydown"],Pi={key:0,class:"p-tabview-title"},Bi={ref:"inkbar",class:"p-tabview-ink-bar",role:"presentation","aria-hidden":"true"},Ai=["tabindex","aria-label"],Ui=(0,a._)("span",{class:"pi pi-chevron-right","aria-hidden":"true"},null,-1),Li=[Ui],Ki={class:"p-tabview-panels"},Oi=["aria-labelledby"];function Yi(e,t,i,l,o,d){const r=(0,a.Q2)("ripple");return(0,a.wg)(),(0,a.iD)("div",{class:(0,n.C_)(d.contentClasses)},[(0,a._)("div",xi,[i.scrollable&&!o.isPrevButtonDisabled?(0,a.wy)(((0,a.wg)(),(0,a.iD)("button",(0,a.dG)({key:0,ref:"prevBtn",type:"button",class:"p-tabview-nav-prev p-tabview-nav-btn p-link",tabindex:i.tabindex,"aria-label":d.prevButtonAriaLabel,onClick:t[0]||(t[0]=(...e)=>d.onPrevButtonClick&&d.onPrevButtonClick(...e))},i.previousButtonProps),_i,16,Ci)),[[r]]):(0,a.kq)("",!0),(0,a._)("div",{ref:"content",class:"p-tabview-nav-content",onScroll:t[1]||(t[1]=(...e)=>d.onScroll&&d.onScroll(...e))},[(0,a._)("ul",Ti,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(d.tabs,((e,t)=>((0,a.wg)(),(0,a.iD)("li",(0,a.dG)({key:d.getKey(e,t),style:d.getTabProp(e,"headerStyle"),class:d.getTabHeaderClass(e,t),role:"presentation","data-index":t},d.getTabProp(e,"headerProps")),[(0,a.wy)(((0,a.wg)(),(0,a.iD)("a",(0,a.dG)({id:d.getTabHeaderActionId(t),class:"p-tabview-nav-link p-tabview-header-action",tabindex:d.getTabProp(e,"disabled")||!d.isTabActive(t)?-1:i.tabindex,role:"tab","aria-disabled":d.getTabProp(e,"disabled"),"aria-selected":d.isTabActive(t),"aria-controls":d.getTabContentId(t),onClick:i=>d.onTabClick(i,e,t),onKeydown:i=>d.onTabKeyDown(i,e,t)},d.getTabProp(e,"headerActionProps")),[e.props&&e.props.header?((0,a.wg)(),(0,a.iD)("span",Pi,(0,n.zw)(e.props.header),1)):(0,a.kq)("",!0),e.children&&e.children.header?((0,a.wg)(),(0,a.j4)((0,a.LL)(e.children.header),{key:1})):(0,a.kq)("",!0)],16,Fi)),[[r]])],16,Mi)))),128)),(0,a._)("li",Bi,null,512)],512)],544),i.scrollable&&!o.isNextButtonDisabled?(0,a.wy)(((0,a.wg)(),(0,a.iD)("button",(0,a.dG)({key:1,ref:"nextBtn",type:"button",class:"p-tabview-nav-next p-tabview-nav-btn p-link",tabindex:i.tabindex,"aria-label":d.nextButtonAriaLabel,onClick:t[2]||(t[2]=(...e)=>d.onNextButtonClick&&d.onNextButtonClick(...e))},i.nextButtonProps),Li,16,Ai)),[[r]]):(0,a.kq)("",!0)]),(0,a._)("div",Ki,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(d.tabs,((e,t)=>((0,a.wg)(),(0,a.iD)(a.HY,{key:d.getKey(e,t)},[!i.lazy||d.isTabActive(t)?(0,a.wy)(((0,a.wg)(),(0,a.iD)("div",(0,a.dG)({key:0,style:d.getTabProp(e,"contentStyle"),class:d.getTabContentClass(e),role:"tabpanel","aria-labelledby":d.getTabHeaderActionId(t)},d.getTabProp(e,"contentProps")),[((0,a.wg)(),(0,a.j4)((0,a.LL)(e)))],16,Oi)),[[s.F8,!!i.lazy||d.isTabActive(t)]]):(0,a.kq)("",!0)],64)))),128))])],2)}function Ni(e,t){void 0===t&&(t={});var i=t.insertAt;if(e&&"undefined"!==typeof document){var a=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css","top"===i&&a.firstChild?a.insertBefore(n,a.firstChild):a.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}}var Ei="\n.p-tabview-nav-container {\n    position: relative;\n}\n.p-tabview-scrollable .p-tabview-nav-container {\n    overflow: hidden;\n}\n.p-tabview-nav-content {\n    overflow-x: auto;\n    overflow-y: hidden;\n    scroll-behavior: smooth;\n    scrollbar-width: none;\n    -ms-scroll-chaining: contain auto;\n        overscroll-behavior: contain auto;\n}\n.p-tabview-nav {\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    margin: 0;\n    padding: 0;\n    list-style-type: none;\n    -webkit-box-flex: 1;\n        -ms-flex: 1 1 auto;\n            flex: 1 1 auto;\n}\n.p-tabview-header-action {\n    cursor: pointer;\n    -webkit-user-select: none;\n       -moz-user-select: none;\n        -ms-user-select: none;\n            user-select: none;\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-align: center;\n        -ms-flex-align: center;\n            align-items: center;\n    position: relative;\n    text-decoration: none;\n    overflow: hidden;\n}\n.p-tabview-ink-bar {\n    display: none;\n    z-index: 1;\n}\n.p-tabview-header-action:focus {\n    z-index: 1;\n}\n.p-tabview-title {\n    line-height: 1;\n    white-space: nowrap;\n}\n.p-tabview-nav-btn {\n    position: absolute;\n    top: 0;\n    z-index: 2;\n    height: 100%;\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-align: center;\n        -ms-flex-align: center;\n            align-items: center;\n    -webkit-box-pack: center;\n        -ms-flex-pack: center;\n            justify-content: center;\n}\n.p-tabview-nav-prev {\n    left: 0;\n}\n.p-tabview-nav-next {\n    right: 0;\n}\n.p-tabview-nav-content::-webkit-scrollbar {\n    display: none;\n}\n";Ni(Ei),ki.render=Yi;var Wi={name:"TabPanel",props:{header:null,headerStyle:null,headerClass:null,headerProps:null,headerActionProps:null,contentStyle:null,contentClass:null,contentProps:null,disabled:Boolean}};function Ri(e,t,i,n,s,l){return(0,a.WI)(e.$slots,"default")}Wi.render=Ri;var zi=i(5517),Hi={name:"ProgressBar",props:{value:{type:Number,default:null},mode:{type:String,default:"determinate"},showValue:{type:Boolean,default:!0}},computed:{containerClass(){return["p-progressbar p-component",{"p-progressbar-determinate":this.determinate,"p-progressbar-indeterminate":this.indeterminate}]},progressStyle(){return{width:this.value+"%",display:"flex"}},indeterminate(){return"indeterminate"===this.mode},determinate(){return"determinate"===this.mode}}};const Vi=["aria-valuenow"],$i={key:0,class:"p-progressbar-label"},qi={key:1,class:"p-progressbar-indeterminate-container"},ji=(0,a._)("div",{class:"p-progressbar-value p-progressbar-value-animate"},null,-1),Qi=[ji];function Zi(e,t,i,s,l,o){return(0,a.wg)(),(0,a.iD)("div",{role:"progressbar",class:(0,n.C_)(o.containerClass),"aria-valuemin":"0","aria-valuenow":i.value,"aria-valuemax":"100"},[o.determinate?((0,a.wg)(),(0,a.iD)("div",{key:0,class:"p-progressbar-value p-progressbar-value-animate",style:(0,n.j5)(o.progressStyle)},[null!=i.value&&0!==i.value&&i.showValue?((0,a.wg)(),(0,a.iD)("div",$i,[(0,a.WI)(e.$slots,"default",{},(()=>[(0,a.Uk)((0,n.zw)(i.value+"%"),1)]))])):(0,a.kq)("",!0)],4)):(0,a.kq)("",!0),o.indeterminate?((0,a.wg)(),(0,a.iD)("div",qi,Qi)):(0,a.kq)("",!0)],10,Vi)}function Ji(e,t){void 0===t&&(t={});var i=t.insertAt;if(e&&"undefined"!==typeof document){var a=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css","top"===i&&a.firstChild?a.insertBefore(n,a.firstChild):a.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}}var Gi="\n.p-progressbar {\n    position: relative;\n    overflow: hidden;\n}\n.p-progressbar-determinate .p-progressbar-value {\n    height: 100%;\n    width: 0%;\n    position: absolute;\n    display: none;\n    border: 0 none;\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-align: center;\n        -ms-flex-align: center;\n            align-items: center;\n    -webkit-box-pack: center;\n        -ms-flex-pack: center;\n            justify-content: center;\n    overflow: hidden;\n}\n.p-progressbar-determinate .p-progressbar-label {\n    display: -webkit-inline-box;\n    display: -ms-inline-flexbox;\n    display: inline-flex;\n}\n.p-progressbar-determinate .p-progressbar-value-animate {\n    -webkit-transition: width 1s ease-in-out;\n    transition: width 1s ease-in-out;\n}\n.p-progressbar-indeterminate .p-progressbar-value::before {\n    content: '';\n    position: absolute;\n    background-color: inherit;\n    top: 0;\n    left: 0;\n    bottom: 0;\n    will-change: left, right;\n    -webkit-animation: p-progressbar-indeterminate-anim 2.1s cubic-bezier(0.65, 0.815, 0.735, 0.395) infinite;\n    animation: p-progressbar-indeterminate-anim 2.1s cubic-bezier(0.65, 0.815, 0.735, 0.395) infinite;\n}\n.p-progressbar-indeterminate .p-progressbar-value::after {\n    content: '';\n    position: absolute;\n    background-color: inherit;\n    top: 0;\n    left: 0;\n    bottom: 0;\n    will-change: left, right;\n    -webkit-animation: p-progressbar-indeterminate-anim-short 2.1s cubic-bezier(0.165, 0.84, 0.44, 1) infinite;\n    animation: p-progressbar-indeterminate-anim-short 2.1s cubic-bezier(0.165, 0.84, 0.44, 1) infinite;\n    -webkit-animation-delay: 1.15s;\n    animation-delay: 1.15s;\n}\n@-webkit-keyframes p-progressbar-indeterminate-anim {\n0% {\n        left: -35%;\n        right: 100%;\n}\n60% {\n        left: 100%;\n        right: -90%;\n}\n100% {\n        left: 100%;\n        right: -90%;\n}\n}\n@keyframes p-progressbar-indeterminate-anim {\n0% {\n        left: -35%;\n        right: 100%;\n}\n60% {\n        left: 100%;\n        right: -90%;\n}\n100% {\n        left: 100%;\n        right: -90%;\n}\n}\n@-webkit-keyframes p-progressbar-indeterminate-anim-short {\n0% {\n        left: -200%;\n        right: 100%;\n}\n60% {\n        left: 107%;\n        right: -8%;\n}\n100% {\n        left: 107%;\n        right: -8%;\n}\n}\n@keyframes p-progressbar-indeterminate-anim-short {\n0% {\n        left: -200%;\n        right: 100%;\n}\n60% {\n        left: 107%;\n        right: -8%;\n}\n100% {\n        left: 107%;\n        right: -8%;\n}\n}\n";Ji(Gi),Hi.render=Zi;var Xi={name:"Message",emits:["close"],props:{severity:{type:String,default:"info"},closable:{type:Boolean,default:!0},sticky:{type:Boolean,default:!0},life:{type:Number,default:3e3},icon:{type:String,default:null}},timeout:null,data(){return{visible:!0}},mounted(){this.sticky||setTimeout((()=>{this.visible=!1}),this.life)},methods:{close(e){this.visible=!1,this.$emit("close",e)}},computed:{containerClass(){return"p-message p-component p-message-"+this.severity},iconClass(){return["p-message-icon pi",this.icon?this.icon:{"pi-info-circle":"info"===this.severity,"pi-check":"success"===this.severity,"pi-exclamation-triangle":"warn"===this.severity,"pi-times-circle":"error"===this.severity}]}},directives:{ripple:Di.Z}};const ea={class:"p-message-wrapper"},ta={class:"p-message-text"},ia=(0,a._)("i",{class:"p-message-close-icon pi pi-times"},null,-1),aa=[ia];function na(e,t,i,l,o,d){const r=(0,a.Q2)("ripple");return(0,a.wg)(),(0,a.j4)(s.uT,{name:"p-message",appear:""},{default:(0,a.w5)((()=>[(0,a.wy)((0,a._)("div",{class:(0,n.C_)(d.containerClass),role:"alert"},[(0,a._)("div",ea,[(0,a._)("span",{class:(0,n.C_)(d.iconClass)},null,2),(0,a._)("div",ta,[(0,a.WI)(e.$slots,"default")]),i.closable?(0,a.wy)(((0,a.wg)(),(0,a.iD)("button",{key:0,class:"p-message-close p-link",onClick:t[0]||(t[0]=e=>d.close(e)),type:"button"},aa)),[[r]]):(0,a.kq)("",!0)])],2),[[s.F8,o.visible]])])),_:3})}function sa(e,t){void 0===t&&(t={});var i=t.insertAt;if(e&&"undefined"!==typeof document){var a=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css","top"===i&&a.firstChild?a.insertBefore(n,a.firstChild):a.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}}var la="\n.p-message-wrapper {\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-align: center;\n        -ms-flex-align: center;\n            align-items: center;\n}\n.p-message-close {\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-align: center;\n        -ms-flex-align: center;\n            align-items: center;\n    -webkit-box-pack: center;\n        -ms-flex-pack: center;\n            justify-content: center;\n}\n.p-message-close.p-link {\n    margin-left: auto;\n    overflow: hidden;\n    position: relative;\n}\n.p-message-enter-from {\n    opacity: 0;\n}\n.p-message-enter-active {\n    -webkit-transition: opacity 0.3s;\n    transition: opacity 0.3s;\n}\n.p-message.p-message-leave-from {\n    max-height: 1000px;\n}\n.p-message.p-message-leave-to {\n    max-height: 0;\n    opacity: 0;\n    margin: 0 !important;\n}\n.p-message-leave-active {\n    overflow: hidden;\n    -webkit-transition: max-height 0.3s cubic-bezier(0, 1, 0, 1), opacity 0.3s, margin 0.15s;\n    transition: max-height 0.3s cubic-bezier(0, 1, 0, 1), opacity 0.3s, margin 0.15s;\n}\n.p-message-leave-active .p-message-close {\n    display: none;\n}\n";sa(la),Xi.render=na;var oa={name:"FileUpload",emits:["select","uploader","before-upload","progress","upload","error","before-send","clear","remove"],props:{name:{type:String,default:null},url:{type:String,default:null},mode:{type:String,default:"advanced"},multiple:{type:Boolean,default:!1},accept:{type:String,default:null},disabled:{type:Boolean,default:!1},auto:{type:Boolean,default:!1},maxFileSize:{type:Number,default:null},invalidFileSizeMessage:{type:String,default:"{0}: Invalid file size, file size should be smaller than {1}."},invalidFileTypeMessage:{type:String,default:"{0}: Invalid file type, allowed file types: {1}."},fileLimit:{type:Number,default:null},invalidFileLimitMessage:{type:String,default:"Maximum number of files exceeded, limit is {0} at most."},withCredentials:{type:Boolean,default:!1},previewWidth:{type:Number,default:50},chooseLabel:{type:String,default:null},uploadLabel:{type:String,default:null},cancelLabel:{type:String,default:null},customUpload:{type:Boolean,default:!1},showUploadButton:{type:Boolean,default:!0},showCancelButton:{type:Boolean,default:!0},chooseIcon:{type:String,default:"pi pi-plus"},uploadIcon:{type:String,default:"pi pi-upload"},cancelIcon:{type:String,default:"pi pi-times"},style:null,class:null},duplicateIEEvent:!1,data(){return{uploadedFileCount:0,files:[],messages:[],focused:!1,progress:null}},methods:{onFileSelect(e){if("drop"!==e.type&&this.isIE11()&&this.duplicateIEEvent)return void(this.duplicateIEEvent=!1);this.messages=[],this.files=this.files||[];let t=e.dataTransfer?e.dataTransfer.files:e.target.files;for(let i of t)this.isFileSelected(i)||this.validate(i)&&(this.isImage(i)&&(i.objectURL=window.URL.createObjectURL(i)),this.files.push(i));this.$emit("select",{originalEvent:e,files:this.files}),this.fileLimit&&this.checkFileLimit(),this.auto&&this.hasFiles&&!this.isFileLimitExceeded()&&this.upload(),"drop"!==e.type&&this.isIE11()?this.clearIEInput():this.clearInputElement()},choose(){this.$refs.fileInput.click()},upload(){if(this.customUpload)this.fileLimit&&(this.uploadedFileCount+=this.files.length),this.$emit("uploader",{files:this.files}),this.clear();else{let e=new XMLHttpRequest,t=new FormData;this.$emit("before-upload",{xhr:e,formData:t});for(let i of this.files)t.append(this.name,i,i.name);e.upload.addEventListener("progress",(e=>{e.lengthComputable&&(this.progress=Math.round(100*e.loaded/e.total)),this.$emit("progress",{originalEvent:e,progress:this.progress})})),e.onreadystatechange=()=>{4===e.readyState&&(this.progress=0,e.status>=200&&e.status<300?(this.fileLimit&&(this.uploadedFileCount+=this.files.length),this.$emit("upload",{xhr:e,files:this.files})):this.$emit("error",{xhr:e,files:this.files}),this.clear())},e.open("POST",this.url,!0),this.$emit("before-send",{xhr:e,formData:t}),e.withCredentials=this.withCredentials,e.send(t)}},clear(){this.files=[],this.messages=null,this.$emit("clear"),this.isAdvanced&&this.clearInputElement()},onFocus(){this.focused=!0},onBlur(){this.focused=!1},isFileSelected(e){if(this.files&&this.files.length)for(let t of this.files)if(t.name+t.type+t.size===e.name+e.type+e.size)return!0;return!1},isIE11(){return!!window["MSInputMethodContext"]&&!!document["documentMode"]},validate(e){return this.accept&&!this.isFileTypeValid(e)?(this.messages.push(this.invalidFileTypeMessage.replace("{0}",e.name).replace("{1}",this.accept)),!1):!(this.maxFileSize&&e.size>this.maxFileSize)||(this.messages.push(this.invalidFileSizeMessage.replace("{0}",e.name).replace("{1}",this.formatSize(this.maxFileSize))),!1)},isFileTypeValid(e){let t=this.accept.split(",").map((e=>e.trim()));for(let i of t){let t=this.isWildcard(i)?this.getTypeClass(e.type)===this.getTypeClass(i):e.type==i||this.getFileExtension(e).toLowerCase()===i.toLowerCase();if(t)return!0}return!1},getTypeClass(e){return e.substring(0,e.indexOf("/"))},isWildcard(e){return-1!==e.indexOf("*")},getFileExtension(e){return"."+e.name.split(".").pop()},isImage(e){return/^image\//.test(e.type)},onDragEnter(e){this.disabled||(e.stopPropagation(),e.preventDefault())},onDragOver(e){this.disabled||(Si.p7.addClass(this.$refs.content,"p-fileupload-highlight"),e.stopPropagation(),e.preventDefault())},onDragLeave(){this.disabled||Si.p7.removeClass(this.$refs.content,"p-fileupload-highlight")},onDrop(e){if(!this.disabled){Si.p7.removeClass(this.$refs.content,"p-fileupload-highlight"),e.stopPropagation(),e.preventDefault();const t=e.dataTransfer?e.dataTransfer.files:e.target.files,i=this.multiple||t&&1===t.length;i&&this.onFileSelect(e)}},onBasicUploaderClick(){this.hasFiles?this.upload():this.$refs.fileInput.click()},remove(e){this.clearInputElement();let t=this.files.splice(e,1)[0];this.files=[...this.files],this.$emit("remove",{file:t,files:this.files})},clearInputElement(){this.$refs.fileInput.value=""},clearIEInput(){this.$refs.fileInput&&(this.duplicateIEEvent=!0,this.$refs.fileInput.value="")},formatSize(e){if(0===e)return"0 B";let t=1e3,i=3,a=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],n=Math.floor(Math.log(e)/Math.log(t));return parseFloat((e/Math.pow(t,n)).toFixed(i))+" "+a[n]},isFileLimitExceeded(){return this.fileLimit&&this.fileLimit<=this.files.length+this.uploadedFileCount&&this.focused&&(this.focused=!1),this.fileLimit&&this.fileLimit<this.files.length+this.uploadedFileCount},checkFileLimit(){this.isFileLimitExceeded()&&this.messages.push(this.invalidFileLimitMessage.replace("{0}",this.fileLimit.toString()))},onMessageClose(){this.messages=null}},computed:{isAdvanced(){return"advanced"===this.mode},isBasic(){return"basic"===this.mode},advancedChooseButtonClass(){return["p-button p-component p-fileupload-choose",this.class,{"p-disabled":this.disabled,"p-focus":this.focused}]},basicChooseButtonClass(){return["p-button p-component p-fileupload-choose",this.class,{"p-fileupload-choose-selected":this.hasFiles,"p-disabled":this.disabled,"p-focus":this.focused}]},advancedChooseIconClass(){return["p-button-icon p-button-icon-left pi-fw",this.chooseIcon]},basicChooseButtonIconClass(){return["p-button-icon p-button-icon-left",!this.hasFiles||this.auto?this.uploadIcon:this.chooseIcon]},basicChooseButtonLabel(){return this.auto?this.chooseButtonLabel:this.hasFiles?this.files.map((e=>e.name)).join(", "):this.chooseButtonLabel},hasFiles(){return this.files&&this.files.length>0},chooseDisabled(){return this.disabled||this.fileLimit&&this.fileLimit<=this.files.length+this.uploadedFileCount},uploadDisabled(){return this.disabled||!this.hasFiles||this.fileLimit&&this.fileLimit<this.files.length},cancelDisabled(){return this.disabled||!this.hasFiles},chooseButtonLabel(){return this.chooseLabel||this.$primevue.config.locale.choose},uploadButtonLabel(){return this.uploadLabel||this.$primevue.config.locale.upload},cancelButtonLabel(){return this.cancelLabel||this.$primevue.config.locale.cancel}},components:{FileUploadButton:vi.Z,FileUploadProgressBar:Hi,FileUploadMessage:Xi},directives:{ripple:Di.Z}};const da={key:0,class:"p-fileupload p-fileupload-advanced p-component"},ra={class:"p-fileupload-buttonbar"},ca=["multiple","accept","disabled"],pa={class:"p-button-label"},ha={key:1,class:"p-fileupload-files"},ua=["alt","src","width"],ga={class:"p-fileupload-filename"},ma={key:2,class:"p-fileupload-empty"},fa={key:1,class:"p-fileupload p-fileupload-basic p-component"},va={class:"p-button-label"},wa=["accept","disabled","multiple"];function ba(e,t,i,l,o,d){const r=(0,a.up)("FileUploadButton"),c=(0,a.up)("FileUploadProgressBar"),p=(0,a.up)("FileUploadMessage"),h=(0,a.Q2)("ripple");return d.isAdvanced?((0,a.wg)(),(0,a.iD)("div",da,[(0,a._)("div",ra,[(0,a.wy)(((0,a.wg)(),(0,a.iD)("span",{class:(0,n.C_)(d.advancedChooseButtonClass),style:(0,n.j5)(i.style),onClick:t[1]||(t[1]=(...e)=>d.choose&&d.choose(...e)),onKeydown:t[2]||(t[2]=(0,s.D2)(((...e)=>d.choose&&d.choose(...e)),["enter"])),onFocus:t[3]||(t[3]=(...e)=>d.onFocus&&d.onFocus(...e)),onBlur:t[4]||(t[4]=(...e)=>d.onBlur&&d.onBlur(...e)),tabindex:"0"},[(0,a._)("input",{ref:"fileInput",type:"file",onChange:t[0]||(t[0]=(...e)=>d.onFileSelect&&d.onFileSelect(...e)),multiple:i.multiple,accept:i.accept,disabled:d.chooseDisabled},null,40,ca),(0,a._)("span",{class:(0,n.C_)(d.advancedChooseIconClass)},null,2),(0,a._)("span",pa,(0,n.zw)(d.chooseButtonLabel),1)],38)),[[h]]),i.showUploadButton?((0,a.wg)(),(0,a.j4)(r,{key:0,label:d.uploadButtonLabel,icon:i.uploadIcon,onClick:d.upload,disabled:d.uploadDisabled},null,8,["label","icon","onClick","disabled"])):(0,a.kq)("",!0),i.showCancelButton?((0,a.wg)(),(0,a.j4)(r,{key:1,label:d.cancelButtonLabel,icon:i.cancelIcon,onClick:d.clear,disabled:d.cancelDisabled},null,8,["label","icon","onClick","disabled"])):(0,a.kq)("",!0)]),(0,a._)("div",{ref:"content",class:"p-fileupload-content",onDragenter:t[5]||(t[5]=(...e)=>d.onDragEnter&&d.onDragEnter(...e)),onDragover:t[6]||(t[6]=(...e)=>d.onDragOver&&d.onDragOver(...e)),onDragleave:t[7]||(t[7]=(...e)=>d.onDragLeave&&d.onDragLeave(...e)),onDrop:t[8]||(t[8]=(...e)=>d.onDrop&&d.onDrop(...e))},[d.hasFiles?((0,a.wg)(),(0,a.j4)(c,{key:0,value:o.progress},null,8,["value"])):(0,a.kq)("",!0),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.messages,(e=>((0,a.wg)(),(0,a.j4)(p,{key:e,severity:"error",onClose:d.onMessageClose},{default:(0,a.w5)((()=>[(0,a.Uk)((0,n.zw)(e),1)])),_:2},1032,["onClose"])))),128)),d.hasFiles?((0,a.wg)(),(0,a.iD)("div",ha,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.files,((e,t)=>((0,a.wg)(),(0,a.iD)("div",{key:e.name+e.type+e.size,class:"p-fileupload-row"},[(0,a._)("div",null,[d.isImage(e)?((0,a.wg)(),(0,a.iD)("img",{key:0,role:"presentation",alt:e.name,src:e.objectURL,width:i.previewWidth},null,8,ua)):(0,a.kq)("",!0)]),(0,a._)("div",ga,(0,n.zw)(e.name),1),(0,a._)("div",null,(0,n.zw)(d.formatSize(e.size)),1),(0,a._)("div",null,[(0,a.Wm)(r,{type:"button",icon:"pi pi-times",onClick:e=>d.remove(t)},null,8,["onClick"])])])))),128))])):(0,a.kq)("",!0),e.$slots.empty&&!d.hasFiles?((0,a.wg)(),(0,a.iD)("div",ma,[(0,a.WI)(e.$slots,"empty")])):(0,a.kq)("",!0)],544)])):d.isBasic?((0,a.wg)(),(0,a.iD)("div",fa,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.messages,(e=>((0,a.wg)(),(0,a.j4)(p,{key:e,severity:"error",onClose:d.onMessageClose},{default:(0,a.w5)((()=>[(0,a.Uk)((0,n.zw)(e),1)])),_:2},1032,["onClose"])))),128)),(0,a.wy)(((0,a.wg)(),(0,a.iD)("span",{class:(0,n.C_)(d.basicChooseButtonClass),style:(0,n.j5)(i.style),onMouseup:t[12]||(t[12]=(...e)=>d.onBasicUploaderClick&&d.onBasicUploaderClick(...e)),onKeydown:t[13]||(t[13]=(0,s.D2)(((...e)=>d.choose&&d.choose(...e)),["enter"])),onFocus:t[14]||(t[14]=(...e)=>d.onFocus&&d.onFocus(...e)),onBlur:t[15]||(t[15]=(...e)=>d.onBlur&&d.onBlur(...e)),tabindex:"0"},[(0,a._)("span",{class:(0,n.C_)(d.basicChooseButtonIconClass)},null,2),(0,a._)("span",va,(0,n.zw)(d.basicChooseButtonLabel),1),d.hasFiles?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("input",{key:0,ref:"fileInput",type:"file",accept:i.accept,disabled:i.disabled,multiple:i.multiple,onChange:t[9]||(t[9]=(...e)=>d.onFileSelect&&d.onFileSelect(...e)),onFocus:t[10]||(t[10]=(...e)=>d.onFocus&&d.onFocus(...e)),onBlur:t[11]||(t[11]=(...e)=>d.onBlur&&d.onBlur(...e))},null,40,wa))],38)),[[h]])])):(0,a.kq)("",!0)}function ya(e,t){void 0===t&&(t={});var i=t.insertAt;if(e&&"undefined"!==typeof document){var a=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css","top"===i&&a.firstChild?a.insertBefore(n,a.firstChild):a.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}}var Sa="\n.p-fileupload-content {\n    position: relative;\n}\n.p-fileupload-row {\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-align: center;\n        -ms-flex-align: center;\n            align-items: center;\n}\n.p-fileupload-row > div {\n    -webkit-box-flex: 1;\n        -ms-flex: 1 1 auto;\n            flex: 1 1 auto;\n    width: 25%;\n}\n.p-fileupload-row > div:last-child {\n    text-align: right;\n}\n.p-fileupload-content .p-progressbar {\n    width: 100%;\n    position: absolute;\n    top: 0;\n    left: 0;\n}\n.p-button.p-fileupload-choose {\n    position: relative;\n    overflow: hidden;\n}\n.p-button.p-fileupload-choose input[type='file'] {\n    display: none;\n}\n.p-fileupload-choose.p-fileupload-choose-selected input[type='file'] {\n    display: none;\n}\n.p-fileupload-filename {\n    word-break: break-all;\n}\n.p-fluid .p-fileupload .p-button {\n    width: auto;\n}\n";ya(Sa),oa.render=ba;var Da={name:"Timeline",props:{value:null,align:{mode:String,default:"left"},layout:{mode:String,default:"vertical"},dataKey:null},methods:{getKey(e,t){return this.dataKey?Si.gb.resolveFieldData(e,this.dataKey):t}},computed:{containerClass(){return["p-timeline p-component","p-timeline-"+this.align,"p-timeline-"+this.layout]}}};const ka={class:"p-timeline-event-opposite"},xa={class:"p-timeline-event-separator"},Ca=(0,a._)("div",{class:"p-timeline-event-marker"},null,-1),Ia=(0,a._)("div",{class:"p-timeline-event-connector"},null,-1),_a={class:"p-timeline-event-content"};function Ta(e,t,i,s,l,o){return(0,a.wg)(),(0,a.iD)("div",{class:(0,n.C_)(o.containerClass)},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(i.value,((t,n)=>((0,a.wg)(),(0,a.iD)("div",{key:o.getKey(t,n),class:"p-timeline-event"},[(0,a._)("div",ka,[(0,a.WI)(e.$slots,"opposite",{item:t,index:n})]),(0,a._)("div",xa,[(0,a.WI)(e.$slots,"marker",{item:t,index:n},(()=>[Ca])),n!==i.value.length-1?(0,a.WI)(e.$slots,"connector",{key:0,item:t,index:n},(()=>[Ia])):(0,a.kq)("",!0)]),(0,a._)("div",_a,[(0,a.WI)(e.$slots,"content",{item:t,index:n})])])))),128))],2)}function Ma(e,t){void 0===t&&(t={});var i=t.insertAt;if(e&&"undefined"!==typeof document){var a=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css","top"===i&&a.firstChild?a.insertBefore(n,a.firstChild):a.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}}var Fa="\n.p-timeline {\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-flex: 1;\n        -ms-flex-positive: 1;\n            flex-grow: 1;\n    -webkit-box-orient: vertical;\n    -webkit-box-direction: normal;\n        -ms-flex-direction: column;\n            flex-direction: column;\n}\n.p-timeline-left .p-timeline-event-opposite {\n    text-align: right;\n}\n.p-timeline-left .p-timeline-event-content {\n    text-align: left;\n}\n.p-timeline-right .p-timeline-event {\n    -webkit-box-orient: horizontal;\n    -webkit-box-direction: reverse;\n        -ms-flex-direction: row-reverse;\n            flex-direction: row-reverse;\n}\n.p-timeline-right .p-timeline-event-opposite {\n    text-align: left;\n}\n.p-timeline-right .p-timeline-event-content {\n    text-align: right;\n}\n.p-timeline-vertical.p-timeline-alternate .p-timeline-event:nth-child(even) {\n    -webkit-box-orient: horizontal;\n    -webkit-box-direction: reverse;\n        -ms-flex-direction: row-reverse;\n            flex-direction: row-reverse;\n}\n.p-timeline-vertical.p-timeline-alternate .p-timeline-event:nth-child(odd) .p-timeline-event-opposite {\n    text-align: right;\n}\n.p-timeline-vertical.p-timeline-alternate .p-timeline-event:nth-child(odd) .p-timeline-event-content {\n    text-align: left;\n}\n.p-timeline-vertical.p-timeline-alternate .p-timeline-event:nth-child(even) .p-timeline-event-opposite {\n    text-align: left;\n}\n.p-timeline-vertical.p-timeline-alternate .p-timeline-event:nth-child(even) .p-timeline-event-content {\n    text-align: right;\n}\n.p-timeline-event {\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    position: relative;\n    min-height: 70px;\n}\n.p-timeline-event:last-child {\n    min-height: 0;\n}\n.p-timeline-event-opposite {\n    -webkit-box-flex: 1;\n        -ms-flex: 1;\n            flex: 1;\n    padding: 0 1rem;\n}\n.p-timeline-event-content {\n    -webkit-box-flex: 1;\n        -ms-flex: 1;\n            flex: 1;\n    padding: 0 1rem;\n}\n.p-timeline-event-separator {\n    -webkit-box-flex: 0;\n        -ms-flex: 0;\n            flex: 0;\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-align: center;\n        -ms-flex-align: center;\n            align-items: center;\n    -webkit-box-orient: vertical;\n    -webkit-box-direction: normal;\n        -ms-flex-direction: column;\n            flex-direction: column;\n}\n.p-timeline-event-marker {\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -ms-flex-item-align: baseline;\n        align-self: baseline;\n}\n.p-timeline-event-connector {\n    -webkit-box-flex: 1;\n        -ms-flex-positive: 1;\n            flex-grow: 1;\n}\n.p-timeline-horizontal {\n    -webkit-box-orient: horizontal;\n    -webkit-box-direction: normal;\n        -ms-flex-direction: row;\n            flex-direction: row;\n}\n.p-timeline-horizontal .p-timeline-event {\n    -webkit-box-orient: vertical;\n    -webkit-box-direction: normal;\n        -ms-flex-direction: column;\n            flex-direction: column;\n    -webkit-box-flex: 1;\n        -ms-flex: 1;\n            flex: 1;\n}\n.p-timeline-horizontal .p-timeline-event:last-child {\n    -webkit-box-flex: 0;\n        -ms-flex: 0;\n            flex: 0;\n}\n.p-timeline-horizontal .p-timeline-event-separator {\n    -webkit-box-orient: horizontal;\n    -webkit-box-direction: normal;\n        -ms-flex-direction: row;\n            flex-direction: row;\n}\n.p-timeline-horizontal .p-timeline-event-connector {\n    width: 100%;\n}\n.p-timeline-bottom .p-timeline-event {\n    -webkit-box-orient: vertical;\n    -webkit-box-direction: reverse;\n        -ms-flex-direction: column-reverse;\n            flex-direction: column-reverse;\n}\n.p-timeline-horizontal.p-timeline-alternate .p-timeline-event:nth-child(even) {\n    -webkit-box-orient: vertical;\n    -webkit-box-direction: reverse;\n        -ms-flex-direction: column-reverse;\n            flex-direction: column-reverse;\n}\n";Ma(Fa),Da.render=Ta;var Pa=i(6265),Ba=i.n(Pa),Aa=i(7387),Ua=i.n(Aa),La=i(2724),Ka=i(6797),Oa=i.n(Ka),Ya={props:["systemId"],components:{InputText:fi.Z,Button:vi.Z,DataTable:gi.Z,Column:mi.Z,Calendar:wi.Z,Dialog:bi.Z,TabView:ki,TabPanel:Wi,InlineMessage:yi.Z,Timeline:Da,Dropdown:zi.Z,FileUpload:oa},emits:["extend-session","showSearchbar"],data(){return{ProjectRef:"61196AD9FF1A440A9267D3044E8B595E",showTable:!0,first:0,snagsPage:1,pageSize:100,totalRecords:0,rowsPerPageOptions:[25,50,100,250,500],searchQuery:"",captionFilter:"",codeFilter:"",statusFilter:"",worksPackageFilter:"",snagDetails:[],snagDetailsData:[],events:[{status:"created",date:"2024-02-01",createdBy:"Ryan Bradley",icon:"pi pi-cog",color:"blue",notes:""},{status:"Uploaded image",date:"2024-02-02",createdBy:"Ryan Bradley",icon:"pi pi-image",color:"lightblue",notes:""},{status:"Edited",date:"2024-02-02",createdBy:"Noel Mullen",icon:"pi pi-pencil",color:"lightblue",notes:"Changed title"},{status:"Accepted",date:"2024-02-02",createdBy:"Noel Mullen",icon:"pi pi-check",color:"green",notes:"All looks ok"},{status:"Closed",date:"2024-02-02",createdBy:"Noel Mullen",icon:"pi pi-star",color:"lightgreen",notes:""},{status:"Reopened",date:"2024-02-02",createdBy:"Ryan Bradley",icon:"pi pi-refresh",color:"blue",notes:"It needs to be reopened"},{status:"Accepted",date:"2024-02-02",createdBy:"Noel Mullen",icon:"pi pi-check",color:"green",notes:"All looks ok"},{status:"Closed",date:"2024-02-02",createdBy:"Evan Blake",icon:"pi pi-star",color:"lightgreen"}],howManyTrips:"",AllPageMarked:!1,AllMarked:!1,sendMultipleInvoiceDialog:!1,showInvoiceSelectedButton:!1,selectedIDsForInvoicing:[],checkedIDs:[],invoiceDate:"",invoiceDateOK:!0,sendInvoiceDialog:!1,displayUnInvoiceConfirm:!1,dataTable:"dataTable",downloadedReport:"",binaryfile:"",photoIdForDelete:"",displayDeletePhotoConfirm:!1,uploadFIlename:"",displayUploadModal:!1,allStatuses:[],ClickedRowId:"",tableHeight:"calc( 100vh - 215px)",displayDeleteConfirm:!1,deletingTripName:"",newSnagDialog:!1,editSnagDialog:!1,isLoading:!0,userType:"",userLocale:"",loading1:!0,loading2:!0,filters1:null,visibleImagesModal:!1,snagImages:[],picturesTabShow:!1,activeTab:0,SnagDate:"",tripUserEmail:"",tripFrom:"",tripTo:"",tripFixedCosts:"",tripCargoName:"",tripDistance:"",tripDistanceCosts:"",tripVatPercentage:"",tripSum:"",tripSumVAT:"",tripCompanyName:"",tripComments:"",tripCreated:"",tripUserFullName:"",openedcargoname:"",displayInfoDialog:!1,InfoModalHeader:"",InfoModalMessage:"",newSnagDate:"",newSnagFrom:"",newSnagTo:"",newSnagTitle:"",newSnagCode:"",newSnagStatus:"0",newSnagStatusCosts:"0",newSnagCompanyName:"",newSnagComments:"",newSnagDateOK:!0,newSnagFromOK:!0,newSnagToOK:!0,newSnagTitleOK:!0,newSnagCodeOK:!0,newSnagStatusOK:!0,newSnagStatusCostsOK:!0,newSnagCompanyNameOK:!0,newSnagCommentsOK:!0,editSnagDate:"",editSnagTitle:"",editSnagCode:"",editSnagCargoName:"",editSnagFixedCosts:"0",editSnagDistance:"0",editSnagDistanceCosts:"0",editSnagStatus:"",editSnagComments:"",editSnagDateOK:!0,editSnagTitleOK:!0,editSnagCodeOK:!0,editSnagCargoNameOK:!0,editSnagFixedCostsOK:!0,editSnagDistanceOK:!0,editSnagDistanceCostsOK:!0,editSnagStatusOK:!0,editSnagCommentsOK:!0,editSnagInvoiced:"",panelClass:"closedPanel",filters:{global:{value:null,matchMode:La.a6.CONTAINS},code:{value:null,matchMode:La.a6.EQUALS},caption:{value:null,matchMode:La.a6.EQUALS},status:{value:null,matchMode:La.a6.EQUALS},createdBy:{value:null,matchMode:La.a6.EQUALS},area:{value:null,matchMode:La.a6.EQUALS},worksPackage:{value:null,matchMode:La.a6.EQUALS},closedBy:{value:null,matchMode:La.a6.EQUALS},assignedTo:{value:null,matchMode:La.a6.EQUALS}},matchModes:[{label:"Starts With",value:La.a6.STARTS_WITH},{label:"Contains",value:La.a6.CONTAINS}],allSnags:[],fromDate:"",toDate:""}},methods:{selectingForInvoice(e){if(this.checkedIDs[e]){const t=this.selectedIDsForInvoicing.indexOf(e);this.selectedIDsForInvoicing.splice(t,1)}else this.selectedIDsForInvoicing.push(e);this.selectedIDsForInvoicing.length>0?this.showInvoiceSelectedButton=!0:(this.showInvoiceSelectedButton=!1,this.AllPageMarked=!1)},invoiceSelected(){this.invoiceDate=Oa()().format("DD/MM/YYYY HH:mm"),this.sendMultipleInvoiceDialog=!0},reorganizePagination(){Ua()(".p-paginator-current").detach().appendTo(".p-paginator-left-content"),Ua()(".p-paginator-rpp-options").detach().appendTo(".p-paginator-right-content")},moveSearchBoxToTop(){Ua()("#hereMoveSearch").empty(),Ua()("#searchBox").detach().appendTo("#hereMoveSearch")},newSnag(){this.resetInputFields(),this.newSnagDate=this.format_date(Oa()(),"DD/MM/YYYY"),this.newSnagDialog=!0},editSnag(){var e=!0;""==this.editSnagDate?(this.editSnagDateOK=!1,e=!1):this.editSnagDateOK=!0,""==this.editSnagTitle?(this.editSnagTitleOK=!1,e=!1):this.editSnagTitleOK=!0,""==this.editSnagCode?(this.editSnagCodeOK=!1,e=!1):this.editSnagCodeOK=!0,this.editSnagStatus.name&&(this.editSnagStatus=this.editSnagStatus.value),""==this.editSnagStatus?(this.editSnagStatusOK=!1,e=!1):this.editSnagStatusOK=!0,1==e&&this.editSnagInDatabase()},async editSnagInDatabase(){this.panelClass="closedPanel",this.isLoading=!0;var e=this.format_date(Oa()(this.editSnagDate,"DD/MM/YYYY HH:mm"),"YYYY-MM-DD HH:mm:ss");const t=this.$store.getters.token,i=this._rootRestUrl;let a=JSON.stringify({key:this.ClickedRowId,sessionId:t,caption:this.editSnagTitle,code:this.editSnagCode,status:this.editSnagStatus,userEmail:"",date:e}),n={headers:{"Content-Type":"application/json"}};try{await Ba().put(i+"/api/Snags/EditSnag",a,n).then((()=>{this.getSnags(),this.getCompanies(),this.editSnagDialog=!1,this.displayInfoDialog=!0,this.InfoModalHeader="Info",this.InfoModalMessage="Changes are saved",this.isLoading=!1}))}catch(s){this.editSnagDialog=!1,this.displayInfoDialog=!0,this.InfoModalHeader="Error "+s.response.status,this.InfoModalMessage=s.response.data.Message,this.isLoading=!1}this.extendTime()},saveSnag(){var e=!0;""==this.newSnagDate?(this.newSnagDateOK=!1,e=!1):this.newSnagDateOK=!0,""==this.newSnagTitle?(this.newSnagTitleOK=!1,e=!1):this.newSnagTitleOK=!0,null==this.newSnagCode?(this.newSnagCodeOK=!1,e=!1):this.newSnagCodeOK=!0,void 0==this.newSnagStatus||""==this.newSnagStatus?(this.newSnagStatus="",e=!1,this.newSnagStatusOK=!1):(this.newSnagStatus=this.newSnagStatus.value,""==this.newSnagStatus?(this.newSnagStatusOK=!1,e=!1):this.newSnagStatusOK=!0),void 0==this.newSnagStatus&&(this.newSnagStatus="",e=!1,this.newSnagStatusOK=!1),1==e&&this.InsertSnagToDatabase()},async InsertSnagToDatabase(){this.panelClass="closedPanel",this.isLoading=!0;var e=this.format_date(Oa()(this.newSnagDate,"DD/MM/YYYY HH:mm"),"YYYY-MM-DD HH:mm:ss");const t=this._rootRestUrl;let i=JSON.stringify({ProjectRef:this.ProjectRef,type:"Snag",key:"",code:this.newSnagCode,caption:this.newSnagTitle,status:this.newSnagStatus,date:e}),a={headers:{"Content-Type":"application/json"}};try{await Ba().post(t+"/api/Snags/InsertSnag",i,a).then((()=>{this.getSnags(),this.getCompanies(),this.newSnagDialog=!1,this.displayInfoDialog=!0,this.InfoModalHeader="Info",this.InfoModalMessage="Snag is inserted",this.isLoading=!1}))}catch(n){401==n.response.status&&(alert("Your session is expired! Please login"),localStorage.clear()),this.newSnagDialog=!1,this.displayInfoDialog=!0,this.InfoModalHeader="Error "+n.response.status,this.InfoModalMessage=n.response.data.Message,this.isLoading=!1}this.extendTime()},closeInfo(){this.displayInfoDialog=!1},handleClose(e){},closeInsertDialog(){this.newSnagDialog=!1,this.resetInputFields()},closeEditDialog(){this.editSnagDialog=!1},resetInputFields(){this.newSnagDate="",this.newSnagFrom="",this.newSnagTo="",this.newSnagTitle="",this.newSnagCode="",this.newSnagStatus="",this.newSnagStatusCosts="",this.newSnagCompanyName="",this.newSnagComments="",this.newSnagDateOK=!0,this.newSnagFromOK=!0,this.newSnagToOK=!0,this.newSnagTitleOK=!0,this.newSnagCodeOK=!0,this.newSnagStatusOK=!0,this.newSnagStatusCostsOK=!0,this.newSnagCompanyNameOK=!0,this.newSnagCommentsOK=!0,this.editSnagDate="",this.editSnagTitle="",this.editSnagCode="",this.editSnagCargoName="",this.editSnagFixedCosts="0",this.editSnagDistance="0",this.editSnagDistanceCosts="0",this.editSnagStatus="",this.editSnagComments="",this.editSnagDateOK=!0,this.editSnagTitleOK=!0,this.editSnagCodeOK=!0,this.editSnagCargoNameOK=!0,this.editSnagFixedCostsOK=!0,this.editSnagDistanceOK=!0,this.editSnagDistanceCostsOK=!0,this.editSnagStatusOK=!0,this.editSnagCommentsOK=!0},editClick(){this.editSnagDialog=!0},deleteClick(){this.displayDeleteConfirm=!0},deletePhotoId(e){this.displayDeletePhotoConfirm=!0,this.photoIdForDelete=e},deletePhotoModal(e){this.photoIdForDelete=e,this.deletePhoto()},async deletePhoto(){this.panelClass="closedPanel",this.isLoading=!0;const e=this.$store.getters.token,t=this._rootRestUrl;let i=JSON.stringify({sessionId:e,key:this.photoIdForDelete}),a={headers:{"Content-Type":"application/json"}};try{await Ba().post(t+"/api/v1/Trip/DeleteTripFile",i,a).then((()=>{this.getSnags(),this.getCompanies(),this.displayDeletePhotoConfirm=!1,this.visibleImagesModal=!1,this.displayInfoDialog=!0,this.InfoModalHeader="Info",this.InfoModalMessage="Photo is deleted",this.isLoading=!1}))}catch(n){401==n.response.status&&(alert("Your session is expired! Please login"),localStorage.clear()),this.displayDeletePhotoConfirm=!1,this.visibleImagesModal=!1,this.displayInfoDialog=!0,this.InfoModalHeader="Error "+n.response.status,this.InfoModalMessage=n.response.data.Message,this.isLoading=!1}this.extendTime()},async deleteTrip(){this.panelClass="closedPanel",this.isLoading=!0;const e=this.$store.getters.token,t=this._rootRestUrl;let i=JSON.stringify({sessionId:e,key:this.ClickedRowId}),a={headers:{"Content-Type":"application/json"}};try{await Ba().post(t+"/api/v1/Trip/DeleteTrip",i,a).then((()=>{this.getSnags(),this.getCompanies(),this.displayDeleteConfirm=!1,this.displayInfoDialog=!0,this.InfoModalHeader="Info",this.InfoModalMessage="Trip is deleted",this.isLoading=!1}))}catch(n){401==n.response.status&&(alert("Your session is expired! Please login"),localStorage.clear()),this.displayDeleteConfirm=!1,this.displayInfoDialog=!0,this.InfoModalHeader="Error "+n.response.status,this.InfoModalMessage=n.response.data.Message,this.isLoading=!1}this.extendTime()},downloadClick(){alert("Download clicked")},refreshData(){10!=this.fromDate.length&&(this.fromDate=this.format_date(this.fromDate,"DD/MM/YYYY")),10!=this.toDate.length&&(this.toDate=this.format_date(this.toDate,"DD/MM/YYYY")),this.getSnags(),this.getCompanies()},onSwiper(){},format_date_to_full(e,t){var i=e.substring(6,10),a=e.substring(3,5),n=e.substring(0,2);return i+"-"+a+"-"+n+" "+t},format_date_to_full_time(e){var t=e.substring(6,10),i=e.substring(3,5),a=e.substring(0,2),n=e.substring(11,13),s=e.substring(14,16),l="00";return t+"-"+i+"-"+a+" "+n+":"+s+":"+l},format_date_to_dateTime(e){var t=e.substring(0,4),i=e.substring(5,7),a=e.substring(8,10),n=e.substring(11,13),s=e.substring(14,16);return a+"/"+i+"/"+t+" "+n+":"+s},async getCompanies(){},extendTime(){this.$emit("extend-session")},async getSnags(e){10!=this.fromDate.length&&(this.fromDate=this.format_date(this.fromDate,"DD/MM/YYYY")),10!=this.toDate.length&&(this.toDate=this.format_date(this.toDate,"DD/MM/YYYY")),localStorage.setItem("fromDate",this.fromDate),localStorage.setItem("toDate",this.toDate),this.panelClass="closedPanel",this.isLoading=!0;const t=this._rootRestUrl;let i=JSON.stringify({pageNumber:this.snagsPage}),a={headers:{"Content-Type":"application/json"}};var n="";""!=this.captionFilter&&null!=this.captionFilter&&(n+="&caption="+this.captionFilter),""!=this.codeFilter&null!=this.codeFilter&&(n+="&code="+this.codeFilter),""!=this.statusFilter&null!=this.statusFilter&&(n+="&status="+this.statusFilter),""!=this.worksPackageFilter&null!=this.worksPackageFilter&&(n+="&worksPackage="+this.worksPackageFilter),""!=this.searchQuery&&(n+="&searchQuery="+this.searchQuery);var s="";"all"==e?(s=0,this.pageSize=this.totalRecords,this.pageSize=100):(s=+this.snagsPage,this.pageSize=100);try{await Ba().get(t+"/api/Snags/GetAllSnags/?pageSize="+this.pageSize+"&pageNumber="+s+n,i,a).then((e=>{this.allSnags=e.data.snags,this.totalRecords=e.data.totalRecords,0==this.totalRecords?this.showTable=!1:this.showTable=!0,this.isLoading=!1,this.reorganizePagination(),0==this.allStatuses.length&&this.getStatuses()}))}catch(l){401==l.response.status&&(alert("Your session is expired! Please login"),localStorage.clear()),this.displayInfoDialog=!0,this.InfoModalHeader="Error "+l.response.status,this.InfoModalMessage=l.response.data.Message,this.isLoading=!1}this.extendTime()},async getStatuses(){const e=this._rootRestUrl;let t=JSON.stringify({category:"SNSTAT"}),i={headers:{"Content-Type":"application/json"}};try{await Ba().get(e+"/api/LookUps/GetStatusLookUps?category=SNSTAT",t,i).then((e=>{this.allStatuses=e.data;var t=JSON.stringify(e.data);t=t.replaceAll('"shortCode"','"value"'),t=t.replaceAll('"description"','"name"'),this.allStatuses=Ua().parseJSON(t)}))}catch(a){401==a.response.status&&(alert("Your session is expired! Please login"),localStorage.clear()),this.displayInfoDialog=!0,this.InfoModalHeader="Error "+a.response.status,this.InfoModalMessage=a.response.data.Message,this.isLoading=!1}this.extendTime()},onRows(e){alert(e)},onRowClick(e){this.ClickedRowId=e.data.key,this.editSnagDate=this.format_date(e.data.date,"DD/MM/YYYY"),this.editSnagTitle=e.data.caption,this.editSnagStatus=e.data.status,this.editSnagCode=e.data.code,Ua()(".hiddenFields").each((function(){Ua()(this).closest("tr").removeClass("highlight")})),Ua()(".hiddenFields").each((function(){Ua()(this).attr("data")==e.data.key&&Ua()(this).closest("tr").addClass("highlight")}))},onRowSelect(e){"I"!=e.originalEvent.target.tagName&&"SPAN"!=e.originalEvent.target.tagName&&(Ua()(".hiddenFields").each((function(){Ua()(this).closest("tr").removeClass("highlight")})),Ua()(".hiddenFields").each((function(){Ua()(this).attr("data")==e.data.key&&Ua()(this).closest("tr").addClass("highlight")})),this.getDocumentDetails(),this.snagImages.length>0?(this.picturesTabShow=!1,this.activeTab=0):this.picturesTabShow=!0)},openDialogAddPhoto(){this.displayUploadModal=!0},customUploader(e){var t=Date.now(),i=e.files[0];this.uploadImage(i,t+"_"+i.name)},async uploadImage(e,t){this.isLoading=!0;const i=this.$store.getters.token,a=this._rootRestUrl,n=this.ClickedRowId;let s={headers:{"Content-Type":"multipart/form-data"}};var l=new FormData;l.append("Key",""),l.append("Caption",t),l.append("SnagRef",n),l.append("ProjectRef",this.ProjectRef),l.append("SessionId",i),l.append("File",e);try{await Ba().post(a+"/api/Attachments/InsertPhoto",l,s).then((()=>{this.displayInfoDialog=!0,this.InfoModalHeader="Info",this.InfoModalMessage="Photo is added",this.isLoading=!1,this.displayUploadModal=!1,this.getSnags()}))}catch(o){this.displayInfoDialog=!0,this.InfoModalHeader="Alert!",this.InfoModalMessage="Error occured while uploading photo. Photo is not added!",this.isLoading=!1,this.displayUploadModal=!1,this.getSnags()}this.extendTime()},setInvoiceDateToday(){this.invoiceDate=Oa()().format("DD/MM/YYYY HH:mm"),this.sendInvoiceDialog=!0},invoiceThisTrip(){var e=!0;""==this.invoiceDate?(this.invoiceDateOK=!1,e=!1):this.invoiceDateOK=!0,1==e&&this.markAsInvoicedInDatabase()},invoiceMultipleTrips(){var e=!0;""==this.invoiceDate?(this.invoiceDateOK=!1,e=!1):this.invoiceDateOK=!0,1==e&&this.markAsInvoicedMultipleInDatabase()},async markAsInvoicedInDatabase(){this.isLoading=!0;var e=this.format_date(Oa()(this.invoiceDate,"DD/MM/YYYY HH:mm"),"YYYY-MM-DD HH:mm:ss");const t=this.$store.getters.token,i=this._rootRestUrl;let a=JSON.stringify({tripKey:this.ClickedRowId,sessionId:t,date:e,isInvoiceSent:!0}),n={headers:{"Content-Type":"application/json"}};try{await Ba().post(i+"/api/v1/Trip/MarkInvoiceAsSent",a,n).then((()=>{this.getSnags(),this.getCompanies(),this.displayInfoDialog=!0,this.sendInvoiceDialog=!1,this.InfoModalHeader="Info",this.InfoModalMessage="Trip is marked as invoiced",this.isLoading=!1,this.checkedIDs=[],this.AllPageMarked=!1}))}catch(s){401==s.response.status&&(alert("Your session is expired! Please login"),localStorage.clear()),this.sendInvoiceDialog=!1,this.displayInfoDialog=!0,this.InfoModalHeader="Error "+s.response.status,this.InfoModalMessage=s.response.data.Message,this.isLoading=!1}this.extendTime()},async markAsInvoicedMultipleInDatabase(){this.isLoading=!0;var e=this.format_date(Oa()(this.invoiceDate,"DD/MM/YYYY HH:mm"),"YYYY-MM-DD HH:mm:ss");const t=this.$store.getters.token,i=this._rootRestUrl;var a='{"sessionId": "'+t+'",';a+='     "invoices": [ ';var n=0,s=[];this.selectedIDsForInvoicing.forEach((t=>{s.push(t),n++,a+="{",a+='"tripKey": "'+t+'",',a+='"isInvoiceSent": true,',a+='"invoiceDate": "'+e+'"',a+="}",n<this.selectedIDsForInvoicing.length&&(a+=",")})),a+="  ]",a+="  }";let l=a,o={headers:{"Content-Type":"application/json"}};try{await Ba().post(i+"/api/v1/Trip/MarkInvoicesAsSent",l,o).then((()=>{this.getSnags(),this.getCompanies(),this.displayInfoDialog=!0,this.sendMultipleInvoiceDialog=!1,this.showInvoiceSelectedButton=!1,this.InfoModalHeader="Info",this.InfoModalMessage="Trips are marked as invoiced",this.isLoading=!1,s.forEach((e=>{this.checkedIDs[e]=!1;const t=this.selectedIDsForInvoicing.indexOf(e);this.selectedIDsForInvoicing.splice(t,1)}))}))}catch(d){401==d.response.status&&(alert("Your session is expired! Please login"),localStorage.clear()),this.sendInvoiceDialog=!1,this.displayInfoDialog=!0,this.InfoModalHeader="Error "+d.response.status,this.InfoModalMessage=d.response.data.Message,this.isLoading=!1}this.AllPageMarked=!1,this.AllMarked=!1,this.extendTime()},async unInvoiceThisTrip(){this.isLoading=!0;const e=this.$store.getters.token,t=this._rootRestUrl;let i=JSON.stringify({tripKey:this.ClickedRowId,sessionId:e,date:"",isInvoiceSent:!1}),a={headers:{"Content-Type":"application/json"}};try{await Ba().post(t+"/api/v1/Trip/MarkInvoiceAsSent",i,a).then((()=>{this.getSnags(),this.getCompanies(),this.editSnagDialog=!1,this.displayInfoDialog=!0,this.displayUnInvoiceConfirm=!1,this.InfoModalHeader="Info",this.InfoModalMessage="Trip is marked as invoiced",this.isLoading=!1}))}catch(n){401==n.response.status&&(alert("Your session is expired! Please login"),localStorage.clear()),this.displayUnInvoiceConfirm=!1,this.displayInfoDialog=!0,this.InfoModalHeader="Error "+n.response.status,this.InfoModalMessage=n.response.data.Message,this.isLoading=!1}this.extendTime()},async getDocumentDetails(){const e=this._rootRestUrl;let t=JSON.stringify({key:this.ClickedRowId}),i={headers:{"Content-Type":"application/json"}};this.isLoading=!0;try{await Ba().get(e+"/api/Snags/GetSnagDetails/?snagKey="+this.ClickedRowId,t,i).then((e=>{this.snagDetails=e.data,this.isLoading=!1,this.fillPanelData()}))}catch(a){401==a.response.status&&(alert("Your session is expired! Please login"),localStorage.clear()),this.displayInfoDialog=!0,this.InfoModalHeader="Error "+a.response.status,this.InfoModalMessage=a.response.data.Message,this.isLoading=!1}this.extendTime(),this.isLoading=!1},fillPanelData(){this.snagDetailsData=this.snagDetails["snag"];var e=this.snagDetails["snagAttachments"];e.length>0?(this.snagImages=e,this.picturesTabShow=!0):(this.picturesTabShow=!1,this.snagImages=[]),this.openPanel()},openPanel(){this.panelClass="openedPanel"},closePanel(){this.panelClass="closedPanel"},initFilters1(){this.filters1={global:{value:null,matchMode:La.a6.CONTAINS},userFullName:{operator:La.pg.AND,constraints:[{value:null,matchMode:La.a6.CONTAINS}]},from:{operator:La.pg.AND,constraints:[{value:null,matchMode:La.a6.CONTAINS}]},to:{operator:La.pg.AND,constraints:[{value:null,matchMode:La.a6.CONTAINS}]},companyName:{operator:La.pg.AND,constraints:[{value:null,matchMode:La.a6.CONTAINS}]},cargoName:{operator:La.pg.AND,constraints:[{value:null,matchMode:La.a6.CONTAINS}]},distance:{operator:La.pg.AND,constraints:[{value:null,matchMode:La.a6.CONTAINS}]},sumVAT:{operator:La.pg.AND,constraints:[{value:null,matchMode:La.a6.CONTAINS}]},comments:{operator:La.pg.AND,constraints:[{value:null,matchMode:La.a6.CONTAINS}]}}},clearFilter1(){this.initFilters1()},getFiles(){},format_date(e,t){if(e)return Oa()(String(e)).format(t)},showloader(e){this.isLoading=e},async downloadReport(){this.getSnags(),this.isLoading=!0,10!=this.fromDate.length&&(this.fromDate=this.format_date(this.fromDate,"DD/MM/YYYY")),10!=this.toDate.length&&(this.toDate=this.format_date(this.toDate,"DD/MM/YYYY"));const e=this.format_date_to_full(this.fromDate,"00:00:00"),t=this.format_date_to_full(this.toDate,"23:59:59"),i=this.$store.getters.token,a=e,n=t,s=this._rootRestUrl,l="EN";let o=JSON.stringify({sessionId:i,DateFrom:a,DateTo:n,locale:l}),d={headers:{"Content-Type":"application/json"}};try{await Ba().get(s+"/api/v1/Trip/CSV/Trips/?sessionId="+i+"&DateFrom="+a+"&DateTo="+n+"&locale="+l,o,d).then((e=>{this.downloadedReport=e.data;var t="Report "+this.format_date(a,"YYYY-MM-DD")+" - "+this.format_date(n,"YYYY-MM-DD");this.downloadCSV(this.downloadedReport,t)}))}catch(r){401==r.response.status&&(alert("Your session is expired! Please login"),localStorage.clear()),this.displayUnInvoiceConfirm=!1,this.displayInfoDialog=!0,this.InfoModalHeader="Error "+r.response.status,this.InfoModalMessage=r.response.data.Message,this.isLoading=!1}this.extendTime()},correctData(){this.allSnags.forEach(((e,t)=>{const i=Object.entries(e);i.forEach((e=>{if("invSent"==e[0]){var i="";i=1==e[1]?"Yes":"No",this.allSnags[t]["invSent"]=i}}))}))},downloadCSV(e,t){const i=document.createElement("a");i.setAttribute("href",`data:text/csv;charset=utf-8,${e}`),i.setAttribute("download",t),i.style.display="none",document.body.appendChild(i),i.click(),document.body.removeChild(i),this.isLoading=!1},formatMoney(e,t,i,a,n){t=isNaN(t=Math.abs(t))?2:t,i="undefined"===typeof i?".":i,a="undefined"===typeof a?",":a;var s=e<0?"-":"",l=String(parseInt(e=Math.abs(Number(e)||0).toFixed(t))),o=(o=l.length)>3?o%3:0;return n+" "+s+(o?l.substr(0,o)+a:"")+l.substr(o).replace(/(\decSep{3})(?=\decSep)/g,"$1"+a)+(t?i+Math.abs(e-l).toFixed(t).slice(2):"")},showContextMenu:function(e){if("ADMIN"==this.userType.toUpperCase()){e.preventDefault();var t=document.getElementById("div-context-menu");t.style.left=e.pageX+"px",t.style.top=e.pageY-50+"px",t.style.display="block",t.cid=e.target.id.replace(/title-/,"")}},hideContextMenu:function(){document.getElementById("div-context-menu").style.display="none"},onClick:function(){this.hideContextMenu()},onPage(e){this.snagsPage=1*e["originalEvent"]["page"]+1,this.getSnags()},onSearchInput(){0==this.searchQuery.length&&(this.first=0,this.snagsPage=1,this.getSnags())},onSearch(){(this.searchQuery.length>2||0==this.searchQuery.length)&&(this.first=0,this.snagsPage=1,this.getSnags())},onFilter(e){this.captionFilter=e.filters.caption.value,this.codeFilter=e.filters.code.value,this.statusFilter=e.filters.status.value,this.worksPackageFilter=e.filters.worksPackage.value,this.getSnags()},async SelectAllPage(){var e="",t=[];this.selectedIDsForInvoicing=[],Ua()(".p-checkbox").each((function(){var e=Ua()(this).parent().attr("data");t.push(e)})),0==this.AllPageMarked?(e="mark",this.showInvoiceSelectedButton=!0):(e="unmark",this.showInvoiceSelectedButton=!1),"mark"==e?t.forEach((e=>{this.selectedIDsForInvoicing.push(e),this.checkedIDs[e]=!0,this.AllPageMarked=!0})):(this.checkedIDs=[],this.AllPageMarked=!1)},SelectAll(e){"select"==e?0==this.AllMarked?this.showInvoiceSelectedButton=!0:this.showInvoiceSelectedButton=!1:(this.selectedIDsForInvoicing=[],this.checkedIDs=[],this.AllMarked=!1,this.AllPageMarked=!1,this.showInvoiceSelectedButton=!1),this.selectedIDsForInvoicing=[],"select"==e&&(this.AllMarked=!0,this.allSnags.forEach((e=>{const t=Object.entries(e);var i="";t.forEach((e=>{"id"==e[0]&&(i=e[1]),"invSent"==e[0]&&"No"==e[1]&&(this.selectedIDsForInvoicing.push(i),this.checkedIDs[i]=!0)}))}))),this.selectedIDsForInvoicing.lenght>0&&(this.showInvoiceSelectedButton=!0)}},mounted(){var e=document.getElementById("app");e.addEventListener("click",this.onClick),void 0!=localStorage.getItem("fromDate")?this.fromDate=localStorage.getItem("fromDate"):this.fromDate=Oa()().startOf("isoWeek").format("DD/MM/YYYY"),void 0!=localStorage.getItem("toDate")?this.toDate=localStorage.getItem("toDate"):this.toDate=Oa()().endOf("isoWeek").format("DD/MM/YYYY"),this.$emit("showSearchbar",!0),this.getSnags(),this.getCompanies(),this.moveSearchBoxToTop(),Ua()("#editIconsPanel").detach().appendTo(".p-tabview-nav-content")},created(){this.aSystemDoc=localStorage.getItem("docType"),this.initFilters1(),this.loading1=!1}},Na=i(89);const Ea=(0,Na.Z)(Ya,[["render",ui]]);var Wa=Ea}}]);
//# sourceMappingURL=47.f065f956.js.map
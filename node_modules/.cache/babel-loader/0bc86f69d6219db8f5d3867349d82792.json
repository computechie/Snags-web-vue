{"ast":null,"code":"import \"core-js/modules/es.error.cause.js\";\nimport moment from \"moment\";\nexport default {\n  props: [\"projectKey\", \"projectTitle\", \"projectNumber\", \"emitSearch\"],\n\n  data() {\n    return {\n      detailsAreVisible: false,\n      isLoading: false,\n      projects: [],\n      error: null\n    };\n  },\n\n  methods: {\n    /// GET project list\n    async getProjectList() {\n      this.isLoading = true;\n\n      if (this.$store.getters.isAuthenticated) {\n        const token = localStorage.getItem(\"token\"); //User token !!\n\n        const response = await fetch(\"https://www.it-b.hr/vue/project-list.php?auth=\" + token, {\n          method: \"POST\",\n          body: JSON.stringify({})\n        });\n        const responseData = await response.json();\n\n        if (!response.ok) {\n          // console.log(responseData);\n          const error = new Error(responseData.message || \"Failed to authenticate.\");\n          throw error;\n        }\n\n        this.projects = responseData;\n        this.isLoading = false;\n      }\n    },\n\n    ////\n    projectSearch(what) {\n      //TODO: functon for searching Projects\n      if (what.length > 2) {\n        for (let element of document.getElementsByClassName(\"cardsDisplay\")) {\n          element.style.display = \"none\";\n        }\n\n        this.projects.forEach(value => {\n          const dfmOnlinNumber = value['DFMONLINENUMBER'].toUpperCase();\n          const dfmTitle = value['TITLE'].toUpperCase();\n          const dfmCompany = value['CONTRACTOR'].toUpperCase();\n          what = what.toUpperCase();\n\n          if (dfmOnlinNumber.includes(what) || dfmTitle.includes(what) || dfmCompany.includes(what)) {\n            document.getElementById('ProjectCard-' + value['KEY']).style.display = \"block\";\n          }\n        });\n      } else {\n        for (let element of document.getElementsByClassName(\"cardsDisplay\")) {\n          element.style.display = \"none\";\n        }\n      }\n    },\n\n    toggleDetails() {\n      this.detailsAreVisible = !this.detailsAreVisible;\n    },\n\n    format_date(value) {\n      if (value) {\n        return moment(String(value)).format(\"DD/MM/YYYY\");\n      }\n    }\n\n  },\n  emits: [\"showSearchbar\"],\n\n  mounted() {\n    this.getProjectList();\n    this.$emit(\"showSearchbar\", true);\n  }\n\n};","map":{"version":3,"mappings":"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","names":["moment","props","data","detailsAreVisible","isLoading","projects","error","methods","getProjectList","$store","getters","isAuthenticated","token","localStorage","getItem","response","fetch","method","body","JSON","stringify","responseData","json","ok","Error","message","projectSearch","what","length","element","document","getElementsByClassName","style","display","forEach","value","dfmOnlinNumber","toUpperCase","dfmTitle","dfmCompany","includes","getElementById","toggleDetails","format_date","String","format","emits","mounted","$emit"],"sourceRoot":"","sources":["Q:\\Projects\\DFM v2\\src\\components\\pages\\ProjectsCards.vue"],"sourcesContent":["<template>\r\n  <base-dialog :show=\"!!error\" title=\"Error\"></base-dialog>\r\n  <base-dialog :show=\"isLoading\" title=\"Authenticating...\" fixed>\r\n    <base-spinner></base-spinner>\r\n  </base-dialog>\r\n\r\n \r\n\r\n  <div class=\"row mb-3\">\r\n    <div class=\"col-12 text-center\">\r\n      <search-holder @emit-Search=\"projectSearch\"></search-holder>\r\n    </div>\r\n  </div>\r\n\r\n  <div class=\"row\">\r\n    <div\r\n        v-for=\"project in projects\"\r\n        :id=\"'ProjectCard-'+project.KEY\"\r\n        :key=\"project.KEY\"\r\n        \r\n       \r\n      class=\"col-sm-12 col-md-6 col-lg-4 col-xl2-2 col-xl3-2 cardsDisplay\"\r\n    >\r\n      <div class=\"card project-card\"\r\n       \r\n      \r\n      >\r\n        <div class=\"card-header project-card-header\">\r\n          <div class=\"projectCardsProjectNo\">{{ project.DFMONLINENUMBER }}</div>\r\n          <div class=\"projectCardsProjectTitle\">{{ project.TITLE }}</div>\r\n        </div>\r\n        <div class=\"card-body project-card-body\">\r\n          <div class=\"dropdown\">\r\n            <div\r\n              class=\"card-background-image\"\r\n              data-bs-toggle=\"dropdown\"\r\n              :style=\"{ backgroundImage: `url(${project.IMG})` }\"\r\n              @mouseenter=\"toggleDetails()\"\r\n              @mouseleave=\"toggleDetails()\"\r\n            >\r\n              <figcaption class=\"projectDetailsBlock\" v-if=\"detailsAreVisible\">\r\n                <div class=\"row\">\r\n                  <div class=\"col p-0a text-right\">Revision:</div>\r\n                  <div class=\"col p-0a text-left\">{{ project.REVISION }}</div>\r\n                </div>\r\n                <div class=\"row\">\r\n                  <div class=\"col p-0a text-right\">Publish date:</div>\r\n                  <div class=\"col p-0a text-left\">\r\n                    {{ format_date(project.PUBLISHDATE) }}\r\n                  </div>\r\n                </div>\r\n                <div class=\"row\">\r\n                  <div class=\"col p-0a text-right\">Expiry date:</div>\r\n                  <div class=\"col p-0a text-left\">\r\n                    {{ format_date(project.VALIDUNTIL) }}\r\n                  </div>\r\n                </div>\r\n                <div class=\"row\">\r\n                  <div class=\"col p-0a text-right\">Status:</div>\r\n                  <div class=\"col p-0a text-left\">{{ project.ACTIVE }}</div>\r\n                </div>\r\n                <div class=\"row\"><div class=\"col p-0a\"></div></div>\r\n                <div class=\"row\" style=\"margin-top:20px\">\r\n                  <div class=\"col text-center\" >\r\n                    Company: {{ project.CONTRACTOR }}\r\n                  </div>\r\n\r\n\r\n\r\n                </div>\r\n\r\n                <div class=\"row\" style=\"margin-top:20px\">\r\n                   <div class=\"col text-center\" >\r\n                  <button class=\"btn btn-primary\" >Open</button>\r\n                    </div>\r\n                </div>\r\n\r\n\r\n\r\n\r\n              </figcaption>\r\n            </div>\r\n\r\n            <div\r\n              class=\"selector dropdown-menu dropdown-menu-selector\"\r\n              aria-labelledby=\"dropdownMenuLink\"\r\n            >\r\n              <a\r\n                v-if=\"project.CDE\"\r\n                class=\"dropdown-item\"\r\n                data-bs-toggle=\"modal\"\r\n                data-bs-target=\"#aboutModal\"\r\n                href=\"\"\r\n                target=\"_blank\"\r\n                ><i class=\"fa-solid fa-folder\"></i> CDE</a\r\n              >\r\n\r\n              <a v-if=\"project.QMS\" class=\"dropdown-item\" href=\"\"\r\n                ><i class=\"fa-solid fa-file\"></i> QMS</a\r\n              >\r\n\r\n              <a v-if=\"project.SAFETY\" class=\"dropdown-item\" href=\"\"\r\n                ><i class=\"fa-solid fa-shield\"></i> Safetyfile\r\n              </a>\r\n            </div>\r\n          </div>\r\n\r\n          <!--  <div class=\"row\">\r\n           <div class=\"col-md-4\" v-if=\"project.CDE\">CDE</div>\r\n           <div class=\"col-md-4\" v-if=\"project.QMS\">QMS</div>\r\n           <div class=\"col-md-4\" v-if=\"project.SAFETY\">Safetyfile</div>\r\n        </div> -->\r\n\r\n          <div class=\"mt-2 text-end\" style=\"display: block\">\r\n            <i class=\"icon-cog iconProjectSetting\" title=\"Project settings\"></i>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport moment from \"moment\";\r\n\r\nexport default {\r\n  props: [\"projectKey\", \"projectTitle\", \"projectNumber\", \"emitSearch\"],\r\n\r\n  data() {\r\n    return {\r\n      detailsAreVisible: false,\r\n      isLoading: false,\r\n      projects: [],\r\n      error: null,\r\n    };\r\n  },\r\n  methods: {\r\n    /// GET project list\r\n    async getProjectList() {\r\n      this.isLoading = true;\r\n\r\n      if (this.$store.getters.isAuthenticated) {\r\n        const token = localStorage.getItem(\"token\"); //User token !!\r\n\r\n        const response = await fetch(\r\n          \"https://www.it-b.hr/vue/project-list.php?auth=\" + token,\r\n          {\r\n            method: \"POST\",\r\n            body: JSON.stringify({}),\r\n          }\r\n        );\r\n\r\n        const responseData = await response.json();\r\n\r\n        if (!response.ok) {\r\n          // console.log(responseData);\r\n          const error = new Error(\r\n            responseData.message || \"Failed to authenticate.\"\r\n          );\r\n          throw error;\r\n        }\r\n\r\n        this.projects = responseData;\r\n        this.isLoading = false;\r\n      }\r\n    },\r\n    ////\r\n\r\n    projectSearch(what) {\r\n      //TODO: functon for searching Projects\r\n      if(what.length > 2){\r\n              \r\n            \r\n            for (let element of document.getElementsByClassName(\"cardsDisplay\")){\r\n             \r\n             element.style.display=\"none\";\r\n            }\r\n\r\n            this.projects.forEach((value) => {\r\n             \r\n              const dfmOnlinNumber =  value['DFMONLINENUMBER'].toUpperCase() ;\r\n              const dfmTitle =  value['TITLE'].toUpperCase() ;\r\n              const dfmCompany =  value['CONTRACTOR'].toUpperCase() ;\r\n\r\n              what = what.toUpperCase() ;\r\n\r\n             if(dfmOnlinNumber.includes(what) || dfmTitle.includes(what) || dfmCompany.includes(what)){\r\n                document.getElementById('ProjectCard-'+value['KEY']).style.display=\"block\";\r\n               \r\n             }\r\n  \r\n        });    \r\n             \r\n\r\n      }else{\r\n        for (let element of document.getElementsByClassName(\"cardsDisplay\")){\r\n              element.style.display=\"none\";\r\n            }\r\n      }\r\n\r\n   \r\n    },\r\n\r\n    toggleDetails() {\r\n      this.detailsAreVisible = !this.detailsAreVisible;\r\n    },\r\n    format_date(value) {\r\n      if (value) {\r\n        return moment(String(value)).format(\"DD/MM/YYYY\");\r\n      }\r\n    },\r\n  },\r\n\r\n  emits: [\"showSearchbar\"],\r\n\r\n  mounted() {\r\n    this.getProjectList();\r\n    this.$emit(\"showSearchbar\", true);\r\n    \r\n\r\n  },\r\n};\r\n</script>\r\n\r\n\r\n\r\n\r\n<style>\r\n.dropdown-menu-selector {\r\n  /* top: -192px !important;\r\n   left:10px !important;*/\r\n\r\n  top: -202px !important;\r\n  left: 0px !important; /*   width:calc(100% - 20px);\r\n   height:calc(100% - 20px);*/\r\n  width: 100%;\r\n  height: 100%;\r\n\r\n  background: rgb(0, 0, 0, 0.5);\r\n  box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);\r\n  backdrop-filter: blur(2px);\r\n  -webkit-backdrop-filter: blur(2px);\r\n}\r\n.dropdown-menu-selector a {\r\n  color: white !important;\r\n}\r\n.dropdown-menu-selector a:hover {\r\n  background: #c2c2c2;\r\n  color: black !important;\r\n}\r\n.dropdown-item i {\r\n \r\n  width: 20px;\r\n}\r\n\r\n.card-background-image {\r\n  background-repeat: no-repeat;\r\n  background-size: cover;\r\n  background-position: center;\r\n  height: 175px;\r\n  min-height: 200px;\r\n}\r\n\r\n.project-card-body {\r\n  padding: 3px;\r\n}\r\n.project-card {\r\n  border-radius: 0 !important;\r\n  margin-bottom: 10px;\r\n}\r\n.project-card-header {\r\n  padding: 0.25rem !important;\r\n  background: white;\r\n  height: 72px;\r\n}\r\n.projectCardsProjectNo {\r\n  font-size: 0.8rem;\r\n  font-weight: bolder;\r\n}\r\n.projectCardsProjectTitle {\r\n  font-size: 1rem;\r\n  font-weight: 300;\r\n  color: #222;\r\n}\r\n.projectDetailsBlock {\r\n  font-size: 0.8rem;\r\n  padding: 5px;\r\n  background-color: rgb(66, 66, 66, 0);\r\n  height: 100%;\r\n  color: white;\r\n  opacity: 0;\r\n  cursor: pointer;\r\n}\r\n.projectDetailsBlock:hover {\r\n  background-color: rgb(66, 66, 66, 0.5);\r\n  -webkit-transition: background-color 200ms linear;\r\n  -ms-transition: background-color 200ms linear;\r\n  transition: background-color 200ms linear;\r\n\r\n  opacity: 1;\r\n  -webkit-transition: opacity 200ms linear;\r\n  -ms-transition: opacity 200ms linear;\r\n  transition: opacity r 200ms linear;\r\n}\r\n\r\n\r\n.cardsDisplay{\r\n\r\n  transition: opacity 2s linear;  \r\n  transform:translate(0);\r\n  opacity: 1;\r\n\r\n}\r\n\r\n@media (min-width: 1200px) {\r\n  .col-xl2-2 {\r\n    -ms-flex: 0 0 25%;\r\n    flex: 0 0 25%;\r\n    max-width: 25%;\r\n  }\r\n}\r\n\r\n@media (min-width: 1500px){\r\n  .col-xl3-2 {\r\n    -ms-flex: 0 0 20% ;\r\n    flex: 0 0 20%;\r\n    max-width:20%;\r\n  }\r\n}/*\r\n\r\n@media (min-width: 1800px){\r\n  .col-xl3-2 {\r\n    -ms-flex: 0 0 14.28571428571429% ;\r\n    flex: 0 0 14.28571428571429%;\r\n    max-width: 14.28571428571429%;\r\n  }\r\n}*/\r\n</style>\r\n\r\n\r\n"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import InputText from 'primevue/inputtext';\nimport Button from 'primevue/button';\nimport InlineMessage from 'primevue/inlinemessage';\nimport Dialog from 'primevue/dialog';\nimport axios from \"axios\";\nexport default {\n  // props: [\"systemId\"],\n  components: {\n    // DataTable,\n    // Column,\n    InputText,\n    //Checkbox,\n    Button,\n    Dialog,\n    InlineMessage //  Calendar,\n    //InputNumber,\n    //TabView,\n    //TabPanel,\n    //   Dropdown\n\n  },\n\n  data() {\n    return {\n      userEmail: '',\n      userEmailOK: true,\n      displayInfoDialog: false\n    };\n  },\n\n  methods: {\n    passwordRecovery() {\n      var AllOk = true;\n\n      if (this.userEmail == '' || this.userEmail == null) {\n        this.userEmailOK = false;\n        AllOk = false;\n      } else {\n        this.userEmailOK = true;\n      }\n\n      if (AllOk == true) {\n        this.sendRecoveryEmail();\n      }\n    },\n\n    typing() {\n      this.userEmailOK = true;\n    },\n\n    async sendRecoveryEmail() {\n      const sessionId = localStorage.getItem(\"token\"); // const sessionId='';\n\n      const baseUrl = localStorage.getItem(\"_rootRestUrl\");\n      let formData = JSON.stringify({\n        sessionId: sessionId,\n        email: this.userEmail\n      });\n      let config = {\n        headers: {\n          \"Content-Type\": \"application/json\"\n        }\n      };\n      await axios.post(baseUrl + \"/api/v1/User/SendResetPasswordEmail\", formData, config).then(() => {\n        this.InfoModalHeader = 'Info';\n        this.InfoModalMessage = 'If your email is registered we will now send you a message with instruction how to recover your password.';\n        this.infoDialogStyle = [{\n          width: '40rem'\n        }];\n        this.displayInfoDialog = true;\n        this.isLoading = false;\n      }).catch(error => {\n        if (error.response) {\n          this.InfoModalHeader = 'Info';\n          this.InfoModalMessage = 'If your email is registered we will now send you a message with instruction how to recover your password.';\n          this.infoDialogStyle = [{\n            width: '40rem'\n          }];\n          this.displayInfoDialog = true;\n        }\n\n        this.isLoading = false;\n      });\n    }\n\n  }\n};","map":{"version":3,"mappings":"AA2DA,OAAOA,SAAP,MAAsB,oBAAtB;AACA,OAAOC,MAAP,MAAmB,iBAAnB;AACA,OAAOC,aAAP,MAA0B,wBAA1B;AACA,OAAOC,MAAP,MAAmB,iBAAnB;AAEA,OAAOC,KAAP,MAAkB,OAAlB;AAEA,eAAe;EACZ;EACCC,UAAU,EAAE;IACT;IACA;IACCL,SAHQ;IAIR;IACAC,MALQ;IAMTE,MANS;IAOTD,aAPS,CAQV;IACE;IACA;IACA;IACH;;EAZW,CAFD;;EAmBbI,IAAI,GAAG;IACD,OAAO;MACHC,SAAS,EAAC,EADP;MAEHC,WAAW,EAAC,IAFT;MAGHC,iBAAiB,EAAC;IAHf,CAAP;EAMH,CA1BU;;EA2BXC,OAAO,EAAC;IACJC,gBAAgB,GAAE;MACT,IAAIC,KAAI,GAAI,IAAZ;;MAGD,IAAG,KAAKL,SAAL,IAAkB,EAAlB,IAAwB,KAAKA,SAAL,IAAkB,IAA7C,EAAkD;QAC9C,KAAKC,WAAL,GAAmB,KAAnB;QACAI,KAAI,GAAI,KAAR;MACH,CAHD,MAGK;QAAC,KAAKJ,WAAL,GAAmB,IAAnB;MAAwB;;MAE9B,IAAII,KAAK,IAAE,IAAX,EAAgB;QACZ,KAAKC,iBAAL;MACJ;IAGP,CAfG;;IAgBJC,MAAM,GAAE;MACJ,KAAKN,WAAL,GAAiB,IAAjB;IAGH,CApBG;;IAqBJ,MAAMK,iBAAN,GAAyB;MAErB,MAAME,SAAS,GAACC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAhB,CAFqB,CAGtB;;MACC,MAAMC,OAAM,GAAIF,YAAY,CAACC,OAAb,CAAqB,cAArB,CAAhB;MAEA,IAAIE,QAAO,GAAIC,IAAI,CAACC,SAAL,CAAe;QAACN,SAAS,EAAEA,SAAZ;QAAsBO,KAAK,EAAC,KAAKf;MAAjC,CAAf,CAAf;MAEA,IAAIgB,MAAK,GAAI;QACXC,OAAO,EAAE;UACP,gBAAgB;QADT;MADE,CAAb;MAMA,MAAMpB,KAAI,CACPqB,IADG,CACEP,OAAM,GAAI,qCADZ,EACkDC,QADlD,EAC4DI,MAD5D,EAEHG,IAFG,CAEE,MAAM;QAIV,KAAKC,eAAL,GAAqB,MAArB;QACA,KAAKC,gBAAL,GAAsB,2GAAtB;QACA,KAAKC,eAAL,GAAqB,CAAC;UAAEC,KAAK,EAAE;QAAT,CAAD,CAArB;QACA,KAAKrB,iBAAL,GAAwB,IAAxB;QAEA,KAAKsB,SAAL,GAAiB,KAAjB;MACH,CAZK,EAcHC,KAdG,CAcIC,KAAD,IAAW;QAEZ,IAAGA,KAAK,CAACC,QAAT,EAAkB;UACd,KAAKP,eAAL,GAAqB,MAArB;UACA,KAAKC,gBAAL,GAAsB,2GAAtB;UACA,KAAKC,eAAL,GAAqB,CAAC;YAAEC,KAAK,EAAE;UAAT,CAAD,CAArB;UACA,KAAKrB,iBAAL,GAAwB,IAAxB;QAGJ;;QAEA,KAAKsB,SAAL,GAAiB,KAAjB;MAEN,CA3BI,CAAN;IA8BJ;;EAjEI;AA3BG,CAAf","names":["InputText","Button","InlineMessage","Dialog","axios","components","data","userEmail","userEmailOK","displayInfoDialog","methods","passwordRecovery","AllOk","sendRecoveryEmail","typing","sessionId","localStorage","getItem","baseUrl","formData","JSON","stringify","email","config","headers","post","then","InfoModalHeader","InfoModalMessage","infoDialogStyle","width","isLoading","catch","error","response"],"sourceRoot":"","sources":["Q:\\Projects\\Transport-web-\\src\\components\\pages\\ForgotPassword.vue"],"sourcesContent":["<template>\r\n\r\n<top-bar\r\n    @emitSearch=\"emitedSearch\"\r\n    v-bind:show-search=\"showSearch\"\r\n    v-bind:menu-icon=\"iconCloseOpen2\"\r\n    background-style=\"rgb(255,255,255,0.6)\"\r\n    title-color=\"black\"\r\n    v-bind:title-text=\"MainTitleText\"\r\n  ></top-bar>\r\n\r\n<div class=\"container\">\r\n\r\n    <div class=\"row\">\r\n        <div class=\"col-md-12 text-center gap-2 gaptop-2\">\r\n            <h4>Forgot password :(</h4>\r\n        </div>\r\n      \r\n        <div class=\"col-md-12 text-center gap-2\">\r\n           \r\n            \r\n                <div class=\"flex flex-column gap-2\"> \r\n                    <label for=\"password\">Please enter your email</label>\r\n                    <InputText @input=\"typing\" type=\"text\" v-model=\"userEmail\" style=\"min-width:300px\"/>\r\n                    <p><InlineMessage v-if=\"!userEmailOK\">This field is required</InlineMessage></p>\r\n                </div>\r\n                \r\n           \r\n        </div>\r\n\r\n        <div class=\"col-md-12 text-center gap-2\">\r\n            <p><Button label=\"Password recovery\" @click=\"passwordRecovery\"/></p>\r\n        </div>\r\n        \r\n        <div class=\"col-md-12 text-center gap-2\">\r\n            <p><a href=\"/\">back to home page</a></p>\r\n        </div>\r\n    </div>\r\n\r\n</div>\r\n\r\n <!-- dialog info --> \r\n <Dialog v-model:visible=\"displayInfoDialog\" modal  :style=\"infoDialogStyle\" :breakpoints=\"{ '1199px': '75vw', '575px': '90vw' }\">\r\n    <template #header=\"\"> \r\n        <h4> {{ InfoModalHeader }}</h4>\r\n    </template>\r\n  \r\n            <span class=\"font-bold text-2xl block mb-2 mt-4\"></span>\r\n            <p class=\"mb-0\">{{InfoModalMessage }}</p>\r\n            <div class=\"flex text-end gap-2 mt-4\">\r\n                <Button label=\"Ok\" @click=\"displayInfoDialog=false\"></Button>\r\n              \r\n            </div>          \r\n</Dialog>\r\n\r\n\r\n</template>\r\n\r\n<script>\r\nimport InputText from 'primevue/inputtext';\r\nimport Button from 'primevue/button';\r\nimport InlineMessage from 'primevue/inlinemessage';\r\nimport Dialog from 'primevue/dialog';\r\n\r\nimport axios from \"axios\";\r\n\r\nexport default {\r\n   // props: [\"systemId\"],\r\n    components: {\r\n       // DataTable,\r\n       // Column,\r\n        InputText,\r\n        //Checkbox,\r\n        Button,\r\n       Dialog,\r\n       InlineMessage,\r\n      //  Calendar,\r\n        //InputNumber,\r\n        //TabView,\r\n        //TabPanel,\r\n     //   Dropdown\r\n        \r\n    \r\n  },\r\n  \r\n  data() {\r\n        return {\r\n            userEmail:'',\r\n            userEmailOK:true,\r\n            displayInfoDialog:false\r\n\r\n        }\r\n    },\r\n    methods:{\r\n        passwordRecovery(){\r\n                 var AllOk = true;\r\n\r\n              \r\n                if(this.userEmail == '' || this.userEmail == null){\r\n                    this.userEmailOK = false;\r\n                    AllOk = false;\r\n                }else{this.userEmailOK = true;}\r\n\r\n                if (AllOk==true){\r\n                    this.sendRecoveryEmail();\r\n                }\r\n\r\n\r\n        },\r\n        typing(){\r\n            this.userEmailOK=true;\r\n\r\n\r\n        },\r\n        async sendRecoveryEmail(){\r\n         \r\n            const sessionId=localStorage.getItem(\"token\");\r\n           // const sessionId='';\r\n            const baseUrl = localStorage.getItem(\"_rootRestUrl\");\r\n           \r\n            let formData = JSON.stringify({sessionId: sessionId,email:this.userEmail});\r\n       \r\n            let config = {\r\n              headers: {\r\n                \"Content-Type\": \"application/json\",\r\n            }};\r\n  \r\n            \r\n            await axios\r\n              .post(baseUrl + \"/api/v1/User/SendResetPasswordEmail\",formData, config )\r\n              .then(() => {\r\n                                \r\n                        \r\n                 \r\n                this.InfoModalHeader='Info';\r\n                this.InfoModalMessage='If your email is registered we will now send you a message with instruction how to recover your password.';\r\n                this.infoDialogStyle=[{ width: '40rem' }];\r\n                this.displayInfoDialog= true;\r\n\r\n                this.isLoading = false; \r\n            })\r\n              \r\n              .catch((error) => {\r\n            \r\n                    if(error.response){\r\n                        this.InfoModalHeader='Info';\r\n                        this.InfoModalMessage='If your email is registered we will now send you a message with instruction how to recover your password.';\r\n                        this.infoDialogStyle=[{ width: '40rem' }];\r\n                        this.displayInfoDialog= true;\r\n                       \r\n                    \r\n                    }   \r\n                   \r\n                    this.isLoading = false;   \r\n                   \r\n             });\r\n\r\n\r\n        }\r\n\r\n    }\r\n\r\n}\r\n\r\n\r\n</script>\r\n\r\n<style>\r\n@import \"datatables.net-dt\";\r\n@import \"primevue/resources/themes/bootstrap4-light-blue/theme.css\"; /*theme*/\r\n@import \"primevue/resources/primevue.min.css   \"; /*core css*/\r\n@import \"primeicons/primeicons.css   \"; /*icons*/\r\n\r\n\r\nlabel{display:block;font-size:14px}\r\n.gap-2{margin-bottom:1rem}\r\n.gaptop-2{margin-top:1rem}\r\n\r\n.p-dialog{max-height: 200px}\r\n\r\n\r\n</style>"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import \"core-js/modules/es.error.cause.js\";\nimport moment from \"moment\";\nexport default {\n  props: [\"projectKey\", \"projectTitle\", \"projectNumber\"],\n\n  data() {\n    return {\n      detailsAreVisible: false,\n      isLoading: false,\n      projects: []\n    };\n  },\n\n  methods: {\n    /// GET project list\n    async getProjectList() {\n      this.isLoading = true;\n\n      if (this.$store.getters.isAuthenticated) {\n        const token = localStorage.getItem('token'); //User token !!\n\n        const response = await fetch('https://www.it-b.hr/vue/project-list.php?auth=' + token, {\n          method: 'POST',\n          body: JSON.stringify({})\n        });\n        const responseData = await response.json();\n\n        if (!response.ok) {\n          // console.log(responseData);\n          const error = new Error(responseData.message || 'Failed to authenticate.');\n          throw error;\n        }\n\n        console.log(responseData);\n        this.isLoading = false;\n      }\n    },\n\n    ////\n    toggleDetails() {\n      this.detailsAreVisible = !this.detailsAreVisible; //  this.$emit('display-menu');\n    },\n\n    format_date(value) {\n      if (value) {\n        return moment(String(value)).format(\"DD/MM/YYYY\");\n      }\n    }\n\n  },\n  emits: [\"display-menu\"],\n\n  mounted() {\n    this.getProjectList();\n    this.$emit(\"show-searchbar\", true);\n    this.$emit(\"display-menu\");\n  }\n\n};","map":{"version":3,"mappings":";AAkGA,OAAOA,MAAP,MAAmB,QAAnB;AAEA,eAAe;EACbC,KAAK,EAAE,CAAC,YAAD,EAAe,cAAf,EAA+B,eAA/B,CADM;;EAGbC,IAAI,GAAG;IACL,OAAO;MACLC,iBAAiB,EAAE,KADd;MAELC,SAAS,EAAE,KAFN;MAGLC,QAAQ,EAAE;IAHL,CAAP;EAMD,CAVY;;EAWbC,OAAO,EAAE;IAGL;IACA,MAAOC,cAAP,GAAuB;MAEvB,KAAKH,SAAL,GAAiB,IAAjB;;MAEE,IAAG,KAAKI,MAAL,CAAYC,OAAZ,CAAoBC,eAAvB,EAAuC;QACvC,MAAMC,KAAI,GAAIC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAd,CADuC,CACM;;QAE3C,MAAMC,QAAO,GAAI,MAAMC,KAAK,CAAC,mDAAiDJ,KAAlD,EAAwD;UAC9EK,MAAM,EAAE,MADsE;UAE9EC,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe,EAAf;QAFwE,CAAxD,CAA5B;QASE,MAAMC,YAAW,GAAI,MAAMN,QAAQ,CAACO,IAAT,EAA3B;;QAEA,IAAG,CAACP,QAAQ,CAACQ,EAAb,EAAgB;UACZ;UACA,MAAMC,KAAI,GAAI,IAAIC,KAAJ,CAAUJ,YAAY,CAACK,OAAb,IAAwB,yBAAlC,CAAd;UACA,MAAMF,KAAN;QACJ;;QAEAG,OAAO,CAACC,GAAR,CAAYP,YAAZ;QACA,KAAKhB,SAAL,GAAiB,KAAjB;MAEJ;IACD,CAhCI;;IAiCL;IAKFwB,aAAa,GAAG;MACd,KAAKzB,iBAAL,GAAyB,CAAC,KAAKA,iBAA/B,CADc,CAEd;IACD,CAzCM;;IA0CP0B,WAAW,CAACC,KAAD,EAAQ;MACjB,IAAIA,KAAJ,EAAW;QACT,OAAO9B,MAAM,CAAC+B,MAAM,CAACD,KAAD,CAAP,CAAN,CAAsBE,MAAtB,CAA6B,YAA7B,CAAP;MACF;IACD;;EA9CM,CAXI;EA4DbC,KAAK,EAAE,CAAC,cAAD,CA5DM;;EA8DbC,OAAO,GAAG;IACR,KAAK3B,cAAL;IACA,KAAK4B,KAAL,CAAW,gBAAX,EAA6B,IAA7B;IACA,KAAKA,KAAL,CAAW,cAAX;EACD;;AAlEY,CAAf","names":["moment","props","data","detailsAreVisible","isLoading","projects","methods","getProjectList","$store","getters","isAuthenticated","token","localStorage","getItem","response","fetch","method","body","JSON","stringify","responseData","json","ok","error","Error","message","console","log","toggleDetails","format_date","value","String","format","emits","mounted","$emit"],"sourceRoot":"","sources":["Q:\\Projects\\DFM v2\\src\\components\\pages\\ProjectsCards.vue"],"sourcesContent":["<template>\r\n <base-dialog :show=\"!!error\" title=\"Error\"></base-dialog>\r\n  <base-dialog :show=\"isLoading\" title=\"Authenticating...\" fixed>\r\n    <base-spinner></base-spinner>\r\n  </base-dialog>\r\n\r\n\r\n  <div class=\"row\">\r\n    <div\r\n      v-for=\"project in projects\"\r\n      :key=\"project.KEY\"\r\n      class=\"col-sm-6 col-md-4 col-lg-3 col-xl2-2 col-xl3-2\"\r\n    >\r\n      <div class=\"card project-card\">\r\n        <div class=\"card-header project-card-header\">\r\n          <div class=\"projectCardsProjectNo\">{{ project.DFMONLINENUMBER }}</div>\r\n          <div class=\"projectCardsProjectTitle\">{{ project.TITLE }}</div>\r\n        </div>\r\n        <div class=\"card-body project-card-body\">\r\n          <div class=\"dropdown\">\r\n            <div\r\n              class=\"card-background-image\"\r\n              data-bs-toggle=\"dropdown\"\r\n              :style=\"{ backgroundImage: `url(${project.IMG})` }\"\r\n              @mouseenter=\"toggleDetails()\"\r\n              @mouseleave=\"toggleDetails()\"\r\n            >\r\n              <figcaption class=\"projectDetailsBlock\" v-if=\"detailsAreVisible\">\r\n                <div class=\"row\">\r\n                  <div class=\"col p-0a text-right\">Revision:</div>\r\n                  <div class=\"col p-0a text-left\">{{ project.REVISION }}</div>\r\n                </div>\r\n                <div class=\"row\">\r\n                  <div class=\"col p-0a text-right\">Publish date:</div>\r\n                  <div class=\"col p-0a text-left\">\r\n                    {{ format_date(project.PUBLISHDATE) }}\r\n                  </div>\r\n                </div>\r\n                <div class=\"row\">\r\n                  <div class=\"col p-0a text-right\">Expiry date:</div>\r\n                  <div class=\"col p-0a text-left\">\r\n                    {{ format_date(project.VALIDUNTIL) }}\r\n                  </div>\r\n                </div>\r\n                <div class=\"row\">\r\n                  <div class=\"col p-0a text-right\">Status:</div>\r\n                  <div class=\"col p-0a text-left\">{{ project.ACTIVE }}</div>\r\n                </div>\r\n                <div class=\"row\"><div class=\"col p-0a\"></div></div>\r\n                <div class=\"row\">\r\n                  <div class=\"col text-center\">\r\n                    Contractor: {{ project.CONTRACTOR }}\r\n                  </div>\r\n                </div>\r\n              </figcaption>\r\n            </div>\r\n\r\n            <div\r\n              class=\"selector dropdown-menu dropdown-menu-selector\"\r\n              aria-labelledby=\"dropdownMenuLink\"\r\n            >\r\n              <a\r\n                v-if=\"project.CDE\"\r\n                class=\"dropdown-item\"\r\n                data-bs-toggle=\"modal\"\r\n                data-bs-target=\"#aboutModal\"\r\n                href=\"\"\r\n                target=\"_blank\"\r\n                ><i class=\"fa-solid fa-folder\"></i> CDE</a\r\n              >\r\n\r\n              <a v-if=\"project.QMS\" class=\"dropdown-item\" href=\"\"\r\n                ><i class=\"fa-solid fa-file\"></i> QMS</a\r\n              >\r\n\r\n              <a v-if=\"project.SAFETY\" class=\"dropdown-item\" href=\"\"\r\n                ><i class=\"fa-solid fa-shield\"></i> Safetyfile\r\n                </a\r\n              >\r\n            </div>\r\n          </div>\r\n\r\n          <!--  <div class=\"row\">\r\n           <div class=\"col-md-4\" v-if=\"project.CDE\">CDE</div>\r\n           <div class=\"col-md-4\" v-if=\"project.QMS\">QMS</div>\r\n           <div class=\"col-md-4\" v-if=\"project.SAFETY\">Safetyfile</div>\r\n        </div> -->\r\n\r\n          <div class=\"mt-2 text-end\" style=\"display: block\">\r\n            <i class=\"icon-cog iconProjectSetting\" title=\"Project settings\"></i>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport moment from \"moment\";\r\n\r\nexport default {\r\n  props: [\"projectKey\", \"projectTitle\", \"projectNumber\"],\r\n\r\n  data() {\r\n    return {\r\n      detailsAreVisible: false,\r\n      isLoading: false,\r\n      projects: [],\r\n    };\r\n \r\n  },\r\n  methods: {\r\n\r\n\r\n      /// GET project list\r\n      async  getProjectList(){\r\n\r\n      this.isLoading = true;\r\n\r\n        if(this.$store.getters.isAuthenticated){\r\n        const token = localStorage.getItem('token'); //User token !!\r\n\r\n          const response = await fetch('https://www.it-b.hr/vue/project-list.php?auth='+token,{\r\n                method: 'POST',\r\n                body: JSON.stringify({\r\n                  \r\n                })\r\n                \r\n    \r\n            });\r\n                  \r\n            const responseData = await response.json();\r\n    \r\n            if(!response.ok){\r\n                // console.log(responseData);\r\n                const error = new Error(responseData.message || 'Failed to authenticate.');\r\n                throw error;\r\n            }\r\n\r\n            console.log(responseData);\r\n            this.isLoading = false;\r\n\r\n        }\r\n      },\r\n      ////\r\n\r\n\r\n\r\n\r\n    toggleDetails() {\r\n      this.detailsAreVisible = !this.detailsAreVisible;\r\n      //  this.$emit('display-menu');\r\n    },\r\n    format_date(value) {\r\n      if (value) {\r\n        return moment(String(value)).format(\"DD/MM/YYYY\");\r\n      }\r\n    },\r\n  },\r\n\r\n  emits: [\"display-menu\"],\r\n\r\n  mounted() {\r\n    this.getProjectList();\r\n    this.$emit(\"show-searchbar\", true);\r\n    this.$emit(\"display-menu\");\r\n  },\r\n};\r\n</script>\r\n\r\n\r\n\r\n\r\n<style>\r\n.dropdown-menu-selector {\r\n  /* top: -192px !important;\r\n   left:10px !important;*/\r\n\r\n   top: -202px !important;\r\n   left:0px !important;/*   width:calc(100% - 20px);\r\n   height:calc(100% - 20px);*/\r\n   width:100%;\r\n   height:100%;\r\n\r\n  background: rgb(0,0,0,0.5);\r\n   box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);\r\n   backdrop-filter: blur(2px);\r\n  -webkit-backdrop-filter: blur(2px);\r\n}\r\n.dropdown-menu-selector a{color:white !important}\r\n.dropdown-menu-selector a:hover{background: #c2c2c2;color:black !important}\r\n.dropdown-item i {width:20px}\r\n\r\n.card-background-image {\r\n  background-repeat: no-repeat;\r\n  background-size: cover;\r\n  background-position: center;\r\n  height: 175px;\r\n  min-height: 200px;\r\n}\r\n\r\n.project-card-body {\r\n  padding: 3px;\r\n}\r\n.project-card {\r\n  border-radius: 0 !important;\r\n  margin-bottom: 10px;\r\n}\r\n.project-card-header {\r\n  padding: 0.25rem !important;\r\n  background: white;\r\n  height: 72px;\r\n}\r\n.projectCardsProjectNo {\r\n  font-size: 0.8rem;\r\n  font-weight: bolder;\r\n}\r\n.projectCardsProjectTitle {\r\n  font-size: 1rem;\r\n  font-weight: 300;\r\n  color: #222;\r\n}\r\n.projectDetailsBlock {\r\n  font-size: 0.8rem;\r\n  padding: 5px;\r\n  background-color: rgb(66, 66, 66, 0);\r\n  height: 100%;\r\n  color: white;\r\n  opacity: 0;\r\n  cursor: pointer;\r\n}\r\n.projectDetailsBlock:hover {\r\n  background-color: rgb(66, 66, 66, 0.5);\r\n  -webkit-transition: background-color 200ms linear;\r\n  -ms-transition: background-color 200ms linear;\r\n  transition: background-color 200ms linear;\r\n\r\n  opacity: 1;\r\n  -webkit-transition: opacity 200ms linear;\r\n  -ms-transition: opacity 200ms linear;\r\n  transition: opacity r 200ms linear;\r\n}\r\n\r\n@media (min-width: 1200px) {\r\n  .col-xl2-2 {\r\n    -ms-flex: 0 0 20%;\r\n    flex: 0 0 20%;\r\n    max-width: 20%;\r\n  }\r\n}\r\n\r\n/*@media (min-width: 1500px){\r\n  .col-xl3-2 {\r\n    -ms-flex: 0 0 16.666666% ;\r\n    flex: 0 0 16.666666%;\r\n    max-width: 16.666666%;\r\n  }\r\n}\r\n\r\n@media (min-width: 1800px){\r\n  .col-xl3-2 {\r\n    -ms-flex: 0 0 14.28571428571429% ;\r\n    flex: 0 0 14.28571428571429%;\r\n    max-width: 14.28571428571429%;\r\n  }\r\n}*/\r\n</style>\r\n\r\n\r\n"]},"metadata":{},"sourceType":"module"}
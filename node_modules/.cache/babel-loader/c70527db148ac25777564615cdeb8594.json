{"ast":null,"code":"/*\r\n//visual settings:\r\nvar onLoadSidebarWidth = 200;\r\nvar breakPointForSmallScreen = 750;\r\nvar minWSidebarWidth = 50;\r\n\r\nvar breakPointHideSidebarDescriptions = 150;\r\nvar maxPercentageSidebarWidth = 30;\r\nvar onLoadContentWidth = window.innerWidth - onLoadSidebarWidth;\r\n*/\nimport moment from \"moment\";\nexport default {\n  props: [\"emitSearch\"],\n  components: {},\n\n  data() {\n    return {\n      deadline: '2023-12-25 00:00:00',\n      timerExtend: '',\n      showCountDownDialog: false,\n      isLoading: false,\n      error: false,\n      TopBackgroundStyle: \"\",\n      showSearch: false,\n      MainTitleText: \"\",\n      //this._rootAppTitle,\n      showMenu: true,\n      userType: '',\n      //what app is it (for differnet links in left sidebar menu)\n      isCDE: false,\n      isQMS: false,\n      isSafetyfile: false,\n      // for visual settings:\n      padding0: \"12px\",\n      menuMinSize: 50,\n      breakPointHideSidebarDescriptions: 198,\n      // when to hide menu description and show only icon\n      dividerPosition: 210,\n      //px default width of the left sidebar!\n      contentWidth: window.innerWidth,\n      //px width of the main content\n      isActive: true,\n      //in start visible sidebar icon descriptions\n      isCentered: false,\n      //sidebar icons on left at page load\n      iconCloseOpen: \"&#9776;\",\n      iconCloseOpen2: \"&#9776;\",\n      timeout: ''\n    };\n  },\n\n  methods: {\n    /// ------------------------------\n    /// resizable left sidebar!\n    handleDragging(e) {\n      const percentage = e.pageX / window.innerWidth * 100;\n\n      if (localStorage.getItem(\"dividerPosition\")) {\n        this.dividerPosition = localStorage.getItem(\"dividerPosition\");\n      }\n\n      if (e.pageX + 1 > this.menuMinSize && percentage <= 30) {\n        //only resizable if width of the left sidebar is in this percentage range\n        this.dividerPosition = percentage / 100 * window.innerWidth;\n      }\n\n      this.contentWidth = window.innerWidth; // on small screens hide sidebar menu descriptions\n\n      if (e.pageX < this.breakPointHideSidebarDescriptions) {\n        this.isActive = false;\n        this.iconCloseOpen = \"&#9776;\"; //    this.isCentered = true;\n      } else {\n        this.isActive = true;\n        this.iconCloseOpen = \"&#9776;\";\n        this.isCentered = false;\n      }\n\n      this.emitter.emit(\"newDimensions\", this.dividerPosition);\n      localStorage.setItem(\"dividerPosition\", this.dividerPosition); // -------------------\n    },\n\n    startDragging() {\n      document.addEventListener(\"mousemove\", this.handleDragging);\n    },\n\n    endDragging() {\n      document.removeEventListener(\"mousemove\", this.handleDragging);\n    },\n\n    setToFullScreenWidth() {\n      this.contentWidth = window.innerWidth; // read if we have position set\n\n      var isSideBarOpen = localStorage.getItem(\"isSideBarOpen\");\n\n      if (localStorage.getItem(\"dividerPosition\")) {\n        this.dividerPosition = localStorage.getItem(\"dividerPosition\");\n      } else {\n        localStorage.setItem(\"dividerPosition\", 200);\n        this.dividerPosition = 200;\n      }\n\n      if (localStorage.getItem(\"isSideBarOpen\")) {\n        //there is something in local storage for open/close menu\n        if (isSideBarOpen === \"true\") {\n          this.iconCloseOpen = \"&#9776;\";\n          this.isActive = false;\n          this.sidebarColapseOnLoad();\n        } else {\n          this.iconCloseOpen = \"&times;\";\n          this.isActive = false;\n          this.sidebarColapseOnLoad();\n        }\n      } else {\n        //empty localstorage fro menu open\n        if (this.iconCloseOpen === \"&#9776;\") {\n          localStorage.setItem(\"isSideBarOpen\", true);\n          this.sidebarColapseOnLoad();\n        } else {\n          localStorage.setItem(\"isSideBarOpen\", false);\n          this.sidebarColapseOnLoad();\n        }\n      }\n    },\n\n    getDimensions() {\n      //on window resize\n      if (window.innerWidth > 442) {\n        this.dividerPosition = 200;\n        this.contentWidth = window.innerWidth;\n        this.isActive = true;\n        this.iconCloseOpen = \"&times;\";\n        this.isCentered = false;\n      } else {\n        this.dividerPosition = this.menuMinSize;\n        this.isActive = false;\n        this.iconCloseOpen = \"&#9776;\"; //  this.isCentered = true;\n      }\n\n      if (window.innerWidth < 500) {\n        this.dividerPosition = this.menuMinSize;\n        this.contentWidth = window.innerWidth;\n        this.isActive = false;\n        this.iconCloseOpen = \"&#9776;\"; //   this.isCentered = true;\n      }\n    },\n\n    sidebarColapse() {\n      if (this.iconCloseOpen === \"&#9776;\") {\n        //we want to open it\n        if (localStorage.getItem(\"dividerPosition\")) {\n          this.dividerPosition = localStorage.getItem(\"dividerPosition\");\n        } else {\n          this.dividerPosition = 200;\n        }\n\n        if (this.dividerPosition < 200) {\n          this.dividerPosition = 200;\n        }\n\n        this.contentWidth = window.innerWidth;\n        this.isActive = true;\n        this.isCentered = false;\n        this.iconCloseOpen = \"&times;\";\n        localStorage.setItem(\"isSideBarOpen\", true);\n      } else {\n        //we wnat to close it\n        this.dividerPosition = this.menuMinSize;\n        this.contentWidth = window.innerWidth;\n        this.isActive = false; //     this.isCentered = true;\n\n        this.iconCloseOpen = \"&#9776;\";\n        localStorage.setItem(\"isSideBarOpen\", false);\n      }\n\n      this.emitter.emit(\"newDimensions\", this.dividerPosition);\n      localStorage.setItem(\"dividerPosition\", this.dividerPosition);\n    },\n\n    sidebarColapseOnLoad() {\n      if (this.iconCloseOpen === \"&#9776;\") {\n        //we want to open it\n        if (localStorage.getItem(\"dividerPosition\")) {\n          this.dividerPosition = localStorage.getItem(\"dividerPosition\");\n        } else {\n          this.dividerPosition = 200;\n        }\n        /*if( this.dividerPosition < 200){\r\n          this.dividerPosition = 200;\r\n        }*/\n\n\n        this.contentWidth = window.innerWidth;\n        this.isActive = true;\n        this.isCentered = false;\n        this.iconCloseOpen = \"&times;\";\n        localStorage.setItem(\"isSideBarOpen\", true);\n      } else {\n        //we wnat to close it\n        this.dividerPosition = this.menuMinSize;\n        this.contentWidth = window.innerWidth;\n        this.isActive = false; //  this.isCentered = true;\n\n        this.iconCloseOpen = \"&#9776;\";\n        localStorage.setItem(\"isSideBarOpen\", false);\n      }\n\n      if (this.dividerPosition < this.breakPointHideSidebarDescriptions) {\n        this.isActive = false;\n        this.iconCloseOpen = \"&#9776;\"; //     this.isCentered = true;\n      }\n    },\n\n    // ----------- end resizable left menu -------\n    manualLogout() {\n      this.$store.dispatch(\"logout\");\n      this.showMenu = false;\n      this.$router.replace(\"/\");\n    },\n\n    showSeachbar(what) {\n      this.showSearch = what;\n    },\n\n    appType(what) {\n      this.isCDE = false;\n      this.isQMS = false;\n      this.isSafetyfile = false;\n\n      if (what == \"CDE\") {\n        this.isCDE = true;\n      }\n\n      if (what == \"QMS\") {\n        this.isQMS = true;\n      }\n\n      if (what == \"SafetyFile\") {\n        this.isSafetyfile = true;\n      }\n    },\n\n    showExtendPopupDialog() {\n      this.deadline = moment(DeadLine).format('YYYY-MM-DD HH:mm:ss');\n      this._whenSessionExpire = this.deadline; //create timer for extend session\n      //auto logout if token expires\n      //when session expire popup will be shown:\n\n      var expiresIn = localStorage.getItem(\"expiresIn\");\n      expiresIn = expiresIn - 1000 * 60 * 2; // 2 minutes before session expire on the server just in case :) \n\n      expiresIn = 5000;\n      clearTimeout(this.timeout);\n      this.timeout = setTimeout(() => {\n        this.showCountDownDialog = true;\n      }, expiresIn);\n    },\n\n    sessionExpired() {\n      this.$store.dispatch('logout');\n      document.location = '/';\n    },\n\n    closeTimeDialog() {\n      this.showCountDownDialog = false;\n    },\n\n    emitedSearch() {}\n\n  },\n\n  // emits: [\"emitSearch\"],\n  mounted() {\n    //first read when session expire\n    const expiresIn = localStorage.getItem(\"expiresIn\");\n    const NowTime = moment();\n    const DeadLine = NowTime * 1 + expiresIn * 1; // const DeadLine = (NowTime*1) + 20000; // test 20sec\n\n    this.deadline = moment(DeadLine).format('YYYY-MM-DD HH:mm:ss');\n    this._whenSessionExpire = this.deadline; //what app, dieffent sidebar manu links\n\n    this.userType = this.$store.getters.getUserType.toUpperCase();\n    window.addEventListener(\"resize\", this.getDimensions);\n    this.showExtendPopupDialog();\n  },\n\n  unmounted() {\n    window.removeEventListener(\"resize\", this.getDimensions);\n  },\n\n  created() {\n    const appType = localStorage.getItem(\"appType\");\n\n    if (appType == 'CDE') {\n      this.isCDE = true;\n    }\n\n    this.setToFullScreenWidth(); //if user is no loged in then redirect to login page:\n\n    if (!this.$store.getters.isAuthenticated) {\n      this.$router.replace(\"/\");\n    } //check if user is loggen in\n\n\n    this.$store.dispatch(\"autoLogin\"); //on create (on load)\n    // this.projects = projectsObject; // parsed json\n    //hidden sidebar on load if small screen\n\n    if (window.innerWidth < 750) {// this.dividerPosition = this.menuMinSize;\n    }\n    /*if (window.innerWidth < 750) {\r\n      this.isActive = false;\r\n      this.iconCloseOpen = \"&#9776;\";\r\n      this.isCentered = true;\r\n    } else {\r\n      this.isActive = true;\r\n      this.iconCloseOpen = \"&times;\";\r\n      this.isCentered = false;\r\n    }*/\n\n  }\n\n};","map":{"version":3,"mappings":"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","names":["moment","props","components","data","deadline","timerExtend","showCountDownDialog","isLoading","error","TopBackgroundStyle","showSearch","MainTitleText","showMenu","userType","isCDE","isQMS","isSafetyfile","padding0","menuMinSize","breakPointHideSidebarDescriptions","dividerPosition","contentWidth","window","innerWidth","isActive","isCentered","iconCloseOpen","iconCloseOpen2","timeout","methods","handleDragging","e","percentage","pageX","localStorage","getItem","emitter","emit","setItem","startDragging","document","addEventListener","endDragging","removeEventListener","setToFullScreenWidth","isSideBarOpen","sidebarColapseOnLoad","getDimensions","sidebarColapse","manualLogout","$store","dispatch","$router","replace","showSeachbar","what","appType","showExtendPopupDialog","DeadLine","format","_whenSessionExpire","expiresIn","clearTimeout","setTimeout","sessionExpired","location","closeTimeDialog","emitedSearch","mounted","NowTime","getters","getUserType","toUpperCase","unmounted","created","isAuthenticated"],"sourceRoot":"","sources":["Q:\\Projects\\Transport-web-\\src\\components\\PagesHolder.vue"],"sourcesContent":["<template>\r\n\r\n<base-dialog :show=\"!!error\" title=\"Error\"></base-dialog>\r\n  <base-dialog :show=\"isLoading\" title=\"Authenticating...\" fixed>\r\n    <base-spinner></base-spinner>\r\n  </base-dialog>\r\n\r\n\r\n  <base-dialog  :show=\"showCountDownDialog\" fixed>\r\n    <div id=\"timerDialog\"  class=\"text-center\">\r\n        <h5>Your session will expire soon!</h5>\r\n        <vue3-flip-countdown :showDays=\"false\" :showHours=\"false\" :deadline=\"deadline\" @timeElapsed=\"sessionExpired()\"/>  \r\n        <button class=\"btn btn-primary\" id=\"extendSessionButton\" @click=\"closeTimeDialog\">Keep alive</button>\r\n    </div> \r\n  </base-dialog>      \r\n\r\n    \r\n\r\n\r\n  <top-bar\r\n    @emitSearch=\"emitedSearch\"\r\n    v-bind:show-search=\"showSearch\"\r\n    v-bind:menu-icon=\"iconCloseOpen2\"\r\n    background-style=\"rgb(255,255,255,0.6)\"\r\n    title-color=\"black\"\r\n    v-bind:title-text=\"MainTitleText\"\r\n  ></top-bar>\r\n\r\n  <div class=\"wrapper\" @mouseup=\"endDragging()\" style=\"position: relative\">\r\n    <div\r\n      id=\"sidebar\"\r\n      v-if=\"showMenu\"\r\n      class=\"sidebar table-dark position-relative\"\r\n      :style=\"{\r\n        width: `${dividerPosition}px`,\r\n        minWidth: `${dividerPosition}px`,\r\n      }\"\r\n    >\r\n      <div class=\"sidebarTopMenu\" v-bind:class=\"{ textcenter: isCentered }\">\r\n        <menu-link\r\n          atitle=\"Trips list\"\r\n          link=\"/pages/trips\"\r\n          icon=\"fa-solid fa-list\"\r\n          iconsize=\"21\"\r\n          :isActive=\"isActive\"\r\n        ></menu-link>\r\n       \r\n        <menu-link\r\n          v-if=\"userType=='ADMIN'\"\r\n          atitle=\"Manage users\"\r\n          link=\"/pages/manageUsers\"\r\n          icon=\"fa-solid fa-users\"\r\n          iconsize=\"17\"\r\n          :isActive=\"isActive\"\r\n        ></menu-link>\r\n\r\n        <sidebar-cde :isActive=\"isActive\" v-if=\"isCDE\" ></sidebar-cde>\r\n        \r\n      </div>\r\n\r\n     <!--<div class=\"sidebarBottomMenu\" v-bind:class=\"{ textcenter: isCentered }\">\r\n        <menu-linkdirect\r\n          atitle=\"Support\"\r\n          :link=\"_rootlinkToHelpFile\"\r\n          icon=\"fa-solid fa-circle-question\"\r\n          :isActive=\"isActive\"\r\n        ></menu-linkdirect>\r\n      </div>-->\r\n\r\n\r\n    </div>\r\n\r\n    <div\r\n      id=\"divider\"\r\n      v-if=\"showMenu\"\r\n      class=\"divider\"\r\n      :style=\"{ left: `${dividerPosition}px` }\"\r\n      @mousedown=\"startDragging()\"\r\n    ></div>\r\n\r\n    <div\r\n      id=\"content\"\r\n      class=\"content\"\r\n      :style=\"{\r\n        paddingLeft: `${dividerPosition}px`,\r\n        width: `${contentWidth}px`,\r\n      }\"\r\n    >\r\n      <section>\r\n        <div class=\"container-fluid\" :style=\"{ padding: `${this.padding0}` }\">\r\n          \r\n          \r\n          <router-view  @extend-session=\"showExtendPopupDialog()\" ></router-view>\r\n          \r\n         \r\n\r\n\r\n        </div>\r\n      </section>\r\n    </div>\r\n\r\n\r\n  </div>\r\n\r\n\r\n\r\n</template>\r\n\r\n\r\n\r\n\r\n<script>\r\n/*\r\n//visual settings:\r\nvar onLoadSidebarWidth = 200;\r\nvar breakPointForSmallScreen = 750;\r\nvar minWSidebarWidth = 50;\r\n\r\nvar breakPointHideSidebarDescriptions = 150;\r\nvar maxPercentageSidebarWidth = 30;\r\nvar onLoadContentWidth = window.innerWidth - onLoadSidebarWidth;\r\n*/\r\nimport moment from \"moment\";\r\n\r\nexport default {\r\n  props: [\"emitSearch\"],\r\n  components: {\r\n    \r\n   \r\n  },\r\n  data() {\r\n    return {\r\n      deadline:'2023-12-25 00:00:00',\r\n      timerExtend:'',\r\n      showCountDownDialog:false,\r\n      isLoading:false,\r\n      error:false,\r\n      TopBackgroundStyle: \"\",\r\n      showSearch: false,\r\n      MainTitleText: \"\", //this._rootAppTitle,\r\n      showMenu: true,\r\n    \r\n      userType: '',\r\n      //what app is it (for differnet links in left sidebar menu)\r\n      isCDE: false,\r\n      isQMS: false,\r\n      isSafetyfile: false,\r\n\r\n      // for visual settings:\r\n      padding0: \"12px\",\r\n      menuMinSize: 50,\r\n      breakPointHideSidebarDescriptions: 198, // when to hide menu description and show only icon\r\n      dividerPosition: 210, //px default width of the left sidebar!\r\n      contentWidth: window.innerWidth, //px width of the main content\r\n      isActive: true, //in start visible sidebar icon descriptions\r\n      isCentered: false, //sidebar icons on left at page load\r\n      iconCloseOpen: \"&#9776;\",\r\n      iconCloseOpen2: \"&#9776;\",\r\n      timeout:'',\r\n    };\r\n  },\r\n\r\n  methods: {\r\n    /// ------------------------------\r\n    /// resizable left sidebar!\r\n    handleDragging(e) {\r\n      const percentage = (e.pageX / window.innerWidth) * 100;\r\n\r\n      if (localStorage.getItem(\"dividerPosition\")) {\r\n        this.dividerPosition = localStorage.getItem(\"dividerPosition\");\r\n      }\r\n\r\n      if (e.pageX + 1 > this.menuMinSize && percentage <= 30) {\r\n        //only resizable if width of the left sidebar is in this percentage range\r\n        this.dividerPosition = (percentage / 100) * window.innerWidth;\r\n      }\r\n      this.contentWidth = window.innerWidth;\r\n\r\n      // on small screens hide sidebar menu descriptions\r\n      if (e.pageX < this.breakPointHideSidebarDescriptions) {\r\n        this.isActive = false;\r\n        this.iconCloseOpen = \"&#9776;\";\r\n        //    this.isCentered = true;\r\n      } else {\r\n        this.isActive = true;\r\n        this.iconCloseOpen = \"&#9776;\";\r\n        this.isCentered = false;\r\n      }\r\n      this.emitter.emit(\"newDimensions\", this.dividerPosition);\r\n\r\n      localStorage.setItem(\"dividerPosition\", this.dividerPosition);\r\n\r\n      // -------------------\r\n    },\r\n    startDragging() {\r\n      document.addEventListener(\"mousemove\", this.handleDragging);\r\n    },\r\n    endDragging() {\r\n      document.removeEventListener(\"mousemove\", this.handleDragging);\r\n    },\r\n\r\n    setToFullScreenWidth() {\r\n      this.contentWidth = window.innerWidth;\r\n\r\n      // read if we have position set\r\n      var isSideBarOpen = localStorage.getItem(\"isSideBarOpen\");\r\n\r\n      if (localStorage.getItem(\"dividerPosition\")) {\r\n        this.dividerPosition = localStorage.getItem(\"dividerPosition\");\r\n      } else {\r\n        localStorage.setItem(\"dividerPosition\", 200);\r\n        this.dividerPosition = 200;\r\n      }\r\n\r\n      if (localStorage.getItem(\"isSideBarOpen\")) {\r\n        //there is something in local storage for open/close menu\r\n        if (isSideBarOpen === \"true\") {\r\n          this.iconCloseOpen = \"&#9776;\";\r\n          this.isActive = false;\r\n          this.sidebarColapseOnLoad();\r\n        } else {\r\n          this.iconCloseOpen = \"&times;\";\r\n          this.isActive = false;\r\n          this.sidebarColapseOnLoad();\r\n        }\r\n      } else {\r\n        //empty localstorage fro menu open\r\n        if (this.iconCloseOpen === \"&#9776;\") {\r\n          localStorage.setItem(\"isSideBarOpen\", true);\r\n\r\n          this.sidebarColapseOnLoad();\r\n        } else {\r\n          localStorage.setItem(\"isSideBarOpen\", false);\r\n\r\n          this.sidebarColapseOnLoad();\r\n        }\r\n      }\r\n    },\r\n\r\n    getDimensions() {\r\n      //on window resize\r\n\r\n      if (window.innerWidth > 442) {\r\n        this.dividerPosition = 200;\r\n        this.contentWidth = window.innerWidth;\r\n        this.isActive = true;\r\n        this.iconCloseOpen = \"&times;\";\r\n        this.isCentered = false;\r\n       \r\n      } else {\r\n        this.dividerPosition = this.menuMinSize;\r\n        this.isActive = false;\r\n        this.iconCloseOpen = \"&#9776;\";\r\n      \r\n      \r\n        //  this.isCentered = true;\r\n      }\r\n\r\n      if (window.innerWidth < 500) {\r\n        this.dividerPosition = this.menuMinSize;\r\n        this.contentWidth = window.innerWidth;\r\n        this.isActive = false;\r\n        this.iconCloseOpen = \"&#9776;\";\r\n        //   this.isCentered = true;\r\n      }\r\n    },\r\n    sidebarColapse() {\r\n      if (this.iconCloseOpen === \"&#9776;\") {\r\n        //we want to open it\r\n\r\n        if (localStorage.getItem(\"dividerPosition\")) {\r\n          this.dividerPosition = localStorage.getItem(\"dividerPosition\");\r\n        } else {\r\n          this.dividerPosition = 200;\r\n        }\r\n\r\n        if (this.dividerPosition < 200) {\r\n          this.dividerPosition = 200;\r\n        }\r\n\r\n        this.contentWidth = window.innerWidth;\r\n        this.isActive = true;\r\n        this.isCentered = false;\r\n        this.iconCloseOpen = \"&times;\";\r\n        localStorage.setItem(\"isSideBarOpen\", true);\r\n      } else {\r\n        //we wnat to close it\r\n        this.dividerPosition = this.menuMinSize;\r\n        this.contentWidth = window.innerWidth;\r\n        this.isActive = false;\r\n        //     this.isCentered = true;\r\n        this.iconCloseOpen = \"&#9776;\";\r\n        localStorage.setItem(\"isSideBarOpen\", false);\r\n      }\r\n       \r\n       \r\n      this.emitter.emit(\"newDimensions\", this.dividerPosition);\r\n\r\n       localStorage.setItem(\"dividerPosition\", this.dividerPosition);\r\n    },\r\n\r\n    sidebarColapseOnLoad() {\r\n      if (this.iconCloseOpen === \"&#9776;\") {\r\n        //we want to open it\r\n\r\n        if (localStorage.getItem(\"dividerPosition\")) {\r\n          this.dividerPosition = localStorage.getItem(\"dividerPosition\");\r\n        } else {\r\n          this.dividerPosition = 200;\r\n        }\r\n\r\n        /*if( this.dividerPosition < 200){\r\n          this.dividerPosition = 200;\r\n        }*/\r\n\r\n        this.contentWidth = window.innerWidth;\r\n        this.isActive = true;\r\n        this.isCentered = false;\r\n        this.iconCloseOpen = \"&times;\";\r\n        localStorage.setItem(\"isSideBarOpen\", true);\r\n      } else {\r\n        //we wnat to close it\r\n        this.dividerPosition = this.menuMinSize;\r\n        this.contentWidth = window.innerWidth;\r\n        this.isActive = false;\r\n        //  this.isCentered = true;\r\n        this.iconCloseOpen = \"&#9776;\";\r\n        localStorage.setItem(\"isSideBarOpen\", false);\r\n      }\r\n\r\n      if (this.dividerPosition < this.breakPointHideSidebarDescriptions) {\r\n        this.isActive = false;\r\n        this.iconCloseOpen = \"&#9776;\";\r\n        //     this.isCentered = true;\r\n      }\r\n    },\r\n\r\n    // ----------- end resizable left menu -------\r\n    manualLogout() {\r\n      this.$store.dispatch(\"logout\");\r\n      this.showMenu = false;\r\n      this.$router.replace(\"/\");\r\n    },\r\n\r\n    showSeachbar(what) {\r\n      this.showSearch = what;\r\n    },\r\n\r\n    appType(what) {\r\n     this.isCDE = false;\r\n     this.isQMS = false;\r\n     this.isSafetyfile = false;\r\n    \r\n    if (what == \"CDE\") {\r\n        this.isCDE = true;\r\n      }\r\n      if (what == \"QMS\") {\r\n        this.isQMS = true;\r\n      }\r\n      if (what == \"SafetyFile\") {\r\n        this.isSafetyfile = true;\r\n      }\r\n    },\r\n\r\n    showExtendPopupDialog(){\r\n\r\n      this.deadline = (moment(DeadLine).format('YYYY-MM-DD HH:mm:ss'));\r\n      this._whenSessionExpire = this.deadline;\r\n\r\n\r\n     //create timer for extend session\r\n    //auto logout if token expires\r\n    //when session expire popup will be shown:\r\n    var expiresIn = localStorage.getItem(\"expiresIn\");\r\n   \r\n   \r\n    expiresIn = expiresIn - ((1000*60)*2); // 2 minutes before session expire on the server just in case :) \r\n    expiresIn = 5000;\r\n    \r\n   \r\n    clearTimeout(this.timeout);\r\n\r\n     this.timeout = setTimeout(() => {\r\n      this.showCountDownDialog = true;\r\n      }, expiresIn);\r\n      \r\n     \r\n    },\r\n\r\n    sessionExpired(){\r\n      \r\n       this.$store.dispatch('logout');\r\n       document.location = '/';\r\n       \r\n     },\r\n\r\n     closeTimeDialog(){\r\n      this.showCountDownDialog=false;\r\n\r\n     },\r\n\r\n    emitedSearch() {},\r\n  },\r\n // emits: [\"emitSearch\"],\r\n\r\n  mounted() {\r\n\r\n    //first read when session expire\r\n    const expiresIn = localStorage.getItem(\"expiresIn\");\r\n    const NowTime = moment();\r\n    const DeadLine = (NowTime*1) + (expiresIn*1);\r\n   // const DeadLine = (NowTime*1) + 20000; // test 20sec\r\n    \r\n    this.deadline = (moment(DeadLine).format('YYYY-MM-DD HH:mm:ss'));\r\n    this._whenSessionExpire = this.deadline;\r\n\r\n    //what app, dieffent sidebar manu links\r\n    this.userType = (this.$store.getters.getUserType).toUpperCase();\r\n   \r\n    window.addEventListener(\"resize\", this.getDimensions);\r\n\r\n    this.showExtendPopupDialog();\r\n\r\n  },\r\n  unmounted() {\r\n    window.removeEventListener(\"resize\", this.getDimensions);\r\n  },\r\n\r\n  created() {\r\n  \r\n    const appType =  localStorage.getItem(\"appType\");\r\n    if(appType=='CDE'){\r\n      this.isCDE = true;\r\n    }\r\n\r\n\r\n    this.setToFullScreenWidth();\r\n\r\n    //if user is no loged in then redirect to login page:\r\n    if (!this.$store.getters.isAuthenticated) {\r\n      this.$router.replace(\"/\");\r\n    }\r\n\r\n    //check if user is loggen in\r\n    this.$store.dispatch(\"autoLogin\");\r\n\r\n    //on create (on load)\r\n    // this.projects = projectsObject; // parsed json\r\n\r\n    //hidden sidebar on load if small screen\r\n    if (window.innerWidth < 750) {\r\n      // this.dividerPosition = this.menuMinSize;\r\n    }\r\n\r\n    /*if (window.innerWidth < 750) {\r\n      this.isActive = false;\r\n      this.iconCloseOpen = \"&#9776;\";\r\n      this.isCentered = true;\r\n    } else {\r\n      this.isActive = true;\r\n      this.iconCloseOpen = \"&times;\";\r\n      this.isCentered = false;\r\n    }*/\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n@import \"primevue/resources/themes/bootstrap4-light-blue/theme.css\"; /*theme*/\r\n@import \"primevue/resources/primevue.min.css   \"; /*core css*/\r\n@import \"primeicons/primeicons.css   \"; /*icons*/\r\n\r\n\r\na.router-link-active {\r\n  background: #730e27;\r\n  color: white !important;\r\n}\r\na.router-link-active:hover {\r\n  background: #730e27;\r\n  color: white !important;\r\n}\r\n\r\n.sidebar {\r\n  position: fixed !important;\r\n}\r\n.divider {\r\n  position: fixed !important;\r\n}\r\n\r\n.sidebar {\r\n  background: #f0f0f0;\r\n  font-size: 0.92rem;\r\n  min-width: 32px;\r\n  position: fixed;\r\n  height: calc(100vh - 65px);\r\n}\r\n.sidebarBottomMenu,\r\n.sidebarTopMenu {\r\n  position: absolute;\r\n  left: 3px;\r\n  width: calc(100% - 6px);\r\n}\r\na.router-link-active,\r\na.router-link-active:hover {\r\n  background: #138BA7;\r\n  color: #fff !important;\r\n}\r\n.divider,\r\n.sidebar {\r\n  position: fixed !important;\r\n}\r\n\r\n.sidebarMenuRow i {\r\n  width: 21px;\r\n}\r\n.sidebarMenuRow {\r\n  display: block;\r\n  margin-bottom: 3px;\r\n}\r\n.sidebar {\r\n  background: #f0f0f0;\r\n  font-size: 0.92rem;\r\n  min-width: 32px;\r\n  position: fixed;\r\n  height: calc(100vh - 65px);\r\n}\r\n.sidebar a {\r\n  color: #444;\r\n  text-decoration: none;\r\n}\r\n.sideBarIcon {\r\n  font-size: 1rem;\r\n}\r\n.sidebarTopMenu {\r\n  top: 60px;\r\n}\r\n.sidebarBottomMenu,\r\n.sidebarTopMenu {\r\n  position: absolute;\r\n  left: 3px;\r\n  width: calc(100% - 6px);\r\n}\r\n.sidebarBottomMenu {\r\n  bottom: 10px;\r\n}\r\n.sidebarBottomMenu i,\r\n.sidebarTopMenu i {\r\n  margin-left: 1px;\r\n}\r\n.sidebarMenuRow {\r\n  padding: 3px;\r\n  width: 100%;\r\n  padding-left: 6px;\r\n  padding-right: 6px;\r\n}\r\n.sidebarMenuRow:hover {\r\n  background-color: #c2c2c2;\r\n  vertical-align: middle;\r\n}\r\n.menuDesc {\r\n  margin-left: 12px;\r\n}\r\n#mainProjectTitle{color:black}\r\n#mainProjectTitle h3{font-size:19px;margin-bottom:5px !important}\r\n#mainProjectTitle h5{font-size:14px}\r\n\r\n.p-datatable thead tr th{\r\n  background: #138ba7 !important;\r\n  color: white !important;\r\n}\r\n\r\n.p-column-filter-menu-button{color:white !important}\r\n\r\n#timerDialog{\r\n  border:1px solid #DDD;\r\n  background:#FFF;\r\n  box-shadow: 1px 3px 3px #CCC;\r\n  padding:10px;\r\n}\r\n\r\n#extendSessionButton{\r\n  margin:12px;\r\n}\r\n\r\n</style>\r\n\r\n\r\n"]},"metadata":{},"sourceType":"module"}
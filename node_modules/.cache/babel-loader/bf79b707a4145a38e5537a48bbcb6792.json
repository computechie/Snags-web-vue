{"ast":null,"code":"import \"jquery/dist/jquery.min.js\";\nimport \"datatables.net-dt/js/dataTables.dataTables\";\nimport \"datatables.net-dt/css/jquery.dataTables.min.css\";\nimport $ from \"jquery\";\nexport default {\n  data() {\n    return {\n      users: [],\n      showPassword: false,\n      isLoading: true,\n      allUserTypes: [\"ADMIN\", \"USER\"],\n      allCompanies: [\"DFM Systems\", \"Computech\"],\n      NewFullName: null,\n      NewUsername: null,\n      NewEmail: null,\n      NewPassword: null,\n      NewRepeatPassword: null,\n      NewType: null,\n      NewCompany: null,\n      alertNewFullName: null,\n      alertNewUsername: null,\n      alertNewEmail: null,\n      alertNewPassword: null,\n      alertNewRepeatPassword: null,\n      alertNewType: null,\n      alertNewCompany: null,\n      tags: 'single'\n    };\n  },\n\n  methods: {\n    usersSearch(what) {\n      //TODO: functon for searching Users\n      alert(\"User search: \" + what);\n    },\n\n    getUsers() {\n      this.isLoading = true;\n      fetch(\"https://www.it-b.hr/vue/users.php\").then(response => response.json()).then(data => {\n        this.users = data;\n        setTimeout(() => {\n          $(\"#datatable\").DataTable({\n            lengthMenu: [[25, 50, 100, -1], [25, 50, 100, \"All\"]],\n            pageLength: 25\n          });\n        });\n      });\n      this.isLoading = false;\n    },\n\n    projectSearch(what) {\n      $('#datatable_filter [type=\"search\"]').val(what);\n      $('#datatable_filter [type=\"search\"]').focus();\n      $('#datatable_filter [type=\"search\"]').keyup();\n      $(\"#search-holder form div input\").focus();\n    },\n\n    beforeOpenaddModal() {\n      //clear all inpute fields\n      this.NewFullName = null, this.NewUsername = null, this.NewEmail = null, this.NewPassword = null, this.NewRepeatPassword = null, this.NewType = null, this.NewCompany = null, this.lertNewFullName = null, this.alertNewUsername = null, this.alertNewEmail = null, this.alertNewPassword = null, this.alertNewRepeatPassword = null, this.alertNewType = null, this.alertNewCompany = null;\n    },\n\n    submitForm() {\n      this.formError = false;\n\n      if (!this.NewFullName) {\n        this.alertNewFullName = \"Please enter Fullname\";\n        this.formError = true;\n      }\n\n      if (!this.NewUsername) {\n        this.alertNewUsername = \"Please enter Username\";\n        this.formError = true;\n      }\n\n      if (!this.NewEmail) {\n        this.alertNewEmail = \"Please enter Email\";\n        this.formError = true;\n      } else {\n        if (!this.validateEmail(this.NewEmail)) {\n          this.alertNewEmail = \"Please enter valid Email\";\n          this.formError = true;\n        }\n      }\n\n      if (!this.NewType) {\n        this.alertNewType = \"Please select user type\";\n        this.formError = true;\n      }\n\n      if (!this.NewCompany) {\n        this.alertNewCompany = \"Please select or enter Company\";\n        this.formError = true;\n      }\n\n      if (this.NewPassword && this.NewRepeatPassword) {\n        if (this.NewPassword.length > 0 && this.NewRepeatPassword.length > 0 && this.NewPassword.length < 4) {\n          this.alertNewPassword = \"Password is too short. It must be at least 4 chars\";\n          this.formError = true;\n        }\n      }\n\n      if (!this.NewPassword) {\n        this.alertNewPassword = \"Please enter Password\";\n        this.formError = true;\n      }\n\n      if (!this.NewRepeatPassword) {\n        this.alertNewRepeatPassword = \"Please repeat Password\";\n        this.formError = true;\n      }\n\n      if (this.NewPassword.length > 3 && this.NewRepeatPassword.length > 3) {\n        if (this.NewRepeatPassword != this.NewPassword) {\n          this.alertNewRepeatPassword = \"Passwords don't match!\";\n          this.alertNewPassword = \"Passwords don't match!\";\n          this.formError = true;\n        }\n      }\n\n      if (this.formError == false) {\n        //create project ! for now just push in array\n\n        /* this.users.push({\r\n          id: Math.floor(Math.random() * 1000000),\r\n          name: this.NewFullName,\r\n          username: this.NewUsername,\r\n          email: this.NewEmail,\r\n          type: this.NewType,\r\n          company: this.NewCompany,\r\n        });*/\n        this.closeModal(\"closeaddModal\"); //close login modal after submit;\n\n        document.getElementById(\"btnOpenMo\").click(); //   this.getUsers(); // this is for getting from server for new list\n\n        $(\"#datatable\").DataTable().row.add([Math.floor(Math.random() * 1000000), this.NewFullName, this.NewUsername, this.NewEmail, this.NewType, this.NewCompany]).draw();\n      }\n    },\n\n    validateEmail(email) {\n      var re = /\\S+@\\S+\\.\\S+/;\n      return re.test(email);\n    },\n\n    toggleShowPassword() {\n      this.showPassword = !this.showPassword;\n    },\n\n    KeyDown(field) {\n      if (field === \"NewFullName\" && this.NewFullName) {\n        this.alertNewFullName = \"\";\n      } else if (field === \"NewUsername\" && this.NewUsername) {\n        this.alertNewUsername = \"\";\n      } else if (field === \"NewEmail\" && this.NewEmail) {\n        this.alertNewEmail = \"\";\n      } else if (field === \"NewPassword\" && this.NewPassword) {\n        this.alertNewPassword = \"\";\n        this.alertNewRepeatPassword = \"\";\n      } else if (field === \"NewRepeatPassword\" && this.NewRepeatPassword) {\n        this.alertNewPassword = \"\";\n        this.alertNewRepeatPassword = \"\";\n      }\n    },\n\n    selectChange(field) {\n      if (field == \"NewType\" && this.NewType != \"\") {\n        this.alertNewType = \"\";\n      }\n\n      if (field == \"NewCompany\" && this.NewCompany != \"\") {\n        this.alertNewCompany = \"\";\n      }\n    },\n\n    closeModal(id) {\n      document.getElementById(id).click();\n    }\n\n  },\n  emits: {\n    showSearchbar: false,\n    appType: ''\n  },\n\n  created() {\n    localStorage.removeItem(\"appType\");\n    localStorage.removeItem(\"selectedProjectType\");\n    localStorage.removeItem(\"selectedProjectTitle\");\n    localStorage.removeItem(\"selectedProjectNumber\");\n    localStorage.removeItem(\"selectedProjectContractor\");\n    localStorage.removeItem(\"selectedProjectValidUntil\"), localStorage.removeItem(\"selectedProjectPublishDate\"), localStorage.removeItem(\"selectedProjectImage\");\n    localStorage.removeItem(\"selectedProjectType\");\n    localStorage.removeItem(\"docType\");\n    localStorage.removeItem(\"systemId\");\n    this.$emit(\"appType\", '');\n  },\n\n  mounted() {\n    this.getUsers();\n    this.$emit(\"showSearchbar\", false);\n  }\n\n};","map":{"version":3,"mappings":"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","names":["$","data","users","showPassword","isLoading","allUserTypes","allCompanies","NewFullName","NewUsername","NewEmail","NewPassword","NewRepeatPassword","NewType","NewCompany","alertNewFullName","alertNewUsername","alertNewEmail","alertNewPassword","alertNewRepeatPassword","alertNewType","alertNewCompany","tags","methods","usersSearch","what","alert","getUsers","fetch","then","response","json","setTimeout","DataTable","lengthMenu","pageLength","projectSearch","val","focus","keyup","beforeOpenaddModal","lertNewFullName","submitForm","formError","validateEmail","length","closeModal","document","getElementById","click","row","add","Math","floor","random","draw","email","re","test","toggleShowPassword","KeyDown","field","selectChange","id","emits","showSearchbar","appType","created","localStorage","removeItem","$emit","mounted"],"sourceRoot":"","sources":["Q:\\Projects\\DFM v2\\src\\components\\pages\\ManageUsers.vue"],"sourcesContent":["<template>\r\n  <base-dialog :show=\"isLoading\" title=\"Authenticating...\" fixed>\r\n    <base-spinner></base-spinner>\r\n  </base-dialog>\r\n\r\n  <div class=\"row mb-3\">\r\n    <div class=\"col-12 text-center\">\r\n      <search-holder @emit-search=\"usersSearch\"></search-holder>\r\n    </div>\r\n  </div>\r\n\r\n  <!--<data-table class=\"display\" :data=\"users\"   width=\"100%\">\r\n    <thead>\r\n        <tr>\r\n            <th>Name</th>\r\n            <th>Email</th>\r\n            <th>Type</th>\r\n            <th>Company</th>\r\n        </tr>\r\n    </thead>\r\n</data-table>-->\r\n\r\n  <table id=\"datatable\">\r\n    <thead>\r\n      <tr>\r\n        <th>ID</th>\r\n        <th>Name</th>\r\n        <th>Username</th>\r\n        <th>Email</th>\r\n        <th>Type</th>\r\n        <th>Company</th>\r\n      </tr>\r\n    </thead>\r\n    <tbody>\r\n      <tr v-for=\"user in users\" :key=\"user.id\">\r\n        <td>{{ user.id }}</td>\r\n        <td>{{ user.name }}</td>\r\n        <td>{{ user.username }}</td>\r\n        <td>{{ user.email }}</td>\r\n        <td>{{ user.type }}</td>\r\n        <td>{{ user.company }}</td>\r\n      </tr>\r\n    </tbody>\r\n  </table>\r\n\r\n  <!-- action button -->\r\n  <div class=\"right-corder-container\">\r\n    <button\r\n      @click=\"beforeOpenaddModal()\"\r\n      class=\"right-corder-container-button\"\r\n      data-bs-toggle=\"modal\"\r\n      data-bs-target=\"#addModal\"\r\n      title=\"Add new user\"\r\n    >\r\n      <span class=\"short-text\">+</span>\r\n    </button>\r\n  </div>\r\n\r\n  <!-- Add new modal-->\r\n  <div\r\n    class=\"modal fade\"\r\n    id=\"addModal\"\r\n    data-bs-backdrop=\"static\"\r\n    data-bs-keyboard=\"false\"\r\n    tabindex=\"-1\"\r\n    aria-labelledby=\"addModal\"\r\n    aria-hidden=\"true\"\r\n  >\r\n    <div class=\"modal-dialog\">\r\n      <div class=\"modal-content\">\r\n        <div class=\"modal-header\">\r\n          <h5 class=\"modal-title\" id=\"addModalLabel\">Add new user</h5>\r\n          <button\r\n            type=\"button\"\r\n            id=\"closeaddModal\"\r\n            class=\"btn-close\"\r\n            data-bs-dismiss=\"modal\"\r\n            aria-label=\"Close\"\r\n          ></button>\r\n        </div>\r\n        <div class=\"modal-body\">\r\n          <form @submit.prevent=\"submitForm\">\r\n            <div class=\"row mb-1\">\r\n              <div class=\"col-md-4 pt-2\">Fullname:</div>\r\n\r\n              <div class=\"col-md-8\">\r\n                <div class=\"row\">\r\n                  <div class=\"col-12\">\r\n                    <input\r\n                      type=\"text\"\r\n                      class=\"form-control\"\r\n                      v-model=\"NewFullName\"\r\n                      @keyup=\"KeyDown('NewFullName')\"\r\n                    />\r\n                  </div>\r\n                </div>\r\n                <div class=\"row\">\r\n                  <div class=\"col\">\r\n                    <div\r\n                      class=\"alert alert-danger alert-sm\"\r\n                      v-html=\"alertNewFullName\"\r\n                      v-if=\"alertNewFullName\"\r\n                    />\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <div class=\"row mb-1\">\r\n              <div class=\"col-md-4 pt-2\">Username:</div>\r\n\r\n              <div class=\"col-md-8\">\r\n                <div class=\"row\">\r\n                  <div class=\"col-12\">\r\n                    <input\r\n                      type=\"text\"\r\n                      class=\"form-control\"\r\n                      v-model=\"NewUsername\"\r\n                      @keyup=\"KeyDown('NewUsername')\"\r\n                    />\r\n                  </div>\r\n                </div>\r\n                <div class=\"row\">\r\n                  <div class=\"col\">\r\n                    <div\r\n                      class=\"alert alert-danger alert-sm\"\r\n                      v-html=\"alertNewUsername\"\r\n                      v-if=\"alertNewUsername\"\r\n                    />\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <div class=\"row mb-1\">\r\n              <div class=\"col-md-4 pt-2\">Email:</div>\r\n\r\n              <div class=\"col-md-8\">\r\n                <div class=\"row\">\r\n                  <div class=\"col-12\">\r\n                    <input\r\n                      type=\"text\"\r\n                      class=\"form-control\"\r\n                      v-model=\"NewEmail\"\r\n                      @keyup=\"KeyDown('NewEmail')\"\r\n                    />\r\n                  </div>\r\n                </div>\r\n                <div class=\"row\">\r\n                  <div class=\"col\">\r\n                    <div\r\n                      class=\"alert alert-danger alert-sm\"\r\n                      v-html=\"alertNewEmail\"\r\n                      v-if=\"alertNewEmail\"\r\n                    />\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <div class=\"row mb-1\">\r\n              <div class=\"col-md-4 pt-2\">Password:</div>\r\n\r\n              <div class=\"col-md-8\">\r\n                <div class=\"row\">\r\n                  <div class=\"col-12\">\r\n                    <div class=\"input-group\">\r\n                      <input\r\n                        v-if=\"showPassword\"\r\n                        type=\"text\"\r\n                        class=\"form-control\"\r\n                        v-model=\"NewPassword\"\r\n                        @keyup=\"KeyDown('NewPassword')\"\r\n                      />\r\n                      <input\r\n                        v-else\r\n                        type=\"password\"\r\n                        class=\"form-control\"\r\n                        v-model=\"NewPassword\"\r\n                        @keyup=\"KeyDown('NewPassword')\"\r\n                      />\r\n\r\n                      <button\r\n                        class=\"input-group-text\"\r\n                        id=\"basic-addon2\"\r\n                        type=\"button\"\r\n                        @click=\"toggleShowPassword\"\r\n                      >\r\n                        <i\r\n                          class=\"fa-solid\"\r\n                          :class=\"{\r\n                            'fa-eye-slash': showPassword,\r\n                            'fa-eye': !showPassword,\r\n                          }\"\r\n                        ></i>\r\n                      </button>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <div class=\"row\">\r\n                  <div class=\"col\">\r\n                    <div\r\n                      class=\"alert alert-danger alert-sm\"\r\n                      v-html=\"alertNewPassword\"\r\n                      v-if=\"alertNewPassword\"\r\n                    />\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <div class=\"row mb-1\">\r\n              <div class=\"col-md-4 pt-2\">Repeat password:</div>\r\n\r\n              <div class=\"col-md-8\">\r\n                <div class=\"row\">\r\n                  <div class=\"col-12\">\r\n                    <div class=\"input-group\">\r\n                      <input\r\n                        v-if=\"showPassword\"\r\n                        type=\"text\"\r\n                        class=\"form-control\"\r\n                        v-model=\"NewRepeatPassword\"\r\n                        @keyup=\"KeyDown('NewRepeatPassword')\"\r\n                      />\r\n                      <input\r\n                        v-else\r\n                        type=\"password\"\r\n                        class=\"form-control\"\r\n                        v-model=\"NewRepeatPassword\"\r\n                        @keyup=\"KeyDown('NewRepeatPassword')\"\r\n                      />\r\n\r\n                      <button\r\n                        class=\"input-group-text\"\r\n                        id=\"basic-addon2\"\r\n                        type=\"button\"\r\n                        @click=\"toggleShowPassword\"\r\n                      >\r\n                        <i\r\n                          class=\"fa-solid\"\r\n                          :class=\"{\r\n                            'fa-eye-slash': showPassword,\r\n                            'fa-eye': !showPassword,\r\n                          }\"\r\n                        ></i>\r\n                      </button>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <div class=\"row\">\r\n                  <div class=\"col\">\r\n                    <div\r\n                      class=\"alert alert-danger alert-sm\"\r\n                      v-html=\"alertNewRepeatPassword\"\r\n                      v-if=\"alertNewRepeatPassword\"\r\n                    />\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <div class=\"row mb-1\">\r\n              <div class=\"col-md-4 pt-2\">Type:</div>\r\n\r\n              <div class=\"col-md-8\">\r\n                <div class=\"row\">\r\n                  <div class=\"col-12\">\r\n                    <v-select\r\n                      @change=\"selectChange('NewType')\"\r\n                      label=\"countryName\"\r\n                      v-model=\"NewType\"\r\n                      :options=\"allUserTypes\"\r\n                    ></v-select>\r\n                  </div>\r\n                </div>\r\n                <div class=\"row\">\r\n                  <div class=\"col\">\r\n                    <div\r\n                      class=\"alert alert-danger alert-sm\"\r\n                      v-html=\"alertNewType\"\r\n                      v-if=\"alertNewType\"\r\n                    />\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <div class=\"row mb-1\">\r\n              <div class=\"col-md-4 pt-2\">Company:</div>\r\n\r\n              <div class=\"col-md-8\">\r\n                <div class=\"row\">\r\n                  <div class=\"col-12\">\r\n                    <v-select\r\n                      @change=\"selectChange('NewCompany')\"\r\n                      label=\"countryName\"\r\n                      v-model=\"NewCompany\"\r\n                      :mode=\"tags\"\r\n                      :create-option=\"true\"\r\n                      :searchable=\"true\"\r\n                      :options=\"allCompanies\"\r\n                    ></v-select>\r\n                  </div>\r\n                </div>\r\n                <div class=\"row\">\r\n                  <div class=\"col\">\r\n                    <div\r\n                      class=\"alert alert-danger alert-sm\"\r\n                      v-html=\"alertNewCompany\"\r\n                      v-if=\"alertNewCompany\"\r\n                    />\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <div class=\"mb-3\"></div>\r\n\r\n            <button type=\"submit\" class=\"btn btn-primary\">Add user</button>\r\n          </form>\r\n        </div>\r\n        <div class=\"modal-footer\"></div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <button\r\n    id=\"btnOpenMo\"\r\n    data-bs-toggle=\"modal\"\r\n    data-bs-target=\"#CreatedModal\"\r\n    class=\"d-none\"\r\n  />\r\n\r\n  <!-- Created Projects Modal -->\r\n  <div\r\n    class=\"modal fade\"\r\n   \r\n    id=\"CreatedModal\"\r\n    data-bs-backdrop=\"static\"\r\n    data-bs-keyboard=\"false\"\r\n    tabindex=\"-1\"\r\n    aria-labelledby=\"CreatedModal\"\r\n    aria-hidden=\"true\"\r\n  >\r\n    <div class=\"modal-dialog\">\r\n      <div class=\"modal-content\">\r\n        <div class=\"modal-header\">\r\n          <h5>Info</h5>\r\n          <button\r\n            type=\"button\"\r\n            id=\"closeCreatedModal\"\r\n            class=\"btn-close\"\r\n            data-bs-dismiss=\"modal\"\r\n            aria-label=\"Close\"\r\n          ></button>\r\n        </div>\r\n        <div class=\"modal-body\">\r\n          <p>User added</p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n\r\n<script>\r\nimport \"jquery/dist/jquery.min.js\";\r\nimport \"datatables.net-dt/js/dataTables.dataTables\";\r\nimport \"datatables.net-dt/css/jquery.dataTables.min.css\";\r\nimport $ from \"jquery\";\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      users: [],\r\n      showPassword: false,\r\n      isLoading: true,\r\n      allUserTypes: [\"ADMIN\", \"USER\"],\r\n      allCompanies: [\"DFM Systems\", \"Computech\"],\r\n      NewFullName: null,\r\n      NewUsername: null,\r\n      NewEmail: null,\r\n      NewPassword: null,\r\n      NewRepeatPassword: null,\r\n      NewType: null,\r\n      NewCompany: null,\r\n      alertNewFullName: null,\r\n      alertNewUsername: null,\r\n      alertNewEmail: null,\r\n      alertNewPassword: null,\r\n      alertNewRepeatPassword: null,\r\n      alertNewType: null,\r\n      alertNewCompany: null,\r\n      tags:'single'\r\n    };\r\n  },\r\n  methods: {\r\n    usersSearch(what) {\r\n      //TODO: functon for searching Users\r\n      alert(\"User search: \" + what);\r\n    },\r\n\r\n    getUsers() {\r\n      this.isLoading = true;\r\n\r\n      fetch(\"https://www.it-b.hr/vue/users.php\")\r\n        .then((response) => response.json())\r\n        .then((data) => {\r\n          this.users = data;\r\n          setTimeout(() => {\r\n            $(\"#datatable\").DataTable({\r\n              lengthMenu: [\r\n                [25, 50, 100, -1],\r\n                [25, 50, 100, \"All\"],\r\n              ],\r\n              pageLength: 25,\r\n            });\r\n          });\r\n        });\r\n\r\n      this.isLoading = false;\r\n    },\r\n\r\n    projectSearch(what) {\r\n      $('#datatable_filter [type=\"search\"]').val(what);\r\n      $('#datatable_filter [type=\"search\"]').focus();\r\n      $('#datatable_filter [type=\"search\"]').keyup();\r\n      $(\"#search-holder form div input\").focus();\r\n    },\r\n\r\n    beforeOpenaddModal() {\r\n      //clear all inpute fields\r\n      (this.NewFullName = null),\r\n        (this.NewUsername = null),\r\n        (this.NewEmail = null),\r\n        (this.NewPassword = null),\r\n        (this.NewRepeatPassword = null),\r\n        (this.NewType = null),\r\n        (this.NewCompany = null),\r\n        (this.lertNewFullName = null),\r\n        (this.alertNewUsername = null),\r\n        (this.alertNewEmail = null),\r\n        (this.alertNewPassword = null),\r\n        (this.alertNewRepeatPassword = null),\r\n        (this.alertNewType = null),\r\n        (this.alertNewCompany = null);\r\n    },\r\n    submitForm() {\r\n      this.formError = false;\r\n\r\n      if (!this.NewFullName) {\r\n        this.alertNewFullName = \"Please enter Fullname\";\r\n        this.formError = true;\r\n      }\r\n\r\n      if (!this.NewUsername) {\r\n        this.alertNewUsername = \"Please enter Username\";\r\n        this.formError = true;\r\n      }\r\n\r\n      if (!this.NewEmail) {\r\n        this.alertNewEmail = \"Please enter Email\";\r\n        this.formError = true;\r\n      } else {\r\n        if (!this.validateEmail(this.NewEmail)) {\r\n          this.alertNewEmail = \"Please enter valid Email\";\r\n          this.formError = true;\r\n        }\r\n      }\r\n\r\n      \r\n      if (!this.NewType) {\r\n        this.alertNewType = \"Please select user type\";\r\n        this.formError = true;\r\n      }\r\n\r\n      if (!this.NewCompany) {\r\n        this.alertNewCompany = \"Please select or enter Company\";\r\n        this.formError = true;\r\n      }\r\n\r\n      if (this.NewPassword && this.NewRepeatPassword) {\r\n        if (\r\n          this.NewPassword.length > 0 &&\r\n          this.NewRepeatPassword.length > 0 &&\r\n          this.NewPassword.length < 4\r\n        ) {\r\n          this.alertNewPassword =\r\n            \"Password is too short. It must be at least 4 chars\";\r\n          this.formError = true;\r\n        }\r\n      }\r\n\r\n      if (!this.NewPassword) {\r\n        this.alertNewPassword = \"Please enter Password\";\r\n        this.formError = true;\r\n      }\r\n\r\n      if (!this.NewRepeatPassword) {\r\n        this.alertNewRepeatPassword = \"Please repeat Password\";\r\n        this.formError = true;\r\n      }\r\n\r\n      if (this.NewPassword.length > 3 && this.NewRepeatPassword.length > 3) {\r\n        if (this.NewRepeatPassword != this.NewPassword) {\r\n          this.alertNewRepeatPassword = \"Passwords don't match!\";\r\n          this.alertNewPassword = \"Passwords don't match!\";\r\n          this.formError = true;\r\n        }\r\n      }\r\n\r\n\r\n      if (this.formError == false) {\r\n        //create project ! for now just push in array\r\n\r\n        /* this.users.push({\r\n          id: Math.floor(Math.random() * 1000000),\r\n          name: this.NewFullName,\r\n          username: this.NewUsername,\r\n          email: this.NewEmail,\r\n          type: this.NewType,\r\n          company: this.NewCompany,\r\n        });*/\r\n\r\n        this.closeModal(\"closeaddModal\"); //close login modal after submit;\r\n        document.getElementById(\"btnOpenMo\").click();\r\n        //   this.getUsers(); // this is for getting from server for new list\r\n\r\n        $(\"#datatable\")\r\n          .DataTable()\r\n          .row.add([\r\n            Math.floor(Math.random() * 1000000),\r\n            this.NewFullName,\r\n            this.NewUsername,\r\n            this.NewEmail,\r\n            this.NewType,\r\n            this.NewCompany,\r\n          ])\r\n          .draw();\r\n      }\r\n    },\r\n\r\n    validateEmail(email) {\r\n      var re = /\\S+@\\S+\\.\\S+/;\r\n      return re.test(email);\r\n    },\r\n\r\n    toggleShowPassword() {\r\n      this.showPassword = !this.showPassword;\r\n    },\r\n\r\n    KeyDown(field) {\r\n      if (field === \"NewFullName\" && this.NewFullName) {\r\n        this.alertNewFullName = \"\";\r\n      } else if (field === \"NewUsername\" && this.NewUsername) {\r\n        this.alertNewUsername = \"\";\r\n      } else if (field === \"NewEmail\" && this.NewEmail) {\r\n        this.alertNewEmail = \"\";\r\n      } else if (field === \"NewPassword\" && this.NewPassword) {\r\n        this.alertNewPassword = \"\";\r\n        this.alertNewRepeatPassword = \"\";\r\n      } else if (field === \"NewRepeatPassword\" && this.NewRepeatPassword) {\r\n        this.alertNewPassword = \"\";\r\n        this.alertNewRepeatPassword = \"\";\r\n      }\r\n    },\r\n    selectChange(field) {\r\n      if (field == \"NewType\" && this.NewType != \"\") {\r\n        this.alertNewType = \"\";\r\n      }\r\n      if (field == \"NewCompany\" && this.NewCompany != \"\") {\r\n        this.alertNewCompany = \"\";\r\n      }\r\n    },\r\n    closeModal(id) {\r\n      document.getElementById(id).click();\r\n    },\r\n  },\r\n\r\n  emits: {\r\n    showSearchbar: false,\r\n    appType: '',\r\n  },\r\n  created(){\r\n    localStorage.removeItem(\"appType\");\r\n    localStorage.removeItem(\"selectedProjectType\");\r\n    localStorage.removeItem(\"selectedProjectTitle\");\r\n    localStorage.removeItem(\"selectedProjectNumber\");\r\n    localStorage.removeItem(\"selectedProjectContractor\");\r\n    localStorage.removeItem(\"selectedProjectValidUntil\"),\r\n    localStorage.removeItem(\"selectedProjectPublishDate\"),\r\n    localStorage.removeItem(\"selectedProjectImage\");\r\n    localStorage.removeItem(\"selectedProjectType\");\r\n    localStorage.removeItem(\"docType\");\r\n    localStorage.removeItem(\"systemId\");\r\n    this.$emit(\"appType\", '');\r\n    \r\n   \r\n  },\r\n\r\n  mounted() {\r\n    this.getUsers();\r\n   \r\n     this.$emit(\"showSearchbar\", false);\r\n  },\r\n};\r\n</script>\r\n\r\n\r\n<style>\r\n\r\n@import \"@vueform/multiselect/themes/default.css\";\r\n\r\n@import \"datatables.net-dt\";\r\n/* ---------------------- */\r\n#datatable {\r\n  font-size: 0.9rem;\r\n}\r\n#datatable tbody tr:nth-child(even) {\r\n  background: #f4f4f4;\r\n}\r\n#datatable tbody tr:nth-child(odd) {\r\n  background: #fff;\r\n}\r\n#datatable tbody tr:hover {\r\n  background: #f1f1ff;\r\n  cursor:pointer;\r\n}\r\n\r\n\r\n#datatable tbody tr td {\r\n  border-bottom: 1px solid #ddd;\r\n}\r\n#datatable_filter {\r\n  display: none;\r\n}\r\n\r\n/* ---------------------- */\r\n\r\n\r\n.right-corder-container {\r\n  position: fixed;\r\n  right: 20px;\r\n  bottom: 20px;\r\n}\r\n\r\n.right-corder-container .right-corder-container-button {\r\n  height: 51px;\r\n  width: 51px;\r\n  border: none;\r\n  background-color: #730e27;\r\n  border-radius: 62px; /*Transform the square into rectangle, sync that value with the width/height*/\r\n  transition: all 300ms; /*Animation to close the button (circle)*/\r\n  box-shadow: 2px 4px 5px rgb(25, 73, 15, 0.5);\r\n  cursor: pointer;\r\n}\r\n.right-corder-container .right-corder-container-button span {\r\n  font-size: 40px;\r\n  color: white;\r\n  position: absolute;\r\n  left: 13px;\r\n  top: 9px;\r\n  line-height: 28px;\r\n}\r\nbody {\r\n  padding-bottom: 60px;\r\n}\r\n</style>\r\n"]},"metadata":{},"sourceType":"module"}
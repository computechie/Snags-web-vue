{"ast":null,"code":"import \"core-js/modules/es.error.cause.js\";\nimport moment from \"moment\";\nexport default {\n  props: [\"projectKey\", \"projectTitle\", \"projectNumber\", \"emitSearch\"],\n\n  data() {\n    return {\n      detailsAreVisible: false,\n      detailsAreAppsVisible: false,\n      isLoading: false,\n      projects: [],\n      error: null\n    };\n  },\n\n  methods: {\n    /// GET project list\n    async getProjectList() {\n      this.isLoading = true;\n\n      if (this.$store.getters.isAuthenticated) {\n        const token = localStorage.getItem(\"token\"); //User token !!\n\n        const response = await fetch(\"https://www.it-b.hr/vue/project-list.php?auth=\" + token, {\n          method: \"POST\",\n          body: JSON.stringify({})\n        });\n        const responseData = await response.json();\n\n        if (!response.ok) {\n          // console.log(responseData);\n          const error = new Error(responseData.message || \"Failed to authenticate.\");\n          throw error;\n        }\n\n        this.projects = responseData;\n        this.isLoading = false;\n      }\n    },\n\n    ////\n    projectSearch(what) {\n      //TODO: functon for searching Projects\n      if (what.length > 2) {\n        for (let element of document.getElementsByClassName(\"cardsDisplay\")) {\n          element.classList.remove(\"show\");\n          element.style.display = \"none\";\n        }\n\n        this.projects.forEach(value => {\n          const dfmOnlinNumber = value[\"DFMONLINENUMBER\"].toUpperCase();\n          const dfmTitle = value[\"TITLE\"].toUpperCase();\n          const dfmCompany = value[\"CONTRACTOR\"].toUpperCase();\n          what = what.toUpperCase();\n\n          if (dfmOnlinNumber.includes(what) || dfmTitle.includes(what) || dfmCompany.includes(what)) {\n            //document.getElementById(\"ProjectCard-\" + value[\"KEY\"]).className += \" show\";\n            document.getElementById(\"ProjectCard-\" + value[\"KEY\"]).style.display = \"block\";\n          } else {\n            document.getElementById(\"ProjectCard-\" + value[\"KEY\"]).style.display = \"none\";\n          }\n        });\n      } else {\n        for (let element of document.getElementsByClassName(\"cardsDisplay\")) {\n          //element.classList.add(\"show\");\n          element.style.display = \"block\";\n        }\n      }\n    },\n\n    toggleDetails() {\n      this.detailsAreVisible = !this.detailsAreVisible;\n    },\n\n    toggleDetailsApp() {\n      this.detailsAreAppsVisible = !this.detailsAreAppsVisible;\n    },\n\n    hideOpenApps() {\n      this.detailsAreAppsVisible = false;\n    },\n\n    format_date(value) {\n      if (value) {\n        return moment(String(value)).format(\"DD/MM/YYYY\");\n      }\n    }\n\n  },\n  emits: [\"showSearchbar\"],\n\n  mounted() {\n    this.getProjectList();\n    this.$emit(\"showSearchbar\", true);\n  }\n\n};","map":{"version":3,"mappings":"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","names":["moment","props","data","detailsAreVisible","detailsAreAppsVisible","isLoading","projects","error","methods","getProjectList","$store","getters","isAuthenticated","token","localStorage","getItem","response","fetch","method","body","JSON","stringify","responseData","json","ok","Error","message","projectSearch","what","length","element","document","getElementsByClassName","classList","remove","style","display","forEach","value","dfmOnlinNumber","toUpperCase","dfmTitle","dfmCompany","includes","getElementById","toggleDetails","toggleDetailsApp","hideOpenApps","format_date","String","format","emits","mounted","$emit"],"sourceRoot":"","sources":["Q:\\Projects\\DFM v2\\src\\components\\pages\\ProjectsCards.vue"],"sourcesContent":["<template>\r\n  <base-dialog :show=\"!!error\" title=\"Error\"></base-dialog>\r\n  <base-dialog :show=\"isLoading\" title=\"Authenticating...\" fixed>\r\n    <base-spinner></base-spinner>\r\n  </base-dialog>\r\n\r\n  <div class=\"row mb-3\">\r\n    <div class=\"col-12 text-center\">\r\n      <search-holder @emit-Search=\"projectSearch\"></search-holder>\r\n    </div>\r\n  </div>\r\n  <div class=\"containder-fluid\">\r\n    <div class=\"row\">\r\n      <div\r\n        v-for=\"project in projects\"\r\n        :id=\"'ProjectCard-' + project.KEY\"\r\n        :key=\"project.KEY\"\r\n        class=\"col-sm-12 col-md-6 col-lg-3 col-xl2-2 col-xl3-2 cardsDisplay\"\r\n      >\r\n        <div class=\"card project-card\">\r\n          <div class=\"card-header project-card-header\">\r\n            <div class=\"projectCardsProjectNo\">\r\n              {{ project.DFMONLINENUMBER }}\r\n            </div>\r\n            <div class=\"projectCardsProjectTitle\">{{ project.TITLE }}</div>\r\n          </div>\r\n          <div class=\"card-body project-card-body\">\r\n            <div class=\"dropdown\">\r\n              <div\r\n                class=\"card-background-image\"\r\n                data-bs-toggle=\"dropdown\"\r\n                :style=\"{ backgroundImage: `url(${project.IMG})` }\"\r\n                @mouseenter=\"toggleDetails()\"\r\n                @mouseleave=\"\r\n                  toggleDetails();\r\n                  hideOpenApps();\r\n                \"\r\n              >\r\n                <figcaption\r\n                  class=\"projectDetailsBlock\"\r\n                  v-if=\"detailsAreVisible\"\r\n                  @click=\"toggleDetailsApp()\"\r\n                >\r\n                  <div class=\"row\">\r\n                    <div class=\"col p-0a text-right\">Revision:</div>\r\n                    <div class=\"col p-0a text-left\">{{ project.REVISION }}</div>\r\n                  </div>\r\n                  <div class=\"row\">\r\n                    <div class=\"col p-0a text-right\">Publish date:</div>\r\n                    <div class=\"col p-0a text-left\">\r\n                      {{ format_date(project.PUBLISHDATE) }}\r\n                    </div>\r\n                  </div>\r\n                  <div class=\"row\">\r\n                    <div class=\"col p-0a text-right\">Expiry date:</div>\r\n                    <div class=\"col p-0a text-left\">\r\n                      {{ format_date(project.VALIDUNTIL) }}\r\n                    </div>\r\n                  </div>\r\n                  <div class=\"row\">\r\n                    <div class=\"col p-0a text-right\">Status:</div>\r\n                    <div class=\"col p-0a text-left\">{{ project.ACTIVE }}</div>\r\n                  </div>\r\n                  <div class=\"row\"><div class=\"col p-0a\"></div></div>\r\n                  <div class=\"row\" style=\"margin-top: 20px\">\r\n                    <div class=\"col text-center\">\r\n                      {{ project.CONTRACTOR }}\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div class=\"row\" style=\"margin-top: 20px\">\r\n                    <div class=\"col text-center\">\r\n                      <button class=\"btn btn-primary\">Open</button>\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div\r\n                    class=\"appSelector\"\r\n                    v-if=\"detailsAreAppsVisible\"\r\n                    @click=\"toggleDetailsApp()\"\r\n                  >\r\n                    <a\r\n                      v-if=\"project.CDE\"\r\n                      class=\"dropdown-item\"\r\n                      href=\"\"\r\n                      target=\"_blank\"\r\n                      ><i class=\"fa-solid fa-folder\"></i> CDE</a\r\n                    >\r\n\r\n                    <a v-if=\"project.QMS\" class=\"dropdown-item\" href=\"\"\r\n                      ><i class=\"fa-solid fa-file\"></i> QMS</a\r\n                    >\r\n\r\n                    <a v-if=\"project.SAFETY\" class=\"dropdown-item\" href=\"\"\r\n                      ><i class=\"fa-solid fa-shield\"></i> Safetyfile\r\n                    </a>\r\n                  </div>\r\n                </figcaption>\r\n              </div>\r\n            </div>\r\n\r\n            <div class=\"mt-2 text-end\" style=\"display: block\">\r\n              <i\r\n                class=\"icon-cog iconProjectSetting\"\r\n                title=\"Project settings\"\r\n              ></i>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <!-- action button -->\r\n  <div class=\"right-corder-container\">\r\n    <button\r\n      class=\"right-corder-container-button\"\r\n      data-bs-toggle=\"modal\"\r\n      data-bs-target=\"#loginModal\"\r\n    >\r\n      <span class=\"short-text\">+</span>\r\n    </button>\r\n  </div>\r\n\r\n  <!-- Add new project modal-->\r\n  <div\r\n    class=\"modal fade\"\r\n    id=\"addProjectModal\"\r\n    data-bs-backdrop=\"static\"\r\n    data-bs-keyboard=\"false\"\r\n    tabindex=\"-1\"\r\n    aria-labelledby=\"addProjectModal\"\r\n    aria-hidden=\"true\"\r\n  >\r\n    <div class=\"modal-dialog\">\r\n      <div class=\"modal-content\">\r\n        <div class=\"modal-header\">\r\n          <h5 class=\"modal-title\" id=\"addProjectModalLabel\">\r\n            Create new project\r\n          </h5>\r\n          <button\r\n            type=\"button\"\r\n            id=\"closeaddProjectModal\"\r\n            class=\"btn-close\"\r\n            data-bs-dismiss=\"modal\"\r\n            aria-label=\"Close\"\r\n          ></button>\r\n        </div>\r\n        <div class=\"modal-body\">\r\n          <form @submit.prevent=\"submitForm\">\r\n            <div class=\"mb-3\">\r\n              <label for=\"Inputusername\" class=\"form-label\">Username</label>\r\n              <input\r\n                type=\"username\"\r\n                v-model.trim=\"username\"\r\n                @keyup=\"usernameKeyDown\"\r\n                class=\"form-control\"\r\n                id=\"Inputusername\"\r\n                aria-describedby=\"usernameHelp\"\r\n              />\r\n              <div v-if=\"showUsernameAlert\" class=\"alert alert-danger alert-sm\">\r\n                {{ usernameMessage }}\r\n              </div>\r\n            </div>\r\n\r\n            <button type=\"submit\" class=\"btn btn-primary\">\r\n              Create project\r\n            </button>\r\n          </form>\r\n        </div>\r\n        <div class=\"modal-footer\"></div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport moment from \"moment\";\r\n\r\nexport default {\r\n  props: [\"projectKey\", \"projectTitle\", \"projectNumber\", \"emitSearch\"],\r\n\r\n  data() {\r\n    return {\r\n      detailsAreVisible: false,\r\n      detailsAreAppsVisible: false,\r\n      isLoading: false,\r\n      projects: [],\r\n      error: null,\r\n    };\r\n  },\r\n  methods: {\r\n    /// GET project list\r\n    async getProjectList() {\r\n      this.isLoading = true;\r\n\r\n      if (this.$store.getters.isAuthenticated) {\r\n        const token = localStorage.getItem(\"token\"); //User token !!\r\n\r\n        const response = await fetch(\r\n          \"https://www.it-b.hr/vue/project-list.php?auth=\" + token,\r\n          {\r\n            method: \"POST\",\r\n            body: JSON.stringify({}),\r\n          }\r\n        );\r\n\r\n        const responseData = await response.json();\r\n\r\n        if (!response.ok) {\r\n          // console.log(responseData);\r\n          const error = new Error(\r\n            responseData.message || \"Failed to authenticate.\"\r\n          );\r\n          throw error;\r\n        }\r\n\r\n        this.projects = responseData;\r\n        this.isLoading = false;\r\n      }\r\n    },\r\n    ////\r\n\r\n    projectSearch(what) {\r\n      //TODO: functon for searching Projects\r\n      if (what.length > 2) {\r\n        for (let element of document.getElementsByClassName(\"cardsDisplay\")) {\r\n          element.classList.remove(\"show\");\r\n          element.style.display = \"none\";\r\n        }\r\n\r\n        this.projects.forEach((value) => {\r\n          const dfmOnlinNumber = value[\"DFMONLINENUMBER\"].toUpperCase();\r\n          const dfmTitle = value[\"TITLE\"].toUpperCase();\r\n          const dfmCompany = value[\"CONTRACTOR\"].toUpperCase();\r\n\r\n          what = what.toUpperCase();\r\n\r\n          if (\r\n            dfmOnlinNumber.includes(what) ||\r\n            dfmTitle.includes(what) ||\r\n            dfmCompany.includes(what)\r\n          ) {\r\n            //document.getElementById(\"ProjectCard-\" + value[\"KEY\"]).className += \" show\";\r\n            document.getElementById(\r\n              \"ProjectCard-\" + value[\"KEY\"]\r\n            ).style.display = \"block\";\r\n          } else {\r\n            document.getElementById(\r\n              \"ProjectCard-\" + value[\"KEY\"]\r\n            ).style.display = \"none\";\r\n          }\r\n        });\r\n      } else {\r\n        for (let element of document.getElementsByClassName(\"cardsDisplay\")) {\r\n          //element.classList.add(\"show\");\r\n          element.style.display = \"block\";\r\n        }\r\n      }\r\n    },\r\n\r\n    toggleDetails() {\r\n      this.detailsAreVisible = !this.detailsAreVisible;\r\n    },\r\n\r\n    toggleDetailsApp() {\r\n      this.detailsAreAppsVisible = !this.detailsAreAppsVisible;\r\n    },\r\n\r\n    hideOpenApps() {\r\n      this.detailsAreAppsVisible = false;\r\n    },\r\n\r\n    format_date(value) {\r\n      if (value) {\r\n        return moment(String(value)).format(\"DD/MM/YYYY\");\r\n      }\r\n    },\r\n  },\r\n\r\n  emits: [\"showSearchbar\"],\r\n\r\n  mounted() {\r\n    this.getProjectList();\r\n    this.$emit(\"showSearchbar\", true);\r\n  },\r\n};\r\n</script>\r\n\r\n\r\n\r\n\r\n<style>\r\n.appSelector {\r\n  font-size: 1rem;\r\n\r\n  position: relative;\r\n  top: -174px !important;\r\n  left: 0px !important; /*   width:calc(100% - 20px);\r\n   height:calc(100% - 20px);*/\r\n  width: 100%;\r\n  height: 100%;\r\n\r\n  background: rgb(0, 0, 0, 0.5);\r\n  box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);\r\n  backdrop-filter: blur(2px);\r\n  -webkit-backdrop-filter: blur(2px);\r\n}\r\n.appSelector a {\r\n  color: white !important;\r\n}\r\n.appSelector a:hover {\r\n  background: #c2c2c2;\r\n  color: black !important;\r\n}\r\n.appSelector i {\r\n  width: 20px;\r\n}\r\n\r\n.card-background-image {\r\n  background-repeat: no-repeat;\r\n  background-size: cover;\r\n  background-position: center;\r\n  height: 175px;\r\n  min-height: 200px;\r\n}\r\n\r\n.project-card-body {\r\n  padding: 3px;\r\n}\r\n.project-card {\r\n  border-radius: 0 !important;\r\n  margin-bottom: 10px;\r\n}\r\n.project-card-header {\r\n  padding: 0.25rem !important;\r\n  background: white;\r\n  height: 72px;\r\n}\r\n.projectCardsProjectNo {\r\n  font-size: 0.8rem;\r\n  font-weight: bolder;\r\n}\r\n.projectCardsProjectTitle {\r\n  font-size: 1rem;\r\n  font-weight: 300;\r\n  color: #222;\r\n}\r\n.projectDetailsBlock {\r\n  font-size: 0.8rem;\r\n  padding: 5px;\r\n  background-color: rgb(66, 66, 66, 0);\r\n  height: 100%;\r\n  color: white;\r\n  opacity: 0;\r\n  cursor: pointer;\r\n}\r\n.projectDetailsBlock:hover {\r\n  background-color: rgb(66, 66, 66, 0.5);\r\n  -webkit-transition: background-color 200ms linear;\r\n  -ms-transition: background-color 200ms linear;\r\n  transition: background-color 200ms linear;\r\n\r\n  opacity: 1;\r\n  -webkit-transition: opacity 200ms linear;\r\n  -ms-transition: opacity 200ms linear;\r\n  transition: opacity r 200ms linear;\r\n}\r\n\r\n@media (min-width: 1200px) {\r\n  .col-xl2-2 {\r\n    -ms-flex: 0 0 25%;\r\n    flex: 0 0 25%;\r\n    max-width: 25%;\r\n  }\r\n}\r\n\r\n@media (min-width: 1500px) {\r\n  .col-xl3-2 {\r\n    -ms-flex: 0 0 20%;\r\n    flex: 0 0 20%;\r\n    max-width: 20%;\r\n  }\r\n} /*\r\n\r\n@media (min-width: 1800px){\r\n  .col-xl3-2 {\r\n    -ms-flex: 0 0 14.28571428571429% ;\r\n    flex: 0 0 14.28571428571429%;\r\n    max-width: 14.28571428571429%;\r\n  }\r\n}*/\r\n\r\n.right-corder-container {\r\n  position: fixed;\r\n  right: 20px;\r\n  bottom: 20px;\r\n}\r\n\r\n.right-corder-container .right-corder-container-button {\r\n  height: 51px;\r\n  width: 51px;\r\n  border: none;\r\n  background-color: #730e27;\r\n  border-radius: 62px; /*Transform the square into rectangle, sync that value with the width/height*/\r\n  transition: all 300ms; /*Animation to close the button (circle)*/\r\n  box-shadow: 2px 4px 5px rgb(25, 73, 15, 0.5);\r\n  cursor: pointer;\r\n}\r\n.right-corder-container .right-corder-container-button span {\r\n  font-size: 40px;\r\n  color: white;\r\n  position: absolute;\r\n  left: 13px;\r\n  top: 9px;\r\n  line-height: 28px;\r\n}\r\nbody {\r\n  padding-bottom: 60px;\r\n}\r\n</style>\r\n\r\n\r\n"]},"metadata":{},"sourceType":"module"}
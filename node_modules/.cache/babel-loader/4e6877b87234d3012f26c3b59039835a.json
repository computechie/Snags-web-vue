{"ast":null,"code":"import { resolveComponent as _resolveComponent, createVNode as _createVNode, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, withCtx as _withCtx, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString, normalizeStyle as _normalizeStyle, Fragment as _Fragment, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"container\"\n};\nconst _hoisted_2 = {\n  class: \"row\"\n};\n\nconst _hoisted_3 = /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"col-md-12 text-center gap-2 gaptop-2\"\n}, [/*#__PURE__*/_createElementVNode(\"h4\", null, \"Reset password\")], -1\n/* HOISTED */\n);\n\nconst _hoisted_4 = {\n  class: \"col-md-12 text-center gap-2\"\n};\nconst _hoisted_5 = {\n  class: \"flex flex-column gap-2\"\n};\n\nconst _hoisted_6 = /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"password\"\n}, \"Enter new password\", -1\n/* HOISTED */\n);\n\nconst _hoisted_7 = /*#__PURE__*/_createTextVNode(\"This field is required\");\n\nconst _hoisted_8 = /*#__PURE__*/_createTextVNode(\"Passwords do NOT match!\");\n\nconst _hoisted_9 = {\n  class: \"col-md-12 text-center gap-2\"\n};\nconst _hoisted_10 = {\n  class: \"flex flex-column gap-2\"\n};\n\nconst _hoisted_11 = /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"password\"\n}, \"Repeat password\", -1\n/* HOISTED */\n);\n\nconst _hoisted_12 = /*#__PURE__*/_createTextVNode(\"This field is required\");\n\nconst _hoisted_13 = /*#__PURE__*/_createTextVNode(\"Passwords do NOT match!\");\n\nconst _hoisted_14 = {\n  class: \"col-md-12 text-center gap-2\"\n};\n\nconst _hoisted_15 = /*#__PURE__*/_createElementVNode(\"span\", {\n  class: \"font-bold text-2xl block mb-2 mt-4\"\n}, null, -1\n/* HOISTED */\n);\n\nconst _hoisted_16 = {\n  class: \"mb-0\"\n};\nconst _hoisted_17 = {\n  class: \"flex text-end gap-2 mt-4\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_top_bar = _resolveComponent(\"top-bar\");\n\n  const _component_InputText = _resolveComponent(\"InputText\");\n\n  const _component_InlineMessage = _resolveComponent(\"InlineMessage\");\n\n  const _component_Button = _resolveComponent(\"Button\");\n\n  const _component_Dialog = _resolveComponent(\"Dialog\");\n\n  return _openBlock(), _createElementBlock(_Fragment, null, [_createVNode(_component_top_bar, {\n    onEmitSearch: _ctx.emitedSearch,\n    \"show-search\": _ctx.showSearch,\n    \"menu-icon\": _ctx.iconCloseOpen2,\n    \"background-style\": \"rgb(255,255,255,0.6)\",\n    \"title-color\": \"black\",\n    \"title-text\": _ctx.MainTitleText\n  }, null, 8\n  /* PROPS */\n  , [\"onEmitSearch\", \"show-search\", \"menu-icon\", \"title-text\"]), _createElementVNode(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_hoisted_3, _createElementVNode(\"div\", _hoisted_4, [_createElementVNode(\"div\", _hoisted_5, [_hoisted_6, _createVNode(_component_InputText, {\n    type: \"password\",\n    onInput: $options.typing,\n    modelValue: $data.newPassword,\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.newPassword = $event),\n    style: {\n      \"min-width\": \"300px\"\n    }\n  }, null, 8\n  /* PROPS */\n  , [\"onInput\", \"modelValue\"]), _createElementVNode(\"p\", null, [!$data.newPasswordOK ? (_openBlock(), _createBlock(_component_InlineMessage, {\n    key: 0\n  }, {\n    default: _withCtx(() => [_hoisted_7]),\n    _: 1\n    /* STABLE */\n\n  })) : _createCommentVNode(\"v-if\", true), !$data.passwordsMatchOK ? (_openBlock(), _createBlock(_component_InlineMessage, {\n    key: 1\n  }, {\n    default: _withCtx(() => [_hoisted_8]),\n    _: 1\n    /* STABLE */\n\n  })) : _createCommentVNode(\"v-if\", true)])])]), _createElementVNode(\"div\", _hoisted_9, [_createElementVNode(\"div\", _hoisted_10, [_hoisted_11, _createVNode(_component_InputText, {\n    type: \"password\",\n    onInput: $options.typing,\n    modelValue: $data.newPasswordRepeat,\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $data.newPasswordRepeat = $event),\n    style: {\n      \"min-width\": \"300px\"\n    }\n  }, null, 8\n  /* PROPS */\n  , [\"onInput\", \"modelValue\"]), _createElementVNode(\"p\", null, [!$data.newPasswordRepeatOK ? (_openBlock(), _createBlock(_component_InlineMessage, {\n    key: 0\n  }, {\n    default: _withCtx(() => [_hoisted_12]),\n    _: 1\n    /* STABLE */\n\n  })) : _createCommentVNode(\"v-if\", true), !$data.passwordsMatchOK ? (_openBlock(), _createBlock(_component_InlineMessage, {\n    key: 1\n  }, {\n    default: _withCtx(() => [_hoisted_13]),\n    _: 1\n    /* STABLE */\n\n  })) : _createCommentVNode(\"v-if\", true)])])]), _createElementVNode(\"div\", _hoisted_14, [_createElementVNode(\"p\", null, [_createVNode(_component_Button, {\n    label: \"Set new password\",\n    onClick: $options.changePassword\n  }, null, 8\n  /* PROPS */\n  , [\"onClick\"])])])])]), _createCommentVNode(\" dialog info \"), _createVNode(_component_Dialog, {\n    visible: $data.displayInfoDialog,\n    \"onUpdate:visible\": _cache[3] || (_cache[3] = $event => $data.displayInfoDialog = $event),\n    modal: \"\",\n    style: _normalizeStyle(_ctx.infoDialogStyle),\n    breakpoints: {\n      '1199px': '75vw',\n      '575px': '90vw'\n    }\n  }, {\n    header: _withCtx(() => [_createElementVNode(\"h4\", null, _toDisplayString(_ctx.InfoModalHeader), 1\n    /* TEXT */\n    )]),\n    default: _withCtx(() => [_hoisted_15, _createElementVNode(\"p\", _hoisted_16, _toDisplayString(_ctx.InfoModalMessage), 1\n    /* TEXT */\n    ), _createElementVNode(\"div\", _hoisted_17, [_createVNode(_component_Button, {\n      label: \"Ok\",\n      onClick: _cache[2] || (_cache[2] = $event => $data.displayInfoDialog = false)\n    })])]),\n    _: 1\n    /* STABLE */\n\n  }, 8\n  /* PROPS */\n  , [\"visible\", \"style\"])], 64\n  /* STABLE_FRAGMENT */\n  );\n}","map":{"version":3,"mappings":"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","names":["class","_createElementVNode","for","_createVNode","_component_top_bar","onEmitSearch","_ctx","_hoisted_3","_hoisted_6","_component_InputText","type","onInput","$options","$data","$event","style","_createBlock","_component_InlineMessage","key","_hoisted_11","_component_Button","label","onClick","_createCommentVNode","_component_Dialog","visible","modal","breakpoints","header","_toDisplayString","_hoisted_15"],"sourceRoot":"","sources":["Q:\\Projects\\Transport-web-\\src\\components\\pages\\ResetPassword.vue"],"sourcesContent":["<template>\r\n\r\n<top-bar\r\n    @emitSearch=\"emitedSearch\"\r\n    v-bind:show-search=\"showSearch\"\r\n    v-bind:menu-icon=\"iconCloseOpen2\"\r\n    background-style=\"rgb(255,255,255,0.6)\"\r\n    title-color=\"black\"\r\n    v-bind:title-text=\"MainTitleText\"\r\n  ></top-bar>\r\n\r\n<div class=\"container\">\r\n\r\n    <div class=\"row\">\r\n        <div class=\"col-md-12 text-center gap-2 gaptop-2\">\r\n            <h4>Reset password</h4>\r\n        </div>\r\n      \r\n        <div class=\"col-md-12 text-center gap-2\">\r\n           \r\n            \r\n                <div class=\"flex flex-column gap-2\"> \r\n                    <label for=\"password\">Enter new password</label>\r\n                    <InputText type=\"password\" @input=\"typing\" v-model=\"newPassword\" style=\"min-width:300px\"/>\r\n\r\n                 <p> <InlineMessage v-if=\"!newPasswordOK\">This field is required</InlineMessage>\r\n                    <InlineMessage v-if=\"!passwordsMatchOK\">Passwords do NOT match!</InlineMessage></p>\r\n              </div>\r\n                \r\n           \r\n        </div>\r\n\r\n        <div class=\"col-md-12 text-center gap-2\">\r\n           \r\n                <div class=\"flex flex-column gap-2\"> \r\n                    <label for=\"password\">Repeat password</label>\r\n                    <InputText type=\"password\" @input=\"typing\" v-model=\"newPasswordRepeat\" style=\"min-width:300px\"/>\r\n\r\n                <p> <InlineMessage v-if=\"!newPasswordRepeatOK\">This field is required</InlineMessage>\r\n                    <InlineMessage v-if=\"!passwordsMatchOK\">Passwords do NOT match!</InlineMessage></p>\r\n                </div>\r\n           \r\n        </div>\r\n        <div class=\"col-md-12 text-center gap-2\">\r\n            <p><Button label=\"Set new password\" @click=\"changePassword\"/></p>\r\n        </div>\r\n    </div>\r\n\r\n</div>\r\n\r\n <!-- dialog info --> \r\n <Dialog v-model:visible=\"displayInfoDialog\" modal  :style=\"infoDialogStyle\" :breakpoints=\"{ '1199px': '75vw', '575px': '90vw' }\">\r\n    <template #header=\"\"> \r\n        <h4> {{ InfoModalHeader }}</h4>\r\n    </template>\r\n  \r\n            <span class=\"font-bold text-2xl block mb-2 mt-4\"></span>\r\n            <p class=\"mb-0\">{{InfoModalMessage }}</p>\r\n            <div class=\"flex text-end gap-2 mt-4\">\r\n                <Button label=\"Ok\" @click=\"displayInfoDialog=false\"></Button>\r\n              \r\n            </div>          \r\n</Dialog>\r\n\r\n\r\n</template>\r\n\r\n<script>\r\nimport InputText from 'primevue/inputtext';\r\nimport Button from 'primevue/button';\r\nimport InlineMessage from 'primevue/inlinemessage';\r\nimport Dialog from 'primevue/dialog';\r\n\r\nimport axios from \"axios\";\r\n\r\nimport jssha256 from \"js-sha256\";\r\n\r\nexport default {\r\n    props: [\"resetKey\"],\r\n    components: {\r\n       // DataTable,\r\n       // Column,\r\n        InputText,\r\n        //Checkbox,\r\n        Button,\r\n        Dialog,\r\n        InlineMessage,\r\n      //  Calendar,\r\n        //InputNumber,\r\n        //TabView,\r\n        //TabPanel,\r\n     //   Dropdown\r\n        \r\n    },\r\n\r\n  \r\n  data() {\r\n        return {\r\n            displayInfoDialog:false,\r\n            newPasswordOK:true,\r\n            newPasswordRepeatOK:true,\r\n            passwordsMatchOK:true,\r\n            newPassword:'',\r\n            newPasswordRepeat:'',            \r\n        }\r\n\r\n         \r\n    },\r\n\r\n   methods:{\r\n            typing(){\r\n               this.newPasswordOK=true;\r\n               this.newPasswordRepeatOK=true;\r\n               this.passwordsMatchOK=true;\r\n\r\n            },\r\n\r\n  \r\n        changePassword(){\r\n\r\n            var AllOk = true;\r\n\r\n            if(this.newPassword == ''){\r\n            this.newPasswordOK = false;\r\n            AllOk = false;\r\n            }else{this.newPasswordOK = true;}\r\n\r\n            if(this.newPasswordRepeat == ''){\r\n            this.newPasswordRepeatOK = false;\r\n            AllOk = false;\r\n            }else{this.newPasswordRepeatOK = true;}\r\n\r\n\r\n            if(this.newPassword != '' &&  this.newPasswordRepeat != ''){\r\n                    if(this.newPassword != this.newPasswordRepeat){\r\n                            this.passwordsMatchOK=false;\r\n                    AllOk = false;\r\n                    }\r\n                }\r\n\r\n           if( AllOk == true){\r\n                this.changePasswordinDatabase();\r\n           }\r\n\r\n        },\r\n\r\n      async   changePasswordinDatabase(){\r\n       \r\n            var encodedPassword = jssha256(this.newPassword);  // sha256\r\n\r\n        \r\n           // const sessionId='';\r\n            const baseUrl = localStorage.getItem(\"_rootRestUrl\");\r\n           \r\n            let formData = JSON.stringify({\"code\": this.resetKey,\"password\":encodedPassword});\r\n       \r\n            let config = {\r\n              headers: {\r\n                \"Content-Type\": \"application/json\",\r\n            }};\r\n  \r\n            \r\n            await axios\r\n              .post(baseUrl + \"â€‹/api/v1/User/ResetPassword\",formData, config )\r\n              .then(() => {\r\n                             \r\n                                       \r\n                 \r\n                this.InfoModalHeader='Info';\r\n                this.InfoModalMessage='Password is changed. You can now login to app <a href=\"/\">here</a>';\r\n                this.infoDialogStyle=[{ width: '40rem' }];\r\n                this.displayInfoDialog= true;\r\n\r\n                this.isLoading = false; \r\n            })\r\n              \r\n              .catch((error) => {\r\n            \r\n               console.table(error)\r\n                    if(error.response){\r\n                        this.InfoModalHeader='Error!';\r\n                        this.InfoModalMessage=error.response.data;\r\n                        this.infoDialogStyle=[{ width: '40rem' }];\r\n                        this.displayInfoDialog= true;\r\n                    \r\n                    }   \r\n                   \r\n                    this.isLoading = false;   \r\n                   \r\n             });\r\n\r\n\r\n        }\r\n\r\n   },\r\n\r\n    mounted(){\r\n       \r\n    }\r\n}\r\n\r\n\r\n</script>\r\n\r\n<style>\r\n@import \"datatables.net-dt\";\r\n@import \"primevue/resources/themes/bootstrap4-light-blue/theme.css\"; /*theme*/\r\n@import \"primevue/resources/primevue.min.css   \"; /*core css*/\r\n@import \"primeicons/primeicons.css   \"; /*icons*/\r\n\r\nlabel{display:block;font-size:14px}\r\n.gap-2{margin-bottom:1rem}\r\n.gaptop-2{margin-top:1rem}\r\n\r\n.p-dialog{max-height: 200px}\r\n\r\n</style>"]},"metadata":{},"sourceType":"module"}
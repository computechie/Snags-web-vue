{"ast":null,"code":"import $ from \"jquery\";\nimport Checkbox from 'primevue/checkbox';\nexport default {\n  components: {\n    Checkbox\n  },\n\n  data() {\n    return {\n      showSearch: false,\n      MainTitleText: this._rootAppTitle,\n      TopBackgroundStyle: \"blue\",\n      settings: [],\n      //login:\n      username: \"\",\n      password: \"\",\n      showUsernameAlert: false,\n      showPasswordAlert: false,\n      formIsValid: true,\n      isLoading: false,\n      error: null,\n      rememberMe: '',\n      rememberMeCheckBox: false,\n      //testing;\n      token: \"\"\n    };\n  },\n\n  methods: {\n    usernameKeyDown() {\n      this.showUsernameAlert = false;\n\n      if (this.username.length == 0) {\n        this.showUsernameAlert = true;\n        this.formIsValid = false;\n        this.usernameMessage = \"Please enter username\";\n      }\n    },\n\n    passwordKeyDown() {\n      this.showPasswordAlert = false;\n    },\n\n    closeModal(id) {\n      document.getElementById(id).click();\n    },\n\n    async submitForm() {\n      this.showUsernameAlert = false;\n      this.showPasswordAlert = false;\n      this.formIsValid = true;\n      this.usernameMessage = \"\";\n      this.passwordMessage = \"\";\n\n      if (this.username === \"\") {\n        this.showUsernameAlert = true;\n        this.formIsValid = false;\n        this.usernameMessage = \"Please enter username\";\n      }\n\n      if (this.password.length < 4) {\n        this.showPasswordAlert = true;\n        this.formIsValid = false;\n        this.passwordMessage = \"Password is too short\";\n      }\n\n      if (this.password === \"\") {\n        this.showPasswordAlert = true;\n        this.formIsValid = false;\n        this.passwordMessage = \"Please enter password\";\n      }\n\n      if (!this.formIsValid) {\n        return;\n      }\n\n      this.isLoading = true;\n      this.closeModal(\"closeLoginModal\"); //close login modal after submit;\n\n      try {\n        await this.$store.dispatch(\"login\", {\n          username: this.username,\n          password: this.password\n        });\n\n        if (this.rememberMeCheckBox == true) {\n          this._rememberMe = this.username;\n          localStorage.setItem('rememberMe', this.username);\n        } else {\n          this._rememberMe = '';\n          localStorage.removeItem('rememberMe');\n        }\n\n        this.isLoading = false;\n        this.closeModal(\"closeLoginModal\");\n        this.$router.replace(\"/pages/trips/\");\n      } catch (e) {\n        this.closeModal(\"closeLoginModal\"); //close login modal after submit;\n\n        this.error = e.message || \"Failed to authenticate.\";\n        alert(this.error);\n        this.error = null;\n        this.isLoading = false;\n      }\n\n      this.isLoading = false;\n    }\n\n  },\n  emits: [\"set-fullscreenwidth\"],\n\n  mounted() {\n    //set some important variables\n    localStorage.setItem(\"_rootRestUrl\", this._rootRestUrl); // this._rootRestUrl come from settings.in read in main.js\n\n    this.showSearch = false; //if user is logged in then go to project list!\n\n    if (this.$store.getters.isAuthenticated) {\n      this.$router.replace(\"/pages/projectList\");\n    }\n\n    this.$emit(\"set-fullscreenwidth\");\n\n    if (localStorage.getItem('rememberMe') != null) {\n      this._rememberMe = localStorage.getItem('rememberMe');\n      this.rememberMeCheckBox = true;\n      this.username = this._rememberMe;\n    } else {\n      this._rememberMe = '';\n      this.rememberMeCheckBox = false;\n      this.username = '';\n      this.password = '';\n    }\n\n    if (this.username == 'null') {\n      this.username = '';\n    }\n\n    if (this.rememberMeCheckBox) {\n      $('#Check1').attr('checked', 'checked');\n    } else {\n      $('#Check1').removeAttr('checked');\n    }\n  }\n\n};","map":{"version":3,"mappings":"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","names":["$","Checkbox","components","data","showSearch","MainTitleText","_rootAppTitle","TopBackgroundStyle","settings","username","password","showUsernameAlert","showPasswordAlert","formIsValid","isLoading","error","rememberMe","rememberMeCheckBox","token","methods","usernameKeyDown","length","usernameMessage","passwordKeyDown","closeModal","id","document","getElementById","click","submitForm","passwordMessage","$store","dispatch","_rememberMe","localStorage","setItem","removeItem","$router","replace","e","message","alert","emits","mounted","_rootRestUrl","getters","isAuthenticated","$emit","getItem","attr","removeAttr"],"sourceRoot":"","sources":["Q:\\Projects\\Transport-web-\\src\\components\\LoginPage.vue"],"sourcesContent":["<template>\r\n  <base-dialog :show=\"!!error\" title=\"Error\"></base-dialog>\r\n  <base-dialog :show=\"isLoading\" title=\"Authenticating...\" fixed>\r\n    <base-spinner></base-spinner>\r\n  </base-dialog>\r\n\r\n  <top-bar\r\n    v-bind:show-search=\"showSearch\"\r\n   \r\n    title-color=\"white\"\r\n    v-bind:title-text=\"MainTitleText\"\r\n  ></top-bar>\r\n\r\n  <div\r\n    class=\"containerfluid loginPageBackground\"\r\n    :style=\"{ backgroundImage: `url(${_rootLoginBackground})` }\"\r\n  >\r\n    <div class=\"container-fluid versionInfoHolder\">\r\n      <div class=\"row gy-3 justify-content-between\">\r\n        <div class=\"col-12 col-sm-5 col-lg-4 col-xl-3 order-2 order-sm-1\">\r\n          <version-info></version-info>\r\n        </div>\r\n        <div\r\n          class=\"\r\n            col-12 col-sm-5 col-lg-4 col-xl-3\r\n            order-1 order-sm-2\r\n            text-center\r\n          \"\r\n        >\r\n          <contact-info></contact-info>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <!-- Login Modal -->\r\n  <div\r\n    class=\"modal fade\"\r\n    id=\"loginModal\"\r\n    data-bs-backdrop=\"static\"\r\n    data-bs-keyboard=\"false\"\r\n    tabindex=\"-1\"\r\n    aria-labelledby=\"loginModalLabel\"\r\n    aria-hidden=\"true\"\r\n  >\r\n    <div class=\"modal-dialog\">\r\n      <div class=\"modal-content\">\r\n        <div class=\"modal-header\">\r\n          <h5 class=\"modal-title\" id=\"loginModalLabel\">User sign in</h5>\r\n          <button\r\n            type=\"button\"\r\n            id=\"closeLoginModal\"\r\n            class=\"btn-close\"\r\n            data-bs-dismiss=\"modal\"\r\n            aria-label=\"Close\"\r\n          ></button>\r\n        </div>\r\n        <div class=\"modal-body\">\r\n          <form @submit.prevent=\"submitForm\">\r\n            <div class=\"mb-3\">\r\n              <label for=\"Inputusername\" class=\"form-label\">Username</label>\r\n              <input\r\n                type=\"username\"\r\n                v-model=\"username\"\r\n                @keyup=\"usernameKeyDown\"\r\n                class=\"form-control\"\r\n                id=\"Inputusername\"\r\n                aria-describedby=\"usernameHelp\"\r\n                autocomplete=\"off\"\r\n              />\r\n              <div v-if=\"showUsernameAlert\" class=\"alert alert-danger alert-sm\">\r\n                {{ usernameMessage }}\r\n              </div>\r\n            </div>\r\n            <div class=\"mb-3\">\r\n              <label for=\"InputPassword\" class=\"form-label\">Password</label>\r\n              <input\r\n                type=\"password\"\r\n                v-model=\"password\"\r\n                @keyup=\"passwordKeyDown\"\r\n                class=\"form-control\"\r\n                id=\"InputPassword\"\r\n                autocomplete=\"new-password\"\r\n              />\r\n              <div v-if=\"showPasswordAlert\" class=\"alert alert-danger alert-sm\">\r\n                {{ passwordMessage }}\r\n              </div>\r\n            </div>\r\n            <div class=\"mb-3 form-check\">\r\n             <!-- <input type=\"checkbox\" class=\"form-check-input\" id=\"Check1\" />-->\r\n              <Checkbox inputId=\"Check1\" v-model=\"rememberMeCheckBox\" :binary=\"true\" />\r\n              <label class=\"form-check-label\" for=\"Check1\" >Remember me</label>\r\n\r\n\r\n            </div>\r\n            <button type=\"submit\" class=\"btn btn-primary\">Login</button>\r\n          </form>\r\n        </div>\r\n        <div class=\"modal-footer\">\r\n          <a href=\"/forgotPassword\">Forgot password?</a>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport $ from \"jquery\";\r\nimport Checkbox from 'primevue/checkbox';\r\n\r\nexport default {\r\n  components: {\r\n      Checkbox\r\n  },\r\n  data() {\r\n    return {\r\n      showSearch: false,\r\n      MainTitleText: this._rootAppTitle,\r\n      TopBackgroundStyle: \"blue\",\r\n\r\n      settings: [],\r\n\r\n      //login:\r\n      username: \"\",\r\n      password: \"\",\r\n      showUsernameAlert: false,\r\n      showPasswordAlert: false,\r\n      formIsValid: true,\r\n      isLoading: false,\r\n      error: null,\r\n      rememberMe:'',\r\n      rememberMeCheckBox:false,\r\n\r\n      //testing;\r\n      token: \"\",\r\n    };\r\n  },\r\n\r\n  methods: {\r\n    usernameKeyDown() {\r\n      this.showUsernameAlert = false;\r\n      if (this.username.length == 0) {\r\n        this.showUsernameAlert = true;\r\n        this.formIsValid = false;\r\n        this.usernameMessage = \"Please enter username\";\r\n      }\r\n    },\r\n\r\n    passwordKeyDown() {\r\n      this.showPasswordAlert = false;\r\n    },\r\n\r\n    closeModal(id) {\r\n      document.getElementById(id).click();\r\n    },\r\n\r\n    async submitForm() {\r\n      this.showUsernameAlert = false;\r\n      this.showPasswordAlert = false;\r\n      this.formIsValid = true;\r\n      this.usernameMessage = \"\";\r\n      this.passwordMessage = \"\";\r\n\r\n      if (this.username === \"\") {\r\n        this.showUsernameAlert = true;\r\n        this.formIsValid = false;\r\n        this.usernameMessage = \"Please enter username\";\r\n      }\r\n\r\n      if (this.password.length < 4) {\r\n        this.showPasswordAlert = true;\r\n        this.formIsValid = false;\r\n        this.passwordMessage = \"Password is too short\";\r\n      }\r\n\r\n      if (this.password === \"\") {\r\n        this.showPasswordAlert = true;\r\n        this.formIsValid = false;\r\n        this.passwordMessage = \"Please enter password\";\r\n      }\r\n\r\n      if (!this.formIsValid) {\r\n        return;\r\n      }\r\n\r\n      this.isLoading = true;\r\n      this.closeModal(\"closeLoginModal\"); //close login modal after submit;\r\n\r\n      try {\r\n        await this.$store.dispatch(\"login\", {\r\n          username: this.username,\r\n          password: this.password,\r\n        });\r\n\r\n   \r\n        if(this.rememberMeCheckBox == true){\r\n          this._rememberMe = this.username;\r\n          localStorage.setItem('rememberMe',this.username);\r\n       \r\n        }else{\r\n          this._rememberMe = '';\r\n          localStorage.removeItem('rememberMe');\r\n       \r\n        }\r\n\r\n\r\n\r\n        this.isLoading = false;\r\n        this.closeModal(\"closeLoginModal\");\r\n        this.$router.replace(\"/pages/trips/\");\r\n      \r\n    \r\n    } catch (e) {\r\n\r\n        this.closeModal(\"closeLoginModal\"); //close login modal after submit;\r\n        this.error = e.message || \"Failed to authenticate.\";\r\n\r\n        alert(this.error);\r\n\r\n        this.error = null;\r\n\r\n        this.isLoading = false;\r\n      }\r\n\r\n      this.isLoading = false;\r\n    },\r\n  },\r\n\r\n  emits: [\"set-fullscreenwidth\"],\r\n\r\n  mounted() {\r\n\r\n    //set some important variables\r\n    localStorage.setItem(\"_rootRestUrl\",this._rootRestUrl); // this._rootRestUrl come from settings.in read in main.js\r\n\r\n    this.showSearch = false;\r\n\r\n    //if user is logged in then go to project list!\r\n    if (this.$store.getters.isAuthenticated) {\r\n      this.$router.replace(\"/pages/projectList\");\r\n    }\r\n\r\n    this.$emit(\"set-fullscreenwidth\");\r\n   \r\n    if(localStorage.getItem('rememberMe')!=null){\r\n      this._rememberMe = localStorage.getItem('rememberMe');\r\n      this.rememberMeCheckBox = true;\r\n      this.username = this._rememberMe;\r\n    }else{\r\n      this._rememberMe = '';\r\n      this.rememberMeCheckBox = false;\r\n      this.username = '';\r\n      this.password = '';\r\n    }\r\nif(this.username=='null'){\r\n  this.username = '';  \r\n}\r\n\r\n\r\n    if(this.rememberMeCheckBox) {\r\n        $('#Check1').attr('checked','checked');\r\n    }   else{\r\n        $('#Check1').removeAttr('checked');\r\n    }\r\n   \r\n   \r\n\r\n  },\r\n};\r\n</script>\r\n\r\n\r\n<style>\r\n@import \"primevue/resources/themes/bootstrap4-light-blue/theme.css\"; /*theme*/\r\n@import \"primevue/resources/primevue.min.css   \"; /*core css*/\r\n@import \"primeicons/primeicons.css   \"; /*icons*/\r\n\r\n/* LOGIN PAGE */\r\n.loginPageBackground {\r\n  height: 100vh;\r\n  background-size: cover;\r\n  background-position: center;\r\n}\r\n.topLoginBar {\r\n  background-color: rgb(0, 0, 0, 0.1);\r\n  min-height: 55px;\r\n}\r\n#mainAppTitle {\r\n  font-size: 1.23rem;\r\n  font-weight: 700;\r\n}\r\n.signInHref {\r\n  color: #787878;\r\n}\r\n\r\n.loginPageBackground {\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  width: 100%;\r\n}\r\n\r\n.versionInfoHolder {\r\n  position: absolute;\r\n  bottom: 80px;\r\n}\r\n\r\n@media (min-width: 600px) {\r\n  .versionInfoHolder {\r\n    position: absolute;\r\n    bottom: 20px;\r\n  }\r\n}\r\n\r\n\r\n\r\n.form-check {\r\n   \r\n    padding-left:0 !important \r\n    margin-right:6px;\r\n}\r\n\r\n/* -------------------------*/\r\n</style>"]},"metadata":{},"sourceType":"module"}
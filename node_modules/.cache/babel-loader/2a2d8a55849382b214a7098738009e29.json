{"ast":null,"code":"import \"core-js/modules/es.error.cause.js\";\nexport default {\n  async login(context, payload) {\n    return context.dispatch('auth', { ...payload\n    });\n  },\n\n  async auth(context, payload) {\n    const token = context.rootGetters.token; //User token !!\n\n    const response = await fetch('https://www.it-b.hr/computech.php?auth=' + token, {\n      method: 'POST',\n      body: JSON.stringify({\n        username: payload.username,\n        password: payload.password,\n        userFullname: payload.userFullname,\n        returnSecureToken: true\n      })\n    });\n    const responseData = await response.json();\n\n    if (!response.ok) {\n      // console.log(responseData);\n      const error = new Error(responseData.message || 'Failed to authenticate.');\n      throw error;\n    }\n\n    localStorage.setItem('token', responseData[0].token);\n    localStorage.setItem('userId', responseData[0].userId), localStorage.setItem('userFullname', responseData[0].userFullname), context.commit('setUser', {\n      token: responseData[0].token,\n      userId: responseData[0].userId,\n      userFullname: responseData[0].userFullname,\n      tokenExpiration: responseData[0].tokenExpiration\n    });\n  }\n\n};","map":{"version":3,"names":["login","context","payload","dispatch","auth","token","rootGetters","response","fetch","method","body","JSON","stringify","username","password","userFullname","returnSecureToken","responseData","json","ok","error","Error","message","localStorage","setItem","userId","commit","tokenExpiration"],"sources":["H:/www/vue/vue-cli-01-a-new-vue-project/src/store/modules/auth/actions.js"],"sourcesContent":["export default {\r\n    async login(context,payload) {\r\n          return  context.dispatch('auth',{\r\n                ...payload\r\n            });\r\n    }, \r\n    \r\n    async  auth(context,payload){\r\n\r\n        const token = context.rootGetters.token; //User token !!\r\n\r\n   \r\n        const response = await fetch('https://www.it-b.hr/computech.php?auth='+token,{\r\n               method: 'POST',\r\n               body: JSON.stringify({\r\n                   username: payload.username,\r\n                   password: payload.password,\r\n                   userFullname: payload.userFullname,\r\n                   returnSecureToken : true\r\n               })\r\n              \r\n   \r\n          });\r\n                 \r\n          const responseData = await response.json();\r\n   \r\n          if(!response.ok){\r\n              // console.log(responseData);\r\n               const error = new Error(responseData.message || 'Failed to authenticate.');\r\n               throw error;\r\n          }\r\n   \r\n          localStorage.setItem('token',responseData[0].token);\r\n          localStorage.setItem('userId',responseData[0].userId),\r\n          localStorage.setItem('userFullname',responseData[0].userFullname),\r\n\r\n          context.commit('setUser',{\r\n                  token: responseData[0].token,\r\n                  userId : responseData[0].userId,\r\n                  userFullname: responseData[0].userFullname,\r\n                  tokenExpiration :responseData[0].tokenExpiration\r\n   \r\n           });\r\n   \r\n    }\r\n\r\n\r\n}"],"mappings":";AAAA,eAAe;EACX,MAAMA,KAAN,CAAYC,OAAZ,EAAoBC,OAApB,EAA6B;IACvB,OAAQD,OAAO,CAACE,QAAR,CAAiB,MAAjB,EAAwB,EAC1B,GAAGD;IADuB,CAAxB,CAAR;EAGL,CALU;;EAOX,MAAOE,IAAP,CAAYH,OAAZ,EAAoBC,OAApB,EAA4B;IAExB,MAAMG,KAAK,GAAGJ,OAAO,CAACK,WAAR,CAAoBD,KAAlC,CAFwB,CAEiB;;IAGzC,MAAME,QAAQ,GAAG,MAAMC,KAAK,CAAC,4CAA0CH,KAA3C,EAAiD;MACtEI,MAAM,EAAE,MAD8D;MAEtEC,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;QACjBC,QAAQ,EAAEX,OAAO,CAACW,QADD;QAEjBC,QAAQ,EAAEZ,OAAO,CAACY,QAFD;QAGjBC,YAAY,EAAEb,OAAO,CAACa,YAHL;QAIjBC,iBAAiB,EAAG;MAJH,CAAf;IAFgE,CAAjD,CAA5B;IAYE,MAAMC,YAAY,GAAG,MAAMV,QAAQ,CAACW,IAAT,EAA3B;;IAEA,IAAG,CAACX,QAAQ,CAACY,EAAb,EAAgB;MACZ;MACC,MAAMC,KAAK,GAAG,IAAIC,KAAJ,CAAUJ,YAAY,CAACK,OAAb,IAAwB,yBAAlC,CAAd;MACA,MAAMF,KAAN;IACJ;;IAEDG,YAAY,CAACC,OAAb,CAAqB,OAArB,EAA6BP,YAAY,CAAC,CAAD,CAAZ,CAAgBZ,KAA7C;IACAkB,YAAY,CAACC,OAAb,CAAqB,QAArB,EAA8BP,YAAY,CAAC,CAAD,CAAZ,CAAgBQ,MAA9C,GACAF,YAAY,CAACC,OAAb,CAAqB,cAArB,EAAoCP,YAAY,CAAC,CAAD,CAAZ,CAAgBF,YAApD,CADA,EAGAd,OAAO,CAACyB,MAAR,CAAe,SAAf,EAAyB;MACjBrB,KAAK,EAAEY,YAAY,CAAC,CAAD,CAAZ,CAAgBZ,KADN;MAEjBoB,MAAM,EAAGR,YAAY,CAAC,CAAD,CAAZ,CAAgBQ,MAFR;MAGjBV,YAAY,EAAEE,YAAY,CAAC,CAAD,CAAZ,CAAgBF,YAHb;MAIjBY,eAAe,EAAEV,YAAY,CAAC,CAAD,CAAZ,CAAgBU;IAJhB,CAAzB,CAHA;EAWL;;AA5CU,CAAf"},"metadata":{},"sourceType":"module"}
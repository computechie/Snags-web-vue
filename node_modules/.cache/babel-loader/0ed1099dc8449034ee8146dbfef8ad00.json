{"ast":null,"code":"import \"core-js/modules/web.dom-exception.stack.js\";\n// import Swiper core and required components\nimport { Navigation, Pagination, Scrollbar, A11y } from 'swiper/modules';\nimport Button from 'primevue/button';\nimport { Thumbs } from 'swiper/modules'; // Import Swiper Vue.js components\n\nimport { Swiper, SwiperSlide } from \"swiper/vue\";\nimport 'swiper/css';\nimport 'swiper/css/navigation';\nimport 'swiper/css/scrollbar';\nimport Dialog from 'primevue/dialog'; // import Image from 'primevue/image';\n\nimport axios from \"axios\";\nimport $ from \"jquery\"; // Import Swiper styles\n\nexport default {\n  props: ['tripImages', 'openedcargoname', 'userType'],\n  components: {\n    Swiper,\n    SwiperSlide,\n    Dialog,\n    Button\n  },\n\n  setup() {\n    const onSwiper = swiper => {\n      console.log(swiper);\n    };\n\n    return {\n      onSwiper,\n      SwiperSlide,\n      Thumbs,\n      modules: [Navigation, Pagination, Scrollbar, A11y]\n    };\n  },\n\n  data() {\n    return {\n      swiper: '',\n      defaultSlideTo: 0,\n      displayDeletePhotoConfirm: false,\n      zoomedImageId: '',\n      photoIdForDelete: '',\n      visibleImagesModal: false,\n      baseUrl: localStorage.getItem(\"_rootRestUrl\"),\n      methodName: '/api/v1/Trip/ViewTripImage',\n      methodNameDownload: '/api/v1/Trip/DownloadTripFile',\n      parameter: '?tripFileKey=',\n      zoomedImageSource: '',\n      zoomedImageClass: 'zoomedImage',\n      rotationClass: '',\n      rotate: 0\n    };\n  },\n\n  methods: {\n    onSwiper1(swiper) {\n      this.swiper = swiper;\n      this.swiper.slideTo(this.defaultSlideTo);\n    },\n\n    downloadImage() {\n      /*  var imageId = $('.swiperSlideHolder img').attr('id')\r\n        this.zoomedImageId=imageId;*/\n      const sessionId = localStorage.getItem(\"token\");\n      var downloadURL = this.zoomedImageSource = this.baseUrl + this.methodNameDownload + this.parameter + this.zoomedImageId + '&sessionId=' + sessionId;\n      alert(downloadURL);\n    },\n\n    zoomImages(imageKey, index) {\n      var imageId = this.tripImages[index];\n      this.zoomedImageId = imageId['key'];\n      this.zoomedImageSource = this.baseUrl + this.methodName + this.parameter + imageKey;\n      this.rotate = 0;\n      this.zoomedImageClass = 'zoomedImage';\n      this.visibleImagesModal = true;\n      this.rotationClass = ''; // alert(index)\n\n      this.defaultSlideTo = index;\n      this.loading = false;\n    },\n\n    async rotateZoomedImage(imageId) {\n      this.$emit('showloader', true);\n      var timestamp = Date.now();\n      var newPhotoUrlRequest = this.baseUrl + this.methodName + this.parameter + imageId + '&rotate=true&t=' + timestamp;\n      const sessionId = localStorage.getItem(\"token\"); // $('#'+imageId).attr('src',newPhotoUrl)\n\n      let formData = JSON.stringify({\n        sessionId: sessionId\n      });\n      let config = {\n        headers: {\n          \"Content-Type\": \"application/json\"\n        }\n      };\n      await axios.get(newPhotoUrlRequest, formData, config).then(response => {\n        // var newPhotoUrl = this.baseUrl+this.methodName+this.parameter+imageId +'&t='+timestamp;\n        var newPhotoUrl = btoa(unescape(encodeURIComponent(response.data)));\n        var Base64 = {\n          _keyStr: \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\",\n          encode: function (e) {\n            var t = \"\";\n            var n, r, i, s, o, u, a;\n            var f = 0;\n            e = Base64._utf8_encode(e);\n\n            while (f < e.length) {\n              n = e.charCodeAt(f++);\n              r = e.charCodeAt(f++);\n              i = e.charCodeAt(f++);\n              s = n >> 2;\n              o = (n & 3) << 4 | r >> 4;\n              u = (r & 15) << 2 | i >> 6;\n              a = i & 63;\n\n              if (isNaN(r)) {\n                u = a = 64;\n              } else if (isNaN(i)) {\n                a = 64;\n              }\n\n              t = t + this._keyStr.charAt(s) + this._keyStr.charAt(o) + this._keyStr.charAt(u) + this._keyStr.charAt(a);\n            }\n\n            return t;\n          },\n          decode: function (e) {\n            var t = \"\";\n            var n, r, i;\n            var s, o, u, a;\n            var f = 0;\n            e = e.replace(/[^A-Za-z0-9\\+\\/\\=]/g, \"\");\n\n            while (f < e.length) {\n              s = this._keyStr.indexOf(e.charAt(f++));\n              o = this._keyStr.indexOf(e.charAt(f++));\n              u = this._keyStr.indexOf(e.charAt(f++));\n              a = this._keyStr.indexOf(e.charAt(f++));\n              n = s << 2 | o >> 4;\n              r = (o & 15) << 4 | u >> 2;\n              i = (u & 3) << 6 | a;\n              t = t + String.fromCharCode(n);\n\n              if (u != 64) {\n                t = t + String.fromCharCode(r);\n              }\n\n              if (a != 64) {\n                t = t + String.fromCharCode(i);\n              }\n            }\n\n            t = Base64._utf8_decode(t);\n            return t;\n          },\n          _utf8_encode: function (e) {\n            e = e.replace(/\\r\\n/g, \"\\n\");\n            var t = \"\";\n\n            for (var n = 0; n < e.length; n++) {\n              var r = e.charCodeAt(n);\n\n              if (r < 128) {\n                t += String.fromCharCode(r);\n              } else if (r > 127 && r < 2048) {\n                t += String.fromCharCode(r >> 6 | 192);\n                t += String.fromCharCode(r & 63 | 128);\n              } else {\n                t += String.fromCharCode(r >> 12 | 224);\n                t += String.fromCharCode(r >> 6 & 63 | 128);\n                t += String.fromCharCode(r & 63 | 128);\n              }\n            }\n\n            return t;\n          },\n          _utf8_decode: function (e) {\n            var t = \"\";\n            var n = 0;\n            var r = c1 = c2 = 0;\n\n            while (n < e.length) {\n              r = e.charCodeAt(n);\n\n              if (r < 128) {\n                t += String.fromCharCode(r);\n                n++;\n              } else if (r > 191 && r < 224) {\n                c2 = e.charCodeAt(n + 1);\n                t += String.fromCharCode((r & 31) << 6 | c2 & 63);\n                n += 2;\n              } else {\n                c2 = e.charCodeAt(n + 1);\n                c3 = e.charCodeAt(n + 2);\n                t += String.fromCharCode((r & 15) << 12 | (c2 & 63) << 6 | c3 & 63);\n                n += 3;\n              }\n            }\n\n            return t;\n          }\n        }; //  $('#'+imageId).attr('src',newPhotoUrl);\n\n        $('#' + imageId).attr('src', \"data:image/png;base64,\" + Base64.encode(newPhotoUrl));\n        this.$emit('showloader', false);\n      }).catch(function (error) {\n        // handle error\n        console.table(error);\n        this.$emit('showloader', false);\n      });\n    },\n\n    sendBackIdForDelete(imageId) {\n      this.displayDeletePhotoConfirm = true;\n      this.photoIdForDelete = imageId;\n      this.$emit('delete-photo', imageId);\n    },\n\n    sendBackIdForDeleteModal(imageId) {\n      this.displayDeletePhotoConfirm = true;\n      this.photoIdForDelete = imageId;\n    },\n\n    deletePhoto(photoId) {\n      this.$emit('delete-photomodal', photoId);\n      this.visibleImagesModal = false;\n      this.displayDeletePhotoConfirm = false;\n    },\n\n    onSlideChange() {\n      var imageId = $('.zoomedImageHolder .swiper .swiper-wrapper .swiper-slide-active img').attr('id');\n      this.zoomedImageId = imageId;\n    }\n\n  },\n\n  mounted() {// alert(this.tripImages)\n  }\n\n};","map":{"version":3,"mappings":"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","names":["Navigation","Pagination","Scrollbar","A11y","Button","Thumbs","Swiper","SwiperSlide","Dialog","axios","$","props","components","setup","onSwiper","swiper","console","log","modules","data","defaultSlideTo","displayDeletePhotoConfirm","zoomedImageId","photoIdForDelete","visibleImagesModal","baseUrl","localStorage","getItem","methodName","methodNameDownload","parameter","zoomedImageSource","zoomedImageClass","rotationClass","rotate","methods","onSwiper1","slideTo","downloadImage","sessionId","downloadURL","alert","zoomImages","imageKey","index","imageId","tripImages","loading","rotateZoomedImage","$emit","timestamp","Date","now","newPhotoUrlRequest","formData","JSON","stringify","config","headers","get","then","response","newPhotoUrl","btoa","unescape","encodeURIComponent","Base64","_keyStr","encode","e","t","n","r","i","s","o","u","a","f","_utf8_encode","length","charCodeAt","isNaN","charAt","decode","replace","indexOf","String","fromCharCode","_utf8_decode","c1","c2","c3","attr","catch","error","table","sendBackIdForDelete","sendBackIdForDeleteModal","deletePhoto","photoId","onSlideChange","mounted"],"sourceRoot":"","sources":["Q:\\Projects\\Transport-web-\\src\\components\\ui\\SwiperCarousel.vue"],"sourcesContent":["<template>\r\n   \r\n   <swiper\r\n    :modules=\"modules\"\r\n    :thumbs=\"{ swiper: thumbsSwiper }\"\r\n      :slides-per-view=\"2\"\r\n      :space-between=\"30\"\r\n      navigation\r\n      :pagination=\"{ clickable: true }\"\r\n      @swiper=\"onSwiper\"\r\n     \r\n    >\r\n      <swiper-slide class=\"swiperSlideHolder\" v-for=\"(tripImage,index) in tripImages\" v-bind:key=\"tripImage.key\" >\r\n         <img @click=\"zoomImages(tripImage.key, index)\" :src=\"baseUrl+methodName+parameter+tripImage.key\" class=\"swiperImagesSide\">\r\n         <div class=\"deleteImageButton\">\r\n            <Button v-if=\"userType=='ADMIN'\" @click=\"sendBackIdForDelete(tripImage.key)\" v-tooltip.top=\"'Delete photo'\" icon=\"fa-stack-1x fa-solid fa-trash-can\" label=\"\" severity=\"danger\" class=\"deleteImageButton\"></Button>\r\n         </div>\r\n      </swiper-slide>\r\n         \r\n    </swiper>\r\n\r\n   \r\n    <Dialog   :position=\"'top'\"  \r\n              v-model:visible=\"visibleImagesModal\" \r\n              modal\r\n              :style=\"{ width: '80%' } \"  \r\n              :pt=\"{mask: {style: 'backdrop-filter: blur(2px)' }  }\"  \r\n              :breakpoints=\"{ '1199px': '75vw', '575px': '90vw' }\"\r\n              class=\"zoomImageDialog\"\r\n              >\r\n              \r\n\r\n         <template #header>\r\n          \r\n              <div class=\"row\" style=\"width:100%\">\r\n                <div class=\"col-md-12  text-center\">\r\n                   <h5>{{ openedcargoname }} </h5>                \r\n                   <Button v-tooltip.bottom=\"'Download photo'\" icon=\"pi pi-download\" @click=\"downloadImage(zoomedImageId)\" class=\"downloadImageButton\"/> \r\n                </div>\r\n              \r\n               \r\n              </div>\r\n             \r\n             \r\n          \r\n        </template>\r\n\r\n    \r\n       <!-- One image-->\r\n       <!-- <div :class=\"'zoomedImageHolder'\" >\r\n            <img :src=\"zoomedImageSource\" :class=\"'zoomedImageClass'+ rotationClass\">\r\n        </div>-->\r\n\r\n       <!-- or carousel again-->\r\n       <div :class=\"'zoomedImageHolder'\" >\r\n            <swiper\r\n            :modules=\"modules\"\r\n            :thumbs=\"{ swiper: thumbsSwiper }\"\r\n            :slides-per-view=\"1\"\r\n            :space-between=\"10\"\r\n            navigation\r\n            :pagination=\"{ clickable: true }\"\r\n            @swiper=\"onSwiper1\"\r\n            @slideChangeTransitionEnd=\"onSlideChange\"\r\n           \r\n            ref=\"swiperTop\"\r\n          >\r\n            <swiper-slide  class=\"swiperSlideHolder\" v-for=\"(tripImage,index) in tripImages\" v-bind:key=\"tripImage.key\">\r\n              <img  :src=\"baseUrl+methodName+parameter+tripImage.key\" :id=\"tripImage.key\" :index=\"index\">\r\n             </swiper-slide>\r\n             \r\n           \r\n\r\n          </swiper>\r\n          <div class=\"row\">\r\n            <div class=\"col-md-4 text-start\">\r\n              </div>\r\n            <div class=\"col-md-4 text-center\">\r\n              <a  v-tooltip.top=\"{ value: 'Rotate photo', showDelay: 1000, hideDelay: 300 }\" href=\"javascript:\"  @click=\"rotateZoomedImage(zoomedImageId)\" ><i class=\"pi pi-undo rotateIcon\"></i></a>\r\n            </div>\r\n            <div class=\"col-md-4 text-end\">\r\n              \r\n              <Button v-if=\"userType=='ADMIN'\" @click=\"photoIdForDelete=zoomedImageId;displayDeletePhotoConfirm=true\" v-tooltip.top=\"{ value: 'Delete photo', showDelay: 1000, hideDelay: 300 }\" icon=\"pi pi-trash\" class=\"deletePhotoButton\" label=\"Delete photo\"></Button>\r\n             \r\n            </div>\r\n         </div>\r\n          \r\n  </div>  \r\n      <!-- ------------------------------ -->\r\n\r\n\r\n       <template #footer>\r\n         \r\n       \r\n       </template>\r\n\r\n        </Dialog>  \r\n\r\n \r\n<!-- dialog confirm Delete Photo --> \r\n<Dialog v-model:visible=\"displayDeletePhotoConfirm\" modal  :style=\"{ width: '30rem' }\" :breakpoints=\"{ '1199px': '75vw', '575px': '90vw' }\">\r\n    <template #header=\"\"> \r\n        <h4> Please confirm</h4>\r\n    </template>\r\n  \r\n            <span class=\"font-bold text-2xl block mb-2 mt-4\"></span>\r\n            <p class=\"mb-0\">Are you sure that you want to delete this photo?</p>\r\n          \r\n          <div class=\"row\" style=\"margin-top:30px\">\r\n              <div class=\"col-md-6 text-start\">\r\n                  <Button class=\"redButton\" label=\"Cancel\" @click=\"displayDeletePhotoConfirm=false\"></Button>\r\n              </div>\r\n              <div class=\"col-md-6 text-end\">\r\n                  <Button label=\"Yes, delete\" @click=\"deletePhoto(photoIdForDelete)\"></Button>\r\n            </div>   \r\n          </div>\r\n           \r\n</Dialog>\r\n\r\n\r\n\r\n  </template>\r\n  <script>\r\n  \r\n\r\n  // import Swiper core and required components\r\n  import { Navigation, Pagination, Scrollbar, A11y } from 'swiper/modules';\r\n  import Button from 'primevue/button';\r\n  import { Thumbs } from 'swiper/modules';\r\n\r\n  // Import Swiper Vue.js components\r\n  import { Swiper, SwiperSlide } from \"swiper/vue\";\r\n  \r\n  import 'swiper/css';\r\n  import 'swiper/css/navigation';\r\n  import 'swiper/css/scrollbar';\r\n  import Dialog from 'primevue/dialog';\r\n // import Image from 'primevue/image';\r\n\r\n  \r\n import axios from \"axios\";\r\n  import $ from \"jquery\";\r\n\r\n\r\n   // Import Swiper styles\r\n  export default {\r\n    props:['tripImages','openedcargoname','userType'],\r\n    components: {\r\n      Swiper,\r\n      SwiperSlide,\r\n      Dialog,\r\n      Button\r\n    \r\n    },\r\n    setup() {\r\n      const onSwiper = (swiper) => {\r\n        console.log(swiper);\r\n       \r\n       \r\n      };\r\n\r\n          \r\n      return {\r\n        onSwiper,SwiperSlide,Thumbs,\r\n       \r\n        modules: [Navigation, Pagination, Scrollbar, A11y],\r\n      };\r\n    },\r\n\r\n    data() {\r\n      return {\r\n        \r\n        swiper:'',\r\n        defaultSlideTo : 0,\r\n        displayDeletePhotoConfirm:false,\r\n        zoomedImageId: '',\r\n        photoIdForDelete:'',\r\n        visibleImagesModal: false,\r\n        baseUrl : localStorage.getItem(\"_rootRestUrl\"),\r\n        methodName : '/api/v1/Trip/ViewTripImage',\r\n        methodNameDownload: '/api/v1/Trip/DownloadTripFile',\r\n        parameter : '?tripFileKey=',\r\n        zoomedImageSource : '',\r\n        zoomedImageClass : 'zoomedImage',\r\n        rotationClass:'',\r\n        rotate:0,\r\n      \r\n      }\r\n    },\r\n\r\n    methods: {\r\n      onSwiper1(swiper) {\r\n        this.swiper = swiper\r\n        this.swiper.slideTo(this.defaultSlideTo);\r\n        \r\n\r\n    },\r\n\r\n    downloadImage(){\r\n        /*  var imageId = $('.swiperSlideHolder img').attr('id')\r\n          this.zoomedImageId=imageId;*/\r\n         \r\n          const sessionId=localStorage.getItem(\"token\");\r\n          var downloadURL = this.zoomedImageSource = this.baseUrl+this.methodNameDownload+this.parameter+this.zoomedImageId+'&sessionId='+sessionId;\r\n\r\n      alert(downloadURL)\r\n\r\n    },\r\n    \r\n      \r\n      zoomImages(imageKey, index){\r\n          \r\n          \r\n\r\n            var imageId = this.tripImages[index];\r\n            this.zoomedImageId=imageId['key'];\r\n\r\n            this.zoomedImageSource = this.baseUrl+this.methodName+this.parameter+imageKey;\r\n            this.rotate = 0;\r\n            this.zoomedImageClass = 'zoomedImage';\r\n            this.visibleImagesModal = true;\r\n            this.rotationClass = '';\r\n            \r\n           // alert(index)\r\n\r\n            this.defaultSlideTo = index;\r\n            this.loading = false;\r\n          },\r\n\r\n     async rotateZoomedImage(imageId){\r\n\r\n            this.$emit('showloader',true);\r\n\r\n            \r\n\r\n              var timestamp = Date.now();\r\n              var newPhotoUrlRequest = this.baseUrl+this.methodName+this.parameter+imageId +'&rotate=true&t='+timestamp;\r\n              const sessionId=localStorage.getItem(\"token\");\r\n            \r\n             // $('#'+imageId).attr('src',newPhotoUrl)\r\n\r\n              let formData = JSON.stringify({ sessionId: sessionId });\r\n                let config = {\r\n                  headers: {\r\n                    \"Content-Type\": \"application/json\",\r\n                  },\r\n\r\n                };\r\n\r\n              await axios\r\n                .get(newPhotoUrlRequest, formData, config)\r\n                .then((response) => {\r\n                \r\n                 // var newPhotoUrl = this.baseUrl+this.methodName+this.parameter+imageId +'&t='+timestamp;\r\n                 var newPhotoUrl = btoa(unescape(encodeURIComponent(response.data)));\r\n                 var Base64={_keyStr:\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\",encode:function(e){var t=\"\";var n,r,i,s,o,u,a;var f=0;e=Base64._utf8_encode(e);while(f<e.length){n=e.charCodeAt(f++);r=e.charCodeAt(f++);i=e.charCodeAt(f++);s=n>>2;o=(n&3)<<4|r>>4;u=(r&15)<<2|i>>6;a=i&63;if(isNaN(r)){u=a=64}else if(isNaN(i)){a=64}t=t+this._keyStr.charAt(s)+this._keyStr.charAt(o)+this._keyStr.charAt(u)+this._keyStr.charAt(a)}return t},decode:function(e){var t=\"\";var n,r,i;var s,o,u,a;var f=0;e=e.replace(/[^A-Za-z0-9\\+\\/\\=]/g,\"\");while(f<e.length){s=this._keyStr.indexOf(e.charAt(f++));o=this._keyStr.indexOf(e.charAt(f++));u=this._keyStr.indexOf(e.charAt(f++));a=this._keyStr.indexOf(e.charAt(f++));n=s<<2|o>>4;r=(o&15)<<4|u>>2;i=(u&3)<<6|a;t=t+String.fromCharCode(n);if(u!=64){t=t+String.fromCharCode(r)}if(a!=64){t=t+String.fromCharCode(i)}}t=Base64._utf8_decode(t);return t},_utf8_encode:function(e){e=e.replace(/\\r\\n/g,\"\\n\");var t=\"\";for(var n=0;n<e.length;n++){var r=e.charCodeAt(n);if(r<128){t+=String.fromCharCode(r)}else if(r>127&&r<2048){t+=String.fromCharCode(r>>6|192);t+=String.fromCharCode(r&63|128)}else{t+=String.fromCharCode(r>>12|224);t+=String.fromCharCode(r>>6&63|128);t+=String.fromCharCode(r&63|128)}}return t},_utf8_decode:function(e){var t=\"\";var n=0;var r=c1=c2=0;while(n<e.length){r=e.charCodeAt(n);if(r<128){t+=String.fromCharCode(r);n++}else if(r>191&&r<224){c2=e.charCodeAt(n+1);t+=String.fromCharCode((r&31)<<6|c2&63);n+=2}else{c2=e.charCodeAt(n+1);c3=e.charCodeAt(n+2);t+=String.fromCharCode((r&15)<<12|(c2&63)<<6|c3&63);n+=3}}return t}}\r\n\r\n\r\n                //  $('#'+imageId).attr('src',newPhotoUrl);\r\n                  $('#'+imageId).attr('src', \"data:image/png;base64,\" + Base64.encode(newPhotoUrl));\r\n\r\n                  this.$emit('showloader',false);\r\n                })           \r\n                .catch(function (error) {\r\n                    // handle error\r\n                    console.table(error);\r\n                    this.$emit('showloader',false);\r\n                });\r\n\r\n\r\n              \r\n             \r\n          },\r\n\r\n          sendBackIdForDelete(imageId){\r\n              this.displayDeletePhotoConfirm = true;\r\n              this.photoIdForDelete=imageId;\r\n             \r\n              this.$emit('delete-photo',imageId);\r\n          },\r\n\r\n          sendBackIdForDeleteModal(imageId){\r\n              this.displayDeletePhotoConfirm = true;\r\n              this.photoIdForDelete=imageId;\r\n           \r\n          },\r\n          deletePhoto(photoId){\r\n            \r\n            this.$emit('delete-photomodal',photoId);\r\n            this.visibleImagesModal = false;\r\n            this.displayDeletePhotoConfirm = false;\r\n          },\r\n         \r\n\r\n          onSlideChange() {\r\n            var imageId = $('.zoomedImageHolder .swiper .swiper-wrapper .swiper-slide-active img').attr('id')\r\n            this.zoomedImageId=imageId;\r\n           \r\n          },\r\n    },\r\n  mounted(){\r\n   // alert(this.tripImages)\r\n  \r\n  },\r\n \r\n  };\r\n  </script>\r\n\r\n  <style>\r\n.swiperSlideHolder img{width:100%}\r\n\r\n.p-dialog-mask {backdrop-filter: blur(2px)}\r\n\r\n.zoomedImage{width:100%}\r\n.rotateIcon{\r\n  -webkit-transform: scaleX(-1);\r\n  transform: scaleX(-1);\r\n}\r\n\r\n.rotate90{\r\n  -webkit-transform:rotate(90deg);\r\n  -moz-transform: rotate(90deg);\r\n  -ms-transform: rotate(90deg);\r\n  -o-transform: rotate(900deg);\r\n  transform: rotate(90deg);\r\n}\r\n.rotate180{\r\n  -webkit-transform:rotate(180deg);\r\n  -moz-transform: rotate(180deg);\r\n  -ms-transform: rotate(180deg);\r\n  -o-transform: rotate(180deg);\r\n  transform: rotate(180deg);\r\n}\r\n.rotate270{\r\n  -webkit-transform:rotate(270deg);\r\n  -moz-transform: rotate(270deg);\r\n  -ms-transform: rotate(270deg);\r\n  -o-transform: rotate(270deg);\r\n  transform: rotate(270deg);\r\n}\r\n\r\n.p-dialog{max-height:99%}\r\n/*.zoomedImageHolder{height:calc(100vh - 120px);width:100%;background-size: contain; background-repeat:no-repeat;background-position: center;}*/\r\n.zoomedImageHolder{height:100%;width:100%;}\r\n.zoomedImageHolder img {\r\n  display: block;\r\n  max-width:100%;\r\n  max-height:calc(100% - 0px);\r\n  width: auto;\r\n  height: auto;\r\n  margin:auto;\r\n}\r\n.zoomedImageHolder .swiper, .zoomedImageHolder .swiper-wrapper, .zoomedImageHolder .swiper-wrapper{\r\n  max-height:calc(100% - 30px);\r\n}\r\n.zoomedImageHolder .swiper, .zoomedImageHolder .swiper-wrapper{\r\n  height:calc(100vh - 30px);\r\n}\r\n\r\n\r\n.p-dialog .p-dialog-footer{padding-top:5px !important;padding-bottom:5px !important}\r\n.p-dialog .p-dialog-header{padding-top:5px !important;padding-bottom:5px !important}\r\n\r\n.p-dialog-content{height:calc(100vh - 100px);padding-top: 10pxL;overflow-y: hidden;}\r\n\r\n.deleteImageButton .p-button{\r\n  background:  rgb(170, 0, 0) !important;\r\n  border: rgb(170, 0, 0) !important;\r\n  position:absolute;\r\n  top:3px;\r\n  right:3px;\r\n  padding:1px !important;\r\n}\r\n.deleteImageButton .p-button:hover{\r\n  background:  rgb(120, 0, 0) !important;\r\n  border: rgb(120, 0, 0) !important;\r\n \r\n}\r\n\r\n.p-button.deletePhotoButton{\r\n  background:  rgb(170, 0, 0) !important;\r\n  border: rgb(170, 0, 0) !important;\r\n  padding:5px !important;\r\n}\r\n.p-button.deletePhotoButton:hover{\r\n  background:  rgb(120, 0, 0) !important;\r\n  border: rgb(120, 0, 0) !important;\r\n}\r\n\r\n.p-tabview .p-tabview-panels{padding:10px !important}\r\n\r\n.zoomImageDialog{height:calc(100vh - 25px)}\r\n.zoomImageDialog .p-dialog-content {height: calc(100vh - 80px);}\r\n\r\n.downloadImageButton{\r\n  position: absolute !important;\r\n  right: 75px !important;\r\n  padding: 2px !important;\r\n}\r\n\r\nh5 {display:inline-block}\r\n</style>"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import { createApp, defineAsyncComponent } from \"vue\";\nimport { createRouter, createWebHistory } from \"vue-router\";\nimport axios from 'axios';\nimport App from \"./App.vue\"; // static pages allwas downloaded\n\nimport LoginPage from \"./components/LoginPage.vue\"; //async pages, loaded when needed! not in advance\n\nconst PagesHolder = () => import('./components/PagesHolder.vue');\n\nconst ProjectsCards = () => import('./components/pages/ProjectsCards.vue');\n\nconst ManageUsers = () => import('./components/pages/ManageUsers.vue');\n\nimport store from './store/index.js'; //includable parts of the page\n\nimport TopBar from './components/include/TopBar.vue';\nimport SideBar from './components/include/SideBar.vue'; /// some UI\n\nimport BaseDialog from './components/ui/BaseDialog.vue';\nimport BaseSpinner from './components/ui/BaseSpinner.vue';\nimport SearchHolder from './components/ui/SearchHolder.vue';\nimport SidebarmenuLink from './components/ui/SidebarMenuLink.vue';\nimport SidebarMenuLinkDirect from './components/ui/SidebarMenuLinkDirect.vue'; // block of code sometimes loaded\n\nconst ContactInfo = defineAsyncComponent(() => import('./components/ui/ContactInfo.vue'));\nconst VersionInfo = defineAsyncComponent(() => import('./components/ui/VersionInfo.vue'));\nconst router = createRouter({\n  history: createWebHistory(''),\n  routes: [{\n    path: \"/\",\n    component: LoginPage,\n    meta: {\n      requiresUnAuth: true\n    }\n  }, {\n    path: \"/pages\",\n    component: PagesHolder,\n    redirect: \"/pages/projectList\",\n    children: [{\n      path: \"/pages/projectList\",\n      component: ProjectsCards,\n      name: \"ProjectsCards\",\n      meta: {\n        requiresAuth: true\n      }\n    }, {\n      path: \"/pages/manageUsers\",\n      component: ManageUsers,\n      meta: {\n        requiresAuth: true\n      }\n    }]\n  }]\n});\nrouter.beforeEach(function (to, from, next) {\n  if (to.meta.requiresAuth && !store.getters.isAuthenticated) {\n    next('/');\n  } else {\n    store.dispatch(\"autoLogin\"); // next();\n  }\n\n  if (to.meta.requiresUnAuth && store.getters.isAuthenticated) {\n    next('/pages/projectList');\n  } else {\n    store.dispatch(\"autoLogin\");\n    next();\n  }\n});\nconst app = createApp(App); //global variables\n//-- loaded from LoginPage.vue from /settings.json\n\napp.config.globalProperties._rootVersion = process.env.VUE_APP_VERSION; // get From package.json\n\n/*app.config.globalProperties._rootAppTitle = 'DFM Live 2.0';\napp.config.globalProperties._rootLoginBackground = '/images/login-background.jpg';\napp.config.globalProperties._rootLoginLogo = '/images/login-logo.png';\napp.config.globalProperties._rootLoginLogoWhite = '/images/login-logo-white.png';\napp.config.globalProperties._rootlinkToHelpFile = 'https://safetyfile.onlinedfm.com/Help/UserguideV2.0.1.84.pdf';\napp.config.globalProperties._rootlinkToUpdateHytory = 'https://crimson-bill-d8d.notion.site/DFM-Login-Project-Management-6f769ef71753415dbd74a26b6d62c3b9';*/\n\ntry {\n  const response = fetch(\"/settings.json\");\n  const responseData = await response.json();\n  /* if (!response.ok) {\n     // console.log(responseData);\n     const error = new Error(\n       responseData.message || \"Failed to get settings.json.\"\n     );\n     throw error;\n   }*/\n\n  var obj = responseData;\n  var varName = 'app.config.globalProperties.';\n  Object.keys(obj).forEach(function (key) {\n    var value = obj[key]; //console.log(key + ':' + value);\n\n    eval(varName + key + ' = ' + value + ';');\n  });\n} catch (e) {\n  alert(\"error:\" + e);\n} // -------------------\n\n\napp.use(router);\napp.use(store);\napp.component('top-bar', TopBar);\napp.component('side-bar', SideBar);\napp.component('login-page', LoginPage);\napp.component('version-info', VersionInfo);\napp.component('contact-info', ContactInfo);\napp.component('search-holder', SearchHolder);\napp.component('base-spinner', BaseSpinner);\napp.component('base-dialog', BaseDialog);\napp.component('menu-link', SidebarmenuLink);\napp.component('menu-linkdirect', SidebarMenuLinkDirect);\napp.mount(\"#app\");","map":{"version":3,"names":["createApp","defineAsyncComponent","createRouter","createWebHistory","axios","App","LoginPage","PagesHolder","ProjectsCards","ManageUsers","store","TopBar","SideBar","BaseDialog","BaseSpinner","SearchHolder","SidebarmenuLink","SidebarMenuLinkDirect","ContactInfo","VersionInfo","router","history","routes","path","component","meta","requiresUnAuth","redirect","children","name","requiresAuth","beforeEach","to","from","next","getters","isAuthenticated","dispatch","app","config","globalProperties","_rootVersion","process","env","VUE_APP_VERSION","response","fetch","responseData","json","obj","varName","Object","keys","forEach","key","value","eval","e","alert","use","mount"],"sources":["Q:/Projects/DFM v2/src/main.js"],"sourcesContent":["import { createApp, defineAsyncComponent } from \"vue\";\nimport { createRouter, createWebHistory } from \"vue-router\";\nimport axios from 'axios';\n\nimport App from \"./App.vue\";\n\n// static pages allwas downloaded\nimport LoginPage from \"./components/LoginPage.vue\"; \n\n//async pages, loaded when needed! not in advance\nconst PagesHolder = () =>  import('./components/PagesHolder.vue');\nconst ProjectsCards = () => import('./components/pages/ProjectsCards.vue');\nconst ManageUsers = () =>  import('./components/pages/ManageUsers.vue');\n\nimport store from './store/index.js';\n\n//includable parts of the page\nimport TopBar from './components/include/TopBar.vue';\nimport SideBar from './components/include/SideBar.vue';\n\n\n/// some UI\nimport BaseDialog from './components/ui/BaseDialog.vue';\nimport BaseSpinner from './components/ui/BaseSpinner.vue';\nimport SearchHolder from './components/ui/SearchHolder.vue';\nimport SidebarmenuLink from './components/ui/SidebarMenuLink.vue';\nimport SidebarMenuLinkDirect from './components/ui/SidebarMenuLinkDirect.vue';\n\n// block of code sometimes loaded\nconst ContactInfo = defineAsyncComponent(() => import('./components/ui/ContactInfo.vue'));\nconst VersionInfo = defineAsyncComponent(() => import('./components/ui/VersionInfo.vue'));\n\n\nconst router = createRouter({\n\n  history: createWebHistory(''),\n  routes: [\n    { path: \"/\", component: LoginPage,meta: {requiresUnAuth:true} },\n    { path: \"/pages\", \n      component: PagesHolder ,\n      redirect: \"/pages/projectList\",\n     \n        children:[\n          {\n            path: \"/pages/projectList\",\n            component: ProjectsCards,\n            name:\"ProjectsCards\",\n            meta: {requiresAuth:true}\n          },\n          {\n            path: \"/pages/manageUsers\",\n            component : ManageUsers,\n            meta: {requiresAuth:true}\n          }\n        ]\n    },\n  \n  ]\n\n});\n\nrouter.beforeEach(function(to,from,next){\n   \n  if(to.meta.requiresAuth && !store.getters.isAuthenticated){\n    next('/');\n  }else{\n    store.dispatch(\"autoLogin\");\n   // next();\n  }\n\n  if(to.meta.requiresUnAuth && store.getters.isAuthenticated){\n    next('/pages/projectList');\n  }else{\n    store.dispatch(\"autoLogin\");\n    next();\n  }\n  \n});\n\nconst app = createApp(App);\n\n//global variables\n  //-- loaded from LoginPage.vue from /settings.json\n  \n   \n   app.config.globalProperties._rootVersion = process.env.VUE_APP_VERSION; // get From package.json\n   /*app.config.globalProperties._rootAppTitle = 'DFM Live 2.0';\n   app.config.globalProperties._rootLoginBackground = '/images/login-background.jpg';\n   app.config.globalProperties._rootLoginLogo = '/images/login-logo.png';\n   app.config.globalProperties._rootLoginLogoWhite = '/images/login-logo-white.png';\n   app.config.globalProperties._rootlinkToHelpFile = 'https://safetyfile.onlinedfm.com/Help/UserguideV2.0.1.84.pdf';\n   app.config.globalProperties._rootlinkToUpdateHytory = 'https://crimson-bill-d8d.notion.site/DFM-Login-Project-Management-6f769ef71753415dbd74a26b6d62c3b9';*/\n\n   try{\n    const response =  fetch(\"/settings.json\");\n    const responseData =  await response.json();\n   \n\n  /* if (!response.ok) {\n     // console.log(responseData);\n     const error = new Error(\n       responseData.message || \"Failed to get settings.json.\"\n     );\n     throw error;\n   }*/\n  \n      \n       var obj = responseData;\n       var varName = 'app.config.globalProperties.';\n       Object.keys(obj).forEach(function(key){\n         var value = obj[key];\n         //console.log(key + ':' + value);\n         eval(varName + key + ' = ' + value + ';');\n       });\n\n      }catch(e){\n        alert(\"error:\"+e)\n      }\n// -------------------\n\napp.use(router);\napp.use(store);\n\n\napp.component('top-bar', TopBar);\napp.component('side-bar', SideBar);\n\napp.component('login-page', LoginPage);\n\napp.component('version-info', VersionInfo);\napp.component('contact-info', ContactInfo);\napp.component('search-holder', SearchHolder);\napp.component('base-spinner', BaseSpinner);\napp.component('base-dialog', BaseDialog);\napp.component('menu-link',SidebarmenuLink);\napp.component('menu-linkdirect',SidebarMenuLinkDirect);\n\n\napp.mount(\"#app\");\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}
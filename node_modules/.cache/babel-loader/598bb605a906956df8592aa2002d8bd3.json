{"ast":null,"code":"import { resolveComponent as _resolveComponent, createVNode as _createVNode, withCtx as _withCtx, createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, normalizeStyle as _normalizeStyle, vModelText as _vModelText, withDirectives as _withDirectives, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, withModifiers as _withModifiers, Fragment as _Fragment } from \"vue\";\nconst _hoisted_1 = {\n  class: \"topLoginBar\"\n};\nconst _hoisted_2 = {\n  class: \"container-fluid\"\n};\nconst _hoisted_3 = {\n  class: \"row align-items-center\"\n};\nconst _hoisted_4 = {\n  class: \"col-md-4\"\n};\nconst _hoisted_5 = [\"src\"];\nconst _hoisted_6 = {\n  class: \"col-md-4 text-center\"\n};\nconst _hoisted_7 = {\n  id: \"mainAppTitle\"\n};\n\nconst _hoisted_8 = /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"col-md-4 text-end\"\n}, [/*#__PURE__*/_createElementVNode(\"a\", {\n  href: \"javascript:;\",\n  class: \"signInHref\",\n  \"data-bs-toggle\": \"modal\",\n  \"data-bs-target\": \"#loginModal\"\n}, [/*#__PURE__*/_createTextVNode(\"Login\"), /*#__PURE__*/_createElementVNode(\"i\", {\n  class: \"fa-solid fa-user\",\n  style: {\n    \"margin-left\": \"6px\"\n  }\n})])], -1);\n\nconst _hoisted_9 = {\n  class: \"modal fade\",\n  id: \"loginModal\",\n  \"data-bs-backdrop\": \"static\",\n  \"data-bs-keyboard\": \"false\",\n  tabindex: \"-1\",\n  \"aria-labelledby\": \"loginModalLabel\",\n  \"aria-hidden\": \"true\"\n};\nconst _hoisted_10 = {\n  class: \"modal-dialog\"\n};\nconst _hoisted_11 = {\n  class: \"modal-content\"\n};\n\nconst _hoisted_12 = /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"modal-header\"\n}, [/*#__PURE__*/_createElementVNode(\"h5\", {\n  class: \"modal-title\",\n  id: \"loginModalLabel\"\n}, \"User login\"), /*#__PURE__*/_createElementVNode(\"button\", {\n  type: \"button\",\n  id: \"closeLoginModal\",\n  class: \"btn-close\",\n  \"data-bs-dismiss\": \"modal\",\n  \"aria-label\": \"Close\"\n})], -1);\n\nconst _hoisted_13 = {\n  class: \"modal-body\"\n};\nconst _hoisted_14 = {\n  class: \"mb-3\"\n};\n\nconst _hoisted_15 = /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"Inputusername\",\n  class: \"form-label\"\n}, \"Username\", -1);\n\nconst _hoisted_16 = {\n  key: 0,\n  class: \"alert alert-danger alert-sm\"\n};\nconst _hoisted_17 = {\n  class: \"mb-3\"\n};\n\nconst _hoisted_18 = /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"InputPassword\",\n  class: \"form-label\"\n}, \"Password\", -1);\n\nconst _hoisted_19 = {\n  key: 0,\n  class: \"alert alert-danger alert-sm\"\n};\n\nconst _hoisted_20 = /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"mb-3 form-check\"\n}, [/*#__PURE__*/_createElementVNode(\"input\", {\n  type: \"checkbox\",\n  class: \"form-check-input\",\n  id: \"Check1\"\n}), /*#__PURE__*/_createElementVNode(\"label\", {\n  class: \"form-check-label\",\n  for: \"Check1\"\n}, \"Remember me\")], -1);\n\nconst _hoisted_21 = /*#__PURE__*/_createElementVNode(\"button\", {\n  type: \"submit\",\n  class: \"btn btn-primary\"\n}, \"Login\", -1);\n\nconst _hoisted_22 = /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"modal-footer\"\n}, [/*#__PURE__*/_createElementVNode(\"a\", {\n  href: \"javascript:;\"\n}, \"Forgot password?\")], -1);\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_base_dialog = _resolveComponent(\"base-dialog\");\n\n  const _component_base_spinner = _resolveComponent(\"base-spinner\");\n\n  return _openBlock(), _createElementBlock(_Fragment, null, [_createVNode(_component_base_dialog, {\n    show: !!$data.error,\n    title: \"Error\"\n  }, null, 8, [\"show\"]), _createVNode(_component_base_dialog, {\n    show: $data.isLoading,\n    title: \"Authenticating...\",\n    fixed: \"\"\n  }, {\n    default: _withCtx(() => [_createVNode(_component_base_spinner)]),\n    _: 1\n  }, 8, [\"show\"]), _createElementVNode(\"div\", {\n    class: \"containerfluid loginPageBackground\",\n    style: _normalizeStyle({\n      backgroundImage: `url(${this.defaultLoginBackground})`\n    })\n  }, [_createElementVNode(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"div\", _hoisted_4, [_createElementVNode(\"img\", {\n    src: $data.mainPageLogo\n  }, null, 8, _hoisted_5)]), _createElementVNode(\"div\", _hoisted_6, [_createElementVNode(\"h2\", _hoisted_7, _toDisplayString($data.mainAppTitle), 1)]), _hoisted_8])])])], 4), _createElementVNode(\"div\", _hoisted_9, [_createElementVNode(\"div\", _hoisted_10, [_createElementVNode(\"div\", _hoisted_11, [_hoisted_12, _createElementVNode(\"div\", _hoisted_13, [_createElementVNode(\"form\", {\n    onSubmit: _cache[4] || (_cache[4] = _withModifiers((...args) => $options.submitForm && $options.submitForm(...args), [\"prevent\"]))\n  }, [_createElementVNode(\"div\", _hoisted_14, [_hoisted_15, _withDirectives(_createElementVNode(\"input\", {\n    type: \"username\",\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.username = $event),\n    onKeyup: _cache[1] || (_cache[1] = (...args) => $options.usernameKeyDown && $options.usernameKeyDown(...args)),\n    class: \"form-control\",\n    id: \"Inputusername\",\n    \"aria-describedby\": \"usernameHelp\"\n  }, null, 544), [[_vModelText, $data.username, void 0, {\n    trim: true\n  }]]), $data.showUsernameAlert ? (_openBlock(), _createElementBlock(\"div\", _hoisted_16, _toDisplayString(_ctx.usernameMessage), 1)) : _createCommentVNode(\"\", true)]), _createElementVNode(\"div\", _hoisted_17, [_hoisted_18, _withDirectives(_createElementVNode(\"input\", {\n    type: \"password\",\n    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $data.password = $event),\n    onKeyup: _cache[3] || (_cache[3] = (...args) => $options.passwordKeyDown && $options.passwordKeyDown(...args)),\n    class: \"form-control\",\n    id: \"InputPassword\"\n  }, null, 544), [[_vModelText, $data.password, void 0, {\n    trim: true\n  }]]), $data.showPasswordAlert ? (_openBlock(), _createElementBlock(\"div\", _hoisted_19, _toDisplayString(_ctx.passwordMessage), 1)) : _createCommentVNode(\"\", true)]), _hoisted_20, _hoisted_21], 32)]), _hoisted_22])])])], 64);\n}","map":{"version":3,"mappings":"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","names":["class","id","_createElementVNode","href","style","tabindex","type","for","_createVNode","_component_base_dialog","show","$data","title","fixed","_component_base_spinner","backgroundImage","defaultLoginBackground","src","_hoisted_5","_toDisplayString","_hoisted_8","_hoisted_12","onSubmit","$options","_hoisted_15","$event","onKeyup","_createElementBlock","_ctx","_hoisted_18","_hoisted_20","_hoisted_21","_hoisted_22"],"sourceRoot":"","sources":["H:\\www\\vue\\vue-cli-01-a-new-vue-project\\src\\components\\LoginPage.vue"],"sourcesContent":["<template>\r\n\r\n  <base-dialog :show=\"!!error\" title=\"Error\"></base-dialog>\r\n  <base-dialog :show=\"isLoading\" title=\"Authenticating...\" fixed>\r\n    <base-spinner></base-spinner>\r\n  </base-dialog>\r\n\r\n\r\n  \r\n\r\n  <div\r\n    class=\"containerfluid loginPageBackground\"\r\n    :style=\"{ backgroundImage: `url(${this.defaultLoginBackground})` }\"\r\n  >\r\n    <div class=\"topLoginBar\">\r\n      <div class=\"container-fluid\">\r\n        <div class=\"row align-items-center\">\r\n          <div class=\"col-md-4\">\r\n            <img :src=\"mainPageLogo\" />\r\n          </div>\r\n\r\n          <div class=\"col-md-4 text-center\">\r\n            <h2 id=\"mainAppTitle\">{{ mainAppTitle }}</h2>\r\n          </div>\r\n\r\n          <div class=\"col-md-4 text-end\">\r\n            <a\r\n              href=\"javascript:;\"\r\n              class=\"signInHref\"\r\n              data-bs-toggle=\"modal\"\r\n              data-bs-target=\"#loginModal\"\r\n              >Login<i class=\"fa-solid fa-user\" style=\"margin-left: 6px\"></i\r\n            ></a>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <!-- Login Modal -->\r\n  <div\r\n    class=\"modal fade\"\r\n    id=\"loginModal\"\r\n    data-bs-backdrop=\"static\"\r\n    data-bs-keyboard=\"false\"\r\n    tabindex=\"-1\"\r\n    aria-labelledby=\"loginModalLabel\"\r\n    aria-hidden=\"true\"\r\n  >\r\n\r\n\r\n\r\n    <div class=\"modal-dialog\">\r\n      <div class=\"modal-content\">\r\n        <div class=\"modal-header\">\r\n          <h5 class=\"modal-title\" id=\"loginModalLabel\">User login</h5>\r\n          <button\r\n            type=\"button\"\r\n            id=\"closeLoginModal\"\r\n            class=\"btn-close\"\r\n            data-bs-dismiss=\"modal\"\r\n            aria-label=\"Close\"\r\n          ></button>\r\n        </div>\r\n        <div class=\"modal-body\">\r\n          <form @submit.prevent=\"submitForm\">\r\n            <div class=\"mb-3\">\r\n              <label for=\"Inputusername\" class=\"form-label\">Username</label>\r\n              <input\r\n                type=\"username\"\r\n                v-model.trim=\"username\"\r\n                @keyup=\"usernameKeyDown\"\r\n                class=\"form-control\"\r\n                id=\"Inputusername\"\r\n                aria-describedby=\"usernameHelp\"\r\n              />\r\n              <div v-if=\"showUsernameAlert\" class=\"alert alert-danger alert-sm\">\r\n                {{ usernameMessage }}\r\n              </div>\r\n            </div>\r\n            <div class=\"mb-3\">\r\n              <label for=\"InputPassword\" class=\"form-label\">Password</label>\r\n              <input\r\n                type=\"password\"\r\n                v-model.trim=\"password\"\r\n                @keyup=\"passwordKeyDown\"\r\n                class=\"form-control\"\r\n                id=\"InputPassword\"\r\n              />\r\n              <div v-if=\"showPasswordAlert\" class=\"alert alert-danger alert-sm\">\r\n                {{ passwordMessage }}\r\n              </div>\r\n            </div>\r\n            <div class=\"mb-3 form-check\">\r\n              <input type=\"checkbox\" class=\"form-check-input\" id=\"Check1\" />\r\n              <label class=\"form-check-label\" for=\"Check1\">Remember me</label>\r\n            </div>\r\n            <button type=\"submit\" class=\"btn btn-primary\">Login</button>\r\n          </form>\r\n        </div>\r\n        <div class=\"modal-footer\">\r\n          <a href=\"javascript:;\">Forgot password?</a>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n\r\nexport default{\r\n  data(){\r\n    return {\r\n        defaultLoginBackground: 'images/login-background.jpg',    \r\n        mainAppTitle : 'DFM Live',\r\n        mainPageLogo : 'images/safetyfile.png',\r\n\r\n        //login:\r\n        username : '',\r\n        password :'',\r\n        showUsernameAlert : false,\r\n        showPasswordAlert : false,\r\n        formIsValid : true,\r\n        isLoading : false,\r\n        error: null,\r\n\r\n        //testing;\r\n        token : ''\r\n\r\n    }\r\n  },\r\n\r\n  methods:{\r\n\r\n    usernameKeyDown(){\r\n      this.showUsernameAlert = false;\r\n      if (this.username.length==0 ){\r\n              this.showUsernameAlert = true;\r\n              this.formIsValid = false;\r\n              this.usernameMessage = \"Please enter username\";\r\n            \r\n          }\r\n      },\r\n\r\n    passwordKeyDown (){\r\n        this.showPasswordAlert = false;\r\n    },\r\n\r\n    closeModal(id) {\r\n      document.getElementById(id).click();\r\n    },\r\n       \r\n   async submitForm(){\r\n       \r\n        this.showUsernameAlert = false;      \r\n        this.showPasswordAlert = false;\r\n        this.formIsValid =true;\r\n        this.usernameMessage = '';\r\n        this.passwordMessage = '';\r\n\r\n      if (this.username === ''){\r\n        this.showUsernameAlert = true;\r\n        this.formIsValid = false;\r\n        this.usernameMessage = \"Please enter username\";\r\n        \r\n      }\r\n\r\n      if(this.password.length < 4){\r\n       \r\n         this.showPasswordAlert = true;\r\n         this.formIsValid = false;\r\n         this.passwordMessage = \"Password is too short\";\r\n       }\r\n\r\n      if (this.password === ''){\r\n        this.showPasswordAlert = true;\r\n        this.formIsValid = false;\r\n        this.passwordMessage = \"Please enter password\";\r\n      \r\n      }\r\n      \r\n\r\n      if(!this.formIsValid){\r\n        return;\r\n      }\r\n\r\n      this.isLoading = true;\r\n      this.closeModal('closeLoginModal'); //close login modal after submit;\r\n      \r\n      \r\n\r\n      try{\r\n            await this.$store.dispatch('login',{\r\n            username: this.username,\r\n            password: this.password\r\n         \r\n         });\r\n\r\n         this.$router.replace('/projectList')\r\n\r\n      }catch(e){\r\n        this.error = e.message || 'Failed to authenticate.';\r\n\r\n      }\r\n      \r\n      this.isLoading = false;\r\n     \r\n\r\n    },\r\n\r\n\r\n  },\r\n\r\n    \r\n\r\n    emits:['set-fullscreenwidth'],\r\n\r\n   mounted(){\r\n     \r\n    this.$emit('set-fullscreenwidth'); \r\n\r\n  },\r\n}\r\n\r\n\r\n\r\n</script>\r\n\r\n\r\n<style>\r\n/* LOGIN PAGE */\r\n.loginPageBackground {\r\n  height: 100vh;\r\n  background-size:cover ;\r\n}\r\n.topLoginBar {\r\n  background-color: rgb(255, 255, 255, 0.8);\r\n  min-height: 55px;\r\n}\r\n#mainAppTitle {\r\n  font-size: 1.23rem;\r\n  font-weight: 700;\r\n}\r\n.signInHref {\r\n  color: #787878;\r\n}\r\n\r\n/* -------------------------*/\r\n</style>"]},"metadata":{},"sourceType":"module"}
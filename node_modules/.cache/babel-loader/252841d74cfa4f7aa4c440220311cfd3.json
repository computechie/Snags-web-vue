{"ast":null,"code":"import moment from \"moment\";\nimport $ from \"jquery\";\nimport axios from \"axios\";\n/*   allCompanies: {\"lsdkfn309784bv\":\"DFM System\",\"hrfgh46h\":\"Computech\"}, ,*/\n\nexport default {\n  props: [\"projectKey\", \"projectTitle\", \"projectNumber\", \"emitSearch\"],\n\n  data() {\n    return {\n      selectedCompanyKey: null,\n      selectedCompanyName: null,\n      detailsAreVisible: false,\n      detailsAreAppsVisible: false,\n      isLoading: false,\n      projects: [],\n      allCompaniesForDropdown: [],\n      //json from rest api\n      allCompanies: [],\n      //dropwon companies list\n      error: null,\n      NewProjectTitle: \"\",\n      NewProjectNumber: \"\",\n      NewProjectImage: null,\n      NewProjectImageBase64: \"\",\n      //just to display new uploaded image\n      NewExpiryDate: \"\",\n      NewContractor: \"\",\n      EditProjectTitle: \"\",\n      EditProjectNumber: \"\",\n      EditProjectImage: \"\",\n      EditExpiryDate: \"\",\n      EditStatus: \"\",\n      selectedStatus: \"\",\n      alertStatus: \"\",\n      showAddCompany: false,\n      rememberValue: '',\n      allStatus: [\"Open\", \"Closed\"],\n      alertNewProjectTitle: \"\",\n      alertNewProjectNumber: \"\",\n      alertNewExpiryDate: \"\",\n      alertNewProjectImage: \"\",\n      alertNewCompany: \"\",\n      alertEditProjectTitle: \"\",\n      alertEditProjectNumber: \"\",\n      alertEditExpiryDate: \"\",\n      alertEditProjectImage: \"\",\n      NewCompanyName: \"\",\n      NewCompanyEmail: \"\",\n      NewCompanyPhone: \"\",\n      AlertNewCompanyName: \"\",\n      AlertNewCompanyEmail: \"\",\n      AlertNewCompanyPhone: \"\",\n      imagePlaceholder: \"https://via.placeholder.com/360x200.png?text=Project%20Image\",\n      imagePlaceholderEdit: \"\",\n      tmpBase64: \"\",\n      formError: false,\n      createdProject: false,\n      block: \"\",\n      file: \"\",\n      defaultCard: this._rootDefaultProjectCard\n    };\n  },\n\n  methods: {\n    createDropdownForCompaies() {\n      //from received json create one that component can use\n\n      /* should look like this example:\r\n      \r\n      allCompanies: [\r\n        { value: \"asd23jhbrkjb\", label: \"DFM Systems\" },\r\n        { value: \"sdfssfgh45hd\", label: \"Computech\" },\r\n      ]*/\n      //allCompaniesForDropdown: [], //json from rest api\n      //allCompanies: [], //dropwon companies list\n      this.allCompanies = [];\n      this.allCompaniesForDropdown.forEach((key, value) => {\n        this.allCompanies.push({\n          value: this.allCompaniesForDropdown[value][\"key\"],\n          label: this.allCompaniesForDropdown[value][\"name\"]\n        });\n      });\n    },\n\n    async getCompanies() {\n      if (this.allCompanies.length === 0) {\n        if (this.$store.getters.isAuthenticated) {\n          // var allOk = false;\n          // var ErrorCode = \"\";\n          let config = {\n            headers: {\n              \"Content-Type\": \"application/json\"\n            }\n          };\n          const token = localStorage.getItem(\"token\");\n          const baseUrl = localStorage.getItem(\"_rootRestUrl\");\n          let formData = JSON.stringify({\n            token: token\n          });\n          await axios.post(baseUrl + \"/Company/GetCompaniesForDropdown\", formData, config).then(response => {\n            //  console.log(response);\n            //  allOk = true;\n            this.allCompaniesForDropdown = response.data; //   ErrorCode = 200;\n\n            this.createDropdownForCompaies();\n          });\n        } else {\n          this.gotoHomePage();\n        }\n      }\n    },\n\n    /// GET project list\n    async getProjectList() {\n      this.isLoading = true;\n\n      if (this.$store.getters.isAuthenticated) {\n        const token = localStorage.getItem(\"token\"); //User token !!\n\n        var allOk = false;\n        var ErrorCode = \"\";\n        let config = {\n          headers: {\n            \"Content-Type\": \"application/json\"\n          }\n        };\n        let formData = JSON.stringify({\n          token: token\n        });\n        const baseUrl = localStorage.getItem(\"_rootRestUrl\");\n        await axios.post(baseUrl + \"/Project/GetProjects\", formData, config).then(response => {\n          // console.log(response);\n          allOk = true;\n          this.projects = response.data;\n          ErrorCode = 200;\n        }).catch(function (error) {\n          console.table(error.response);\n          alert(\"ERROR \" + error.response.status + \": \" + error.response.data);\n          ErrorCode = error.response.status;\n        });\n\n        if (allOk) {\n          /// add SERVER/IMAGES to image name in json:\n          for (const key in this.projects) {\n            this.projects[key][\"imageName\"] = this._rootRestUrl + \"/images/\" + this.projects[key][\"imageName\"];\n          }\n\n          this.isLoading = false;\n          this._allProjectsList = this.projects;\n        }\n\n        this.isLoading = false;\n\n        if (ErrorCode == 400) {\n          this.gotoHomePage(); //token expired\n        }\n      } else {\n        this.gotoHomePage();\n      }\n    },\n\n    gotoHomePage() {\n      this.isLoading = false;\n      this.$store.dispatch(\"logout\");\n      this.$router.push(\"/\");\n    },\n\n    ////\n    handleFileUpload(event) {\n      this.selectedFile = event.target.files[0];\n      this.file = this.selectedFile;\n      this.convertToBase64();\n    },\n\n    handleFileUploadEdit(event) {\n      this.selectedFile = event.target.files[0];\n      this.file = this.selectedFile;\n      this.convertToBase64Edit();\n    },\n\n    convertToBase64() {\n      const selectedFile = this.file; //   if (selectedFile.length > 0) {\n\n      var fileToLoad = selectedFile;\n      var fileReader = new FileReader();\n      var base64;\n\n      fileReader.onload = function (fileLoadedEvent) {\n        base64 = fileLoadedEvent.target.result;\n        base64 = base64.split(\",\"); // remove type from base64\n\n        this.tmpBase64 = base64;\n        $(\"#newImage\").attr(\"src\", base64);\n      };\n\n      fileReader.readAsDataURL(fileToLoad); //        }\n      //   this.EditProjectImageBase64 = localStorage.removeItem(\"tmpBase64\");\n    },\n\n    convertToBase64Edit() {\n      const selectedFile = this.file; //   if (selectedFile.length > 0) {\n\n      var fileToLoad = selectedFile;\n      var fileReader = new FileReader();\n      var base64;\n\n      fileReader.onload = function (fileLoadedEvent) {\n        base64 = fileLoadedEvent.target.result;\n        base64 = base64.split(\",\"); // remove type from base64\n\n        this.tmpBase64 = base64;\n        $(\"#newImageEdit\").attr(\"src\", base64);\n      };\n\n      fileReader.readAsDataURL(fileToLoad); //        }\n      //   this.EditProjectImageBase64 = localStorage.removeItem(\"tmpBase64\");\n    },\n\n    selectChange(option) {\n      try {\n        this.selectedCompanyKey = option.value;\n        this.selectedCompanyName = option.label;\n      } catch (e) {\n        console.log(\"no company\");\n      }\n    },\n\n    selectChangeStatus(option) {\n      this.selectedStatus = option.value;\n    },\n\n    handleTagCreate(option) {\n      const randomNumber = Math.floor(Math.random() * 1000000);\n      option.value = \"NEW--\" + randomNumber;\n      this.allCompanies.push({\n        value: \"NEW--\" + randomNumber,\n        label: option.label\n      });\n      return option;\n    },\n\n    projectSearch(what) {\n      //TODO: functon for searching Projects\n      if (what.length > 2) {\n        for (let element of document.getElementsByClassName(\"cardsDisplay\")) {\n          element.classList.remove(\"show\");\n          element.style.display = \"none\";\n        }\n\n        this.projects.forEach(value => {\n          const dfmOnlinNumber = value[\"projectNumber\"].toString().toUpperCase();\n          const dfmTitle = value[\"projectName\"].toString().toUpperCase();\n          const dfmCompany = value[\"company\"].toString().toUpperCase();\n          what = what.toUpperCase();\n\n          if (dfmOnlinNumber.includes(what) || dfmTitle.includes(what) || dfmCompany.includes(what)) {\n            //document.getElementById(\"ProjectCard-\" + value[\"key\"]).className += \" show\";\n            document.getElementById(\"ProjectCard-\" + value[\"key\"]).style.display = \"block\";\n          } else {\n            document.getElementById(\"ProjectCard-\" + value[\"key\"]).style.display = \"none\";\n          }\n        });\n      } else {\n        for (let element of document.getElementsByClassName(\"cardsDisplay\")) {\n          //element.classList.add(\"show\");\n          element.style.display = \"block\";\n        }\n      }\n    },\n\n    toggleDetails() {\n      this.detailsAreVisible = !this.detailsAreVisible;\n    },\n\n    toggleDetailsApp() {\n      this.detailsAreAppsVisible = !this.detailsAreAppsVisible;\n    },\n\n    hideOpenApps() {\n      this.detailsAreAppsVisible = false;\n    },\n\n    format_date(value, pattern) {\n      if (value) {\n        return moment(String(value)).format(pattern);\n      }\n    },\n\n    format_date_reverse(value) {\n      //excpected input: \t24/09/2022\n      try {\n        const day = value.substring(0, 2);\n        const month = value.substring(3, 5);\n        const year = value.substring(6, 10);\n        return year + \"-\" + month + \"-\" + day;\n      } catch (e) {\n        return \"undefined\";\n      }\n    },\n\n    format_date_edit(value) {\n      //excpected input: \t2022-12-16\n      try {\n        const year = value.substring(0, 4);\n        const month = value.substring(5, 7);\n        const day = value.substring(8, 10);\n        return day + \"/\" + month + \"/\" + year;\n      } catch (e) {\n        return \"undefined\";\n      }\n    },\n\n    todayDate() {\n      var today = moment().format(\"YYYY-MM-DD 00:00:00\");\n      return today;\n    },\n\n    changindDate() {\n      this.EditExpiryDate = this.format_date_edit(this.EditExpiryDate);\n      this.NewExpiryDate = this.format_date_edit(this.NewExpiryDate);\n      this.alertNewExpiryDate = \"\";\n      this.alertEditExpiryDate = \"\";\n    },\n\n    beforeOpenaddModal() {\n      this.showAddCompany = false;\n      this.getCompanies(); //clear all inpute fields\n\n      this.$refs.file = \"\";\n      $(\"#newImage\").attr(\"src\", \"https://via.placeholder.com/360x200.png?text=Project%20Image\");\n      this.NewExpiryDate = \"\";\n      this.NewProjectTitle = \"\";\n      this.NewProjectNumber = \"\";\n    },\n\n    activateLoader() {},\n\n    async submitForm() {\n      this.formError = false;\n\n      if (this.NewProjectTitle == \"\") {\n        this.alertNewProjectTitle = \"Please enter Project title\";\n        this.formError = true;\n      }\n\n      if (this.NewProjectNumber == \"\") {\n        this.alertNewProjectNumber = \"Please enter DFM Number\";\n        this.formError = true;\n      }\n\n      if (this.NewExpiryDate == \"\") {\n        this.alertNewExpiryDate = \"Please select expiry date\";\n        this.formError = true;\n      }\n\n      if (this.formError == false) {\n        //create project ! for now just push in array\n        this.isLoading = true;\n        var allOk = false;\n        var ErrorCode = \"\";\n        const baseUrl = localStorage.getItem(\"_rootRestUrl\");\n        const token = localStorage.getItem(\"token\"); //User token !!\n\n        const formData = new FormData();\n        formData.append(\"Token\", token);\n        formData.append(\"ProjectNumber\", this.NewProjectNumber);\n        formData.append(\"ProjectName\", this.NewProjectTitle);\n        formData.append(\"ContractorKey\", this.selectedCompanyKey);\n        formData.append(\"ActiveUntil\", this.format_date_reverse(this.NewExpiryDate) + \" 00:00:00\");\n\n        if (this.selectedFile) {\n          formData.append(\"image\", this.selectedFile, this.selectedFile.name);\n        }\n\n        let config = {\n          headers: {\n            \"Content-Type\": \"multipart/form-data\"\n          }\n        };\n        await axios.post(baseUrl + \"/Project/CreateProject\", formData, config).then(response => {\n          console.log(response);\n          allOk = true;\n          ErrorCode = 200;\n        }).catch(function (error) {\n          console.table(error.response);\n          ErrorCode = error.response.status;\n          allOk = false;\n          alert(\"ERROR \" + ErrorCode + \": \" + error.response.data);\n        });\n\n        if (allOk == true) {\n          this.closeModal(\"closeaddModal\"); //close login modal after submit;\n\n          $(\"#btnOpenMo\").click();\n          this.getProjectList();\n          this.isLoading = false;\n        }\n\n        this.isLoading = false;\n        this.closeModal(\"closeaddModal\"); //close add modal after submit;\n      }\n    },\n\n    async submitFormEdit() {\n      this.formErrorEdit = false;\n\n      if (this.EditProjectTitle == \"\") {\n        this.alertEditProjectTitle = \"Please enter Project title\";\n        this.formErrorEdit = true;\n      }\n\n      if (this.EditProjectNumber == \"\") {\n        this.alertEditProjectNumber = \"Please enter DFM Number\";\n        this.formErrorEdit = true;\n      }\n\n      if (this.EditExpiryDate == \"\") {\n        this.alertEditExpiryDate = \"Please select expiry date\";\n        this.formErrorEdit = true;\n      }\n\n      if (this.EditExpiryDate == \"\") {\n        this.alertEditExpiryDate = \"Please select expiry date\";\n        this.formErrorEdit = true;\n      }\n\n      if (this.selectedStatus == \"\") {\n        this.alertStatus = \"Please select status\";\n        this.formErrorEdit = true;\n      }\n\n      if (this.formErrorEdit == false) {\n        //create project ! for now just push in array\n        this.isLoading = true;\n        var allOk = false;\n        var ErrorCode = \"\";\n        const baseUrl = localStorage.getItem(\"_rootRestUrl\");\n        const token = localStorage.getItem(\"token\"); //User token !!\n\n        const formData = new FormData();\n        formData.append(\"Token\", token);\n        formData.append(\"ProjectKey\", this.EditProjectKey);\n        formData.append(\"ProjectNumber\", this.EditProjectNumber);\n        formData.append(\"ProjectName\", this.EditProjectTitle);\n        formData.append(\"ContractorKey\", this.selectedCompanyKey);\n        formData.append(\"ProjectStatus\", this.selectedStatus.value);\n        formData.append(\"ActiveUntil\", this.format_date_reverse(this.EditExpiryDate) + \" 00:00:00\");\n\n        if (this.selectedFile) {\n          formData.append(\"image\", this.selectedFile, this.selectedFile.name);\n        }\n\n        let config = {\n          headers: {\n            \"Content-Type\": \"multipart/form-data\"\n          }\n        };\n        await axios.post(baseUrl + \"/Project/EditProject\", formData, config).then(response => {\n          console.log(response);\n          allOk = true;\n          ErrorCode = 200;\n        }).catch(function (error) {\n          console.table(error.response);\n          allOk = false;\n          alert(\"ERROR \" + ErrorCode + \": \" + error.response.data);\n        });\n\n        if (allOk == true) {\n          this.closeModal(\"editModal\"); //close login modal after submit;\n\n          $(\"#btnOpenMoEdit\").click();\n          this.getProjectList();\n          this.isLoading = false;\n        }\n\n        this.isLoading = false;\n        this.closeModal(\"editModal\"); //close login modal after submit;\n      }\n    },\n\n    async editProject(projectKey) {\n      this.showAddCompany = false; // if (this.allCompanies.length === 0) {\n\n      await this.getCompanies(); //  }\n\n      const thisProject = this.projects.find(project => project.key === projectKey);\n      this.EditProjectTitle = thisProject.projectName;\n      this.EditProjectNumber = thisProject.projectNumber;\n      this.EditExpiryDate = this.format_date(thisProject.activeUntil, \"DD/MM/YYYY\");\n      this.EditProjectKey = thisProject.key;\n      this.EditStatus = thisProject.key;\n      this.imagePlaceholderEdit = thisProject.imageName;\n      this.$refs.multiselect.select(thisProject.companyKey);\n      this.$refs.multiselectStatus.select(thisProject.status);\n      $(\"#openEditModal\").click();\n    },\n\n    openAddCompanyModal() {\n      this.showAddCompany = !this.showAddCompany;\n      this.rememberValue = '';\n    },\n\n    cancelAddCompany() {\n      this.showAddCompany = !this.showAddCompany;\n      this.rememberValue = '';\n    },\n\n    submitFormAddCompany() {\n      // alert(\"submit new company\");\n      this.allCompanies.push({\n        \"value\": \"asasasd\",\n        \"label\": \"One new\",\n        \"token\": null\n      });\n      this.showAddCompany = false;\n    },\n\n    KeyDown(field) {\n      if (field === \"NewProjectTitle\") {\n        this.alertNewProjectTitle = \"\";\n      } else if (field === \"NewProjectNumber\") {\n        this.alertNewProjectNumber = \"\";\n      }\n    },\n\n    closeModal(id) {\n      $(\"#\" + id).click();\n    },\n\n    selectedProject(projectKey, appType) {\n      //store selected project details in localstorage:\n      localStorage.setItem(\"projectKey\", projectKey);\n      localStorage.setItem(\"appType\", appType);\n      const thisProject = this.projects.find(project => project.key === projectKey);\n      localStorage.setItem(\"selectedProjectTitle\", thisProject.projectName);\n      localStorage.setItem(\"selectedProjectNumber\", thisProject.projectNumber);\n      localStorage.setItem(\"selectedProjectContractor\", thisProject.contractor);\n      localStorage.setItem(\"selectedProjectValidUntil\", thisProject.activeUntil);\n      localStorage.setItem(\"selectedProjectPublishDate\", thisProject.created);\n\n      if (thisProject.imageName == \"\" || thisProject.imageName == null) {\n        localStorage.setItem(\"selectedProjectImage\", this.defaultCard);\n      } else {\n        localStorage.setItem(\"selectedProjectImage\", thisProject.imageName);\n      }\n\n      localStorage.setItem(\"selectedProjectType\", appType);\n    }\n\n  },\n  emits: {\n    showSearchbar: false,\n    appType: \"\"\n  },\n\n  created() {\n    localStorage.removeItem(\"appType\");\n    localStorage.removeItem(\"selectedProjectType\");\n    localStorage.removeItem(\"selectedProjectTitle\");\n    localStorage.removeItem(\"selectedProjectNumber\");\n    localStorage.removeItem(\"selectedProjectContractor\");\n    localStorage.removeItem(\"selectedProjectValidUntil\"), localStorage.removeItem(\"selectedProjectPublishDate\"), localStorage.removeItem(\"selectedProjectImage\");\n    localStorage.removeItem(\"selectedProjectType\");\n    this.$emit(\"appType\", \"\");\n  },\n\n  mounted() {\n    this.getProjectList();\n    this.$emit(\"showSearchbar\", true);\n    localStorage.setItem(\"selectedProjectType\", \"\");\n  },\n\n  provide() {\n    return {\n      projects: this.projects\n    };\n  }\n\n};","map":{"version":3,"mappings":"AAg7BA,OAAOA,MAAP,MAAmB,QAAnB;AACA,OAAOC,CAAP,MAAc,QAAd;AACA,OAAOC,KAAP,MAAkB,OAAlB;AAEA;;AACA,eAAe;EACbC,KAAK,EAAE,CAAC,YAAD,EAAe,cAAf,EAA+B,eAA/B,EAAgD,YAAhD,CADM;;EAEbC,IAAI,GAAG;IACL,OAAO;MACLC,kBAAkB,EAAE,IADf;MAELC,mBAAmB,EAAE,IAFhB;MAILC,iBAAiB,EAAE,KAJd;MAKLC,qBAAqB,EAAE,KALlB;MAMLC,SAAS,EAAE,KANN;MAOLC,QAAQ,EAAE,EAPL;MAQLC,uBAAuB,EAAE,EARpB;MAQwB;MAC7BC,YAAY,EAAE,EATT;MASa;MAElBC,KAAK,EAAE,IAXF;MAaLC,eAAe,EAAE,EAbZ;MAcLC,gBAAgB,EAAE,EAdb;MAeLC,eAAe,EAAE,IAfZ;MAgBLC,qBAAqB,EAAE,EAhBlB;MAgBsB;MAC3BC,aAAa,EAAE,EAjBV;MAkBLC,aAAa,EAAE,EAlBV;MAoBLC,gBAAgB,EAAE,EApBb;MAqBLC,iBAAiB,EAAE,EArBd;MAsBLC,gBAAgB,EAAE,EAtBb;MAuBLC,cAAc,EAAE,EAvBX;MAwBLC,UAAU,EAAE,EAxBP;MAyBLC,cAAc,EAAE,EAzBX;MA0BLC,WAAW,EAAC,EA1BP;MA4BLC,cAAc,EAAE,KA5BX;MA8BLC,aAAa,EAAC,EA9BT;MAgCLC,SAAS,EAAE,CAAC,MAAD,EAAS,QAAT,CAhCN;MAkCLC,oBAAoB,EAAE,EAlCjB;MAmCLC,qBAAqB,EAAE,EAnClB;MAoCLC,kBAAkB,EAAE,EApCf;MAqCLC,oBAAoB,EAAE,EArCjB;MAsCLC,eAAe,EAAE,EAtCZ;MAwCLC,qBAAqB,EAAE,EAxClB;MAyCLC,sBAAsB,EAAE,EAzCnB;MA0CLC,mBAAmB,EAAE,EA1ChB;MA2CLC,qBAAqB,EAAE,EA3ClB;MA6CLC,cAAc,EAAE,EA7CX;MA8CLC,eAAe,EAAE,EA9CZ;MA+CLC,eAAe,EAAE,EA/CZ;MAiDLC,mBAAmB,EAAE,EAjDhB;MAkDLC,oBAAoB,EAAE,EAlDjB;MAmDLC,oBAAoB,EAAE,EAnDjB;MAqDLC,gBAAgB,EACd,8DAtDG;MAuDLC,oBAAoB,EAAE,EAvDjB;MAwDLC,SAAS,EAAE,EAxDN;MA0DLC,SAAS,EAAE,KA1DN;MA2DLC,cAAc,EAAE,KA3DX;MA4DLC,KAAK,EAAE,EA5DF;MA6DLC,IAAI,EAAE,EA7DD;MA8DLC,WAAW,EAAE,KAAKC;IA9Db,CAAP;EAgED,CAnEY;;EAoEbC,OAAO,EAAE;IACPC,yBAAyB,GAAG;MAC1B;;MACA;;;;;;MAMA;MACA;MACA,KAAK3C,YAAL,GAAoB,EAApB;MACA,KAAKD,uBAAL,CAA6B6C,OAA7B,CAAqC,CAACC,GAAD,EAAMC,KAAN,KAAgB;QACnD,KAAK9C,YAAL,CAAkB+C,IAAlB,CAAuB;UACrBD,KAAK,EAAE,KAAK/C,uBAAL,CAA6B+C,KAA7B,EAAoC,KAApC,CADc;UAErBE,KAAK,EAAE,KAAKjD,uBAAL,CAA6B+C,KAA7B,EAAoC,MAApC;QAFc,CAAvB;MAID,CALD;IAMD,CAlBM;;IAoBP,MAAMG,YAAN,GAAqB;MACnB,IAAI,KAAKjD,YAAL,CAAkBkD,MAAlB,KAA6B,CAAjC,EAAoC;QAClC,IAAI,KAAKC,MAAL,CAAYC,OAAZ,CAAoBC,eAAxB,EAAyC;UACvC;UACA;UAEA,IAAIC,MAAK,GAAI;YACXC,OAAO,EAAE;cACP,gBAAgB;YADT;UADE,CAAb;UAMA,MAAMC,KAAI,GAAIC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAd;UACA,MAAMC,OAAM,GAAIF,YAAY,CAACC,OAAb,CAAqB,cAArB,CAAhB;UAEA,IAAIE,QAAO,GAAIC,IAAI,CAACC,SAAL,CAAe;YAAEN,KAAK,EAAEA;UAAT,CAAf,CAAf;UAEA,MAAMlE,KAAI,CACPyE,IADG,CAEFJ,OAAM,GAAI,kCAFR,EAGFC,QAHE,EAIFN,MAJE,EAMHU,IANG,CAMGC,QAAD,IAAc;YACpB;YACE;YACA,KAAKlE,uBAAL,GAA+BkE,QAAQ,CAACzE,IAAxC,CAHkB,CAIlB;;YACA,KAAKmD,yBAAL;UACD,CAZG,CAAN;QAaF,CA5BA,MA4BO;UACL,KAAKuB,YAAL;QACF;MACF;IACD,CAtDM;;IAwDP;IACA,MAAMC,cAAN,GAAuB;MACrB,KAAKtE,SAAL,GAAiB,IAAjB;;MAEA,IAAI,KAAKsD,MAAL,CAAYC,OAAZ,CAAoBC,eAAxB,EAAyC;QACvC,MAAMG,KAAI,GAAIC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAd,CADuC,CACM;;QAE7C,IAAIU,KAAI,GAAI,KAAZ;QACA,IAAIC,SAAQ,GAAI,EAAhB;QAEA,IAAIf,MAAK,GAAI;UACXC,OAAO,EAAE;YACP,gBAAgB;UADT;QADE,CAAb;QAMA,IAAIK,QAAO,GAAIC,IAAI,CAACC,SAAL,CAAe;UAAEN,KAAK,EAAEA;QAAT,CAAf,CAAf;QAEA,MAAMG,OAAM,GAAIF,YAAY,CAACC,OAAb,CAAqB,cAArB,CAAhB;QAEA,MAAMpE,KAAI,CACPyE,IADG,CACEJ,OAAM,GAAI,sBADZ,EACoCC,QADpC,EAC8CN,MAD9C,EAEHU,IAFG,CAEGC,QAAD,IAAc;UACnB;UACCG,KAAI,GAAI,IAAR;UACA,KAAKtE,QAAL,GAAgBmE,QAAQ,CAACzE,IAAzB;UACA6E,SAAQ,GAAI,GAAZ;QACD,CAPG,EASHC,KATG,CASG,UAAUrE,KAAV,EAAiB;UACtBsE,OAAO,CAACC,KAAR,CAAcvE,KAAK,CAACgE,QAApB;UACAQ,KAAK,CACH,WAAWxE,KAAK,CAACgE,QAAN,CAAeS,MAA1B,GAAmC,IAAnC,GAA0CzE,KAAK,CAACgE,QAAN,CAAezE,IADtD,CAAL;UAGA6E,SAAQ,GAAIpE,KAAK,CAACgE,QAAN,CAAeS,MAA3B;QACD,CAfG,CAAN;;QAiBA,IAAIN,KAAJ,EAAW;UACT;UACA,KAAK,MAAMvB,GAAX,IAAkB,KAAK/C,QAAvB,EAAiC;YAC/B,KAAKA,QAAL,CAAc+C,GAAd,EAAmB,WAAnB,IACE,KAAK8B,YAAL,GAAoB,UAApB,GAAiC,KAAK7E,QAAL,CAAc+C,GAAd,EAAmB,WAAnB,CADnC;UAGF;;UAEA,KAAKhD,SAAL,GAAiB,KAAjB;UAEA,KAAK+E,gBAAL,GAAwB,KAAK9E,QAA7B;QACF;;QAEA,KAAKD,SAAL,GAAiB,KAAjB;;QAEA,IAAIwE,SAAQ,IAAK,GAAjB,EAAsB;UACpB,KAAKH,YAAL,GADoB,CACC;QACvB;MACF,CAnDA,MAmDO;QACL,KAAKA,YAAL;MACF;IACD,CAlHM;;IAmHPA,YAAY,GAAG;MACb,KAAKrE,SAAL,GAAiB,KAAjB;MACA,KAAKsD,MAAL,CAAY0B,QAAZ,CAAqB,QAArB;MACA,KAAKC,OAAL,CAAa/B,IAAb,CAAkB,GAAlB;IACD,CAvHM;;IAyHP;IACAgC,gBAAgB,CAACC,KAAD,EAAQ;MACtB,KAAKC,YAAL,GAAoBD,KAAK,CAACE,MAAN,CAAaC,KAAb,CAAmB,CAAnB,CAApB;MACA,KAAK5C,IAAL,GAAY,KAAK0C,YAAjB;MAEA,KAAKG,eAAL;IACD,CA/HM;;IAiIPC,oBAAoB,CAACL,KAAD,EAAQ;MAC1B,KAAKC,YAAL,GAAoBD,KAAK,CAACE,MAAN,CAAaC,KAAb,CAAmB,CAAnB,CAApB;MACA,KAAK5C,IAAL,GAAY,KAAK0C,YAAjB;MAEA,KAAKK,mBAAL;IACD,CAtIM;;IAwIPF,eAAe,GAAG;MAChB,MAAMH,YAAW,GAAI,KAAK1C,IAA1B,CADgB,CAGhB;;MAEA,IAAIgD,UAAS,GAAIN,YAAjB;MAEA,IAAIO,UAAS,GAAI,IAAIC,UAAJ,EAAjB;MACA,IAAIC,MAAJ;;MAEAF,UAAU,CAACG,MAAX,GAAoB,UAAUC,eAAV,EAA2B;QAC7CF,MAAK,GAAIE,eAAe,CAACV,MAAhB,CAAuBW,MAAhC;QAEAH,MAAK,GAAIA,MAAM,CAACI,KAAP,CAAa,GAAb,CAAT,CAH6C,CAGjB;;QAE5B,KAAK3D,SAAL,GAAiBuD,MAAjB;QACArG,CAAC,CAAC,WAAD,CAAD,CAAe0G,IAAf,CAAoB,KAApB,EAA2BL,MAA3B;MACD,CAPD;;MASAF,UAAU,CAACQ,aAAX,CAAyBT,UAAzB,EAnBgB,CAoBhB;MAEA;IACD,CA/JM;;IAiKPD,mBAAmB,GAAG;MACpB,MAAML,YAAW,GAAI,KAAK1C,IAA1B,CADoB,CAGpB;;MAEA,IAAIgD,UAAS,GAAIN,YAAjB;MAEA,IAAIO,UAAS,GAAI,IAAIC,UAAJ,EAAjB;MACA,IAAIC,MAAJ;;MAEAF,UAAU,CAACG,MAAX,GAAoB,UAAUC,eAAV,EAA2B;QAC7CF,MAAK,GAAIE,eAAe,CAACV,MAAhB,CAAuBW,MAAhC;QAEAH,MAAK,GAAIA,MAAM,CAACI,KAAP,CAAa,GAAb,CAAT,CAH6C,CAGjB;;QAE5B,KAAK3D,SAAL,GAAiBuD,MAAjB;QACArG,CAAC,CAAC,eAAD,CAAD,CAAmB0G,IAAnB,CAAwB,KAAxB,EAA+BL,MAA/B;MACD,CAPD;;MASAF,UAAU,CAACQ,aAAX,CAAyBT,UAAzB,EAnBoB,CAoBpB;MAEA;IACD,CAxLM;;IAyLPU,YAAY,CAACC,MAAD,EAAS;MACnB,IAAI;QACF,KAAKzG,kBAAL,GAA0ByG,MAAM,CAACpD,KAAjC;QACA,KAAKpD,mBAAL,GAA2BwG,MAAM,CAAClD,KAAlC;MACF,CAHA,CAGE,OAAOmD,CAAP,EAAU;QACV5B,OAAO,CAAC6B,GAAR,CAAY,YAAZ;MACF;IACD,CAhMM;;IAkMPC,kBAAkB,CAACH,MAAD,EAAS;MACzB,KAAKrF,cAAL,GAAsBqF,MAAM,CAACpD,KAA7B;IACD,CApMM;;IAsMPwD,eAAe,CAACJ,MAAD,EAAS;MACtB,MAAMK,YAAW,GAAIC,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,MAAL,KAAgB,OAA3B,CAArB;MACAR,MAAM,CAACpD,KAAP,GAAe,UAAUyD,YAAzB;MACA,KAAKvG,YAAL,CAAkB+C,IAAlB,CAAuB;QACrBD,KAAK,EAAE,UAAUyD,YADI;QAErBvD,KAAK,EAAEkD,MAAM,CAAClD;MAFO,CAAvB;MAIA,OAAOkD,MAAP;IACD,CA9MM;;IAgNPS,aAAa,CAACC,IAAD,EAAO;MAClB;MACA,IAAIA,IAAI,CAAC1D,MAAL,GAAc,CAAlB,EAAqB;QACnB,KAAK,IAAI2D,OAAT,IAAoBC,QAAQ,CAACC,sBAAT,CAAgC,cAAhC,CAApB,EAAqE;UACnEF,OAAO,CAACG,SAAR,CAAkBC,MAAlB,CAAyB,MAAzB;UACAJ,OAAO,CAACK,KAAR,CAAcC,OAAd,GAAwB,MAAxB;QACF;;QAEA,KAAKrH,QAAL,CAAc8C,OAAd,CAAuBE,KAAD,IAAW;UAC/B,MAAMsE,cAAa,GAAItE,KAAK,CAAC,eAAD,CAAL,CACpBuE,QADoB,GAEpBC,WAFoB,EAAvB;UAGA,MAAMC,QAAO,GAAIzE,KAAK,CAAC,aAAD,CAAL,CAAqBuE,QAArB,GAAgCC,WAAhC,EAAjB;UACA,MAAME,UAAS,GAAI1E,KAAK,CAAC,SAAD,CAAL,CAAiBuE,QAAjB,GAA4BC,WAA5B,EAAnB;UAEAV,IAAG,GAAIA,IAAI,CAACU,WAAL,EAAP;;UAEA,IACEF,cAAc,CAACK,QAAf,CAAwBb,IAAxB,KACAW,QAAQ,CAACE,QAAT,CAAkBb,IAAlB,CADA,IAEAY,UAAU,CAACC,QAAX,CAAoBb,IAApB,CAHF,EAIE;YACA;YACAE,QAAQ,CAACY,cAAT,CACE,iBAAiB5E,KAAK,CAAC,KAAD,CADxB,EAEEoE,KAFF,CAEQC,OAFR,GAEkB,OAFlB;UAGF,CATA,MASO;YACLL,QAAQ,CAACY,cAAT,CACE,iBAAiB5E,KAAK,CAAC,KAAD,CADxB,EAEEoE,KAFF,CAEQC,OAFR,GAEkB,MAFlB;UAGF;QACD,CAvBD;MAwBF,CA9BA,MA8BO;QACL,KAAK,IAAIN,OAAT,IAAoBC,QAAQ,CAACC,sBAAT,CAAgC,cAAhC,CAApB,EAAqE;UACnE;UACAF,OAAO,CAACK,KAAR,CAAcC,OAAd,GAAwB,OAAxB;QACF;MACF;IACD,CAtPM;;IAwPPQ,aAAa,GAAG;MACd,KAAKhI,iBAAL,GAAyB,CAAC,KAAKA,iBAA/B;IACD,CA1PM;;IA4PPiI,gBAAgB,GAAG;MACjB,KAAKhI,qBAAL,GAA6B,CAAC,KAAKA,qBAAnC;IACD,CA9PM;;IAgQPiI,YAAY,GAAG;MACb,KAAKjI,qBAAL,GAA6B,KAA7B;IACD,CAlQM;;IAoQPkI,WAAW,CAAChF,KAAD,EAAQiF,OAAR,EAAiB;MAC1B,IAAIjF,KAAJ,EAAW;QACT,OAAO1D,MAAM,CAAC4I,MAAM,CAAClF,KAAD,CAAP,CAAN,CAAsBmF,MAAtB,CAA6BF,OAA7B,CAAP;MACF;IACD,CAxQM;;IAyQPG,mBAAmB,CAACpF,KAAD,EAAQ;MACzB;MACA,IAAI;QACF,MAAMqF,GAAE,GAAIrF,KAAK,CAACsF,SAAN,CAAgB,CAAhB,EAAmB,CAAnB,CAAZ;QACA,MAAMC,KAAI,GAAIvF,KAAK,CAACsF,SAAN,CAAgB,CAAhB,EAAmB,CAAnB,CAAd;QACA,MAAME,IAAG,GAAIxF,KAAK,CAACsF,SAAN,CAAgB,CAAhB,EAAmB,EAAnB,CAAb;QAEA,OAAOE,IAAG,GAAI,GAAP,GAAaD,KAAb,GAAqB,GAArB,GAA2BF,GAAlC;MACF,CANA,CAME,OAAOhC,CAAP,EAAU;QACV,OAAO,WAAP;MACF;IACD,CApRM;;IAsRPoC,gBAAgB,CAACzF,KAAD,EAAQ;MACtB;MACA,IAAI;QACF,MAAMwF,IAAG,GAAIxF,KAAK,CAACsF,SAAN,CAAgB,CAAhB,EAAmB,CAAnB,CAAb;QACA,MAAMC,KAAI,GAAIvF,KAAK,CAACsF,SAAN,CAAgB,CAAhB,EAAmB,CAAnB,CAAd;QACA,MAAMD,GAAE,GAAIrF,KAAK,CAACsF,SAAN,CAAgB,CAAhB,EAAmB,EAAnB,CAAZ;QAEA,OAAOD,GAAE,GAAI,GAAN,GAAYE,KAAZ,GAAoB,GAApB,GAA0BC,IAAjC;MACF,CANA,CAME,OAAOnC,CAAP,EAAU;QACV,OAAO,WAAP;MACF;IACD,CAjSM;;IAmSPqC,SAAS,GAAG;MACV,IAAIC,KAAI,GAAIrJ,MAAM,GAAG6I,MAAT,CAAgB,qBAAhB,CAAZ;MAEA,OAAOQ,KAAP;IACD,CAvSM;;IAySPC,YAAY,GAAG;MAEb,KAAK/H,cAAL,GAAsB,KAAK4H,gBAAL,CAAsB,KAAK5H,cAA3B,CAAtB;MACA,KAAKL,aAAL,GAAqB,KAAKiI,gBAAL,CAAsB,KAAKjI,aAA3B,CAArB;MACA,KAAKc,kBAAL,GAA0B,EAA1B;MACA,KAAKK,mBAAL,GAA2B,EAA3B;IACD,CA/SM;;IAgTPkH,kBAAkB,GAAG;MACnB,KAAK5H,cAAL,GAAsB,KAAtB;MACA,KAAKkC,YAAL,GAFmB,CAInB;;MACA,KAAK2F,KAAL,CAAWrG,IAAX,GAAkB,EAAlB;MACAlD,CAAC,CAAC,WAAD,CAAD,CAAe0G,IAAf,CACE,KADF,EAEE,8DAFF;MAIA,KAAKzF,aAAL,GAAqB,EAArB;MACA,KAAKJ,eAAL,GAAuB,EAAvB;MACA,KAAKC,gBAAL,GAAwB,EAAxB;IACD,CA7TM;;IA+TP0I,cAAc,GAAG,CAAE,CA/TZ;;IAiUP,MAAMC,UAAN,GAAmB;MACjB,KAAK1G,SAAL,GAAiB,KAAjB;;MAEA,IAAI,KAAKlC,eAAL,IAAwB,EAA5B,EAAgC;QAC9B,KAAKgB,oBAAL,GAA4B,4BAA5B;QACA,KAAKkB,SAAL,GAAiB,IAAjB;MACF;;MAEA,IAAI,KAAKjC,gBAAL,IAAyB,EAA7B,EAAiC;QAC/B,KAAKgB,qBAAL,GAA6B,yBAA7B;QACA,KAAKiB,SAAL,GAAiB,IAAjB;MACF;;MAEA,IAAI,KAAK9B,aAAL,IAAsB,EAA1B,EAA8B;QAC5B,KAAKc,kBAAL,GAA0B,2BAA1B;QACA,KAAKgB,SAAL,GAAiB,IAAjB;MACF;;MAEA,IAAI,KAAKA,SAAL,IAAkB,KAAtB,EAA6B;QAC3B;QAEA,KAAKvC,SAAL,GAAiB,IAAjB;QAEA,IAAIuE,KAAI,GAAI,KAAZ;QACA,IAAIC,SAAQ,GAAI,EAAhB;QAEA,MAAMV,OAAM,GAAIF,YAAY,CAACC,OAAb,CAAqB,cAArB,CAAhB;QACA,MAAMF,KAAI,GAAIC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAd,CAT2B,CASkB;;QAE7C,MAAME,QAAO,GAAI,IAAImF,QAAJ,EAAjB;QAEAnF,QAAQ,CAACoF,MAAT,CAAgB,OAAhB,EAAyBxF,KAAzB;QACAI,QAAQ,CAACoF,MAAT,CAAgB,eAAhB,EAAiC,KAAK7I,gBAAtC;QACAyD,QAAQ,CAACoF,MAAT,CAAgB,aAAhB,EAA+B,KAAK9I,eAApC;QACA0D,QAAQ,CAACoF,MAAT,CAAgB,eAAhB,EAAiC,KAAKvJ,kBAAtC;QAEAmE,QAAQ,CAACoF,MAAT,CACE,aADF,EAEE,KAAKd,mBAAL,CAAyB,KAAK5H,aAA9B,IAA+C,WAFjD;;QAKA,IAAI,KAAK2E,YAAT,EAAuB;UACrBrB,QAAQ,CAACoF,MAAT,CAAgB,OAAhB,EAAyB,KAAK/D,YAA9B,EAA4C,KAAKA,YAAL,CAAkBgE,IAA9D;QACF;;QAEA,IAAI3F,MAAK,GAAI;UACXC,OAAO,EAAE;YACP,gBAAgB;UADT;QADE,CAAb;QAMA,MAAMjE,KAAI,CACPyE,IADG,CACEJ,OAAM,GAAI,wBADZ,EACsCC,QADtC,EACgDN,MADhD,EAEHU,IAFG,CAEGC,QAAD,IAAc;UAClBM,OAAO,CAAC6B,GAAR,CAAYnC,QAAZ;UACAG,KAAI,GAAI,IAAR;UACAC,SAAQ,GAAI,GAAZ;QACD,CANG,EAQHC,KARG,CAQG,UAAUrE,KAAV,EAAiB;UACtBsE,OAAO,CAACC,KAAR,CAAcvE,KAAK,CAACgE,QAApB;UACAI,SAAQ,GAAIpE,KAAK,CAACgE,QAAN,CAAeS,MAA3B;UACAN,KAAI,GAAI,KAAR;UACAK,KAAK,CAAC,WAAWJ,SAAX,GAAuB,IAAvB,GAA8BpE,KAAK,CAACgE,QAAN,CAAezE,IAA9C,CAAL;QACD,CAbG,CAAN;;QAgBA,IAAI4E,KAAI,IAAK,IAAb,EAAmB;UACjB,KAAK8E,UAAL,CAAgB,eAAhB,EADiB,CACiB;;UAClC7J,CAAC,CAAC,YAAD,CAAD,CAAgB8J,KAAhB;UACA,KAAKhF,cAAL;UACA,KAAKtE,SAAL,GAAiB,KAAjB;QACF;;QACA,KAAKA,SAAL,GAAiB,KAAjB;QACA,KAAKqJ,UAAL,CAAgB,eAAhB,EAxD2B,CAwDO;MACpC;IACD,CA7YM;;IA+YP,MAAME,cAAN,GAAuB;MACrB,KAAKC,aAAL,GAAqB,KAArB;;MAEA,IAAI,KAAK7I,gBAAL,IAAyB,EAA7B,EAAiC;QAC/B,KAAKe,qBAAL,GAA6B,4BAA7B;QACA,KAAK8H,aAAL,GAAqB,IAArB;MACF;;MAEA,IAAI,KAAK5I,iBAAL,IAA0B,EAA9B,EAAkC;QAChC,KAAKe,sBAAL,GAA8B,yBAA9B;QACA,KAAK6H,aAAL,GAAqB,IAArB;MACF;;MAEA,IAAI,KAAK1I,cAAL,IAAuB,EAA3B,EAA+B;QAC7B,KAAKc,mBAAL,GAA2B,2BAA3B;QACA,KAAK4H,aAAL,GAAqB,IAArB;MACF;;MAEA,IAAI,KAAK1I,cAAL,IAAuB,EAA3B,EAA+B;QAC7B,KAAKc,mBAAL,GAA2B,2BAA3B;QACA,KAAK4H,aAAL,GAAqB,IAArB;MACF;;MAEA,IAAI,KAAKxI,cAAL,IAAuB,EAA3B,EAA+B;QAC7B,KAAKC,WAAL,GAAmB,sBAAnB;QACA,KAAKuI,aAAL,GAAqB,IAArB;MACF;;MAEA,IAAI,KAAKA,aAAL,IAAsB,KAA1B,EAAiC;QAC/B;QAEA,KAAKxJ,SAAL,GAAiB,IAAjB;QAGA,IAAIuE,KAAI,GAAI,KAAZ;QACA,IAAIC,SAAQ,GAAI,EAAhB;QAEA,MAAMV,OAAM,GAAIF,YAAY,CAACC,OAAb,CAAqB,cAArB,CAAhB;QACA,MAAMF,KAAI,GAAIC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAd,CAV+B,CAUc;;QAE7C,MAAME,QAAO,GAAI,IAAImF,QAAJ,EAAjB;QAEAnF,QAAQ,CAACoF,MAAT,CAAgB,OAAhB,EAAyBxF,KAAzB;QACAI,QAAQ,CAACoF,MAAT,CAAgB,YAAhB,EAA8B,KAAKM,cAAnC;QACA1F,QAAQ,CAACoF,MAAT,CAAgB,eAAhB,EAAiC,KAAKvI,iBAAtC;QACAmD,QAAQ,CAACoF,MAAT,CAAgB,aAAhB,EAA+B,KAAKxI,gBAApC;QACAoD,QAAQ,CAACoF,MAAT,CAAgB,eAAhB,EAAiC,KAAKvJ,kBAAtC;QACAmE,QAAQ,CAACoF,MAAT,CAAgB,eAAhB,EAAiC,KAAKnI,cAAL,CAAoBiC,KAArD;QAEAc,QAAQ,CAACoF,MAAT,CACE,aADF,EAEE,KAAKd,mBAAL,CAAyB,KAAKvH,cAA9B,IAAgD,WAFlD;;QAKA,IAAI,KAAKsE,YAAT,EAAuB;UACrBrB,QAAQ,CAACoF,MAAT,CAAgB,OAAhB,EAAyB,KAAK/D,YAA9B,EAA4C,KAAKA,YAAL,CAAkBgE,IAA9D;QACF;;QAEA,IAAI3F,MAAK,GAAI;UACXC,OAAO,EAAE;YACP,gBAAgB;UADT;QADE,CAAb;QAMA,MAAMjE,KAAI,CACPyE,IADG,CACEJ,OAAM,GAAI,sBADZ,EACoCC,QADpC,EAC8CN,MAD9C,EAEHU,IAFG,CAEGC,QAAD,IAAc;UAClBM,OAAO,CAAC6B,GAAR,CAAYnC,QAAZ;UACAG,KAAI,GAAI,IAAR;UACAC,SAAQ,GAAI,GAAZ;QAED,CAPG,EAODC,KAPC,CAOK,UAAUrE,KAAV,EAAiB;UACxBsE,OAAO,CAACC,KAAR,CAAcvE,KAAK,CAACgE,QAApB;UACAG,KAAI,GAAI,KAAR;UACAK,KAAK,CAAC,WAAWJ,SAAX,GAAuB,IAAvB,GAA8BpE,KAAK,CAACgE,QAAN,CAAezE,IAA9C,CAAL;QACD,CAXG,CAAN;;QAaA,IAAI4E,KAAI,IAAK,IAAb,EAAmB;UACjB,KAAK8E,UAAL,CAAgB,WAAhB,EADiB,CACa;;UAC9B7J,CAAC,CAAC,gBAAD,CAAD,CAAoB8J,KAApB;UACA,KAAKhF,cAAL;UACA,KAAKtE,SAAL,GAAiB,KAAjB;QACF;;QAGA,KAAKA,SAAL,GAAiB,KAAjB;QACA,KAAKqJ,UAAL,CAAgB,WAAhB,EA1D+B,CA0DD;MAEhC;IACD,CAxeM;;IA0eP,MAAMK,WAAN,CAAkBC,UAAlB,EAA8B;MAC5B,KAAKzI,cAAL,GAAsB,KAAtB,CAD4B,CAE7B;;MACG,MAAM,KAAKkC,YAAL,EAAN,CAH0B,CAI9B;;MAEE,MAAMwG,WAAU,GAAI,KAAK3J,QAAL,CAAc4J,IAAd,CACjBC,OAAD,IAAaA,OAAO,CAAC9G,GAAR,KAAgB2G,UADX,CAApB;MAIA,KAAKhJ,gBAAL,GAAwBiJ,WAAW,CAACG,WAApC;MACA,KAAKnJ,iBAAL,GAAyBgJ,WAAW,CAACI,aAArC;MACA,KAAKlJ,cAAL,GAAsB,KAAKmH,WAAL,CACpB2B,WAAW,CAACK,WADQ,EAEpB,YAFoB,CAAtB;MAIA,KAAKR,cAAL,GAAsBG,WAAW,CAAC5G,GAAlC;MACA,KAAKjC,UAAL,GAAkB6I,WAAW,CAAC5G,GAA9B;MACA,KAAKX,oBAAL,GAA4BuH,WAAW,CAACM,SAAxC;MAEA,KAAKnB,KAAL,CAAWoB,WAAX,CAAuBC,MAAvB,CAA8BR,WAAW,CAACS,UAA1C;MACA,KAAKtB,KAAL,CAAWuB,iBAAX,CAA6BF,MAA7B,CAAoCR,WAAW,CAAC/E,MAAhD;MAGArF,CAAC,CAAC,gBAAD,CAAD,CAAoB8J,KAApB;IACD,CAngBM;;IAqgBPiB,mBAAmB,GAAG;MACpB,KAAKrJ,cAAL,GAAsB,CAAC,KAAKA,cAA5B;MACA,KAAKC,aAAL,GAAqB,EAArB;IACD,CAxgBM;;IA0gBPqJ,gBAAgB,GAAE;MACjB,KAAKtJ,cAAL,GAAsB,CAAC,KAAKA,cAA5B;MACA,KAAKC,aAAL,GAAqB,EAArB;IAEA,CA9gBM;;IAghBPsJ,oBAAoB,GAAE;MACrB;MACC,KAAKtK,YAAL,CAAkB+C,IAAlB,CAAuB;QAAC,SAAQ,SAAT;QAAmB,SAAQ,SAA3B;QAAqC,SAAQ;MAA7C,CAAvB;MACA,KAAKhC,cAAL,GAAsB,KAAtB;IAID,CAvhBM;;IAwhBPwJ,OAAO,CAACC,KAAD,EAAQ;MACb,IAAIA,KAAI,KAAM,iBAAd,EAAiC;QAC/B,KAAKtJ,oBAAL,GAA4B,EAA5B;MACF,CAFA,MAEO,IAAIsJ,KAAI,KAAM,kBAAd,EAAkC;QACvC,KAAKrJ,qBAAL,GAA6B,EAA7B;MACF;IACD,CA9hBM;;IA+hBP+H,UAAU,CAACuB,EAAD,EAAK;MACbpL,CAAC,CAAC,MAAMoL,EAAP,CAAD,CAAYtB,KAAZ;IACD,CAjiBM;;IAmiBPuB,eAAe,CAAClB,UAAD,EAAamB,OAAb,EAAsB;MACnC;MACAlH,YAAY,CAACmH,OAAb,CAAqB,YAArB,EAAmCpB,UAAnC;MACA/F,YAAY,CAACmH,OAAb,CAAqB,SAArB,EAAgCD,OAAhC;MAEA,MAAMlB,WAAU,GAAI,KAAK3J,QAAL,CAAc4J,IAAd,CACjBC,OAAD,IAAaA,OAAO,CAAC9G,GAAR,KAAgB2G,UADX,CAApB;MAIA/F,YAAY,CAACmH,OAAb,CAAqB,sBAArB,EAA6CnB,WAAW,CAACG,WAAzD;MACAnG,YAAY,CAACmH,OAAb,CAAqB,uBAArB,EAA8CnB,WAAW,CAACI,aAA1D;MACApG,YAAY,CAACmH,OAAb,CAAqB,2BAArB,EAAkDnB,WAAW,CAACoB,UAA9D;MACApH,YAAY,CAACmH,OAAb,CACE,2BADF,EAEEnB,WAAW,CAACK,WAFd;MAIArG,YAAY,CAACmH,OAAb,CAAqB,4BAArB,EAAmDnB,WAAW,CAACqB,OAA/D;;MAEA,IAAIrB,WAAW,CAACM,SAAZ,IAAyB,EAAzB,IAA+BN,WAAW,CAACM,SAAZ,IAAyB,IAA5D,EAAkE;QAChEtG,YAAY,CAACmH,OAAb,CAAqB,sBAArB,EAA6C,KAAKpI,WAAlD;MACF,CAFA,MAEO;QACLiB,YAAY,CAACmH,OAAb,CAAqB,sBAArB,EAA6CnB,WAAW,CAACM,SAAzD;MACF;;MAEAtG,YAAY,CAACmH,OAAb,CAAqB,qBAArB,EAA4CD,OAA5C;IACD;;EA5jBM,CApEI;EAmoBbI,KAAK,EAAE;IACLC,aAAa,EAAE,KADV;IAELL,OAAO,EAAE;EAFJ,CAnoBM;;EAwoBbG,OAAO,GAAG;IACRrH,YAAY,CAACwH,UAAb,CAAwB,SAAxB;IACAxH,YAAY,CAACwH,UAAb,CAAwB,qBAAxB;IACAxH,YAAY,CAACwH,UAAb,CAAwB,sBAAxB;IACAxH,YAAY,CAACwH,UAAb,CAAwB,uBAAxB;IACAxH,YAAY,CAACwH,UAAb,CAAwB,2BAAxB;IACAxH,YAAY,CAACwH,UAAb,CAAwB,2BAAxB,GACExH,YAAY,CAACwH,UAAb,CAAwB,4BAAxB,CADF,EAEExH,YAAY,CAACwH,UAAb,CAAwB,sBAAxB,CAFF;IAGAxH,YAAY,CAACwH,UAAb,CAAwB,qBAAxB;IAEA,KAAKC,KAAL,CAAW,SAAX,EAAsB,EAAtB;EACD,CAppBY;;EAspBbC,OAAO,GAAG;IACR,KAAKhH,cAAL;IACA,KAAK+G,KAAL,CAAW,eAAX,EAA4B,IAA5B;IACAzH,YAAY,CAACmH,OAAb,CAAqB,qBAArB,EAA4C,EAA5C;EACD,CA1pBY;;EA2pBbQ,OAAO,GAAG;IACR,OAAO;MACLtL,QAAQ,EAAE,KAAKA;IADV,CAAP;EAGD;;AA/pBY,CAAf","names":["moment","$","axios","props","data","selectedCompanyKey","selectedCompanyName","detailsAreVisible","detailsAreAppsVisible","isLoading","projects","allCompaniesForDropdown","allCompanies","error","NewProjectTitle","NewProjectNumber","NewProjectImage","NewProjectImageBase64","NewExpiryDate","NewContractor","EditProjectTitle","EditProjectNumber","EditProjectImage","EditExpiryDate","EditStatus","selectedStatus","alertStatus","showAddCompany","rememberValue","allStatus","alertNewProjectTitle","alertNewProjectNumber","alertNewExpiryDate","alertNewProjectImage","alertNewCompany","alertEditProjectTitle","alertEditProjectNumber","alertEditExpiryDate","alertEditProjectImage","NewCompanyName","NewCompanyEmail","NewCompanyPhone","AlertNewCompanyName","AlertNewCompanyEmail","AlertNewCompanyPhone","imagePlaceholder","imagePlaceholderEdit","tmpBase64","formError","createdProject","block","file","defaultCard","_rootDefaultProjectCard","methods","createDropdownForCompaies","forEach","key","value","push","label","getCompanies","length","$store","getters","isAuthenticated","config","headers","token","localStorage","getItem","baseUrl","formData","JSON","stringify","post","then","response","gotoHomePage","getProjectList","allOk","ErrorCode","catch","console","table","alert","status","_rootRestUrl","_allProjectsList","dispatch","$router","handleFileUpload","event","selectedFile","target","files","convertToBase64","handleFileUploadEdit","convertToBase64Edit","fileToLoad","fileReader","FileReader","base64","onload","fileLoadedEvent","result","split","attr","readAsDataURL","selectChange","option","e","log","selectChangeStatus","handleTagCreate","randomNumber","Math","floor","random","projectSearch","what","element","document","getElementsByClassName","classList","remove","style","display","dfmOnlinNumber","toString","toUpperCase","dfmTitle","dfmCompany","includes","getElementById","toggleDetails","toggleDetailsApp","hideOpenApps","format_date","pattern","String","format","format_date_reverse","day","substring","month","year","format_date_edit","todayDate","today","changindDate","beforeOpenaddModal","$refs","activateLoader","submitForm","FormData","append","name","closeModal","click","submitFormEdit","formErrorEdit","EditProjectKey","editProject","projectKey","thisProject","find","project","projectName","projectNumber","activeUntil","imageName","multiselect","select","companyKey","multiselectStatus","openAddCompanyModal","cancelAddCompany","submitFormAddCompany","KeyDown","field","id","selectedProject","appType","setItem","contractor","created","emits","showSearchbar","removeItem","$emit","mounted","provide"],"sourceRoot":"","sources":["Q:\\Projects\\DFM v2\\src\\components\\pages\\ProjectsCards.vue"],"sourcesContent":["<template>\r\n  <base-dialog :show=\"!!error\" title=\"Error\"></base-dialog>\r\n  <base-dialog :show=\"isLoading\" title=\"Authenticating...\" fixed>\r\n    <base-spinner></base-spinner>\r\n  </base-dialog>\r\n\r\n  <div class=\"row mb-3\">\r\n    <div class=\"col-12 text-center\">\r\n      <search-holder @emit-Search=\"projectSearch\"></search-holder>\r\n    </div>\r\n  </div>\r\n  <div class=\"containder-fluid\">\r\n\r\n      <div class=\"row\" v-if=\"!projects.length\">\r\n        <div class=\"col-12\">\r\n          <div class=\"alert alert-danger\">Projects not found!</div>\r\n        </div>\r\n      </div>\r\n\r\n\r\n    <div class=\"row\">\r\n      <div\r\n        v-for=\"project in projects\"\r\n        :id=\"'ProjectCard-' + project.key\"\r\n        :key=\"project.key\"\r\n        :projectKey=\"project.key\"\r\n        class=\"col-sm-12 col-md-6 col-lg-3 col-xl2-2 col-xl3-2 cardsDisplay\"\r\n      >\r\n        <div class=\"card project-card\">\r\n          <div class=\"card-header project-card-header\">\r\n            <div class=\"projectCardsProjectNo\">\r\n              {{ project.projectNumber }}\r\n            </div>\r\n            <div class=\"projectCardsProjectTitle\">\r\n              {{ project.projectName }}\r\n            </div>\r\n          </div>\r\n          <div class=\"card-body project-card-body\">\r\n            <div>\r\n              <div\r\n                class=\"card-background-image\"\r\n                :style=\"{ backgroundImage: `url(${project.imageName})` }\"\r\n                @mouseenter=\"toggleDetails()\"\r\n                @mouseleave=\"\r\n                  toggleDetails();\r\n                  hideOpenApps();\r\n                \"\r\n              >\r\n                <div\r\n                  class=\"row visibleOnlyOnXS\"\r\n                  style=\"position: absolute; top: 230px; right: 10px\"\r\n                >\r\n                  <div class=\"col text-center openButton\">\r\n                    <router-link\r\n                      @click=\"selectedProject(project.key, '')\"\r\n                      :to=\"'/pages/project/' + project.key\"\r\n                      class=\"btn btn-primary\"\r\n                      style=\"color: white\"\r\n                      >Open</router-link\r\n                    >\r\n                  </div>\r\n                </div>\r\n\r\n               <!-- <figcaption\r\n                  class=\"projectDetailsBlock\"\r\n                  v-if=\"detailsAreVisible\"\r\n                  @click=\"toggleDetailsApp()\"\r\n                \r\n                >-->\r\n\r\n                <router-link\r\n                 \r\n                  v-if=\"detailsAreVisible\"\r\n                 \r\n                \r\n                  @click=\"selectedProject(project.key, '')\"\r\n                        :to=\"'/pages/project/' + project.key\"\r\n                >\r\n\r\n           <div  class=\"projectDetailsBlock\">\r\n                  <div class=\"row\">\r\n                    <div class=\"col p-0a text-right whiteText\">Revision:</div>\r\n                    <div class=\"col p-0a text-left\">{{ project.revision }}</div>\r\n                  </div>\r\n                  <div class=\"row\">\r\n                    <div class=\"col p-0a text-right\">Publish date:</div>\r\n                    <div class=\"col p-0a text-left\">\r\n                      {{ format_date(project.PUBLISHDATE, \"DD/MM/YYYY\") }}\r\n                    </div>\r\n                  </div>\r\n                  <div class=\"row\">\r\n                    <div class=\"col p-0a text-right\">Expiry date:</div>\r\n                    <div class=\"col p-0a text-left\">\r\n                      {{ format_date(project.activeUntil, \"DD/MM/YYYY\") }}\r\n                    </div>\r\n                  </div>\r\n                  <div class=\"row\">\r\n                    <div class=\"col p-0a text-right\">Status:</div>\r\n                    <div class=\"col p-0a text-left\">{{ project.status }}</div>\r\n                  </div>\r\n                  <div class=\"row\"><div class=\"col p-0a\"></div></div>\r\n                  <div class=\"row\" style=\"margin-top: 20px\">\r\n                    <div class=\"col text-center\">\r\n                      {{ project.company }}\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div class=\"row\" style=\"margin-top: 20px\">\r\n                    <div class=\"col text-center openButton\">\r\n                      <router-link\r\n                        @click=\"selectedProject(project.key, '')\"\r\n                        :to=\"'/pages/project/' + project.key\"\r\n                        class=\"btn btn-primary\"\r\n                        style=\"color: white\"\r\n                        >Open</router-link\r\n                      >\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div\r\n                    class=\"appSelector\"\r\n                    v-if=\"detailsAreAppsVisible\"\r\n                    @click=\"toggleDetailsApp()\"\r\n                  >\r\n                    <router-link\r\n                      @click=\"selectedProject(project.key, 'CDE')\"\r\n                      v-if=\"project.CDE\"\r\n                      class=\"dropdown-item\"\r\n                      :to=\"'/pages/project/CDE/' + project.key\"\r\n                      ><i class=\"fa-solid fa-folder\"></i> CDE</router-link\r\n                    >\r\n\r\n                    <router-link\r\n                      @click=\"selectedProject(project.key, 'QMS')\"\r\n                      v-if=\"project.QMS\"\r\n                      class=\"dropdown-item\"\r\n                      :to=\"'/pages/project/QMS/' + project.key\"\r\n                      ><i class=\"fa-solid fa-file\"></i> QMS</router-link\r\n                    >\r\n\r\n                    <router-link\r\n                      @click=\"selectedProject(project.key, 'Safetyfile')\"\r\n                      v-if=\"project.SAFETY\"\r\n                      class=\"dropdown-item\"\r\n                      :to=\"'/pages/project/SafetyFile/' + project.key\"\r\n                      ><i class=\"fa-solid fa-shield\"></i> Safetyfile\r\n                    </router-link>\r\n                  </div>\r\n                  </div>\r\n                </router-link>\r\n              </div>\r\n            </div>\r\n\r\n            <div class=\"mt-2 text-end\" style=\"display: block\">\r\n              <a href=\"javascript:;\" @click=\"editProject(project.key)\"\r\n                ><i\r\n                  class=\"fa-solid fa-pen-to-square editProjectIcon\"\r\n                  title=\"Edit project\"\r\n                ></i\r\n              ></a>\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"statusColorBar\" :style=\"'background-color:'+project.statusColor\"></div>\r\n\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <!-- action button -->\r\n  <div class=\"right-corder-container\">\r\n    <button\r\n      @click=\"beforeOpenaddModal()\"\r\n      class=\"right-corder-container-button\"\r\n      data-bs-toggle=\"modal\"\r\n      data-bs-target=\"#addModal\"\r\n      title=\"Create new project\"\r\n    >\r\n      <span class=\"short-text\">+</span>\r\n    </button>\r\n  </div>\r\n\r\n  <!-- Add new project modal-->\r\n  <div\r\n    class=\"modal fade\"\r\n    id=\"addModal\"\r\n    data-bs-backdrop=\"static\"\r\n    data-bs-keyboard=\"false\"\r\n    tabindex=\"-1\"\r\n    aria-labelledby=\"addModal\"\r\n    aria-hidden=\"true\"\r\n  >\r\n    <div class=\"modal-dialog\">\r\n      <div class=\"modal-content\">\r\n        <div class=\"modal-header\">\r\n          <h5 class=\"modal-title\" id=\"addModalLabel\">Create new project</h5>\r\n          <button\r\n            type=\"button\"\r\n            id=\"closeaddModal\"\r\n            class=\"btn-close\"\r\n            data-bs-dismiss=\"modal\"\r\n            aria-label=\"Close\"\r\n          ></button>\r\n        </div>\r\n        <div class=\"modal-body\">\r\n         \r\n          <transition  mode=\"out-in\">\r\n            <form @submit.prevent=\"submitForm\" v-if=\"!showAddCompany\">\r\n              <div class=\"row mb-1\">\r\n                <div class=\"col-md-4 pt-2\">Project title:</div>\r\n\r\n                <div class=\"col-md-8\">\r\n                  <div class=\"row\">\r\n                    <div class=\"col-12\">\r\n                      <input\r\n                        type=\"text\"\r\n                        class=\"form-control\"\r\n                        v-model=\"NewProjectTitle\"\r\n                        @keyup=\"KeyDown('NewProjectTitle')\"\r\n                      />\r\n                    </div>\r\n                  </div>\r\n                  <div class=\"row\">\r\n                    <div class=\"col\">\r\n                      <div\r\n                        class=\"alert alert-danger alert-sm\"\r\n                        v-html=\"alertNewProjectTitle\"\r\n                        v-if=\"alertNewProjectTitle\"\r\n                      />\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              <div class=\"row mb-1\">\r\n                <div class=\"col-md-4 pt-2\">DFM number:</div>\r\n\r\n                <div class=\"col-md-8\">\r\n                  <div class=\"row\">\r\n                    <div class=\"col-12\">\r\n                      <input\r\n                        type=\"text\"\r\n                        class=\"form-control\"\r\n                        v-model=\"NewProjectNumber\"\r\n                        @keyup=\"KeyDown('NewProjectNumber')\"\r\n                      />\r\n                    </div>\r\n                  </div>\r\n                  <div class=\"row\">\r\n                    <div class=\"col\">\r\n                      <div\r\n                        class=\"alert alert-danger alert-sm\"\r\n                        v-html=\"alertNewProjectNumber\"\r\n                        v-if=\"alertNewProjectNumber\"\r\n                      />\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              <div class=\"row mb-1\">\r\n                <div class=\"col-md-4 pt-2\">Expiry date:</div>\r\n\r\n                <div class=\"col-md-8\">\r\n                  <div class=\"row\">\r\n                    <div class=\"col-12\">\r\n                      <span class=\"datepicker-toggle\">\r\n                        <span class=\"datepicker-toggle-button\"></span>\r\n                        <div>\r\n                          <input\r\n                            type=\"text\"\r\n                            v-model=\"NewExpiryDate\"\r\n                            class=\"form-control\"\r\n                          />\r\n                        </div>\r\n                        <div>\r\n                          <input\r\n                            type=\"date\"\r\n                            class=\"datepicker-input\"\r\n                            v-model=\"NewExpiryDate\"\r\n                            @change=\"changindDate()\"\r\n                          />\r\n                        </div>\r\n                      </span>\r\n                    </div>\r\n                  </div>\r\n                  <div class=\"row\">\r\n                    <div class=\"col\">\r\n                      <div\r\n                        class=\"alert alert-danger alert-sm\"\r\n                        v-html=\"alertNewExpiryDate\"\r\n                        v-if=\"alertNewExpiryDate\"\r\n                      />\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              <div class=\"row mb-1\">\r\n                <div class=\"col-md-4 pt-2\">Company:</div>\r\n\r\n                <div class=\"col-md-8\">\r\n                  <div class=\"row\">\r\n                    <div class=\"col-10\">\r\n                      <v-select\r\n                        @change=\"selectChange\"\r\n                        :closeOnSelect=\"true\"\r\n                        :object=\"true\"\r\n                        v-model=\"NewContractor\"\r\n                        :mode=\"tags\"\r\n                        :create-option=\"false\"\r\n                        :searchable=\"true\"\r\n                        :on-create=\"handleTagCreate\"\r\n                        :options=\"allCompanies\"\r\n                      ></v-select>\r\n                    </div>\r\n                    <div class=\"col-2\">\r\n                      <div class=\"btn btn-primary\" @click=\"openAddCompanyModal\" title=\"Add new Company\">\r\n                        +\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                  <div class=\"row\">\r\n                    <div class=\"col\">\r\n                      <div\r\n                        class=\"alert alert-danger alert-sm\"\r\n                        v-html=\"alertNewCompany\"\r\n                        v-if=\"alertNewCompany\"\r\n                      />\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              <div class=\"row mb-1\">\r\n                <div class=\"col-md-4 pt-2\">Project image:</div>\r\n\r\n                <div class=\"col-md-8\">\r\n                  <div class=\"row\">\r\n                    <div class=\"col-12\">\r\n                      <div class=\"input-group\">\r\n                        <input\r\n                          type=\"file\"\r\n                          @change=\"handleFileUpload\"\r\n                          ref=\"file\"\r\n                          class=\"form-control\"\r\n                          id=\"newProjectImage\"\r\n                        />\r\n                      </div>\r\n                      <small\r\n                        >Recommended size: <strong>360x200px</strong> .JPG or\r\n                        .PNG</small\r\n                      >\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div class=\"row\">\r\n                    <div class=\"col-md-12\">\r\n                      <img\r\n                        :src=\"imagePlaceholder\"\r\n                        id=\"newImage\"\r\n                        class=\"img-fluid\"\r\n                      />\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div class=\"row\">\r\n                    <div class=\"col\">\r\n                      <div\r\n                        class=\"alert alert-danger alert-sm\"\r\n                        v-html=\"alertNewProjectImage\"\r\n                        v-if=\"alertNewProjectImage\"\r\n                      />\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              <div class=\"mb-3\"></div>\r\n\r\n              <div class=\"row\">\r\n                \r\n                \r\n                <div class=\"col-6\">\r\n                  <button\r\n                    type=\"button\"\r\n                    id=\"\"\r\n                    class=\"btn btn-secondary\"\r\n                    data-bs-dismiss=\"modal\"\r\n                    aria-label=\"Close\"\r\n                  >\r\n                    Cancel\r\n                  </button>\r\n\r\n                </div>\r\n\r\n                <div class=\"col-6 text-end\">\r\n                  <button\r\n                    @click=\"activateLoader\"\r\n                    type=\"submit\"\r\n                    class=\"btn btn-primary\"\r\n                  >\r\n                    Create project\r\n                  </button>\r\n                </div>\r\n              </div>\r\n\r\n        \r\n            </form>\r\n          </transition>\r\n\r\n          <transition name=\"slide-fade\" mode=\"in-out\" >\r\n            <form @submit.prevent=\"submitFormAddCompany\" v-if=\"showAddCompany\" >\r\n              <h5>Add new Company:</h5><hr>\r\n              <div class=\"row mb-1\">\r\n                <div class=\"col-md-4 pt-2\">Company name:</div>\r\n\r\n                <div class=\"col-md-8\">\r\n                  <div class=\"row\">\r\n                    <div class=\"col-12\">\r\n                      <input\r\n                        type=\"text\"\r\n                        class=\"form-control\"\r\n                        v-model=\"NewCompanyName\"\r\n                        @keyup=\"KeyDown('NewCompanyName')\"\r\n                      />\r\n                    </div>\r\n                  </div>\r\n                  <div class=\"row\">\r\n                    <div class=\"col\">\r\n                      <div\r\n                        class=\"alert alert-danger alert-sm\"\r\n                        v-html=\"alertNewCompanyName\"\r\n                        v-if=\"alertNewCompanyName\"\r\n                      />\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              <div class=\"row mb-1\">\r\n                <div class=\"col-md-4 pt-2\">Contact email:</div>\r\n\r\n                <div class=\"col-md-8\">\r\n                  <div class=\"row\">\r\n                    <div class=\"col-12\">\r\n                      <input\r\n                        type=\"text\"\r\n                        class=\"form-control\"\r\n                        v-model=\"NewCompanyEmail\"\r\n                        @keyup=\"KeyDown('NewCompanyEmail')\"\r\n                      />\r\n                    </div>\r\n                  </div>\r\n                  <div class=\"row\">\r\n                    <div class=\"col\">\r\n                      <div\r\n                        class=\"alert alert-danger alert-sm\"\r\n                        v-html=\"alertNewCompanyEmail\"\r\n                        v-if=\"alertNewCompanyEmail\"\r\n                      />\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              <div class=\"row mb-1\">\r\n                <div class=\"col-md-4 pt-2\">Phone number:</div>\r\n\r\n                <div class=\"col-md-8\">\r\n                  <div class=\"row\">\r\n                    <div class=\"col-12\">\r\n                      <input\r\n                        type=\"text\"\r\n                        class=\"form-control\"\r\n                        v-model=\"NewCompanyPhone\"\r\n                        @keyup=\"KeyDown('NewCompanyPhone')\"\r\n                      />\r\n                    </div>\r\n                  </div>\r\n                  <div class=\"row\">\r\n                    <div class=\"col\">\r\n                      <div\r\n                        class=\"alert alert-danger alert-sm\"\r\n                        v-html=\"alertNewCompanyPhone\"\r\n                        v-if=\"alertNewCompanyPhone\"\r\n                      />\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              <div class=\"mb-3\"></div>\r\n\r\n              <div class=\"row\">\r\n                <div class=\"col-6\">\r\n                  <button type=\"submit\" class=\"btn btn-secondary\" @click=\"cancelAddCompany\">Cancel</button>\r\n                </div>\r\n                <div class=\"col-6 text-end\">\r\n                  <button type=\"submit\" class=\"btn btn-primary\">\r\n                    Add Company\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </form>\r\n          </transition>\r\n\r\n        </div>\r\n        <div class=\"modal-footer\"></div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <button\r\n    id=\"openEditModal\"\r\n    class=\"d-none\"\r\n    data-bs-toggle=\"modal\"\r\n    data-bs-target=\"#editModal\"\r\n  ></button>\r\n\r\n  <div\r\n    class=\"modal fade\"\r\n    id=\"editModal\"\r\n    data-bs-backdrop=\"static\"\r\n    data-bs-keyboard=\"false\"\r\n    tabindex=\"-1\"\r\n    aria-labelledby=\"editModal\"\r\n    aria-hidden=\"true\"\r\n  >\r\n    <div class=\"modal-dialog\">\r\n      <div class=\"modal-content\">\r\n        <div class=\"modal-header\">\r\n          <h5 class=\"modal-title\" id=\"addModalLabel\">Edit project details</h5>\r\n          <button\r\n            type=\"button\"\r\n            id=\"closeeditModal\"\r\n            class=\"btn-close\"\r\n            data-bs-dismiss=\"modal\"\r\n            aria-label=\"Close\"\r\n          ></button>\r\n        </div>\r\n        <div class=\"modal-body\">\r\n          \r\n\r\n \r\n          <transition  mode=\"out-in\">\r\n            <form @submit.prevent=\"submitFormEdit\" v-if=\"!showAddCompany\">\r\n            <div class=\"row mb-1\">\r\n              <div class=\"col-md-4 pt-2\">Project title:</div>\r\n\r\n              <div class=\"col-md-8\">\r\n                <div class=\"row\">\r\n                  <div class=\"col-12\">\r\n                    <input\r\n                      type=\"text\"\r\n                      class=\"form-control\"\r\n                      v-model=\"EditProjectTitle\"\r\n                      @keyup=\"KeyDown('EditProjectTitle')\"\r\n                    />\r\n                  </div>\r\n                </div>\r\n                <div class=\"row\">\r\n                  <div class=\"col\">\r\n                    <div\r\n                      class=\"alert alert-danger alert-sm\"\r\n                      v-html=\"alertEditProjectTitle\"\r\n                      v-if=\"alertEditProjectTitle\"\r\n                    />\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <div class=\"row mb-1\">\r\n              <div class=\"col-md-4 pt-2\">DFM number:</div>\r\n\r\n              <div class=\"col-md-8\">\r\n                <div class=\"row\">\r\n                  <div class=\"col-12\">\r\n                    <input\r\n                      type=\"text\"\r\n                      class=\"form-control\"\r\n                      v-model=\"EditProjectNumber\"\r\n                      @keyup=\"KeyDown('EditProjectNumber')\"\r\n                    />\r\n                  </div>\r\n                </div>\r\n                <div class=\"row\">\r\n                  <div class=\"col\">\r\n                    <div\r\n                      class=\"alert alert-danger alert-sm\"\r\n                      v-html=\"alertEditProjectNumber\"\r\n                      v-if=\"alertEditProjectNumber\"\r\n                    />\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <div class=\"row mb-1\">\r\n              <div class=\"col-md-4 pt-2\">Expiry date:</div>\r\n\r\n              <div class=\"col-md-8\">\r\n                <div class=\"row\">\r\n                  <div class=\"col-12\">\r\n                    <span class=\"datepicker-toggle\">\r\n                      <span class=\"datepicker-toggle-button\"></span>\r\n                      <div>\r\n                        <input\r\n                          type=\"text\"\r\n                          v-model=\"EditExpiryDate\"\r\n                          class=\"form-control\"\r\n                        />\r\n                      </div>\r\n                      <div>\r\n                        <input\r\n                          type=\"date\"\r\n                          class=\"datepicker-input\"\r\n                          v-model=\"EditExpiryDate\"\r\n                          @change=\"changindDate()\"\r\n                        />\r\n                      </div>\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n                <div class=\"row\">\r\n                  <div class=\"col\">\r\n                    <div\r\n                      class=\"alert alert-danger alert-sm\"\r\n                      v-html=\"alertEditExpiryDate\"\r\n                      v-if=\"alertEditExpiryDate\"\r\n                    />\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <div class=\"row mb-1\">\r\n              <div class=\"col-md-4 pt-2\">Status:</div>\r\n\r\n              <div class=\"col-md-8\">\r\n                <div class=\"row\">\r\n                  <div class=\"col-12\">\r\n                    <v-select\r\n                      @change=\"selectChangeStatus\"\r\n                      :closeOnSelect=\"true\"\r\n                      :object=\"true\"\r\n                      v-model=\"selectedStatus\"\r\n                      :mode=\"tags\"\r\n                      :create-option=\"false\"\r\n                      :options=\"allStatus\"\r\n                      ref=\"multiselectStatus\"\r\n                    ></v-select>\r\n                  </div>\r\n                </div>\r\n                <div class=\"row\">\r\n                  <div class=\"col\">\r\n                    <div\r\n                      class=\"alert alert-danger alert-sm\"\r\n                      v-html=\"alertStatus\"\r\n                      v-if=\"alertStatus\"\r\n                    />\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <div class=\"row mb-1\">\r\n              <div class=\"col-md-4 pt-2\">Company:</div>\r\n\r\n              <div class=\"col-md-8\">\r\n                <div class=\"row\">\r\n                  <div class=\"col-10\">\r\n                    <v-select\r\n                      @change=\"selectChange\"\r\n                      :closeOnSelect=\"true\"\r\n                      :object=\"true\"\r\n                      v-model=\"NewContractor\"\r\n                      :mode=\"tags\"\r\n                      :create-option=\"false\"\r\n                      :searchable=\"true\"\r\n                      :on-create=\"handleTagCreate\"\r\n                      :options=\"allCompanies\"\r\n                      ref=\"multiselect\"\r\n                    ></v-select>\r\n                  </div>\r\n                <div class=\"col-2\">\r\n                      <div class=\"btn btn-primary\" @click=\"openAddCompanyModal\" title=\"Add new Company\">\r\n                        +\r\n                      </div>\r\n                    </div>\r\n\r\n                </div>\r\n                <div class=\"row\">\r\n                  <div class=\"col\">\r\n                    <div\r\n                      class=\"alert alert-danger alert-sm\"\r\n                      v-html=\"alertNewCompany\"\r\n                      v-if=\"alertNewCompany\"\r\n                    />\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <div class=\"row mb-1\">\r\n              <div class=\"col-md-4 pt-2\">New image:</div>\r\n\r\n              <div class=\"col-md-8\">\r\n                <div class=\"row\">\r\n                  <div class=\"col-12\">\r\n                    <div class=\"input-group\">\r\n                      <input\r\n                        type=\"file\"\r\n                        @change=\"handleFileUploadEdit\"\r\n                        ref=\"file2\"\r\n                        class=\"form-control\"\r\n                        id=\"newProjectImage\"\r\n                      />\r\n                    </div>\r\n                    <small\r\n                      >Recommended size: <strong>360x200px</strong> .JPG or\r\n                      .PNG</small\r\n                    >\r\n                  </div>\r\n                </div>\r\n\r\n                <div class=\"row\">\r\n                  <div class=\"col-md-12\">\r\n                    <img\r\n                      :src=\"imagePlaceholderEdit\"\r\n                      id=\"newImageEdit\"\r\n                      class=\"img-fluid\"\r\n                    />\r\n                  </div>\r\n                </div>\r\n\r\n                <div class=\"row\">\r\n                  <div class=\"col\">\r\n                    <div\r\n                      class=\"alert alert-danger alert-sm\"\r\n                      v-html=\"alertEditProjectImage\"\r\n                      v-if=\"alertEditProjectImage\"\r\n                    />\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <div class=\"mb-3\"></div>\r\n\r\n            <button type=\"submit\" class=\"btn btn-primary\">\r\n              Submit changes\r\n            </button>\r\n          </form>\r\n          </transition>\r\n\r\n          <transition name=\"slide-fade\" mode=\"in-out\" >\r\n            <form @submit.prevent=\"submitFormAddCompany\" v-if=\"showAddCompany\">\r\n              <h5>Add new Company:</h5><hr>\r\n              <div class=\"row mb-1\">\r\n                <div class=\"col-md-4 pt-2\">Company name:</div>\r\n\r\n                <div class=\"col-md-8\">\r\n                  <div class=\"row\">\r\n                    <div class=\"col-12\">\r\n                      <input\r\n                        type=\"text\"\r\n                        class=\"form-control\"\r\n                        v-model=\"NewCompanyName\"\r\n                        @keyup=\"KeyDown('NewCompanyName')\"\r\n                      />\r\n                    </div>\r\n                  </div>\r\n                  <div class=\"row\">\r\n                    <div class=\"col\">\r\n                      <div\r\n                        class=\"alert alert-danger alert-sm\"\r\n                        v-html=\"alertNewCompanyName\"\r\n                        v-if=\"alertNewCompanyName\"\r\n                      />\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              <div class=\"row mb-1\">\r\n                <div class=\"col-md-4 pt-2\">Contact email:</div>\r\n\r\n                <div class=\"col-md-8\">\r\n                  <div class=\"row\">\r\n                    <div class=\"col-12\">\r\n                      <input\r\n                        type=\"text\"\r\n                        class=\"form-control\"\r\n                        v-model=\"NewCompanyEmail\"\r\n                        @keyup=\"KeyDown('NewCompanyEmail')\"\r\n                      />\r\n                    </div>\r\n                  </div>\r\n                  <div class=\"row\">\r\n                    <div class=\"col\">\r\n                      <div\r\n                        class=\"alert alert-danger alert-sm\"\r\n                        v-html=\"alertNewCompanyEmail\"\r\n                        v-if=\"alertNewCompanyEmail\"\r\n                      />\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              <div class=\"row mb-1\">\r\n                <div class=\"col-md-4 pt-2\">Phone number:</div>\r\n\r\n                <div class=\"col-md-8\">\r\n                  <div class=\"row\">\r\n                    <div class=\"col-12\">\r\n                      <input\r\n                        type=\"text\"\r\n                        class=\"form-control\"\r\n                        v-model=\"NewCompanyPhone\"\r\n                        @keyup=\"KeyDown('NewCompanyPhone')\"\r\n                      />\r\n                    </div>\r\n                  </div>\r\n                  <div class=\"row\">\r\n                    <div class=\"col\">\r\n                      <div\r\n                        class=\"alert alert-danger alert-sm\"\r\n                        v-html=\"alertNewCompanyPhone\"\r\n                        v-if=\"alertNewCompanyPhone\"\r\n                      />\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              <div class=\"mb-3\"></div>\r\n\r\n              <div class=\"row\">\r\n                <div class=\"col-6\">\r\n                  <button type=\"submit\" class=\"btn btn-secondary\" @click=\"cancelAddCompany\">Cancel</button>\r\n                </div>\r\n                <div class=\"col-6 text-end\">\r\n                  <button type=\"submit\" class=\"btn btn-primary\">\r\n                    Add Company\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </form>\r\n          </transition>\r\n\r\n\r\n\r\n        </div>\r\n\r\n\r\n        <div class=\"modal-footer\"></div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <button\r\n    id=\"btnOpenMo\"\r\n    data-bs-toggle=\"modal\"\r\n    data-bs-target=\"#projectCreatedModal\"\r\n    class=\"d-none\"\r\n  />\r\n\r\n  <!-- Created Projects Modal -->\r\n  <div\r\n    class=\"modal fade\"\r\n    :class=\"{ show: createdProject }\"\r\n    :style=\"{ display: block }\"\r\n    id=\"projectCreatedModal\"\r\n    data-bs-backdrop=\"static\"\r\n    data-bs-keyboard=\"false\"\r\n    tabindex=\"-1\"\r\n    aria-labelledby=\"projectCreatedModal\"\r\n    aria-hidden=\"true\"\r\n  >\r\n    <div class=\"modal-dialog\">\r\n      <div class=\"modal-content\">\r\n        <div class=\"modal-header\">\r\n          <h5>Info</h5>\r\n          <button\r\n            type=\"button\"\r\n            id=\"closeprojectCreatedModal\"\r\n            class=\"btn-close\"\r\n            data-bs-dismiss=\"modal\"\r\n            aria-label=\"Close\"\r\n          ></button>\r\n        </div>\r\n        <div class=\"modal-body\">\r\n          <p>Project is created</p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <!--Edited Projects Modal -->\r\n\r\n  <button\r\n    id=\"btnOpenMoEdit\"\r\n    data-bs-toggle=\"modal\"\r\n    data-bs-target=\"#projectEditeModal\"\r\n    class=\"d-none\"\r\n  />\r\n  <div\r\n    class=\"modal fade\"\r\n    :class=\"{ show: createdProject }\"\r\n    :style=\"{ display: block }\"\r\n    id=\"projectEditeModal\"\r\n    data-bs-backdrop=\"static\"\r\n    data-bs-keyboard=\"false\"\r\n    tabindex=\"-1\"\r\n    aria-labelledby=\"projectEditeModal\"\r\n    aria-hidden=\"true\"\r\n  >\r\n    <div class=\"modal-dialog\">\r\n      <div class=\"modal-content\">\r\n        <div class=\"modal-header\">\r\n          <h5>Info</h5>\r\n          <button\r\n            type=\"button\"\r\n            id=\"closeProjectEditedModal\"\r\n            class=\"btn-close\"\r\n            data-bs-dismiss=\"modal\"\r\n            aria-label=\"Close\"\r\n          ></button>\r\n        </div>\r\n        <div class=\"modal-body\">\r\n          <p>Project changes saved</p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <div id=\"tmpBase64\" :text=\"tmpBase64\"></div>\r\n</template>\r\n\r\n<script>\r\nimport moment from \"moment\";\r\nimport $ from \"jquery\";\r\nimport axios from \"axios\";\r\n\r\n/*   allCompanies: {\"lsdkfn309784bv\":\"DFM System\",\"hrfgh46h\":\"Computech\"}, ,*/\r\nexport default {\r\n  props: [\"projectKey\", \"projectTitle\", \"projectNumber\", \"emitSearch\"],\r\n  data() {\r\n    return {\r\n      selectedCompanyKey: null,\r\n      selectedCompanyName: null,\r\n\r\n      detailsAreVisible: false,\r\n      detailsAreAppsVisible: false,\r\n      isLoading: false,\r\n      projects: [],\r\n      allCompaniesForDropdown: [], //json from rest api\r\n      allCompanies: [], //dropwon companies list\r\n\r\n      error: null,\r\n\r\n      NewProjectTitle: \"\",\r\n      NewProjectNumber: \"\",\r\n      NewProjectImage: null,\r\n      NewProjectImageBase64: \"\", //just to display new uploaded image\r\n      NewExpiryDate: \"\",\r\n      NewContractor: \"\",\r\n\r\n      EditProjectTitle: \"\",\r\n      EditProjectNumber: \"\",\r\n      EditProjectImage: \"\",\r\n      EditExpiryDate: \"\",\r\n      EditStatus: \"\",\r\n      selectedStatus: \"\",\r\n      alertStatus:\"\",\r\n\r\n      showAddCompany: false,\r\n\r\n      rememberValue:'',\r\n\r\n      allStatus: [\"Open\", \"Closed\"],\r\n\r\n      alertNewProjectTitle: \"\",\r\n      alertNewProjectNumber: \"\",\r\n      alertNewExpiryDate: \"\",\r\n      alertNewProjectImage: \"\",\r\n      alertNewCompany: \"\",\r\n\r\n      alertEditProjectTitle: \"\",\r\n      alertEditProjectNumber: \"\",\r\n      alertEditExpiryDate: \"\",\r\n      alertEditProjectImage: \"\",\r\n\r\n      NewCompanyName: \"\",\r\n      NewCompanyEmail: \"\",\r\n      NewCompanyPhone: \"\",\r\n\r\n      AlertNewCompanyName: \"\",\r\n      AlertNewCompanyEmail: \"\",\r\n      AlertNewCompanyPhone: \"\",\r\n\r\n      imagePlaceholder:\r\n        \"https://via.placeholder.com/360x200.png?text=Project%20Image\",\r\n      imagePlaceholderEdit: \"\",\r\n      tmpBase64: \"\",\r\n\r\n      formError: false,\r\n      createdProject: false,\r\n      block: \"\",\r\n      file: \"\",\r\n      defaultCard: this._rootDefaultProjectCard,\r\n    };\r\n  },\r\n  methods: {\r\n    createDropdownForCompaies() {\r\n      //from received json create one that component can use\r\n      /* should look like this example:\r\n      \r\n      allCompanies: [\r\n        { value: \"asd23jhbrkjb\", label: \"DFM Systems\" },\r\n        { value: \"sdfssfgh45hd\", label: \"Computech\" },\r\n      ]*/\r\n      //allCompaniesForDropdown: [], //json from rest api\r\n      //allCompanies: [], //dropwon companies list\r\n      this.allCompanies = [];\r\n      this.allCompaniesForDropdown.forEach((key, value) => {\r\n        this.allCompanies.push({\r\n          value: this.allCompaniesForDropdown[value][\"key\"],\r\n          label: this.allCompaniesForDropdown[value][\"name\"],\r\n        });\r\n      });\r\n    },\r\n\r\n    async getCompanies() {\r\n      if (this.allCompanies.length === 0) {\r\n        if (this.$store.getters.isAuthenticated) {\r\n          // var allOk = false;\r\n          // var ErrorCode = \"\";\r\n\r\n          let config = {\r\n            headers: {\r\n              \"Content-Type\": \"application/json\",\r\n            },\r\n          };\r\n\r\n          const token = localStorage.getItem(\"token\");\r\n          const baseUrl = localStorage.getItem(\"_rootRestUrl\");\r\n\r\n          let formData = JSON.stringify({ token: token });\r\n\r\n          await axios\r\n            .post(\r\n              baseUrl + \"/Company/GetCompaniesForDropdown\",\r\n              formData,\r\n              config\r\n            )\r\n            .then((response) => {\r\n            //  console.log(response);\r\n              //  allOk = true;\r\n              this.allCompaniesForDropdown = response.data;\r\n              //   ErrorCode = 200;\r\n              this.createDropdownForCompaies();\r\n            });\r\n        } else {\r\n          this.gotoHomePage();\r\n        }\r\n      }\r\n    },\r\n\r\n    /// GET project list\r\n    async getProjectList() {\r\n      this.isLoading = true;\r\n\r\n      if (this.$store.getters.isAuthenticated) {\r\n        const token = localStorage.getItem(\"token\"); //User token !!\r\n\r\n        var allOk = false;\r\n        var ErrorCode = \"\";\r\n\r\n        let config = {\r\n          headers: {\r\n            \"Content-Type\": \"application/json\",\r\n          },\r\n        };\r\n\r\n        let formData = JSON.stringify({ token: token });\r\n\r\n        const baseUrl = localStorage.getItem(\"_rootRestUrl\");\r\n\r\n        await axios\r\n          .post(baseUrl + \"/Project/GetProjects\", formData, config)\r\n          .then((response) => {\r\n           // console.log(response);\r\n            allOk = true;\r\n            this.projects = response.data;\r\n            ErrorCode = 200;\r\n          })\r\n\r\n          .catch(function (error) {\r\n            console.table(error.response);\r\n            alert(\r\n              \"ERROR \" + error.response.status + \": \" + error.response.data\r\n            );\r\n            ErrorCode = error.response.status;\r\n          });\r\n\r\n        if (allOk) {\r\n          /// add SERVER/IMAGES to image name in json:\r\n          for (const key in this.projects) {\r\n            this.projects[key][\"imageName\"] =\r\n              this._rootRestUrl + \"/images/\" + this.projects[key][\"imageName\"];\r\n             \r\n          }\r\n\r\n          this.isLoading = false;\r\n\r\n          this._allProjectsList = this.projects;\r\n        }\r\n\r\n        this.isLoading = false;\r\n\r\n        if (ErrorCode == 400) {\r\n          this.gotoHomePage(); //token expired\r\n        }\r\n      } else {\r\n        this.gotoHomePage();\r\n      }\r\n    },\r\n    gotoHomePage() {\r\n      this.isLoading = false;\r\n      this.$store.dispatch(\"logout\");\r\n      this.$router.push(\"/\");\r\n    },\r\n\r\n    ////\r\n    handleFileUpload(event) {\r\n      this.selectedFile = event.target.files[0];\r\n      this.file = this.selectedFile;\r\n\r\n      this.convertToBase64();\r\n    },\r\n\r\n    handleFileUploadEdit(event) {\r\n      this.selectedFile = event.target.files[0];\r\n      this.file = this.selectedFile;\r\n\r\n      this.convertToBase64Edit();\r\n    },\r\n\r\n    convertToBase64() {\r\n      const selectedFile = this.file;\r\n\r\n      //   if (selectedFile.length > 0) {\r\n\r\n      var fileToLoad = selectedFile;\r\n\r\n      var fileReader = new FileReader();\r\n      var base64;\r\n\r\n      fileReader.onload = function (fileLoadedEvent) {\r\n        base64 = fileLoadedEvent.target.result;\r\n\r\n        base64 = base64.split(\",\"); // remove type from base64\r\n\r\n        this.tmpBase64 = base64;\r\n        $(\"#newImage\").attr(\"src\", base64);\r\n      };\r\n\r\n      fileReader.readAsDataURL(fileToLoad);\r\n      //        }\r\n\r\n      //   this.EditProjectImageBase64 = localStorage.removeItem(\"tmpBase64\");\r\n    },\r\n\r\n    convertToBase64Edit() {\r\n      const selectedFile = this.file;\r\n\r\n      //   if (selectedFile.length > 0) {\r\n\r\n      var fileToLoad = selectedFile;\r\n\r\n      var fileReader = new FileReader();\r\n      var base64;\r\n\r\n      fileReader.onload = function (fileLoadedEvent) {\r\n        base64 = fileLoadedEvent.target.result;\r\n\r\n        base64 = base64.split(\",\"); // remove type from base64\r\n\r\n        this.tmpBase64 = base64;\r\n        $(\"#newImageEdit\").attr(\"src\", base64);\r\n      };\r\n\r\n      fileReader.readAsDataURL(fileToLoad);\r\n      //        }\r\n\r\n      //   this.EditProjectImageBase64 = localStorage.removeItem(\"tmpBase64\");\r\n    },\r\n    selectChange(option) {\r\n      try {\r\n        this.selectedCompanyKey = option.value;\r\n        this.selectedCompanyName = option.label;\r\n      } catch (e) {\r\n        console.log(\"no company\");\r\n      }\r\n    },\r\n\r\n    selectChangeStatus(option) {\r\n      this.selectedStatus = option.value;\r\n    },\r\n\r\n    handleTagCreate(option) {\r\n      const randomNumber = Math.floor(Math.random() * 1000000);\r\n      option.value = \"NEW--\" + randomNumber;\r\n      this.allCompanies.push({\r\n        value: \"NEW--\" + randomNumber,\r\n        label: option.label,\r\n      });\r\n      return option;\r\n    },\r\n\r\n    projectSearch(what) {\r\n      //TODO: functon for searching Projects\r\n      if (what.length > 2) {\r\n        for (let element of document.getElementsByClassName(\"cardsDisplay\")) {\r\n          element.classList.remove(\"show\");\r\n          element.style.display = \"none\";\r\n        }\r\n\r\n        this.projects.forEach((value) => {\r\n          const dfmOnlinNumber = value[\"projectNumber\"]\r\n            .toString()\r\n            .toUpperCase();\r\n          const dfmTitle = value[\"projectName\"].toString().toUpperCase();\r\n          const dfmCompany = value[\"company\"].toString().toUpperCase();\r\n\r\n          what = what.toUpperCase();\r\n\r\n          if (\r\n            dfmOnlinNumber.includes(what) ||\r\n            dfmTitle.includes(what) ||\r\n            dfmCompany.includes(what)\r\n          ) {\r\n            //document.getElementById(\"ProjectCard-\" + value[\"key\"]).className += \" show\";\r\n            document.getElementById(\r\n              \"ProjectCard-\" + value[\"key\"]\r\n            ).style.display = \"block\";\r\n          } else {\r\n            document.getElementById(\r\n              \"ProjectCard-\" + value[\"key\"]\r\n            ).style.display = \"none\";\r\n          }\r\n        });\r\n      } else {\r\n        for (let element of document.getElementsByClassName(\"cardsDisplay\")) {\r\n          //element.classList.add(\"show\");\r\n          element.style.display = \"block\";\r\n        }\r\n      }\r\n    },\r\n\r\n    toggleDetails() {\r\n      this.detailsAreVisible = !this.detailsAreVisible;\r\n    },\r\n\r\n    toggleDetailsApp() {\r\n      this.detailsAreAppsVisible = !this.detailsAreAppsVisible;\r\n    },\r\n\r\n    hideOpenApps() {\r\n      this.detailsAreAppsVisible = false;\r\n    },\r\n\r\n    format_date(value, pattern) {\r\n      if (value) {\r\n        return moment(String(value)).format(pattern);\r\n      }\r\n    },\r\n    format_date_reverse(value) {\r\n      //excpected input: \t24/09/2022\r\n      try {\r\n        const day = value.substring(0, 2);\r\n        const month = value.substring(3, 5);\r\n        const year = value.substring(6, 10);\r\n\r\n        return year + \"-\" + month + \"-\" + day;\r\n      } catch (e) {\r\n        return \"undefined\";\r\n      }\r\n    },\r\n\r\n    format_date_edit(value) {\r\n      //excpected input: \t2022-12-16\r\n      try {\r\n        const year = value.substring(0, 4);\r\n        const month = value.substring(5, 7);\r\n        const day = value.substring(8, 10);\r\n\r\n        return day + \"/\" + month + \"/\" + year;\r\n      } catch (e) {\r\n        return \"undefined\";\r\n      }\r\n    },\r\n\r\n    todayDate() {\r\n      var today = moment().format(\"YYYY-MM-DD 00:00:00\");\r\n\r\n      return today;\r\n    },\r\n\r\n    changindDate() {\r\n     \r\n      this.EditExpiryDate = this.format_date_edit(this.EditExpiryDate);\r\n      this.NewExpiryDate = this.format_date_edit(this.NewExpiryDate)\r\n      this.alertNewExpiryDate = \"\";\r\n      this.alertEditExpiryDate = \"\";\r\n    },\r\n    beforeOpenaddModal() {\r\n      this.showAddCompany = false;\r\n      this.getCompanies();\r\n\r\n      //clear all inpute fields\r\n      this.$refs.file = \"\";\r\n      $(\"#newImage\").attr(\r\n        \"src\",\r\n        \"https://via.placeholder.com/360x200.png?text=Project%20Image\"\r\n      );\r\n      this.NewExpiryDate = \"\";\r\n      this.NewProjectTitle = \"\";\r\n      this.NewProjectNumber = \"\";\r\n    },\r\n\r\n    activateLoader() {},\r\n\r\n    async submitForm() {\r\n      this.formError = false;\r\n\r\n      if (this.NewProjectTitle == \"\") {\r\n        this.alertNewProjectTitle = \"Please enter Project title\";\r\n        this.formError = true;\r\n      }\r\n\r\n      if (this.NewProjectNumber == \"\") {\r\n        this.alertNewProjectNumber = \"Please enter DFM Number\";\r\n        this.formError = true;\r\n      }\r\n\r\n      if (this.NewExpiryDate == \"\") {\r\n        this.alertNewExpiryDate = \"Please select expiry date\";\r\n        this.formError = true;\r\n      }\r\n\r\n      if (this.formError == false) {\r\n        //create project ! for now just push in array\r\n\r\n        this.isLoading = true;\r\n\r\n        var allOk = false;\r\n        var ErrorCode = \"\";\r\n\r\n        const baseUrl = localStorage.getItem(\"_rootRestUrl\");\r\n        const token = localStorage.getItem(\"token\"); //User token !!\r\n\r\n        const formData = new FormData();\r\n\r\n        formData.append(\"Token\", token);\r\n        formData.append(\"ProjectNumber\", this.NewProjectNumber);\r\n        formData.append(\"ProjectName\", this.NewProjectTitle);\r\n        formData.append(\"ContractorKey\", this.selectedCompanyKey);\r\n\r\n        formData.append(\r\n          \"ActiveUntil\",\r\n          this.format_date_reverse(this.NewExpiryDate) + \" 00:00:00\"\r\n        );\r\n\r\n        if (this.selectedFile) {\r\n          formData.append(\"image\", this.selectedFile, this.selectedFile.name);\r\n        }\r\n\r\n        let config = {\r\n          headers: {\r\n            \"Content-Type\": \"multipart/form-data\",\r\n          },\r\n        };\r\n\r\n        await axios\r\n          .post(baseUrl + \"/Project/CreateProject\", formData, config)\r\n          .then((response) => {\r\n            console.log(response);\r\n            allOk = true;\r\n            ErrorCode = 200;\r\n          })\r\n\r\n          .catch(function (error) {\r\n            console.table(error.response);\r\n            ErrorCode = error.response.status;\r\n            allOk = false;\r\n            alert(\"ERROR \" + ErrorCode + \": \" + error.response.data);\r\n          });\r\n\r\n       \r\n        if (allOk == true) {\r\n          this.closeModal(\"closeaddModal\"); //close login modal after submit;\r\n          $(\"#btnOpenMo\").click();\r\n          this.getProjectList();\r\n          this.isLoading = false;\r\n        }\r\n        this.isLoading = false;\r\n        this.closeModal(\"closeaddModal\"); //close add modal after submit;\r\n      }\r\n    },\r\n\r\n    async submitFormEdit() {\r\n      this.formErrorEdit = false;\r\n\r\n      if (this.EditProjectTitle == \"\") {\r\n        this.alertEditProjectTitle = \"Please enter Project title\";\r\n        this.formErrorEdit = true;\r\n      }\r\n\r\n      if (this.EditProjectNumber == \"\") {\r\n        this.alertEditProjectNumber = \"Please enter DFM Number\";\r\n        this.formErrorEdit = true;\r\n      }\r\n\r\n      if (this.EditExpiryDate == \"\") {\r\n        this.alertEditExpiryDate = \"Please select expiry date\";\r\n        this.formErrorEdit = true;\r\n      }\r\n\r\n      if (this.EditExpiryDate == \"\") {\r\n        this.alertEditExpiryDate = \"Please select expiry date\";\r\n        this.formErrorEdit = true;\r\n      }\r\n    \r\n      if (this.selectedStatus == \"\") {\r\n        this.alertStatus = \"Please select status\";\r\n        this.formErrorEdit = true;\r\n      }\r\n\r\n      if (this.formErrorEdit == false) {\r\n        //create project ! for now just push in array\r\n\r\n        this.isLoading = true;\r\n\r\n       \r\n        var allOk = false;\r\n        var ErrorCode = \"\";\r\n\r\n        const baseUrl = localStorage.getItem(\"_rootRestUrl\");\r\n        const token = localStorage.getItem(\"token\"); //User token !!\r\n\r\n        const formData = new FormData();\r\n\r\n        formData.append(\"Token\", token);\r\n        formData.append(\"ProjectKey\", this.EditProjectKey);\r\n        formData.append(\"ProjectNumber\", this.EditProjectNumber);\r\n        formData.append(\"ProjectName\", this.EditProjectTitle);\r\n        formData.append(\"ContractorKey\", this.selectedCompanyKey);\r\n        formData.append(\"ProjectStatus\", this.selectedStatus.value);\r\n       \r\n        formData.append(\r\n          \"ActiveUntil\",\r\n          this.format_date_reverse(this.EditExpiryDate) + \" 00:00:00\"\r\n        );\r\n\r\n        if (this.selectedFile) {\r\n          formData.append(\"image\", this.selectedFile, this.selectedFile.name);\r\n        }\r\n\r\n        let config = {\r\n          headers: {\r\n            \"Content-Type\": \"multipart/form-data\",\r\n          },\r\n        };\r\n\r\n        await axios\r\n          .post(baseUrl + \"/Project/EditProject\", formData, config)\r\n          .then((response) => {\r\n            console.log(response);\r\n            allOk = true;\r\n            ErrorCode = 200;\r\n          \r\n          }).catch(function (error) {\r\n            console.table(error.response);\r\n            allOk = false;\r\n            alert(\"ERROR \" + ErrorCode + \": \" + error.response.data);\r\n          });\r\n\r\n        if (allOk == true) {\r\n          this.closeModal(\"editModal\"); //close login modal after submit;\r\n          $(\"#btnOpenMoEdit\").click();\r\n          this.getProjectList();\r\n          this.isLoading = false;\r\n        }\r\n          \r\n\r\n        this.isLoading = false;\r\n        this.closeModal(\"editModal\"); //close login modal after submit;\r\n       \r\n      }\r\n    },\r\n\r\n    async editProject(projectKey) {\r\n      this.showAddCompany = false;\r\n     // if (this.allCompanies.length === 0) {\r\n        await this.getCompanies();\r\n    //  }\r\n\r\n      const thisProject = this.projects.find(\r\n        (project) => project.key === projectKey\r\n      );\r\n\r\n      this.EditProjectTitle = thisProject.projectName;\r\n      this.EditProjectNumber = thisProject.projectNumber;\r\n      this.EditExpiryDate = this.format_date(\r\n        thisProject.activeUntil,\r\n        \"DD/MM/YYYY\"\r\n      );\r\n      this.EditProjectKey = thisProject.key;\r\n      this.EditStatus = thisProject.key;\r\n      this.imagePlaceholderEdit = thisProject.imageName;\r\n\r\n      this.$refs.multiselect.select(thisProject.companyKey);\r\n      this.$refs.multiselectStatus.select(thisProject.status);\r\n     \r\n\r\n      $(\"#openEditModal\").click();\r\n    },\r\n\r\n    openAddCompanyModal() {\r\n      this.showAddCompany = !this.showAddCompany;\r\n      this.rememberValue = '';\r\n    },\r\n\r\n    cancelAddCompany(){\r\n     this.showAddCompany = !this.showAddCompany;\r\n     this.rememberValue = '';\r\n\r\n    },\r\n\r\n    submitFormAddCompany(){\r\n     // alert(\"submit new company\");\r\n      this.allCompanies.push({\"value\":\"asasasd\",\"label\":\"One new\",\"token\":null});\r\n      this.showAddCompany = false;\r\n     \r\n      \r\n\r\n    },\r\n    KeyDown(field) {\r\n      if (field === \"NewProjectTitle\") {\r\n        this.alertNewProjectTitle = \"\";\r\n      } else if (field === \"NewProjectNumber\") {\r\n        this.alertNewProjectNumber = \"\";\r\n      }\r\n    },\r\n    closeModal(id) {\r\n      $(\"#\" + id).click();\r\n    },\r\n\r\n    selectedProject(projectKey, appType) {\r\n      //store selected project details in localstorage:\r\n      localStorage.setItem(\"projectKey\", projectKey);\r\n      localStorage.setItem(\"appType\", appType);\r\n\r\n      const thisProject = this.projects.find(\r\n        (project) => project.key === projectKey\r\n      );\r\n\r\n      localStorage.setItem(\"selectedProjectTitle\", thisProject.projectName);\r\n      localStorage.setItem(\"selectedProjectNumber\", thisProject.projectNumber);\r\n      localStorage.setItem(\"selectedProjectContractor\", thisProject.contractor);\r\n      localStorage.setItem(\r\n        \"selectedProjectValidUntil\",\r\n        thisProject.activeUntil\r\n      );\r\n      localStorage.setItem(\"selectedProjectPublishDate\", thisProject.created);\r\n\r\n      if (thisProject.imageName == \"\" || thisProject.imageName == null) {\r\n        localStorage.setItem(\"selectedProjectImage\", this.defaultCard);\r\n      } else {\r\n        localStorage.setItem(\"selectedProjectImage\", thisProject.imageName);\r\n      }\r\n\r\n      localStorage.setItem(\"selectedProjectType\", appType);\r\n    },\r\n  },\r\n\r\n  emits: {\r\n    showSearchbar: false,\r\n    appType: \"\",\r\n  },\r\n\r\n  created() {\r\n    localStorage.removeItem(\"appType\");\r\n    localStorage.removeItem(\"selectedProjectType\");\r\n    localStorage.removeItem(\"selectedProjectTitle\");\r\n    localStorage.removeItem(\"selectedProjectNumber\");\r\n    localStorage.removeItem(\"selectedProjectContractor\");\r\n    localStorage.removeItem(\"selectedProjectValidUntil\"),\r\n      localStorage.removeItem(\"selectedProjectPublishDate\"),\r\n      localStorage.removeItem(\"selectedProjectImage\");\r\n    localStorage.removeItem(\"selectedProjectType\");\r\n\r\n    this.$emit(\"appType\", \"\");\r\n  },\r\n\r\n  mounted() {\r\n    this.getProjectList();\r\n    this.$emit(\"showSearchbar\", true);\r\n    localStorage.setItem(\"selectedProjectType\", \"\");\r\n  },\r\n  provide() {\r\n    return {\r\n      projects: this.projects,\r\n    };\r\n  },\r\n};\r\n</script>\r\n\r\n\r\n\r\n\r\n<style>\r\n@import \"@vueform/multiselect/themes/default.css\";\r\n\r\n.appSelector {\r\n  font-size: 1rem;\r\n\r\n  position: relative;\r\n  top: -154px !important;\r\n  left: 0px !important; /*   width:calc(100% - 20px);\r\n   height:calc(100% - 20px);*/\r\n  width: 100%;\r\n  height: 100%;\r\n\r\n  background: rgb(0, 0, 0, 0.5);\r\n  box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);\r\n  backdrop-filter: blur(2px);\r\n  -webkit-backdrop-filter: blur(2px);\r\n}\r\n.appSelector a {\r\n  color: white !important;\r\n}\r\n.appSelector a:hover {\r\n  background: #c2c2c2;\r\n  color: black !important;\r\n}\r\n.appSelector i {\r\n  width: 20px;\r\n}\r\n\r\n.card-background-image {\r\n  background-repeat: no-repeat;\r\n  background-size: cover;\r\n  background-position: center;\r\n  height: 175px;\r\n  min-height: 200px;\r\n}\r\n\r\n.project-card-body {\r\n  padding: 3px;\r\n}\r\n.project-card {\r\n  /* border-radius: 0 !important;*/\r\n  margin-bottom: 10px;\r\n  border-radius: 0.5rem;\r\npadding: 0.06rem;;box-shadow:4px 4px  12px #ddd\r\n}\r\n.project-card-header {\r\n  padding: 0.25rem !important;\r\n  background: white;\r\n  height: 72px;\r\n}\r\n.projectCardsProjectNo {\r\n  font-size: 0.8rem;\r\n  font-weight: bolder;\r\n}\r\n.projectCardsProjectTitle {\r\n  font-size: 1rem;\r\n  font-weight: 300;\r\n  color: #222;\r\n}\r\n.projectDetailsBlock {\r\n  font-size: 0.8rem;\r\n  padding: 5px  !important;\r\n /* background-color: rgb(66, 66, 66, 0)  !important;*/\r\n  height: 100%;\r\n  color: white !important;\r\n  text-decoration:none  !important;\r\n  opacity: 0;\r\n  cursor: pointer;\r\n\r\n}\r\n.projectDetailsBlock:hover {\r\n  background-color: rgb(66, 66, 66, 0.5 )  !important;\r\n  -webkit-transition: background-color 200ms linear;\r\n  -ms-transition: background-color 200ms linear;\r\n  transition: background-color 200ms linear;\r\n  text-decoration:none  !important;\r\n  opacity: 1;\r\n  -webkit-transition: opacity 200ms linear;\r\n  -ms-transition: opacity 200ms linear;\r\n  transition: opacity 200ms linear;\r\n}\r\n\r\n@media (min-width: 1200px) {\r\n  .col-xl2-2 {\r\n    -ms-flex: 0 0 25%;\r\n    flex: 0 0 25%;\r\n    max-width: 25%;\r\n  }\r\n}\r\n\r\n@media (min-width: 1500px) {\r\n  .col-xl3-2 {\r\n    -ms-flex: 0 0 20%;\r\n    flex: 0 0 20%;\r\n    max-width: 20%;\r\n  }\r\n} /*\r\n\r\n@media (min-width: 1800px){\r\n  .col-xl3-2 {\r\n    -ms-flex: 0 0 14.28571428571429% ;\r\n    flex: 0 0 14.28571428571429%;\r\n    max-width: 14.28571428571429%;\r\n  }\r\n}*/\r\n\r\n.right-corder-container {\r\n  position: fixed;\r\n  right: 20px;\r\n  bottom: 20px;\r\n}\r\n\r\n.right-corder-container .right-corder-container-button {\r\n  height: 51px;\r\n  width: 51px;\r\n  border: none;\r\n  background-color: #730e27;\r\n  border-radius: 62px; /*Transform the square into rectangle, sync that value with the width/height*/\r\n  transition: all 300ms; /*Animation to close the button (circle)*/\r\n  box-shadow: 2px 4px 5px rgb(25, 73, 15, 0.5);\r\n  cursor: pointer;\r\n}\r\n.right-corder-container .right-corder-container-button span {\r\n  font-size: 40px;\r\n  color: white;\r\n  position: absolute;\r\n  left: 13px;\r\n  top: 9px;\r\n  line-height: 28px;\r\n}\r\nbody {\r\n  padding-bottom: 60px;\r\n}\r\n\r\n.datepicker-toggle {\r\n  display: inline-block;\r\n  position: relative;\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n.datepicker-toggle-button {\r\n  position: absolute;\r\n  /* border:1px solid black;*/\r\n  left: 0;\r\n  top: 0;\r\n  width: 100%;\r\n  height: 100%;\r\n  /* background-image: url('data:image/svg+xml;base64,...');*/\r\n}\r\na {text-decoration: none !important;}\r\n.whiteText{color:white !important;text-decoration: none !important;}\r\n.datepicker-input {\r\n  position: absolute;\r\n  left: 0;\r\n  top: 0;\r\n  width: 100%;\r\n  height: 100%;\r\n  opacity: 0;\r\n  cursor: pointer;\r\n  box-sizing: border-box;\r\n}\r\n.datepicker-input::-webkit-calendar-picker-indicator {\r\n  position: absolute;\r\n  left: 0;\r\n  top: 0;\r\n  width: 100%;\r\n  height: 100%;\r\n  margin: 0;\r\n  padding: 0;\r\n  cursor: pointer;\r\n}\r\n.openButton {\r\n  color: white !important;\r\n}\r\n.editProjectIcon {\r\n  cursor: pointer;\r\n}\r\n\r\n.visibleOnlyOnXS {\r\n  display: none;\r\n}\r\n@media only screen and (max-width: 728px) {\r\n  .visibleOnlyOnXS {\r\n    display: block;\r\n  }\r\n}\r\n\r\n.slide-fade-enter-active {\r\n  transition: all 0.3s ease-out;\r\n}\r\n\r\n.slide-fade-leave-active {\r\n transform: translateY(-56px);\r\n \r\n\r\nopacity: 1;\r\n}\r\n\r\n.slide-fade-enter-from,\r\n.slide-fade-leave-to {\r\n  transform: translateX(56px);\r\n  opacity: 0;\r\n}\r\n\r\n.statusColorBar{position:relative;height:3px;background-color:red;top:1px}\r\n\r\n</style>\r\n\r\n\r\n"]},"metadata":{},"sourceType":"module"}